webpackJsonp(["main"],{"./actions.js":function(e,t,i){function n(){l>=c&&(o(),l=0)}function o(){var e=(new Date).getTime(),t=[];for(var i in d){var n=d[i];e-n.startTime>u&&(t.push(n),delete d[i])}}function s(e){e.mustReport&&(delete e.mustReport,r.log("action_data",{data:e}))}var a=i("./shared/util.js"),r=i("./shared/log_sender.js"),d={},l=0,c=100,u=6e5;t.startAction=function(e){if(null===e||void 0===e)throw new Error("This method expects an object describing the action.");return e.startTime=(new Date).getTime(),e.id=(1e3*e.startTime+Math.floor(1e3*Math.random())).toString(36),d[e.id]=e,l++,n(),e},t.startOrUpdateAction=function(e,i){return e&&d[e]?t.updateAction(e,i):t.startAction(i)},t.getAction=function(e){return d[e]},t.updateAction=function(e,t){if(t===undefined)throw new Error("This method expects an object describing the update.");var i=d[e];return i===undefined?null:a.extend(i,t)},t.finishAction=function(e,t){var i=d[e];return i===undefined?null:(t&&a.extend(i,t),i.endTime=(new Date).getTime(),delete d[e],s(i),i)}},"./app/view/activation/facebook.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/onload.js"),s=i("./shared/facebook.js");t.FacebookPageLikeButton=n.extend({onLoad:function(){var e=this;o.execAfterLoadDelayed(function(){s.onInit(function(){window.FB.XFBML.parse(e.$id("@button").get(0)),window.FB.Event.subscribe("edge.create",function(){e.serverCall("page_liked").liveMutate().send()}),window.FB.Event.subscribe("edge.remove",function(){e.serverCall("page_unliked").liveMutate().send()})})})}}),t.FacebookConnect=n.extend({onLoad:function(){var e=this;this.$id("@dismiss").click(function(){return e.serverCall("dismiss_facebook_connect").liveMutate().success(function(){e.$id("@facebook_connect").fadeOut(300)}).send(),!1})}})},"./app/view/activation/progress.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.ProgressBar=n.extend({onLoad:function(){var e=this;0===e.getMaxWidth()?setTimeout(function(){e.initialize()},1):e.initialize()},getMaxWidth:function(){return this.$id("@progress_bar_wrapper").width()},initialize:function(){this.$id("@progress_bar").css({width:this.getWidth()})},getWidth:function(){var e=this.getMaxWidth(),t=this.curr/this.total*e;return Math.min(e,t)},update:function(e){this.curr=e,this.$id("@progress_bar").animate({width:this.getWidth()})}})},"./app/view/activation/twitter.js":function(e,t,i){var n=i("./app/view/share/connect.js").SocialConnector,o=i("./shared/core/component.js").Component;t.TwitterConnect=o.extend({onLoad:function(){var e=this;this.$id("@twitter_disconnect_button").click(function(){return e.serverCall("twitter_disconnect").liveMutate().send(),!1}),this.$id("@dismiss").click(function(){return e.serverCall("dismiss_twitter_connect").liveMutate().success(function(){e.$id("@twitter_connect").fadeOut(300)}).send(),!1})}}),t.TwitterConnectButton=n.extend({onLoad:function(){var e=this;this.$id("@twitter_connect_button").click(function(){e.serverCall("on_connect_button_press").send(),e.connectTwitter()})}})},"./app/view/admin.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./tooltip.js"),s=i("./unified_view/modal.js").ModalBase,a=i("./view/modal.js").Base,r=i("./view/dialog.js"),d=i("./w2.dialog.js"),l=i("./shared/keystrokes.js"),c=i("./settings.js").interface_strings;t.AdminLogItemView=n.extend({onLoad:function(){var e=this;this.$id("@view").click(function(t){e.$id("@details").toggleClass("hidden"),t.preventDefault()}),this.$id("@item").hover(function(){e.$id("@item").addClass("hover"),e.$id("@buttons").removeClass("hidden")},function(){e.$id("@item").removeClass("hover"),e.$id("@buttons").addClass("hidden")}),o.attach(this.$id("@remove"),this.hide_title),this.$id("@remove").click(function(t){d.createDialog(e).title(e.hide_title).cancel(null,c.cancel).ok(function(){e.serverCall("hide_log_item").send()},e.hide_title).html(e.hide_message),t.preventDefault()})}}),t.AdminMode=n.extend({toggle:function(){this.serverCall("toggle").liveMutate().send()},onLoad:function(){function e(e){t.toggle(),e.preventDefault()}var t=this;t.$id("@toggle").click(e),t.listen&&l.on([81,49,81,49],e)}}),t.AdminModeListener=n.extend({toggle:function(){this.serverCall("toggle").liveMutate().send()},onLoad:function(e){function t(e){i.toggle(),e.preventDefault()}var i=this;l.on([81,49,81,49],t)}}),t.RemoveInboxMessagesLink=n.extend({onLoad:function(){var e=this;this.$id("@delete").click(function(t){t.preventDefault(),e.createModal("remove_inbox_messages_modal").onSubmit(function(){e.serverCall("delete_messages").liveMutate().send()}).show()})}}),t.AdminRemoveUserPhoto=n.extend({onLoad:function(e){var t=this;this.$id("@remove_photo_link").click(function(e){e.preventDefault(),t.createModal("remove_user_photo_modal").kwargs({uid:t.uid}).show()})}}),t.FlagNameLink=n.extend({onLoad:function(){var e=this;this.$id("@show_flag_name_modal").click(function(t){t.preventDefault(),e.createModal("flag_modal").kwargs({uid:e.uid,resolved:e.resolved}).show()})}}),t.ResolveNameLink=n.extend({onLoad:function(){var e=this;this.$id("@show_resolve_name_modal").click(function(t){t.preventDefault(),e.createModal("verify_modal").kwargs({uid:e.uid}).show()})}}),t.RemoveUserPhotoModal=s.extend({onSubmit:function(){var e=this._super.bind(this);this.serverCall("remove_photo").kwargs({comment:this.$id("@comment").val()}).liveMutate().success(function(){e()}).send()}}),t.ResolveNameModal=s.extend({onSubmit:function(){var e=this._super.bind(this);this.serverCall("resolve_name").kwargs({reason:this.$id("@reason").val()}).liveMutate().success(function(){e()}).send()}}),t.FlagNameModal=s.extend({onSubmit:function(){var e=this._super.bind(this);this.serverCall("flag_name").kwargs({reason:this.$id("@reason").val()}).liveMutate().success(function(){e()}).send()}}),t.BanRemoveLink=n.extend({onLoad:function(){var e=this;e.$id("@ban_remove_link").click(function(t){t.preventDefault(),e.serverCall("ad_admin_uids").kwargs({uids:e.uids_to_ban_remove}).success(function(t){if(0==t.length)e.createModal("ban_remove_modal").kwargs({location:e.location,uids_to_ban_remove:e.uids_to_ban_remove,use_safe_ban:e.use_safe_ban}).show();else{var i="Some of these users (uids: "+t+") are admins on ";i+="Quora ad accounts. If these users ",i+="should be banned, please first edit block the users, and email ",i+="ad-admin-bans@quora.com with a link to the users' profile pages ",i+="and whois pages to discuss next steps for the ban.",d.createDialog(e).title("Banning an ad admin").cancel(function(){e.createModal("ban_remove_modal").kwargs({location:e.location,uids_to_ban_remove:e.uids_to_ban_remove,use_safe_ban:e.use_safe_ban,force_ban_ad_admin:!0}).show()},"Ban anyway").ok(null).html(i)}}).send()})}}),t.BanRemoveModal=a.extend({onLoad:function(){this._super.apply(this,arguments),this.child("editor").focus()},onSubmit:function(){var e=this,t=e.child("editor");if(t.isOnlyWhiteSpace())return e.$id("@required_comment_warning").removeClass("hidden"),void t.focus();var i=t.serialize(),n=this.$id("@revert_edits").is(":checked"),o=this.$id("@mark_as_verified_spammer").is(":checked"),s=this.$id("@remove_votes").is(":checked"),a=function(t){return e.$id("@"+t).prop("checked")};return e.serverCall("ban_remove_all_users").kwargs({comment:i,revert_edits:n,mark_as_verified_spammer:o,remove_votes:s,uids_to_ban_remove:e.uids_to_ban_remove.filter(a)}).liveMutate().success(function(){e._closeModal()}).send(),!1}}),t.SendMessageLinkBase=n.extend({onLoad:function(){var e=this;this.$id("@modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({recipient_uid:e.recipient_uid}).show()})}}),t.SendMessageModalBase=s.extend({onSubmit:function(){var e=this._super.bind(this),t=this.child("editor").serialize();this.serverCall("submit").kwargs({msg:t}).liveMutate().success(function(){e()}).send()}}),t.BanUserDialog=r.AddCommentDialog.extend({getPars:function(){var e=this._super.apply(this,arguments);return e&&(e.removeMessages=this.$id("@checkbox").prop("checked")),e}}),t.AdminMessageDialog=r.Dialog.extend({onLoad:function(){this._super.apply(this,arguments),this.editor=this.child("editor"),this.editor.focus()},getPars:function(){return!this.editor.isOnlyWhiteSpace()&&{msg:this.editor.serialize()}}}),t.BanUserLink=r.DialogLink.extend({click:function(){var e=this;e.serverCall("attempt_ban_user").except("ad_admin_blocked",function(){var t="This user is an admin on a Quora ad account. If the user ";t+="should be banned, please first edit block this user, and email ",t+="ad-admin-bans@quora.com with a link to the user's profile page ",t+="and whois page to discuss next steps for the ban.",d.createDialog(e).title("Banning an ad admin").cancel(function(){e.options.force_ban_ad_admin=!0,d.createDialog(e).load("get_dialog",{kwargs:{ty:e.type,object_id:e.object_id,options:e.options}})},"Ban anyway").ok(null).html(t)}).success(function(){d.createDialog(e).load("get_dialog",{kwargs:{ty:e.type,object_id:e.object_id,options:e.options}})}).send()}}),t.SendMessageTemplateModal=s.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.$id("@select_template").change(e.onSelectTemplate.bind(e))},onSelectTemplate:function(e){var t=this,i=e.target.value;t.serverCall("show_message_template").kwargs({message:i}).contentFor(t.$id("@message_template")).send()},onSubmit:function(){var e=this,t=e._super.bind(e),i=this.child("editor").serialize();this.serverCall("submit").kwargs({message:i}).liveMutate().success(function(){t()}).send()}})},"./app/view/ads.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/events/index.js"),s=i("./view/fixable2.js"),a=i("./settings.js"),r=i("./shared/log_sender.js"),d=i("./shared/ads_landing_page_time.js"),l=i("./shared/core/component.js").Component;t.AdComponent=l.extend({onLoad:function(){this._super.apply(this,arguments),this.handleOnLoad()},handleOnLoad:function(){var e=this;n(document).ready(function(){[100,2e3,5e3].forEach(function(t){setTimeout(e.logIfBlocked.bind(e),t)})})},logIfBlocked:function(){var e=this,t=e.$id("@"+e.wrapperString);if(0===t.width()||0===t.height()){for(var i=!1,o=t.get(0);o;){if(n(o).hasClass("pagedlist_hidden")){i=!0;break}o=o.parentNode}if(!i){var s={impression_hash:e.impressionHash,window_id:a.windowId};r.log("ads_blocked_impressions",s,{scribeOnly:!0})}}}}),t.AdLink=l.extend({onLoad:function(){var e=this;e._super.apply(this,arguments);var t=e.$id("@"+e.linkString);t.on("mousedown",function(){t.attr("href",e.redirect_url)}),t.on("click",function(t){var i={scribeOnly:!0},n={impression_hash:e.impressionHash};r.log("ads_js_clicks",n,i),t.shiftKey||t.ctrlKey||t.metaKey||d.startTimer(e.impressionHash)})}}),t.AdsDebugToggle=l.extend({onLoad:function(){this._state=!1,this.setupKeyboardShortcut()},toggle:function(){var e,t=this,i=document.getElementsByClassName("ads_debug_info");if(t._state)for(t._state=!1,e=0;e<i.length;e++)i[e].style.display="none";else for(t._state=!0,e=0;e<i.length;e++)i[e].style.display="block"},setupKeyboardShortcut:function(){i("./shared/keystrokes.js").on([65,68,83,65,68,83],this.toggle.bind(this))}}),t.RelatedQuestionsAdWrapper=l.extend({onLoad:function(){var e=this,t=n(document);e.handleEvent(o.Types.RELATED_QUESTIONS_EXPAND,function(i){var n=i.payload.elem;s.makeFixable(e.$id("@ad"),{scroll_dep:!0,min_scroll_callback:function(){return n.height()+70},max_scroll_callback:function(){return t.height()}})})}})},"./app/view/ads/tools.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/window_manager.js");t.CreateAdAccountExternal=n.extend({onLoad:function(){this.$id("@submit").click(this._createAccount.bind(this))},_createAccount:function(){var e=this.$id("@name").val(),t=this;this.serverCall("create_ad_account").kwargs({account_name:e}).success(function(e){t._successCallback(e)}).error(this._creationErrorHandler).send()},_successCallback:function(e){o.navigateTo("/ads/account?id="+e)}})},"./app/view/ama.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./view/fixable2.js");t.AMACoverBar=n.extend({onLoad:function(){this.$id("@question_button").on("click",function(){var e=o(".AMAQuestionAddHeader").offset().top;o("html,body").animate({scrollTop:e-80},"slow"),o(".AMAQuestionAddHeader").find(".selector_input").focus(),o(".AMAQuestionAddHeader").find(".selector_input").addClass("highlighted"),setTimeout(function(){o(".AMAQuestionAddHeader").find(".selector_input").removeClass("highlighted")},750)})}}),t.AmaSessionRightCol=n.extend({onLoad:function(){var e=this.$id("@ticker").get(0);if(e||(e=this.$id("@upcoming").get(0)),e){s.makeFixable(e,{scroll_dep:!0,height_dep:!0,extra_top_spacing:16})}}}),t.AMAWriterStats=n.extend({onLoad:function(){var e=this.$id("@writer_stats").get(0);e&&s.makeFixable(e,{scroll_dep:!0,extra_top_spacing:110})}}),t.AMAMetricGraph=n.extend({onLoad:function(){new Rickshaw.Graph({element:this.$id("@rsgraph").get(0),series:[{color:"steelblue",data:this.series_data}],width:150,height:40,interpolation:"basis",renderer:"line"}).render()}}),t.FinishSessionButton=n.extend({onLoad:function(){this.child("finish_session_button").onPressed(this.finishSessionConfirm.bind(this))},finishSessionConfirm:function(){this.createModal("finish_session_confirm").onSubmit(this.finishSession.bind(this)).show()},finishSession:function(){this.serverCall("finish_session").kwargs({ama_id:this.ama_id}).success(this.redirectToSessionPage.bind(this)).sendOnlyOnce()},redirectToSessionPage:function(){window.location.replace(this.redirect_url)}})},"./app/view/ama/self_serve.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.StartSessionModalLink=n.extend({onLoad:function(){this.$id("@start_session_modal_link").on("click",this.openSessionModal.bind(this))},openSessionModal:function(){this.createModal("open_session_modal").show()}}),t.QuestionA2ARow=n.extend({onLoad:function(){this.$id("@request_button").on("click",this.addRequest.bind(this))},addRequest:function(){this.serverCall("add_request").liveMutate().send(),this.$id("@unrequested_state").addClass("hidden"),this.$id("@requested_state").removeClass("hidden")}})},"./app/view/answer.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.AnswerHeader=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.ANSWER_VOTE_STATE,function(t){if(t.payload.aid==e.aid){var i="upvoted"==t.payload.state;e.$id("@credibility_fact_no_vote").toggleClass("hidden",i),e.$id("@credibility_fact_upvoted").toggleClass("hidden",!i)}}),this.handleEvent(o.Types.FEED_ANSWER_INLINE_EXPAND,function(t){t.payload.aid==e.aid&&e.$id("@follow_button").removeClass("hidden",function(){e.$id("@follow_button").addClass("fadeIn")})})}}),t.ToggledAnswerHeader=n.extend({onLoad:function(){var e=this;this.toggled=!1,this.handleEvent(o.Types.INLINE_EDITOR_STATE,function(t){t.payload.contentType==e.contentType&&t.payload.oid==e.oid&&("cancel"==t.payload.state?e.performCancel():"edit"==t.payload.state?e.updateState(!0):"submit"==t.payload.state?e.updateState(!1):"submitted"==t.payload.state?e.updateState(!1):"toggle"==t.payload.state&&e.updateState(!e.toggled))})},updateState:function(e){setTimeout(this._updateState.bind(this,e),0)},_updateState:function(e){this.toggled=e,this.toggled?this.performEdit():this.performCancel()},performEdit:function(){this.$id("@read_mode_header").addClass("hidden"),this.$id("@edit_mode_header").removeClass("hidden")},performCancel:function(){this.$id("@read_mode_header").removeClass("hidden"),this.$id("@edit_mode_header").addClass("hidden")}}),t.AnswerListItem=n.extend({onLoad:function(){var e=this;e.answerFeedbackLoaded=!1,e.handleEvent(o.Types.ANSWER_VOTE_STATE,function(t){t.payload.aid==e.aid&&("downvoted"==t.payload.state?e.showAnswerDownvoteFeedback():e.hideAnswerDownvoteFeedback())})},showAnswerDownvoteFeedback:function(){var e=this;e.$id("@item").addClass("hidden"),e.$id("@answer_feedback").removeClass("hidden"),!1===e.answerFeedbackLoaded&&e.serverCall("load_downvote_feedback").contentFor(e.$id("@answer_feedback")).success(function(){e.answerFeedbackLoaded=!0}).send()},hideAnswerDownvoteFeedback:function(){this.$id("@item").removeClass("hidden"),this.$id("@answer_feedback").addClass("hidden")}})},"./app/view/answer_wiki.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./view/inline_editor.js").InlineEditor;t.CreateAnswerWikiInlineEditor=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.$id("@inline_editor_cancel").click(function(){return e.hideEditor(),!1})},trigger_request:function(){return this._super.apply(this,arguments),this.isEditorEmpty()&&this.hideEditor(),!1},hideEditor:function(){this.toggle_editor(),n("#answer_wiki").addClass("hidden")},_get_kwargs:function(){return{qid:this.id,input:this.get_value()}}}),t.AnswerWikiInlineEditor=o.extend({_get_kwargs:function(){var e="";this.has_comment&&!this.child("comment_editor").isOnlyWhiteSpace()&&(e=this.child("comment_editor").serialize());var t,i=this.$id("@notif");return t=i&&i.prop("checked")?1:0,{qid:this.id,input:this.get_value(),sugg_exists:this.sugg_exists,comment:e,notif:t}}})},"./app/view/board.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./unified_view/modal.js").ModalBase,a=i("./shared/window_manager.js");t.CreateBlogButton=n.extend({onLoad:function(){var e=this;this.$id("@create_blog_button").click(function(t){t.preventDefault(),e.createModal("create_blog_modal").show()})}}),t.CreateBlogModal=s.extend({onLoad:function(){this._super.apply(this,arguments),this.submitted=!1,this.$id("@name_container").find("input").focus()},onSubmit:function(){var e=this,t=this.$id("@name_container").find("input"),i=this.$id("@subdomain_container").find("input"),n=o.trim(t.val()),s=i.val(),r=e.child("editor"),d=r.isOnlyWhiteSpace()||r.isEmpty();if(n?t.removeClass("error"):(t.addClass("error"),t.focus()),s?i.removeClass("error"):(i.addClass("error"),n&&i.focus()),d?(e.$id("@editor_row").addClass("error"),e.$id("@editor_row").focus()):e.$id("@editor_row").removeClass("error"),!d&&s&&n&&!e.submitted){e.$id("@create").addClass("submit_button_disabled"),e.submitted=!0;var l=e.child("editor").serialize();e.disableEditor(),e.serverCall("create").kwargs({name:n,description:l,url:s,topics:""}).success(function(e){e&&a.navigateTo(e)}).liveMutate().send()}return!1},disableEditor:function(){this.child("editor").disable()}})},"./app/view/board/blog.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/window_manager.js");t.CreateBlog=n.extend({onLoad:function(){var e=this;this.submitted=!1,this.$id("@name").focus(),this.$id("@fake_editor").click(function(){return e.$id("@fake_editor_row").hide(),e.$id("@editor_row").show(),e.child("editor").focus(),!1}),this.$id("@create").click(function(){var t=o.trim(e.$id("@name").val()),i=e.child("subdomain").getInput().val(),n=e.child("editor"),a=n.isOnlyWhiteSpace();if(t?e.$id("@name").removeClass("error"):(e.$id("@name").addClass("error"),e.$id("@name").focus()),i?e.child("subdomain").getInput().removeClass("error"):(e.child("subdomain").getInput().addClass("error"),t&&e.child("subdomain").getInput().focus()),a?(e.$id("@editor_row").addClass("error"),e.$id("@editor_row").focus()):e.$id("@editor_row").removeClass("error"),!a&&i&&t&&e.child("subdomain").urlIsOK&&!e.submitted){e.$id("@create").addClass("submit_button_disabled"),e.submitted=!0;var r=e.child("editor").serialize();e.disable(),e.serverCall("create").kwargs({name:t,description:r,url:i,topics:""}).success(function(e){e&&s.navigateTo(e)}).liveMutate().send()}return!1})},disable:function(){this.child("editor").disable()}})},"./app/view/board/create_box.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/core/component.js").Component,s=i("./settings.js"),a=i("./w2.dialog.js").Dialog,r=i("./shared/facebook.js"),d=i("./view/inline_editor.js").InlineEditor,l=i("./shared/action_log.js"),c=i("./view/selector.js").MultiSelector,u=i("./shared/window_manager.js");t.BoardCreatePostBox=o.extend({onLoad:function(){var e=this.child("title_box"),t=this.child("editor");e.whenOnLoaded(function(){e.setMeaningfulChangeCallback(function(){t.save_draft(!1)})}),t.whenOnLoaded(function(){t.setTitleBox(e)})}}),t.BoardCreatePostTitleBox=o.extend({onLoad:function(){this.editor=this.child("title_editor");var e=this;this.$id("@fake_editor").click(function(){return e.toggle_editor(),!1})},isOnlyWhiteSpace:function(){return this.editor.isOnlyWhiteSpace()},disableEditor:function(){this.editor.disable()},clearEditor:function(){this.editor.clear()},serialize:function(){return this.editor.serialize()},setMeaningfulChangeCallback:function(e){this.editor.setMeaningfulChangeCallback(e)},toggle_editor:function(){this.$id("@fake_editor_row").hide(),this.$id("@editor_row").show(),this.$id("@editor_row .qtext_editor_content").focus()},titleRequired:function(){this.$id("@title_required").removeClass("hidden")},titleRequiredReset:function(){this.$id("@title_required").addClass("hidden")}}),t.CreateBoardPostEditor=d.extend({onLoad:function(){var e=this;if(this._super.apply(this,arguments),this.$id("@remove_via").click(function(){return e.$id("@via_text").hide(),e.$id("@via").remove(),!1}),this.seenUrls={},this.$id("@fake_editor").click(this.showEditor.bind(this)),this.saved_seen_urls)for(var t=0;t<this.saved_seen_urls.length;t++)this.seenUrls[this.saved_seen_urls[t]]=!0;this.titleBox=null;var i=this.child("topic_selector");i&&i.whenOnSavedResultsChanged(function(t){e._topics=t})},setTitleBox:function(e){this.titleBox=e},showEditor:function(){this.$id("@content").show(),this.editor.focus()},submitHandler:function(){var e=this;this.input_button_obj.click(function(){if(!e.editor.isOnlyWhiteSpace()||null!==e.preview||e.id){if(e.titleBox){if(e.titleBox.titleRequiredReset(),e.titleBox.isOnlyWhiteSpace())return e.titleBox.toggle_editor(),e.titleBox.titleRequired(),!1;e.titleBox.disableEditor()}e.editor.disable(),e.trigger_request()}return!1})},removeUrl:function(){this.$id("@preview_url").html(""),this.$id("@preview_url_section, #@link_editor_buttons").hide(),this.$id("@remove_url").hide(),this.preview=null,this.editor.focus()},reset:function(){this.titleBox&&this.titleBox.clearEditor(),this.editor.enable(),this.editor.clear(!0),this.$id("@preview_url_section, #@link_editor_buttons").hide(),this.$id("@remove_url").hide(),this.seenUrls={},this.removeUrl(),this.draft_space&&(this.draft_space.draft_id=null)},cancelEditor:function(){this.canSaveDraft()&&null!==this.draft_space.draft_id&&this.save_draft(!1),this.closeDialog()},reportSuccess:function(){},ajax_callback:function(e){if(this.redirect_on_post&&e)u.navigateTo(e);else{if(this.is_dialog)return this.reportSuccess(),void this.closeDialog();this.reset()}},closeDialog:function(){a.dialogFor(this).close_()},getBid:function(){return this.bid?this.bid:null},getBoardName:function(){return null},getVia:function(){return this.$id("@via")?this.$id("@via").val():null},getIsSubmission:function(){return this.is_submission},setIsSubmission:function(e){this.is_submission=e},getLinkURL:function(){var e=this.getLinkPreview();return e?e.url:null},getLinkPreview:function(){return this.preview?this.child("link_editor").getPreviewLinkInfo():null},getTitle:function(){return this.titleBox?this.titleBox.serialize():null},getSeenUrlsAsArray:function(){var e=[];for(var t in this.seenUrls)e.push(t);return e},maybeLogAction:function(){l.logSecondaryAction("PostAdd",null)},canSaveDraft:function(){return this.draft_space&&!this.save_draft_disabled},enableSaveDraft:function(){this.save_draft_disabled=!1},disableSaveDraft:function(){this.save_draft_disabled=!0},onClearDraft:function(){this.reset()},save_draft:function(e){var t=this;if(this.canSaveDraft()){this.disableSaveDraft();var i=e?"save_draft":"save_draft_auto",n=this._get_kwargs();n.window_id=s.windowId,n.target=this.target,n.url=this.url,n.seen_urls=this.getSeenUrlsAsArray();var o=this.serverCall(i).kwargs(n).success(function(e){t.enableSaveDraft(),t.draft_space&&t.draft_space.draft_id!=e&&(t.draft_space.draft_id=e),t.updateSavedState(n.description)}).error(this.enableSaveDraft.bind(this));e&&o.liveMutate(),o.send()}},_get_kwargs:function(){return{draft_space:this.draft_space,bid:this.getBid(),object_id:this.id,name:this.getBoardName(),description:this.get_value(),title:this.getTitle(),link_url:this.getLinkURL(),preview:this.getLinkPreview(),via:this.getVia(),topics:this._topics||[],is_submission:this.getIsSubmission(),fb_uid:r.getFbUid(),fb_access_token:r.getAccessToken(),fb_expires:r.getExpiresIn()}}}),t.BoardTopicMultiSelector=c.extend({onLoad:function(){this._super.apply(this,arguments);var e=this.child("board_topic_link").$id("@board_topic_link"),t=this.$id("@board_topic_selector");e.on("click",function(e){e.preventDefault(),n(this).addClass("hidden"),t.removeClass("hidden")})},whenOnSavedResultsChanged:function(e){this._onSavedResultsChanged=e},onSavedResultsChanged:function(){this._onSavedResultsChanged&&this._onSavedResultsChanged(this.saved_results)}})},"./app/view/board/item.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/inline_editor.js").InlineEditor;t.LinkBoardItemView=n.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@edit").click(function(){return e.showEditor(),!1}),e.$id("@item").hover(function(t){e.$id("@item").addClass("hover")},function(t){e.$id("@item").removeClass("hover")})},showEditor:function(){this.child("description").child("editor").toggle_editor()}}),t.LinkBoardItemDescriptionInlineEditor=o.extend({_get_kwargs:function(){return{input:this.get_value(),preview:this.child("link_editor").getPreviewLinkInfo()}}})},"./app/view/board/settings.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/selector.js").Selector;t.BlogSubdomainInput=n.extend({onLoad:function(){var e=this;this.urlIsOK=!1,this.$id("@subdomain_input").find("input").on("keyup",function(t){e.checkURL()}),this.$id("@update").click(function(){return e.updateURL(),!1})},checkURL:function(){var e=this,t=this.$id("@subdomain_input").find("input"),i=t.val();this.serverCall("check_url").kwargs({url:i}).success(function(t){!0===t?e.urlAvailable():!1===t?e.urlNotAvailable():e.urlEmpty()}).error(this.urlNotAvailable.bind(this)).send()},getInput:function(){return this.$id("@subdomain_input").find("input")},urlEmpty:function(){this.urlAvailable(),this.urlIsOK=!1,this.bid&&this.$id("@button").addClass("hidden")},urlAvailable:function(){this.urlIsOK=!0;var e=this.$id("@subdomain_input").find("input");this.$id("@domain_unavailable").addClass("hidden"),e.removeClass("error"),this.bid&&this.$id("@button").removeClass("hidden")},urlNotAvailable:function(){this.urlIsOK=!1;var e=this.$id("@subdomain_input").find("input");this.$id("@domain_unavailable").removeClass("hidden"),e.addClass("error"),this.bid&&this.$id("@button").addClass("hidden")},updateURL:function(){var e=this.$id("@subdomain_input").find("input"),t=e.val();return t&&this.serverCall("register_choice").kwargs({url:t}).success(function(){window.location.reload(!0)}).liveMutate().send(),!1}}),t.BoardParticipantSelector=o.extend({resultWasSelected:function(e){var t=this;this.serverCall("add").kwargs({bid:this.metadata.bid,target_uid:e.data.uid}).success(function(){t.setQuery(""),t.focus()}).liveMutate().send()}})},"./app/view/board/submission.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./w2.dialog.js"),s=i("./settings.js").interface_strings;t.RejectSubmission=n.extend({onLoad:function(){var e=this;this.$id("@link").click(function(){return e._dialog=o.createDialog(e).title(e.title).cancel(null,s.cancel).ok(function(t){e.serverCall("reject").liveMutate().send()},e.button_text).load("comment_dialog"),!1})}}),t.SubmissionView=n.extend({onLoad:function(e){var t=this;this.$id("@item").hover(function(e){t.$id("@delete").show(),t.$id("@item").addClass("hover")},function(e){t.$id("@delete").hide(),t.$id("@item").removeClass("hover")}),this.$id("@update_accept").click(function(){return t.request("update_accept"),!1}),this.$id("@update").click(function(){return t.request("update"),!1}),this.$id("@edit").click(function(){return t.toggle(),!1}),this.$id("@cancel").click(function(){return t.toggle(),!1})},getNewPreview:function(){return null},request:function(e){var t=this.child("description").serialize(),i=this.child("title").serialize(),n=this.getNewPreview();this.serverCall(e).kwargs({new_description:t,new_title:i,new_preview:n}).liveMutate().send()},toggle:function(){this.$id("@editor").toggleClass("hidden"),this.$id("@content").toggle()}})},"./app/view/bug_report.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./view/modal.js").Base,a=i("./view/upload.js");t.BugReportModalLink=n.extend({onLoad:function(){var e=this;this.$id("@send_feedback").on("click",function(t){t.preventDefault(),e.createModal("load_inner").show()})}}),t.BugReportModal=s.extend({onLoad:function(){var e=this;this.child("upload_form").success(this.uploadSuccess.bind(this)).failure(this.uploadFailure.bind(this)),this.$id("@editor").focus(),this.$id("@close_button").click(function(){e._closeModal()}),this.$id("@cancel_button").click(function(){e._closeModal()}),this.$id("@submit_button").click(function(t){t.preventDefault();var i=e.$id("@editor").val().trim(),n=e.$id("@photo_key").val();return e.serverCall("submit_feedback").kwargs({target:e.target,msg:i,photo_key:n}).success(function(){i&&e._closeModal()}).sendOnlyOnce(),!1})},uploadSuccess:function(e){var t=this;this.$id("@photo_key").val(e.photo_key),this.serverCall("upload").kwargs({photo_key:e.photo_key,target:this.target}).success(function(){var e=t.child("screenshot").$id("@remove_screenshot");e.removeClass("hidden"),e.click(function(){t.serverCall("clear_upload").kwargs({target:t.target}).success(function(){t.child("upload_form").success(t.uploadSuccess.bind(t)).failure(t.uploadFailure.bind(t))}).contentFor(t.$id("@iframe")).send()})}).contentFor(this.$id("@iframe")).send()},uploadFailure:function(){o(".drop_zone").removeClass("drag_and_hover"),this.child("upload_form").hideSpinner();var e=this.child("upload_form").$id("@file");if(e){0!==e.get(0).files.length&&(e.get(0).value=null)}}}),t.BugReportMain=a.UploadDialogContents.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.$id("@submit_report").click(function(t){t.preventDefault(),e.$id("@submit_report").prop("disabled",!0);var i,n=e.$id("@subject").val(),s=e.$id("@description").val(),a=e.$id("@photo_key").val(),r=e.$id("@project").val(),d=e.$id("@priorities").val();return i=r===e.$id("@queue_project").val()?o.map(e.$id("@select_queues input:checked"),function(e){return e.value}):null,e.serverCall("submit_report").kwargs({target:e.target,subject:n,description:s,photo_key:a,project:r,priority:d,queue_types:i}).success(function(e){window.location.reload()}).sendOnlyOnce(),!1}),this.$id("@project").change(function(t){var i=e.$id("@select_queues");o(this).val()===e.$id("@queue_project").val()?i.removeClass("hidden"):i.addClass("hidden")})},uploadSuccess:function(e){this.$id("@photo_key").val(e.photo_key),this.serverCall("upload").kwargs({photo_key:e.photo_key,target:this.target}).contentFor(this.$id("@upload_screenshot")).send()}}),t.BugReportTableCell=n.extend({onLoad:function(){var e=this;this.$id("@delete_report").click(function(t){return e.serverCall("delete_report").kwargs({report_id:e.report_id}).success(function(e){window.location.reload()}).send(),!1})}})},"./app/view/common.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/inline_editor.js"),s=i("./shared/events/index.js"),a=o.InlineEditor,r=i("./shared/upload.js"),d={};t.SuggestedEditSaveButton=n.extend({onLoad:function(){var e=this;this.$id("@accept").click(function(){return e.serverCall("publish_edit").liveMutate().send(),!1})}}),t.Content=n.extend({onLoad:function(){this.$content=this.$id("@content"),this.$editor=this.$id("@editor"),this.bindEditorCallbacks(),this.editorFetched=this.editor_loaded,this.editorLoaded=this.editor_loaded},toggle:function(e){this.emitEvent({type:s.Types.QTEXT_EXPANDABLE_STATE,payload:{content_type:this.content_type,oid:this.oid}});var t=this.$content.hasClass("hidden");null!=e&&(t=e),t?this.showContent():this.showEditor()},showContent:function(){this.$content.removeClass("hidden"),this.$editor.addClass("hidden")},showEditor:function(){if(!this.editorLoaded)return this.$id("@loading").removeClass("hidden"),void this.fetchEditor();this.$content.addClass("hidden"),this.$editor.removeClass("hidden")},fetchEditor:function(){var e=this;this.editorFetched||(this.editorFetched=!0,this.serverCall("editor_component").contentFor(this.$editor).success(function(){e.$id("@loading").addClass("hidden"),e.editorLoaded=!0,e.emitEvent(s.helpers.inlineEditorEdit(e.content_type,e.oid)),e.showEditor()}).send())},editorCallbacks:function(e){"edit"==e?this.toggle(!1):"cancel"==e?this.toggle(!0):"submitted"==e?this.toggle(!0):"toggle"==e&&this.toggle()},bindEditorCallbacks:function(){var e=this,t=e.content_type+"-"+e.oid,i=d[t];e.editorCallbacks(i),e.handleEvent(s.Types.INLINE_EDITOR_STATE,function(t){var i=t.payload.contentType+"-"+t.payload.oid;d[i]=t.payload.state,t.payload.contentType==e.content_type&&t.payload.oid==e.oid&&e.editorCallbacks(t.payload.state)})}});var l=t.SuggestedEditsEditor=a.extend({onLoad:function(){this._super.apply(this,arguments),this.disclaimer_update="",this.answer_attribution_update="";var e=this;this.setToggleCallback(function(){if(e.parent()){var t=e.parent();t.toggleButtons&&t.toggleButtons(),t.$id("@disclaimer").toggle(),t.$id("@nfr").toggle(),t.$id("@answer_attribution").toggle()}e.editorShown&&e.editor.fixEditorButtons()}),e.child("editor").setEditorReadyCallback(function(){e.original_input=e.get_value()})},submitHandler:function(){var e=this;this.input_button_obj.click(function(t){e.trigger_request(),t.preventDefault()})},okToSubmitRequest:function(){return!(!this.editor.hasChanged(this.original_input)&&!this.always_submit&&""===this.disclaimer_update&&""===this.answer_attribution_update)&&(r.isVideoUploadInProgress()?(this.editor.alertUploadInProgress(),!1):this._super.apply(this,arguments))},_get_kwargs:function(){var e="";return this.has_comment&&!this.child("comment_editor").isOnlyWhiteSpace()&&(e=this.child("comment_editor").serialize()),{object_id:this.id,input:this.get_value(),sugg_exists:this.sugg_exists,notif:this.$id("@notif").prop("checked")?1:0,comment:e,disclaimer_update:this.disclaimer_update,answer_attribution_update:this.answer_attribution_update,share_values:{}}}});t.AnswerEditor=l.extend({onLoad:function(){this._super.apply(this,arguments),this.answerShareForm=this.child("answer_share_form"),this.editorShare=this.answerShareForm&&this.answerShareForm.child("editor_share")},_get_kwargs:function(){var e=this._super();return this.editorShare&&(e.share_values=this.editorShare.getValues()),e.header_data=this.editor&&this.editor.getHeaderImageData(),e}}),t.PostEditor=l.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.handleEvent(s.Types.POST_DISCLAIMER,function(t){t.payload.pid==e.id&&(e.disclaimer_update=t.payload.state)})}})},"./app/view/components.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./w2.dialog.js"),s=i("./settings.js").interface_strings,a=i("./shared/client_log.js"),r=i("./shared/window_manager.js"),d=i("./shared/action_log.js");t.TruncatePhraseList=n.extend({onLoad:function(){var e=this;e.$id("@view_all_link").click(function(){return e.$id("@partial_phrases").addClass("hidden"),e.$id("@all_phrases").removeClass("hidden"),!1})}}),t.TruncatedQText=n.extend({enterLoadingState:function(){this.$id("@loading").removeClass("hidden"),this.$id("@more").addClass("hidden")},exitLoadingState:function(){this.$id("@more").removeClass("hidden"),this.$id("@loading").addClass("hidden")}}),t.SimpleUserRequest=n.extend({onLoad:function(){var e=this;this.$id("@link").click(function(t){e.onClick(t),t.preventDefault()})},onClick:function(e){this.upvote&&(a.logEvent("BoardItemUpvote",e.target,{board_item_id:this.board_item_id}),d.logSecondaryAction("BoardItemUpvote",{type:"board_item",board_item_id:this.board_item_id})),this.downvote&&a.logEvent("BoardItemDownvote",e.target,{board_item_id:this.board_item_id}),(this.board_follow_button||this.board_request_follow_button)&&(a.logEvent("BoardFollow",e.target,{board_item_id:this.board_item_id}),d.logSecondaryAction("BoardFollow",{type:"board",bid:this.bid})),this.serverCall("request").liveMutate().send()}}),t.SimpleUserRequestConfirm=n.extend({onLoad:function(){var e=this;this.$id("@link").click(function(){return e._dialog=o.createDialog(e).title(e.title).cancel(null,s.cancel).ok(function(){e.serverCall("request").liveMutate().success(function(e){e.next_url&&r.navigateTo(e.next_url)}).send()},e.button_text).html(e.confirm_text),!1})}}),t.OrderItemButtons=n.extend({onLoad:function(){var e=this;this.$id("@up").click(function(){return e.serverCall("move_up").liveMutate().send(),!1}),this.$id("@down").click(function(){return e.serverCall("move_down").liveMutate().send(),!1})}})},"./app/view/contact_importer.js":function(e,t,i){function n(e,t){var i=!1;return s.each(t,function(t,n){if(n.test(e))return void(i=!0)}),i}var o=i("./settings.js"),s=i("./shared/jquery.js"),a=i("./shared/events/index.js"),r=i("./shared/google_.js"),d=i("./shared/core/component.js").Component,l=[/@yahoo\.(ca|cn|co\.id|co\.in|co\.jp|co\.kr|co\.nz|co\.uk|com|com\.ar|com\.au|com\.br|com\.cn|com\.hk|com\.mx|com\.my|com\.ph|com\.sg|com\.tr|com\.tw|com\.vn|de|dk|es|fr|gr|ie|it|no|pl|se)$/,/@ymail\.com$/,/@rocketmail\.com$/],c=[/@gmail\.com$/,/@googlemail\.com$/],u=t.ImportContactsForm=d.extend({isGoogleAppsEmail:!1,shouldLogImpression:!0,onLoad:function(){var e=this;this.isGoogleAppsEmail=this.is_google_apps_email,this.prevEmail=this.getEmail(),s("input[type=submit]").focus(),this.$id("@email").on("keyup",function(){e.prevEmail!=e.getEmail()&&(e.prevEmail=e.getEmail(),e.validateEmail())}),s("input[type=submit]").on("click",function(){return e.onSubmit()}),this.shouldLogImpression&&this.serverCall("log_impression").kwargs({email:this.getEmail()}).send(),s(document).on("oauth_approved",function(t,i){e.updateAndSubmitForm(i.service,i.accessToken)}),s(document).on("oauth_rejected",function(t,i){e.onOAuthRejected(i.service)})},submitForm:function(){this.$id("@contact_importer_form").submit()},updateAndSubmitForm:function(e,t){this.$id("@service").val(e),this.$id("@access_token").val(t),this.$id("@spinner").show(),this.submitForm()},onOAuthRejected:function(e){},onSubmit:function(){return!this.openOAuthDialog(this.getEmail())},getEmail:function(){return s.trim(this.$id("@email").val())},lastTimeoutId:null,validateEmail:function(){var e=this.getEmail();if(!e)return this.onOAuthEmailEntered("empty"),!1;this.lastTimeoutId&&(clearTimeout(this.lastTimeoutId),this.lastTimeoutId=null);var t=n(e,l),i=n(e,c);this.isGoogleAppsEmail=!1,this.isGoogleAppsDomainCheckQueued=!1,t?this.onOAuthEmailEntered("yahoo"):i?this.onOAuthEmailEntered("gmail"):(this.onUnknownDomainEntered(),this.lastTimeoutId=setTimeout(this.checkGoogleAppsDomain.bind(this),500))},onOAuthEmailEntered:function(e){},onUnknownEmailDomainEntered:function(){},isCheckingGoogleAppsDomain:!1,isGoogleAppsDomainCheckQueued:!1,checkGoogleAppsDomain:function(){if(this.isCheckingGoogleAppsDomain)return void(this.isGoogleAppsDomainCheckQueued=!0);this.isCheckingGoogleAppsDomain=!0;var e=this.getEmail(),t=this;this.serverCall("is_google_apps_domain").kwargs({email:e}).success(function(i){i&&(t.isGoogleAppsEmail=!0),t.onCheckGoogleAppsDomainResponse(e,i),t.isCheckingGoogleAppsDomain=!1,t.isGoogleAppsDomainCheckQueued&&(t.isGoogleAppsDomainCheckQueued=!1,t.checkGoogleAppsDomain())}).send()},onCheckGoogleAppsDomainResponse:function(e,t){},logOAuthAttempt:function(e){this.serverCall("log_contact_importer_oauth_attempt").kwargs({email:e}).send()},onGoogleOAuthCallback:function(e){if(e&&e.error===undefined){var t=e.access_token;this.updateAndSubmitForm("google",t)}else this.onOAuthRejected()},openOAuthDialog:function(e){var t=this;return!(!n(e,c)&&!t.isGoogleAppsEmail)&&(t.logOAuthAttempt(e),r.onInit(function(){var e={callback:t.onGoogleOAuthCallback.bind(t),clientid:o.googleClientId,cookiepolicy:o.googleCookiePolicy,scope:t.scopes};t.prompt_ota_install&&(e.apppackagename=o.androidAppPackageName),window.gapi.auth.signIn(e)}),!0)},getEmailDomain:function(e){return n(e,l)?"yahoo":n(e,c)||this.isGoogleAppsEmail?"google":"other"}}),h=u.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@contact_importer_form").submit(this.onFormSubmit.bind(this))},onFormSubmit:function(){return!this.child("submit").$id("@import_contacts").is(":disabled")},unsupportedMessageTimeoutId:null,clearUnsupportedMessageTimeout:function(){this.unsupportedMessageTimeoutId&&(clearTimeout(this.unsupportedMessageTimeoutId),this.unsupportedMessageTimeoutId=null)},onOAuthEmailEntered:function(e){this.$id("@spinner").hide(),this.$id("@email_import_error").hide(),this.$id("@unsupported_domain").hide(),this.$id("@form_error").hide(),this.enableSubmitButton(!0),this.clearUnsupportedMessageTimeout()},onUnknownDomainEntered:function(){this.$id("@spinner").show(),this.$id("@email_import_error").hide(),this.$id("@form_error").hide(),this.enableSubmitButton(!1),this.clearUnsupportedMessageTimeout()},onUnsupportedDomainEntered:function(){this.$id("@spinner").hide(),this.$id("@unsupported_domain").show(),this.$id("@email_import_error").show(),this.enableSubmitButton(!1)},onCheckGoogleAppsDomainResponse:function(e,t){if(this.getEmail()==e)if(t)this.$id("@spinner").hide(),this.$id("@unsupported_domain").hide(),this.enableSubmitButton(!0);else{var i=this;this.unsupportedMessageTimeoutId=setTimeout(function(){i.onUnsupportedDomainEntered()},500)}},enableSubmitButton:function(e){e?this.child("submit").$id("@import_contacts").attr("disabled",!1).removeClass("submit_button_disabled").addClass("follow_button"):this.child("submit").$id("@import_contacts").prop("disabled",!0).addClass("submit_button_disabled").removeClass("follow_button")}});t.NuxDialogImportContactsForm=h.extend({shouldLogImpression:!1,onLoad:function(){var e=this;e._super.apply(e,arguments),e.$id("@change_email_link").click(function(){return e.$id("@default_email_container").hide(),e.$id("@change_email_container").show(),!1}),"other"==e.getEmailDomain(e.getEmail())&&e.onUnsupportedDomainEntered(),e.$id("@skip").click(function(){return e.serverCall("record_step").kwargs({step_name:"skip_oauth_dialog"}).success(function(){e.emitEvent({type:a.Types.NUX_DIALOG_SKIP_NEXT_STEP,payload:{}})}).send(),!1})},onOAuthRejected:function(e){this.serverCall("record_step").kwargs({step_name:"reject_oauth"}).send()},onSubmit:function(){var e=this._super.apply(this,arguments);return e?this.serverCall("record_step").kwargs({step_name:"invalid_import_domain"}).send():this.serverCall("record_step").kwargs({step_name:"open_oauth",props:{domain:this.getEmailDomain(this.getEmail())}}).send(),e},submitForm:function(){var e=this.$id("@service").val(),t=this.$id("@access_token").val();return this.importContacts(this.getEmail(),e,t),!1},importContacts:function(e,t,i){var n=this;n.$id("@alt_spinner").show(),n.serverCall("import_contacts").kwargs({email:e,service:t,access_token:i}).liveMutate().success(function(){n.emitEvent({type:a.Types.NUX_DIALOG_NEXT_STEP,payload:{}})}).sendOnlyOnce()}})},"./app/view/draft.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.DraftView=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.ANSWER_DRAFT_DELETED,function(t){t.payload.qid==e.qid&&"deleted"==t.payload.state&&e.$id("@draft_wrapper").addClass("hidden")}),this.handleEvent(o.Types.BOARD_DRAFT_DELETED,function(t){t.payload.draft_id==e.draft_id&&e.$id("@draft_wrapper").addClass("hidden")})}})},"./app/view/embed.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./tooltip.js"),a=i("./view/modal.js").Base,r=i("./truncate.js").truncate;t.EmbedModalLink=n.extend({onLoad:function(){var e=this;this.$id("@modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({aid:e.aid}).show(),e.serverCall("record_embed").kwargs({share_info:e.share_info}).send()}),s.attach(this.$id("@embed_disabled"),this.embed_disabled_text)}}),t.EmbedModal=a.extend({onLoad:function(){this._super.apply(this,arguments),this.selectAllOnFocus(this.$id("@code_area")),this.$id("@checkbox").on("click",this.toggleFullAnswer.bind(this))},selectAllOnFocus:function(e){e.focus(function(){var e=o(this);e.select(),window.setTimeout(function(){e.select()},1),e.mouseup(function(){return e.off("mouseup"),!1})})},toggleFullAnswer:function(){this.$id("@full_answer").is(":checked")?(this.$id("@truncated_preview").addClass("hidden"),this.$id("@full_preview").removeClass("hidden"),this.$id("@code_area").val(this.full_answer_code)):(this.$id("@truncated_preview").removeClass("hidden"),this.$id("@full_preview").addClass("hidden"),this.$id("@code_area").val(this.truncated_answer_code))}}),t.AnswerEmbedAnswer=n.extend({onLoad:function(){this.embedly&&(r(this.$id("@question_text").get(0),{lineHeight:"24",lines:3}),r(this.$id("@answer_header").get(0),{lines:1}))}})},"./app/view/empty_states.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./unified_view/button/base.js").ButtonBase;t.AddTopicsButton=s.extend({onPressed:function(e){var t=this;t._super.apply(this,arguments),e.preventDefault(),t.emitEvent({type:o.Types.A2A_MODAL_ADD_TOPIC_FILTER,payload:{}})}}),t.A2ANoTopics=n.extend({onLoad:function(){var e=this;e.$id("@button").on("click",function(t){t.preventDefault(),e.emitEvent({type:o.Types.A2A_MODAL_ADD_TOPIC_FILTER,payload:{}})})}})},"./app/view/error.js":function(e,t,i){var n=i("./webnode2.js"),o=i("./shared/core/component.js").Component,s=i("./shared/w2.context.js").CaptchaInput;t.CaptchaForm=o.extend({contextConstructor:function(){return s},onLoad:function(){n.Error.shown=!0,n.Error.hide();var e=this;e.captchaContext=e.getContext(s),e.captchaContext.on("isCaptchaFilled",function(t,i){if(i){var n=e.captchaContext.get("captchaResponse");e.serverCall("verify_captcha").kwargs({captcha_response:n}).success(function(e){e.response&&window.location.reload(!0)}).send()}})}})},"./app/view/feed.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/core/component.js").Component,s=i("./view/fixable2.js"),a=i("./truncate.js").truncate,r=i("./shared/events/index.js"),d=i("./shared/action_log.js").ActionableComponent,l=i("./unified_view/question/ask_multi_modal.js").AskMultiModal,c=i("./shared/window_manager.js");t.FeedMain=i("./app/view/home.js").HomeMain.extend({onLoad:function(){this._super.apply(this,arguments);var e=this,t=this.$id("@left_col_inner"),i=this.$id("@left_col");n("body").hasClass("messages_redirect")&&e.createModal("load_messages_modal").kwargs({previous_url:c.getURL(),previous_title:c.getTitle()}).webOnlyOptions({closeOnBackgroundClick:!1}).show(),e.notifBanner||i.length>0&&t.length>0&&s.makeFixable(t,{min_height:i.outerHeight()+i.offset().top,min_width:990})}}),t.ExpandableLink=o.extend({onLoad:function(){var e=this;this.$id("@show").click(function(){return e.$id("@inner_tree").removeClass("hidden"),e.$id("@show").addClass("hidden"),!1}),this.$id("@hide").click(function(){return e.$id("@inner_tree").addClass("hidden"),e.$id("@show").removeClass("hidden"),!1})}}),t.ContentPageFeedStoryItemBase=o.extend({onLoad:function(){var e=this;this.$id("@item .truncated_q_text a.more_link").html("").removeClass("more_link").removeAttr("id").addClass("read_more").attr("href",this.target_url),this.$id("@item a.lil_button.rate_up").removeAttr("id").attr("href",this.target_url),this.$id("@item .answer_content").css({cursor:"pointer"}),this.$id("@item_overlay").mousedown(function(){return e.serverCall("on_item_click").send(),!1})}}),t.ProfileFeedStoryItem=o.extend({onLoad:function(){var e=this;e.questionFeedbackLoaded=!1,e.answerFeedbackLoaded=!1,this.handleEvent(r.Types.ANSWER_VOTE_STATE,function(t){if(t.payload.aid==e.aid){"downvoted"==t.payload.state?e.showAnswerDownvoteFeedback():e.hideDownvoteFeedback("answer")}}),e.handleEvent(r.Types.QUESTION_VOTE_STATE,function(t){t.payload.qid==e.qid&&("downvoted"==t.payload.state?e.showQuestionDownvoteFeedback():e.hideDownvoteFeedback("question"))}),e.handleEvent(r.Types.QUESTION_CANT_ANSWER_STATE,function(t){if(t.payload.qid==e.qid){var i="passed"==t.payload.state;e.$id("@item").toggleClass("cant_answer",i)}})},scrollFeedbackToViewport:function(){var e=this.$id("@feed_item").offset().top;n(window).scrollTop()>e&&n("html, body").animate({scrollTop:e-80},1e3)},showAnswerDownvoteFeedback:function(){var e=this;e.scrollFeedbackToViewport(),e.$id("@feed_item").addClass("hidden"),e.$id("@answer_feedback").removeClass("hidden"),!1===e.answerFeedbackLoaded&&e.serverCall("load_downvote_feedback").kwargs({feedback_type:"answer"}).contentFor(e.$id("@answer_feedback")).success(function(){e.answerFeedbackLoaded=!0}).send()},showQuestionDownvoteFeedback:function(){var e=this;e.scrollFeedbackToViewport(),e.$id("@feed_item").addClass("hidden"),e.$id("@question_feedback").removeClass("hidden"),!1===e.questionFeedbackLoaded&&e.serverCall("load_downvote_feedback").kwargs({feedback_type:"question"}).contentFor(e.$id("@question_feedback")).success(function(){e.questionFeedbackLoaded=!0}).send()},hideDownvoteFeedback:function(e){this.$id("@feed_item").removeClass("hidden"),"question"==e?this.$id("@question_feedback").addClass("hidden"):"answer"==e&&this.$id("@answer_feedback").addClass("hidden")},getHash:function(){return this.hash}}),t.FeedBottomIndicator=o.extend({onLoad:function(){var e=this;this.$id("@feed_bottom").click(function(){e.parent().onFeedBottomIndicatorClicked()})}}),t.AMASuggestionCard=d.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.is_group_ama?a(e.$id("@ama_suggestion_card .group_name").get(0),{lines:1}):(a(e.$id("@ama_suggestion_card .name").get(0),{lines:1}),a(e.$id("@ama_suggestion_card .sig").get(0),{lines:2}))}}),t.AMASelfServeSuggestionCard=d.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@ama_suggestion_card").on("click",function(){return l.open(e,"ask_user",{host_uid:e.host_uid,page_type:e.page_type,source_window_id:e.source_window_id}),!1})}}),t.QuestionAnswerVerboseDesktop=o.extend({onLoad:function(){var e=this;e.handleEvent(r.Types.FEED_ANSWER_INLINE_EXPAND,function(t){if(t.payload.aid==e.aid){var i=e.$id("@content");i.addClass("expanded_feed_content"),i.addClass("expanded_q_text")}})}})},"./app/view/feed/ama.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.AMAListItem=n.extend({onLoad:function(){var e=this;e.$id("@item_button").click(function(){e.is_following||e.serverCall("show_pmsg").liveMutate().send(),e.is_following=!e.is_following})}})},"./app/view/feed/answer.js":function(e,t,i){var n=i("./app/view/feed/question.js"),o=i("./shared/core/component.js").Component;t.EditableQuestionAnswerStory=n.QuestionStoryEditable.extend({getEditor:function(){return this.$id("@question_answer_story_editable")},getStory:function(){return this.$id("@answer_story")}}),t.AnswerWithActionBar=o.extend({onLoad:function(){var e=this;e.$id("@answer_story").on("click",function(){e.$id("@action_bar_truncated").addClass("hidden"),e.$id("@action_bar_expanded").removeClass("hidden")})}})},"./app/view/feed/question.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./shared/util.js").firstScrollingParent,a=i("./shared/jquery.js");t.QuestionStoryEditable=n.extend({onLoad:function(){this.$editorElem=this.getEditor(),this.$storyElem=this.getStory();var e=this;this.handleEvent(o.Types.QUESTION_EDITING_STATE,function(t){t.payload.qid==e.qid&&("edit"==t.payload.state?e.openEditor():"request"==t.payload.state?e.closeEditor():"cancel"==t.payload.state&&e.closeEditor())}),this.editor_fetched=!1},getEditor:function(){return this.$id("@question_story_editable")},getStory:function(){return this.$id("@question_story")},loadEditor:function(){this.editor_fetched=!0,this.serverCall("load_editor").contentFor(this.$editorElem).send()},openEditor:function(){var e=s(this.$storyElem.get(0));e!==document.body&&a(e).scrollTop(0),this.$storyElem.addClass("hidden"),this.$editorElem.removeClass("hidden"),this.editor_fetched||this.loadEditor()},closeEditor:function(){this.$editorElem.addClass("hidden"),this.$storyElem.removeClass("hidden")}}),t.QuestionStoryEditableToggled=n.extend({onLoad:function(){this.$id("@feed_question_update").on("click",this.updateQuestion.bind(this)),this.$id("@feed_question_cancel").on("click",this.closeEditor.bind(this))},updateQuestion:function(){this.emitEvent({type:o.Types.QUESTION_EDITING_STATE,payload:{qid:this.qid,state:"request"}})},closeEditor:function(){this.emitEvent({type:o.Types.QUESTION_EDITING_STATE,payload:{qid:this.qid,state:"cancel"}})}})},"./app/view/funnel.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.FunnelState=n.extend({onLoad:function(){var e=this;e.$id("@show_unstarted").click(function(){e.$id("@unstarted").show(),e.$id("@show_unstarted").hide()}),e.$id("@refresh").click(function(){window.location.reload()})}}),t.ResetFunnelLink=n.extend({onLoad:function(){var e=this;e.$id("@reset").click(function(){e.serverCall("reset_funnel").success(function(){window.location.reload()}).send()})}}),t.ActivateFunnelLink=n.extend({onLoad:function(){var e=this;e.$id("@activate").click(function(){e.serverCall("activate_funnel").liveMutate().send()})}})},"./app/view/google_.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.GoogleConnectCallbackPage=n.extend({onLoad:function(){window.close()}})},"./app/view/growl.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=!1;t.GrowlBase=n.extend({onLoad:function(e){var t=this;if(this.growl=this.$id("@growl"),t.age_sec<(e?1.5:15)){var i=!e||t.delay_sec;t.showAfter(t.delay_sec,i),t.hideAfter(t.visible_sec+t.delay_sec),document.hasFocus()||o(window).one("focus",function(){s&&(clearTimeout(t.hideTimer),t.hideAfter(t.visible_sec))})}this.growl.mouseover(function(e){t.growl.hasClass("fade_out")||(clearTimeout(t.hideTimer),t.growl.removeClass("fade_out"),t.customMouseOver())}),this.growl.mouseout(function(e){t.hideAfter(1)})},showAfter:function(e,t){var i=this;i.showTimer=setTimeout(function(){i.show(t)},1e3*e)},show:function(e){var t=this;s&&(e=!1),s=!0,e&&this.growl.addClass("fade_in"),this.growl.removeClass("fade_out").removeClass("hidden"),e&&setTimeout(function(){t.growl.removeClass("fade_in")},200)},hideAfter:function(e){this.hideTimer=setTimeout(this.hide.bind(this),1e3*e)},hide:function(){var e=this;this.growl.addClass("fade_out"),setTimeout(function(){e.growl.hasClass("fade_out")&&(e.growl.addClass("hidden").removeClass("fade_out"),s=!1)},1250)},customMouseOver:function(){}})},"./app/view/home.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./unified_view/toggle.js"),a=i("./shared/events/index.js"),r=i("./shared/viewport.js"),d=i("./shared/window_manager.js"),l=i("./shared/log_sender.js");t.HomeMain=n.extend({onLoad:function(){}}),t.HomeFeed=n.extend({onLoad:function(){var e=this,t=d.getURL();-1==t.indexOf("?qp_story=")&&-1==t.indexOf("?digest_story=")&&-1==t.indexOf("?ask_question=")&&-1==t.indexOf("?translate_question")||(d.replaceURL("/"),o("#feed_visibility_wrapper").removeClass("invisible")),this.handleEvent(a.Types.FEED_PAGING_DONE,function(){e.child("home_main_feed").triggerSwitch()})}}),t.ContentPageFeed=s.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments),setTimeout(this.recordImpression.bind(this),0)},recordImpression:function(){r.isElementInViewport(this.$id("@wrapper").get(0))?l.log("funnel_impression",{impression_type:"qp_feed_impression"}):setTimeout(this.recordImpression.bind(this),200)}})},"./app/view/hyperlinks.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/fixable2.js");t.HyperLinksMain=n.extend({onLoad:function(){var e=this,t=this.$id("@left_col_inner"),i=this.$id("@left_col");e.notifBanner||i.length>0&&t.length>0&&o.makeFixable(t,{min_height:i.outerHeight()+i.offset().top,min_width:990})}})},"./app/view/layout.js":function(e,t,i){function n(e,t){a.each(window.YT.players,function(i,n){n.playerId==t&&(n.state=e.data,n.state==window.YT.PlayerState.PLAYING&&n.onReady&&(n.onReady(n),n.onReady=null))}),e.data==window.YT.PlayerState.PLAYING&&o(t)}function o(e){window.YT&&window.YT.players&&a.each(window.YT.players,function(t,i){i.playerId!=e&&i.player&&a("#"+i.playerId).length&&i.player.pauseVideo()})}var s=i("./shared/core/component.js").Component,a=i("./shared/jquery.js"),r=i("./shared/youtube.js"),d=i("./w2.livenode.js"),l=i("./shared/window_manager.js"),c=i("./view/livenode.js").addContentPadding,u=i("./shared/keystrokes.js"),h=i("./shared/keyboard_event_handler.js"),p=i("./shared/events/index.js"),f=i("./shared/dom.js");t.QTextImageEnlarger=s.extend({onLoad:function(){var e=this;f.onDocClick(function(t){var i=a(t);if(i.is(".qtext_image, .ui_qtext_image"))return void e.openModal(t);if(i.is(".photo_modal_bg, .photo_modal_close"))for(var n in e.masters)e.hideModal(e.masters[n]);else;})},getContainer:function(e,t){var i=this;return i.masters={},i.masters[e]||(i.masters[e]=a("<div>").addClass("photo_modal_container").append(a("<div>").addClass("photo_modal_bg")).append(a("<div>").addClass("photo_modal_close")).append(a("<img>").addClass("photo_modal_img").attr("src",e)).append(a("<img>").addClass("photo_modal_img_large").attr("src",t)))},openModal:function(e){function t(){S&&E&&(_.find(".photo_modal_img_large").css("visibility","visible"),_.find(".photo_modal_img").css("visibility","hidden"))}var i=this,n=a(e),o=n.attr("src"),s=n.attr("master_src"),r=n.hasClass("zoomable_in"),d=n.parents(".truncated_q_text").length>0,l=d;if(r&&s&&!l){var c=parseInt(n.attr("master_w")),u=parseInt(n.attr("master_h")),p=a(window).width(),f=a(window).height(),_=i.getContainer(o,s),m=!1;u>3*f&&u/c>3&&(m=!0),c>p&&(u*=(p-40)/c,c=p-40),u>f&&(c*=(f-40)/u,u=f-40);var g=n.offset().left,v=n.offset().top-a(window).scrollTop(),w=Math.round((p-n.width())/2-g),b=Math.round((f-n.height())/2-v),y=c/n.width();_.find(".photo_modal_img").css("left",g).css("top",v).css("width",n.width()).css("height",n.height()),m&&_.find(".photo_modal_img").css("visibility","hidden"),_.appendTo("body"),n.css("visibility","hidden");var C=a(document).scrollTop();a("body").css({position:"fixed",width:"100%",top:-C});var k=_.find(".photo_modal_close").outerWidth();m?_.find(".photo_modal_close").css("left",(p+parseInt(n.attr("master_w")))/2-k).css("top",(f-u)/2):_.find(".photo_modal_close").css("left",(p+c)/2-k).css("top",(f-u)/2),i.handler=function(e){27==e.keyCode&&(e.preventDefault(),i.hideModal(_))},h.push(i.handler),setTimeout(function(){_.find(".photo_modal_bg, .photo_modal_close").addClass("active"),m?_.find(".photo_modal_bg").css("height",20+parseInt(n.attr("master_h"))):_.find(".photo_modal_img").css("transform","translate3d("+w+"px,"+b+"px,0) scale("+y+")").css("-moz-transform","translate3d("+w+"px,"+b+"px,0) scale("+y+")").css("-ms-transform","translate3d("+w+"px,"+b+"px,0) scale("+y+")").css("-o-transform","translate3d("+w+"px,"+b+"px,0) scale("+y+")").css("-webkit-transform","translate3d("+w+"px,"+b+"px,0) scale("+y+")")},1);var S=!1,E=!1;setTimeout(function(){E=!0,t()},333),m&&_.css("position","fixed").css("overflow","scroll"),_.find(".photo_modal_img_large").on("load",function(){a(this).css("top",(f-u)/2),m?a(this).css("position","relative").css("left",(p-n.attr("master_w"))/2):a(this).css("left",(p-c)/2).css("width",c).css("height",u),S=!0,t()})}},hideModal:function(e){h.remove(this.handler),e.find(".photo_modal_bg, .photo_modal_close").removeClass("active"),e.find(".photo_modal_img_large").remove(),e.find(".photo_modal_img").css("visibility","visible"),e.find(".photo_modal_img").css("-webkit-transform","translate3d(0,0,0) scale(1)"),e.find(".photo_modal_img").css("-moz-transform","translate3d(0,0,0) scale(1)"),e.find(".photo_modal_img").css("-ms-transform","translate3d(0,0,0) scale(1)"),e.find(".photo_modal_img").css("-o-transform","translate3d(0,0,0) scale(1)"),e.find(".photo_modal_img").css("ms-transform","translate3d(0,0,0) scale(1)"),setTimeout(function(){a(".qtext_image, .ui_qtext_image").css("visibility","visible");var t=a("body")[0].style.top,i=Math.abs(parseInt(t));a("body").css({position:"",width:"",top:""}),i&&a(document).scrollTop(i),e.remove()},333)}}),t.QTextEmbedEnlarger=s.extend({onLoad:function(e){var t=this;e&&f.onDocClick(function(e){var i,n=a(e);n.attr("data-embed")?i=n.attr("data-embed"):(n=n.parent(),i=n&&n.attr("data-embed")),i&&n.hasClass("thumbnail")&&t.loadEmbed(n,i)})},loadEmbed:function(e,t){window.YT||(window.YT={},window.YT.players=[],window.YT.next_id=0);var i=this;r.onInit(function(){if(!window.YT.Player)return void setTimeout(i.loadEmbed.bind(i,e,t),100);if(e.hasClass("thumbnail")){e.append(t).removeClass("thumbnail");var s="YTPlayer-"+window.YT.next_id++;e.find(":first-child").attr("id",s);var a=new window.YT.Player(s,{events:{onStateChange:function(e){return n(e,s)}}});window.YT.players.push({player:a,playerId:s,state:-1}),o(s)}})}}),t.GridGuide=s.extend({onLoad:function(){this.setupKeyboardShortcut()},toggle:function(){this.$id("@grid-guide").is(":visible")?this.$id("@grid-guide").fadeOut(150):this.$id("@grid-guide").fadeIn(150)},setupKeyboardShortcut:function(){u.on([71,82,73,68],this.toggle.bind(this))}}),t.BrowserWarning=s.extend({onLoad:function(){c()}}),t.SwitchAccountNavElement=s.extend({onLoad:function(){var e=this;this.$id("@switch_account_link").click(function(){e.serverCall("switch_account").liveMutate().success(function(){l.reload()}).send()})}}),t.LogoutNavElement=s.extend({onLoad:function(){var e=this;this.$id("@logout_link").click(function(){return e.$id("@logout_form").submit(),d.stopLiveUpdates(),!1})}}),t.Layout=s.extend({onLoad:function(){var e=this;this.FULL_BACKDROP_CLASS="full_back_drop",this.handleEvent(p.Types.LAYOUT_SET_BACKDROP,function(t){e.setFullBackdrop(t.payload)}),a(document).mousedown(function(){e.backDropActive&&e._removeBackDrop()}),h.push(function(t){27===t.keyCode&&(t.preventDefault(),e._removeBackDrop())})},setFullBackdrop:function(e){e.show?this._addBackDrop():this._removeBackDrop()},_addBackDrop:function(){this.$id("@full_body_blur").addClass(this.FULL_BACKDROP_CLASS),this.backDropActive=!0},_removeBackDrop:function(){var e=this,t=this.$id("@full_body_blur");this.backDropActive=!1,f.addAnimationClass(t,"closing",function(){t.removeClass(e.FULL_BACKDROP_CLASS+" closing")})}})},"./app/view/link.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.NewLinkEditor=n.extend({onLoad:function(){var e=this;this.$id("@link_no_image").click(function(){return e.clearAllSelected(),e.setDisplayType("link_no_image"),e.$id("@link_no_image").addClass("selected"),!1}),this.$id("@link_small_image").click(function(){return e.clearAllSelected(),e.setDisplayType("link_small_image"),e.$id("@link_small_image").addClass("selected"),!1}),this.$id("@link_large_image").click(function(){return e.clearAllSelected(),e.setDisplayType("link_large_image"),e.$id("@link_large_image").addClass("selected"),!1}),this.$id("@remove_url").click(function(){return e.parent().removeUrl(),!1})},clearAllSelected:function(){this.$id("@link_no_image").removeClass("selected"),this.$id("@link_small_image").removeClass("selected"),this.$id("@link_large_image").removeClass("selected")},getPreviewLinkInfo:function(){return this.child("preview").getLinkInfo()},setDisplayType:function(e){var t;t="link_no_image"==e?1:"link_small_image"==e?2:3,this.child("preview").setDisplayType(e,t)}}),t.LinkVideo=n.extend({onLoad:function(){var e=this;this.$id("@video_wrapper").click(function(){e.parent().playVideo(),e.$id("@video_wrapper .qtext_embed.thumbnail").css("width","100%").css("height","272px")})}}),t.LinkImageEditor=n.extend({onLoad:function(){var e=this;this.index=0,this.$id("@next_photo").click(function(t){return e.cycle_photo(1),!1}),this.$id("@prev_photo").click(function(t){return e.cycle_photo(e.keys_and_sources.length-1),!1}),this.$id("@link").click(function(){e.serverCall("track").send()})},get_image_keys:function(){if(this.keys_and_sources!={}){for(var e=[],t=this.index,i=0,n=this.keys_and_sources.length;i<n;i++,t=(t+1)%n)e.push(this.keys_and_sources[t][0]);return e}return[]},cycle_photo:function(e){var t=this.index;this.index=(t+e)%this.keys_and_sources.length,this.$id("@img").attr("src",this.keys_and_sources[this.index][1])}}),t.LinkTitle=n.extend({onLoad:function(){var e=this;this.$id("@link").click(function(){e.serverCall("track").send()})},getValue:function(){return this.child("editor").get_value()}}),t.Link=n.extend({getLinkInfo:function(){this.link_info.title=this.child("title").getValue(),this.link_info.snippet=this.child("snippet").child("editor").get_value();var e=this.child("media");return e.editable&&(this.link_info.image_keys=e.get_image_keys()),this.link_info},setDisplayType:function(e,t){this.$id("@link_wrapper").removeClass().addClass(e),this.link_info.display_type=t},playVideo:function(){2==this.link_info.display_type&&(this.$id("@image_col").css("float","left"),this.$id("@info_col").css("float","left"),this.$id("@image_col").css("width","100%"),this.$id("@image_and_info").css("display","block"))}})},"./app/view/linkedin_.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.LinkedinCallbackPage=n.extend({onLoad:function(){if(window.opener){window.opener.require("shared/jquery")(window.opener.document).trigger("linkedin_oauth_approved",this.liUid),window.close()}}})},"./app/view/login.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.LogoutAllSessionsButton=n.extend({onLoad:function(){var e=this;e.$id("@logout").click(function(t){return e.serverCall("logout_all_sessions").liveMutate().send(),!1})}})},"./app/view/manage.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/dom.js"),s=i("./shared/jquery.js"),a=i("./view/modal.js").Base,r=i("./shared/events/index.js");t.FeedControlModal=a.extend({onLoad:function(){var e=this;e._super.apply(this,arguments);var t=e.$id("@organize"),i=e.$id("@discover"),n=s("#__w2_modal_overlay_"),o=e.child("feed_control_container").$id("@organize"),a=e.child("feed_control_container").$id("@discover");t.click(function(){t.addClass("selected"),o.removeClass("hidden"),i.removeClass("selected"),a.addClass("hidden")}),i.click(function(){i.addClass("selected"),a.removeClass("hidden"),t.removeClass("selected"),o.addClass("hidden")}),n.on("mousedown",function(t){t.target!=this||e._isScrollBarClicked(t)||e.maybeRefreshFeed()}),e.serverCall("maybe_complete_zapdos").send(),this._updatedItems={},this.handleEvent(r.Types.FEED_CONTROL_UPDATE,function(t){var i=t.payload.contentRowCid;e._updatedItems[i]?delete e._updatedItems[i]:e._updatedItems[i]=!0})},_isScrollBarClicked:function(e){var t=o.getScrollbarWidth();return window.innerWidth-e.clientX<t},onClose:function(){this.maybeTriggerRefreshFeedButton()},onSubmit:function(){this.maybeTriggerRefreshFeedButton()},onCancel:function(){this.maybeTriggerRefreshFeedButton()},maybeTriggerRefreshFeedButton:function(){this._closeModal()},refreshFeed:function(){var e=this,t=s("#feed_control_update_feed_screen"),i=5500;t.removeClass("hidden"),e.serverCall("refresh_feed").success(function(){setTimeout(t.addClass("hidden"),i)}).error(function(){setTimeout(t.addClass("hidden"),i)}).liveMutate().send()}}),t.FeedControlModalLink=n.extend({onLoad:function(){var e=this;this.$id("@create_modal_link").on("click",function(){return e.createModal("load_inner").kwargs({default_tab:e.default_tab}).webOnlyOptions({closeOnBackgroundClick:!1}).show(),!1})}}),t.FeedControlContent=n.extend({onLoad:function(){var e=this;e.feed_control_contents={};for(var t in e.content_ids){var i=e.content_ids[t],n="@"+i;e.feed_control_contents[i]={js_id:n,scroll_position:0}}for(var o in e.feed_control_contents){var s=e.feed_control_contents[o],a=e._createOnLinkClicked(o);e.child("filter_section").$id(s.js_id).click(a.bind(this))}},_createOnLinkClicked:function(e){var t=this;return function(){var i=t.feed_control_contents[t.active_id],n=t.child("filter_section").$id(i.js_id),o=t.$id(i.js_id);i.scroll_position=o.parent().scrollTop(),n.removeClass("selected"),o.addClass("hidden");var s=t.feed_control_contents[e],a=t.child("filter_section").$id(s.js_id),r=t.$id(s.js_id);a.addClass("selected"),r.removeClass("hidden"),r.parent().scrollTop(s.scroll_position),t.active_id=e}}}),t.FeedControlContentRow=n.extend({onLoad:function(){var e=this;this.$id("@item_button").on("click",function(){e.emitEvent({type:r.Types.FEED_CONTROL_UPDATE,payload:{contentRowCid:e.cid}})})}}),t.FeedControlsPopover=n.extend({hide:function(){this.$id("@popover").addClass("hidden")}}),t.DismissFeedControlsPopoverLink=n.extend({onLoad:function(){var e=this;this.$id("@dismiss_link").on("click",function(){e.parent().hide()})}}),t.DiscoverInlineFeedCallToAction=n.extend({onLoad:function(){var e=this;e.serverCall("log_impression").send(),this.$id("@dismiss_link").on("click",function(){e.serverCall("dismiss").send(),e.$id("@main_card").addClass("hidden")})}})},"./app/view/messages.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./view/modal.js").Base,a=i("./view/modal.js"),r=i("./w2.modal.js"),d=i("./shared/viewport.js"),l=i("./shared/events/index.js"),c=i("./third_party/autosize.js"),u=i("./view/selector.js").Selector,h=i("./shared/window_manager.js");t.MessagesMain=n.extend({onLoad:function(){var e=this;e.resizeMessages(),o(window).resize(e.resizeMessages.bind(e)),setTimeout(function(){e.show_old_anon_content_email_modal&&e.createModal("load_inner").show()},20)},resizeMessages:function(){var e=this.$id("@threads"),t=o(window).height(),i=e.offset().top;e.height(t-i)}}),t.ComposeMessageModalLink=n.extend({onLoad:function(){var e=this;this.$id("@create_modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({to_uid:e.to_uid}).webOnlyOptions({closeOnBackgroundClick:!1}).show()})}}),t.ComposeMessageModal=s.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.$id("@change_person").on("click",function(t){e.change(),t.preventDefault()}),this.load()},load:function(){this.object_id&&this.setTo(this.object_id)},getData:function(){return this.$id("@compose_message_to_uid").val()&&(this.object_id=this.$id("@compose_message_to_uid").val()),!(!this.object_id||this.child("editor").isOnlyWhiteSpace())&&{to_uid:this.object_id,msg:this.child("editor").serialize()}},onSubmit:function(){if(!this.submitDisabled){var e=this,t=e.getData();!1!==t&&this.serverCall("submit_message").kwargs(t).success(function(){e._closeModal()}).send()}},change:function(){this.child("people_selector").setQuery(""),this.$id("@pick_people").removeClass("hidden"),this.$id("@picked_person").addClass("hidden"),this.$id("@to_name").html(""),this.child("people_selector").focus(),this.disableSubmit()},setTo:function(e){isNaN(parseInt(e))||(this.$id("@pick_people").addClass("hidden"),this.$id("@picked_person").removeClass("hidden"),this.$id("@compose_message_to_uid").val(e),this.getName(e),this.enableSubmit())},getName:function(e){var t=this;this.serverCall("get_name").kwargs({to_uid:e}).contentFor(this.$id("@to_name")).success(function(){t.child("editor").focus()}).send()}}),t.HideMessagesModalLink=n.extend({onLoad:function(){var e=this;this.$id("@create_dialog_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({thread_id:e.thread_id}).show()})}}),t.HideMessagesModal=s.extend({onSubmit:function(){if(!this.submitDisabled){var e=this;this.serverCall("hide_thread").liveMutate().success(function(){e._closeModal(),h.navigateTo("/messages")}).send()}}}),t.MarkUnreadModalLink=n.extend({onLoad:function(){var e=this;this.$id("@create_dialog_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({thread_id:e.thread_id}).show()})}}),t.MarkUnreadModal=s.extend({onSubmit:function(){if(!this.submitDisabled){var e=this;this.serverCall("mark_thread_as_unread").liveMutate().success(function(){e._closeModal(),h.navigateTo("/messages")}).send()}}}),t.ModalMessagesThreadItem=n.extend({onLoad:function(){var e=this,t=0;e.$id("@item").on("click",function(i){i.preventDefault(),t=o(this).attr("name"),e.$id("@unread_icon").addClass("hidden"),e.emitEvent({type:l.Types.MESSAGE_THREAD_CLICKED,payload:{threadId:t},scope:l.scope.GLOBAL})})}}),t.ModalMessageRecipientSelector=u.extend({onResultWasSelected:function(e){this._onResultWasSelected=e},resultWasSelected:function(e){this.setQuery(""),this.$input.blur(),this._onResultWasSelected&&this._onResultWasSelected(e.data.uid)}}),t.MessagesModalBase=a.MultiStep.extend({getCallBacks:function(){var e=this,t=0;return{MessagesModalThreadList:{isLastStep:!1,closeOnBackgroundClick:!1,init:function(){window.history.pushState(null,"","/messages"),document.title=e.page_title,e.handleEvent(l.Types.MESSAGE_THREAD_CLICKED,function(i){t=i.payload.threadId,e._loadNext()}),e.$id("@submit_button").on("click",function(t){t.preventDefault(),e._loadNext()}),e.$id("@show_unread_only").on("click",function(t){t.preventDefault(),e.$id("@show_unread_only").addClass("hidden")})},getStepData:function(){return{threadId:t,previous_url:e.previous_url,previous_title:e.previous_title}}},MessagesModalThreadDetail:{isLastStep:!0,closeOnBackgroundClick:!1,init:function(){e.threadId=e.$id("@thread_id").val(),window.history.pushState(null,"","/messages/thread/"+e.threadId),o(window).on("popstate",function(t){t.preventDefault(),e.onBack()}),o(".thread_list a").attr("target","_blank"),e.scrollMessageThreadToHeight(),e.$id("@thread").on("DOMNodeInserted",function(t){t.preventDefault();var i=t.target;(o(i).children().children().is(".ModalThreadGroupMessage")||o(i).children().children().is(".ModalThreadSingleMessage"))&&setTimeout(function(){e.scrollMessageThreadToHeight()},10)}),o(".message_textarea").attr("rows","1"),c(o(".message_textarea"))},getStepData:function(){return{previous_url:e.previous_url,previous_title:e.previous_title}}},MessagesModalComposer:{closeOnBackgroundClick:!1,init:function(){window.history.pushState(null,"","/messages/new"),o(window).on("popstate",function(t){t.preventDefault(),e.onBack()}),e.$id("@change_person").on("click",function(t){e.change(),t.preventDefault()}),e.$id("@footer_back_button").on("click",function(){e.onBack()}),o(".modal_message_recipient_selector").focus(),e.load()},getStepData:function(){return{to_uid:e.$id("@compose_message_to_uid").val(),previous_url:e.previous_url,previous_title:e.previous_title}}}}},scrollMessageThreadToHeight:function(e){e=e||0;var t=this.$id("@thread")[0].scrollHeight-e;o(".modal_body").scrollTop(t)},load:function(){var e=this;this.to_uid&&this.setTo(this.to_uid),this.child("people_selector").onResultWasSelected(function(t){e.resultWasSelected(t)})},getData:function(){return this.$id("@compose_message_to_uid").val()&&(this.to_uid=this.$id("@compose_message_to_uid").val()),!(!this.to_uid||""==this.$id("@message_editor").val())&&{to_uid:this.to_uid,msg:this.$id("@message_editor").val()}},onSubmit:function(){if(!this.submitDisabled){var e=this,t=e.getData();!1!==t&&this.serverCall("submit_message").kwargs(t).success(function(){e._loadNext()}).send()}},change:function(){this.child("people_selector").setQuery(""),this.$id("@pick_people").removeClass("hidden"),this.$id("@picked_person").addClass("hidden"),this.$id("@to_name").html(""),this.child("people_selector").focus(),this.disableSubmit()},resultWasSelected:function(e){this.setTo(e)},setTo:function(e){isNaN(parseInt(e))||(this.$id("@pick_people").addClass("hidden"),this.$id("@picked_person").removeClass("hidden"),this.$id("@compose_message_to_uid").val(e),this.getName(e))},getName:function(e){var t=this;this.serverCall("get_name").kwargs({to_uid:e}).contentFor(this.$id("@to_name")).success(function(){t.$id("@message_editor").focus()}).send()},onClose:function(){this._maybeRestorePreviousURLAndTitle(),this._closeModal()},onCancel:function(){this._maybeRestorePreviousURLAndTitle(),this._closeModal()},_maybeRestorePreviousURLAndTitle:function(){var e=this.previous_url||"/",t=this.previous_title||"Home - Quora";window.history.pushState(null,"",e),document.title=t},_closeModal:function(){r.Modal.modalFor(this).executeOnCloseCallBack(),this._super.apply(this,arguments),d.setPageScroll(!0)}})},"./app/view/moderation/appeal.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./view/modal.js").Base;t.AppealLink=n.extend({onLoad:function(){var e=this;this.$id("@show_appeal_modal").click(function(){return e.showAppealModal(),!1})},showAppealModal:function(){this.createModal("appeal_modal").kwargs({oid:this.oid,transition_id:this.transition_id,should_indicate_update:this.should_indicate_update}).show()}}),t.AppealModal=s.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@submit_button").addClass("submit_button_disabled");var e=this.$id("@policy_checkbox"),t=this;e.click(function(e){e.currentTarget.checked?(t.$id("@appeal_details").removeClass("hidden"),t.should_indicate_update||t.$id("@submit_button").removeClass("submit_button_disabled")):(t.$id("@appeal_details").addClass("hidden"),t.$id("@submit_button").addClass("submit_button_disabled"))}),t.$id("@appeal_type").change(function(){t.$id("@submit_button").removeClass("submit_button_disabled")});var i=this.$id("@answer_tag_details_link"),n=this.$id("@answer_tag_details_content");i.click(function(e){n.hasClass("hidden")?(n.removeClass("hidden"),i.text(t.collapse_details)):(n.addClass("hidden"),i.text(t.show_details))})},onSubmit:function(){this.appeal()},appeal:function(){var e=this.child("appeal_comment").serialize(),t=o("input:radio:checked").val(),i={comment:e,appeal_type:t};this.serverCall("send_appeal").liveMutate().kwargs(i).success(this._closeModal()).send()}})},"./app/view/moderation/flag.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./view/modal.js").Base,a=i("./shared/events/index.js"),r=i("./shared/window_manager.js");t.AddModerationFlag=n.extend({onLoad:function(){var e=this;e.$id("@show_flag_dialog").on("click",function(t){e.in_menu||(t.preventDefault(),t.stopPropagation()),e.one_click_report?e.serverCall("one_click_report").liveMutate().send():e.showFlagDialog()})},showFlagDialog:function(){this.createModal("flag_modal").kwargs({targets:this.targets}).show()}}),t.AddFlagModal=s.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.$id("@show_more_reasons a").click(function(){return e.$id("@show_more_reasons").toggleClass("hidden"),e.$id("@more_reasons").toggleClass("hidden"),!1}),this.$id("@report_row").on("click","input.flag_input",function(t){e.$id("@report").prop("disabled",!1).removeClass("submit_button_disabled"),e.$id("@comment").removeClass("hidden"),e.child("comment").focus(),e.$id("@required_comment_warning").addClass("hidden"),e.$id("@required_report_reason_warning").addClass("hidden");var i=parseInt(o(t.target).eq(0).val(),10),n=parseInt(e.other_reason_id,10),s=parseInt(e.factually_incorrect_reason_id,10);i==n||i==s?e.$id("@optional_label").addClass("hidden"):e.$id("@optional_label").removeClass("hidden")})},onSubmit:function(){this.report()},report:function(){var e=this,t={flag_reason:this.getFlagReason(),comment:this.child("comment").serialize()};this.flag_info=t;var i=t.flag_reason==this.other_reason_id||t.flag_reason==this.factually_incorrect_reason_id;t.flag_reason?i&&this.child("comment").isOnlyWhiteSpace()?this.$id("@required_comment_warning").removeClass("hidden"):null!==t.flag_reason&&this.serverCall("flag_object").kwargs(t).liveMutate().success(function(t){e._closeModal(),t&&"/"==t[0]?r.navigateTo(t):e.shouldAddDownvote()&&e.addDownvote();var i="report",n=e.targets[0];"answer"===n.type?e.emitEvent(a.helpers.feedNegativeFeedback(n.aid,e.message,i,n.aid)):"question"===n.type?e.emitEvent(a.helpers.feedNegativeFeedback(n.qid,e.message,i,n.qid)):"hyperlink"===n.type?e.emitEvent(a.helpers.feedNegativeFeedback(n.link_id,e.message,i,n.link_id)):"board_item"===n.type&&e.emitEvent(a.helpers.feedNegativeFeedback(n.board_item_id,e.message,i,n.board_item_id))}).send():this.$id("@required_report_reason_warning").removeClass("hidden")},shouldAddDownvote:function(){for(var e=0;e<this.skip_downvote_flag_reason_ids.length;++e)if(this.flag_info.flag_reason==this.skip_downvote_flag_reason_ids[e])return!1;return!0},addDownvote:function(){var e=this.targets[0];"answer"===e.type?this.emitEvent(a.helpers.addAnswerDownvote(e.aid)):"question"===e.type&&this.emitEvent(a.helpers.addQuestionDownvote(e.qid))},getFlagReason:function(){return this.$id("@report_row input.flag_input").filter(":checked").val()}}),t.NeedsImprovementButton=n.extend({onLoad:function(){var e=this;e.$id("@add_ni_button").on("click",function(){e.serverCall("add_topic").kwargs({}).liveMutate().send()})}}),t.DismissLink=n.extend({onLoad:function(){var e=this;this.$id("@dismiss").click(function(t){e.dismiss(),t.preventDefault()})},dismiss:function(){this.serverCall("dismiss").liveMutate().send()}}),t.TargetAndReports=n.extend({onLoad:function(){var e=this;this.$id("@toggle").click(function(t){e.toggleComments(),t.preventDefault()})},toggleComments:function(){this.$id("@reports").toggleClass("hidden")}}),t.LockLink=n.extend({onLoad:function(){var e=this;e.$id("@lock_link").click(function(t){return t.preventDefault(),o(this).hasClass("unlocked")?(e.serverCall("lock_answer").liveMutate().send(),o(this).removeClass("unlocked")):(e.serverCall("unlock_answer").liveMutate().send(),o(this).addClass("unlocked")),!1})}})},"./app/view/navigation.js":function(e,t,i){var n=i("./view/editable_list.js").EditableList,o=i("./shared/core/component.js").Component,s=i("./view/fixable2.js");t.SettingsMain=o.extend({onLoad:function(){var e=this.$id("@left_col_inner"),t=this.$id("@left_col");t.length>0&&e.length>0&&s.makeFixable(e,{min_height:t.outerHeight()+t.offset().top,min_width:990})}}),t.SettingsNavListContents=n.extend({onLoad:function(){this._super.apply(this,arguments)}})},"./app/view/network/selector.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./view/selector.js").Selector;t.InvitePeopleSelector=o.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$input.focus(),e.$id("@clear").on("click",function(){e.setQuery("")})},resultWasSelected:function(e){this.emitEvent({type:n.Types.NETWORK_INVITE_USER,payload:{uid:e.data.uid,email:e.data.email}})},queryDidChange:function(){var e=this;e.$input.val().length>0?e.$id("@clear").removeClass("hidden"):e.$id("@clear").addClass("hidden")}})},"./app/view/notifications.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/fixable2.js"),s=i("./shared/events/index.js"),a=i("./shared/jquery.js");t.NotificationsMain=n.extend({onLoad:function(){o.makeFixable(this.$id("@notifs_nav"),{min_width:990})}}),t.NotificationsClearButton=n.extend({onLoad:function(){var e=this;this.$id("@clear").on("click",function(t){t.preventDefault();var i=a(".js_notif_dropdown .js_notif_item").length;e.serverCall("mark_as_seen").liveMutate().kwargs({limit:i}).success(function(e){e||s.DocumentProxy.dispatch({type:s.Types.NOTIFS_HIDE_DROPDOWN,payload:{}})}).send()})}}),t.MarkAllAsReadLink=n.extend({onLoad:function(){this.$id("@link").on("click",this.markAllRead.bind(this))},markAllRead:function(e){e.preventDefault(),this.emitEvent({type:s.Types.NOTIFS_MARK_ALL_READ,payload:{},scope:s.scope.GLOBAL}),this.$id("@wrapper").toggleClass("hidden"),this.serverCall("request").liveMutate().send()}})},"./app/view/notifications/base.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/events/index.js"),s=i("./shared/action_log.js").ActionableComponent;t.NotifBase=s.extend({onLoad:function(){this._super.apply(this,arguments),this.handleEvent(o.Types.NOTIFS_MARK_ALL_READ,this.removeUnseen.bind(this));var e=this;this.$id("@bad_notif").on("click",function(t){e.markAsIrrelevant()}),this.$id("@notif a").on("click",function(t){"#"==n(this).attr("href")&&t.preventDefault(),e.$id("@notif").hasClass("unseen")&&e.markAsSeen()}),this.actionBar&&this.$id("@content_toggle").on("click",function(t){t.preventDefault(),e.$id("@notif_content").removeClass("hidden"),e.$id("@content_toggle").addClass("hidden")})},removeUnseen:function(){this.$id("@notif").removeClass("unseen").addClass("seen")},markAsSeen:function(){var e=this;this.removeUnseen(),this.serverCall("mark_as_seen").success(function(t){t||e.emitEvent({type:o.Types.NOTIFS_HIDE_DROPDOWN,payload:{}})}).send()},removeMarkAsIrrelevant:function(){this.$id("@bad_notif").addClass("hidden")},markAsIrrelevant:function(e){this.removeMarkAsIrrelevant(),this.serverCall("mark_as_irrelevant").liveMutate().send()}})},"./app/view/notifications/header.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/window_manager.js");t.TitleNotificationsCount=n.extend({onLoad:function(e){e||this.setTitle()},setTitle:function(){var e=o.getTitle(),t=e,i="";(this.notif_count||this.inbox_count)&&(i+="(",this.notif_count&&(i+=this.notif_count),this.inbox_count&&(i+="/"+this.inbox_count),i+=") "),t=e.replace(/^\(((\d+)?\/)?\d+\) |/,i),e!=t&&o.setTitle(t)}})},"./app/view/nux.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.HeaderProgressBar=n.extend({onLoad:function(){this.$id("@progress_bar").css({width:this.getWidth()});var e=this;this.handleEvent(o.Types.NUX_PROGRESS_BAR_STEP,function(t){var i=t.payload.step||this.curr;e.update(i)})},getWidth:function(){var e=this.$id("@progress_bar_wrapper"),t=parseInt(e.css("min-width"),10),i=parseInt(e.css("width"),10),n=this.curr/this.total*i;return Math.min(i,Math.max(n,t))},update:function(e){this.curr=e,this.$id("@progress_bar").animate({width:this.getWidth()})}}),t.HeaderProgressBarBeacon=n.extend({onLoad:function(){this.emitEvent({type:o.Types.NUX_PROGRESS_BAR_STEP,payload:{step:this.curr}})}})},"./app/view/nux/dialog.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/events/index.js"),a=i("./w2.dialog.js").Dialog,r=i("./shared/viewport.js"),d=i("./shared/log_sender.js"),l=i("./shared/window_manager.js"),c=i("./shared/datetime.js");t.ModalNuxDialogCloseIndicator=n.extend({onLoad:function(){this.emitEvent({type:s.Types.NUX_DIALOG_CLOSE,payload:{}})}}),t.ModalNuxDialog=n.extend({onLoad:function(e){this.lastStep=null,r.setPageScroll(!1);var t=this;this.handleEvent(s.Types.NUX_DIALOG_CLOSE,function(e){e.payload.no_hide||t.hide()}),this.handleEvent(s.Types.NUX_FEED_REFRESH,function(e){t.$id("@background").hide()}),e&&d.log("nux_dialog_impression",{}),o(window).height()<600&&o(".dialog .dialog_wrapper").css("position","static")},hide:function(){this.$id("@modal_nux_wrapper").hide(),r.setPageScroll(!0)}}),t.InternalModalNuxDialogRenderer=t.ModalNuxDialog.extend({onLoad:function(e){var t=this;this.curr_step=this.step_num,o("body").keydown(function(e){37==e.keyCode&&t.curr_step>0?t.changeStep(t.curr_step,--t.curr_step):39==e.keyCode&&t.curr_step<t.num_steps-1&&t.changeStep(t.curr_step,++t.curr_step)}),this.$id("@modal_nux_wrapper .step_name").click(function(){if(!o(this).hasClass("curr_step")){var e=parseInt(o(this).attr("id"));t.changeStep(t.curr_step,e),t.curr_step=e}})},changeStep:function(e,t){this.$id("@modal_nux_wrapper .dialog_wrapper.step_"+e).parent().addClass("hidden"),this.$id("@modal_nux_wrapper .step_name.step_name_"+e).removeClass("curr_step"),this.$id("@modal_nux_wrapper .dialog_wrapper.step_"+t).parent().removeClass("hidden"),this.$id("@modal_nux_wrapper .step_name.step_name_"+t).addClass("curr_step")}}),t.NuxDialogStep=n.extend({onLoad:function(){this.serverCall("record_step").kwargs({step_name:this.step_name+"_impr"}).send(),this.handleEvent(s.Types.NUX_DIALOG_SKIP_NEXT_STEP,this.skipNextStep.bind(this)),this.handleEvent(s.Types.NUX_DIALOG_NEXT_STEP,this.gotoNextStep.bind(this)),this.handleEvent(s.Types.NUX_DIALOG_STANDALONE_DONE,this.standaloneRefreshFeed.bind(this))},gotoStep:function(e){this.emitEvent({type:s.Types.NUX_PROGRESS_BAR_STEP,payload:{step:e}}),this.serverCall("goto_step").kwargs({step_num:e}).liveMutate().send()},closeDialogAndGoToStep:function(e){e>this.num_steps+1&&this.closeDialog(),this.gotoStep(e)},closeDialog:function(){var e=this;this.emitEvent({type:s.Types.NUX_DIALOG_CLOSE,payload:{no_hide:e.nux_redirect_url!==undefined}})},gotoNextStep:function(){this.closeDialogAndGoToStep(this.step_num+1)},skipNextStep:function(){this.step_num+2<=this.num_steps?this.emitEvent({type:s.Types.NUX_PROGRESS_BAR_STEP,payload:{step:this.step_num+1}}):this.closeDialog(),this.serverCall("skip_step").kwargs({step_num:this.step_num+1}).liveMutate().send()},stepUrl:function(e){return"#step="+e},standaloneRefreshFeed:function(){this.serverCall("standalone_refresh_feed").liveMutate().send(),a.dialogFor(this).close_()}}),t.NuxDialogRefreshFeedStep=t.NuxDialogStep.extend({onLoad:function(){if(this._super.apply(this,arguments),this.num_attempt=0,this.MAX_ATTEMPT=3,this.initial_time_wait=3e3,this.use_placeholder_feed_refresh&&this.emitEvent({type:s.Types.NUX_FEED_REFRESH,payload:{}}),this.nux_redirect_url!==undefined)this.gotoNextStep();else if(this.duration!==undefined&&null!==this.duration){var e=this.duration*c.SECOND;this.waitThenGoToNextStep(e)}else this.maybeGoToNextStep()},waitThenGoToNextStep:function(e){setTimeout(this.gotoNextStep.bind(this),e)},maybeGoToNextStep:function(){var e=this.initial_time_wait*(this.num_attempt+1);"internal_page"!=this.page_context&&setTimeout(this.shouldShowFeed.bind(this),e)},shouldShowFeed:function(){var e=this;e.num_attempt+=1,e.num_attempt>e.MAX_ATTEMPT?(d.log("nux_feed_refresh_logger",{result:"timeout"}),e.gotoNextStep()):e.serverCall("should_show_feed").success(function(t){t?(d.log("nux_feed_refresh_logger",{result:"success"}),e.gotoNextStep()):e.maybeGoToNextStep()}).error(function(){e.serverCall("log_error"),e.gotoNextStep()}).send()},gotoStep:function(e){var t=this;this.serverCall("goto_step").kwargs({step_num:e,num_attempt:t.num_attempt}).success(function(){return t.nux_redirect_url!==undefined?l.navigateTo(t.nux_redirect_url):s.DocumentProxy.dispatch({type:s.Types.HOME_MULTIFEED_REFRESH,payload:{}}),!1}).error(function(){return s.DocumentProxy.dispatch({type:s.Types.HOME_MULTIFEED_REFRESH,payload:{}}),!1}).send()}});var u=t.NuxDialogContinueButton=n.extend({onLoad:function(){this.$id("@next").on("click",this.onClick.bind(this))},finishStep:function(){this.$id("@next").hasClass("submit_button_disabled")||(this.standalone?s.DocumentProxy.dispatch({type:s.Types.NUX_DIALOG_STANDALONE_DONE,payload:{}}):s.DocumentProxy.dispatch({type:s.Types.NUX_DIALOG_NEXT_STEP,payload:{}}))},onClick:function(){return this.finishStep(),!1}});t.NuxDialogInferredFriendsContinueButton=u.extend({onLoad:function(){this._super.apply(this,arguments),this.fuid_map={};for(var e=0;e<this.unchecked_fuids.length;++e)this.fuid_map[this.unchecked_fuids[e]]=!1;for(var t=0;t<this.checked_fuids.length;++t)this.fuid_map[this.checked_fuids[t]]=!0;var i=this;this.handleEvent(s.Types.NUX_DIALOG_FRIENDS_UPDATE,function(e){e.payload.addFriend?i.add(e.payload.addFriend):e.payload.removeFriend?i.remove(e.payload.removeFriend):e.payload.addAll?i.addAll():e.payload.removeAll&&i.removeAll()})},onClick:function(e){e.preventDefault(),this.serverCall("button_clicked").kwargs({fuid_map:this.fuid_map,prechecked_fuids:this.checked_fuids}).success(this.finishStep.bind(this)).error(this.finishStep.bind(this)).send()},add:function(e){this.fuid_map[e]=!0},remove:function(e){this.fuid_map[e]=!1},addAll:function(){for(var e in this.fuid_map)this.add(e)},removeAll:function(){for(var e in this.fuid_map)this.remove(e)}}),t.NewNuxDialogSkipButton=u.extend({onClick:function(e){e.preventDefault(),this.serverCall("button_clicked").success(this.finishStep.bind(this)).error(this.finishStep.bind(this)).send()}}),t.NuxDialogFollowMinimumTopicsContinueButton=u.extend({onLoad:function(){this._super.apply(this,arguments),this.tids={};var e=this;this.handleEvent(s.Types.TOPICS_GRID_ADD,function(t){t.payload.tid&&(e.tids[t.payload.tid]=!0,e.num_followed+=1,e.updateButton(e.num_followed))}),this.handleEvent(s.Types.TOPICS_GRID_REMOVE,function(t){t.payload.tid&&(delete e.tids[t.payload.tid],e.num_followed-=1,e.updateButton(e.num_followed))})},onClick:function(e){if(e.preventDefault(),this.$id("@next").hasClass("submit_button_disabled"))return!1;var t=Object.keys(this.tids).map(function(e){return parseInt(e,10)});this.serverCall("button_clicked").kwargs({tids:t}).liveMutate().success(this.finishStep.bind(this)).error(this.finishStep.bind(this)).send()},updateButton:function(e){var t=this.min_interests-e;t>=1?this.$id("@next").addClass("submit_button_disabled").text(this.num_topics_texts[t]):this.$id("@next").removeClass("submit_button_disabled").text(this.button_continue_text)}}),t.DynamicTopicGrid=n.extend({onLoad:function(){var e=this;this.handleEvent(s.Types.TOPICS_GRID_ADD,function(t){t.payload.tid&&e.addTopic(t.payload.tid)}),this.handleEvent(s.Types.TOPICS_GRID_REMOVE,function(t){t.payload.tid&&e.removeTopic(t.payload.tid)}),this.handleEvent(s.Types.TOPICS_GRID_UPDATE_SHOWN,function(t){if(t.payload.newSuggestions)for(var i=0;i<t.payload.newSuggestions.length;i++)e.topicSuggestions.push(t.payload.newSuggestions[i])})},addTopic:function(e){this.followedTids.push(e)},addRow:function(e){this.$id("@more").append('<span class="new_items"></span>');var t=this.$id("@more").children(".new_items").last();this.serverCall("load_row").kwargs({tid:e}).contentFor(t).sendOnlyOnce()},getFollowingCount:function(){return this.followedTids.length},removeTopic:function(e){var t=this.followedTids.indexOf(e);-1!=t&&this.followedTids.splice(t,1)}}),t.DynamicInterestsGrid=t.DynamicTopicGrid.extend({addTopic:function(e){this._super.apply(this,arguments),this.addRow(e),this.serverCall("follow_topic").kwargs({tid:e}).send()},removeTopic:function(e){this._super.apply(this,arguments),this.serverCall("unfollow_topic").kwargs({tid:e}).send()}}),t.InterestsGridItems=n.extend({onLoad:function(){this.emitEvent({type:s.Types.TOPICS_GRID_UPDATE_SHOWN,payload:{newSuggestions:this.new_suggestions}})}}),t.ExpertiseTopicListItemRemoveButton=n.extend({onLoad:function(){this.$id("@expertise-remove-button").click(this.dismiss.bind(this))},dismiss:function(e){return e.preventDefault(),this.serverCall("remove_expertise_topic").kwargs({tid:this.tid}).liveMutate().send(),!1}}),t.LanguageListItemRemoveButton=n.extend({onLoad:function(){this.$id("@language-remove-button").click(this.dismiss.bind(this))},dismiss:function(e){return e.preventDefault(),this.serverCall("remove_language_credential").kwargs({cred_id:this.cred_id}).liveMutate().send(),!1}}),t.NuxDialogFollowExpertiseContinueButton=t.NuxDialogFollowMinimumTopicsContinueButton.extend({onClick:function(e){e.preventDefault(),this.serverCall("button_clicked").liveMutate().success(this.finishStep.bind(this)).error(this.finishStep.bind(this)).send()}}),t.LanguageListItem=n.extend({onLoad:function(){var e=this;e.$item=e.$id("@language_item"),e.$item.on("click",function(){e.$item.toggleClass("selected")})}}),t.NuxDialogAddPhoneNumberStep=t.NuxDialogStep.extend({onLoad:function(){var e=this;this.confirmationResult=null,this._super.apply(this,arguments),this.$id("@sms_code").focus(),this.$id("@sms_code_link").on("click",this.sendCode.bind(this)),this.$id("@edit_button").on("click",this.editPhoneNumber.bind(this)),this.setCountryCodeText(),this.$id("@country_code").on("change",function(){e.setCountryCodeText()}),this.$id("@sms_code").on("input",function(){e.updateSMSCodeValue()}),this.handleEvent(s.Types.SMS_CONTINUE_PRESSED,function(t){1==t.payload.continue_pressed&&e.onSubmit()})},updateSMSCodeValue:function(){this.sms_code_value=this.$id("@sms_code").val(),this.emitEvent({type:s.Types.SMS_CODE_ENTERED,payload:{sms_code:this.sms_code_value}})},editPhoneNumber:function(){this.$id("@phone_number").removeClass("disabled"),this.$id("@country_code").removeClass("disabled"),this.$id("@sms_code_row").addClass("hidden"),this.$id("@edit_button").addClass("hidden")},sendCode:function(){var e=this;this.$id("@phone_number").addClass("disabled"),this.$id("@country_code").addClass("disabled"),this.$id("@sms_code_row").removeClass("hidden"),this.$id("@edit_button").removeClass("hidden"),e.phoneNumber=e.$id("@phone_number").val(),e.countryCode=e.$id("@country_code").val(),this.emitEvent({type:s.Types.PHONE_NUMBER_SEND_VERIFICATION_CODE_CLICKED,payload:{phoneNumber:e.phoneNumber,countryCode:e.countryCode}})},onSubmit:function(){var e=this;e.phoneNumber=e.$id("@phone_number").val(),e.countryCode=e.$id("@country_code").val();var t=e.$id("@sms_code").val();this.emitEvent({type:s.Types.PHONE_NUMBER_CONFIRM_CODE_CLICKED,payload:{phoneNumber:e.phoneNumber,countryCode:e.countryCode,code:t}})},setCountryCodeText:function(){var e=this,t=this.countries;o("select > option").each(function(){var i=e.$id("@country_code option:selected").text(),n=this.text,o=this.value;if(i==n)e.$id("@country_code option:selected").text(o);else for(var s in t){var a=t[s],r=a[0],d=a[1];n==d&&e.$id('@country_code option[value="'+n+'"]').text(r)}})}}),t.NuxDialogAddPhoneNumberStepContinueButton=t.NuxDialogContinueButton.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.updateButton(),e.codeVerified=!1,this.handleEvent(s.Types.SMS_CODE_ENTERED,function(t){t.payload.sms_code&&(e.codeEntered=t.payload.sms_code,e.updateButton(e.codeEntered))}),this.handleEvent(s.Types.PHONE_NUMBER_VERIFIED,function(t){t.payload.phone_verified&&(e.codeVerified=t.payload.phone_verified,e.shouldProgress(e.codeVerified))})},onClick:function(e){e.preventDefault(),this.$id("@next").hasClass("submit_button_disabled")||this.emitEvent({type:s.Types.SMS_CONTINUE_PRESSED,payload:{continue_pressed:!0}})},shouldProgress:function(e){1==e&&this.serverCall("button_clicked").liveMutate().success(this.finishStep.bind(this)).error(this.finishStep.bind(this)).send()},updateButton:function(e){e&&e.length>2?this.$id("@next").removeClass("submit_button_disabled"):this.$id("@next").addClass("submit_button_disabled")}}),t.NuxDialogFollowFromFacebookContinueButton=t.NuxDialogContinueButton.extend({onClick:function(){this.serverCall("button_clicked").liveMutate().success(this.finishStep.bind(this)).error(this.finishStep.bind(this)).send()}})},"./app/view/nux/existing_user.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.ExistingUserNuxSidebar=n.extend({onLoad:function(){this.serverCall("track_impression").send()}}),t.ExistingUserNuxButton=n.extend({onLoad:function(){this.$id("@existing-user-nux").click(this.initate.bind(this))},initate:function(e){return e.preventDefault(),this.serverCall("start_existing_user_nux").liveMutate().send(),!1}}),t.ExistingUserNuxDismiss=n.extend({onLoad:function(){this.$id("@existing-user-nux-dismiss").click(this.dismiss.bind(this))},dismiss:function(e){return e.preventDefault(),this.serverCall("dismiss_existing_user_nux").liveMutate().send(),!1}})},"./app/view/nux/find_friends.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./w2.dialog.js").Dialog,s=i("./facebook.js"),a=i("./shared/facebook.js"),r=i("./shared/events/index.js"),d=i("./view/paged_list.js").PagedList;t.FacebookFindFriendsButton=s.FacebookConnectButton.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@facebook_follow_button").on("click",this.onClick.bind(this))},onClick:function(){return a.isLoaded()&&(this.serverCall("button_clicked").send(),this.connect()),!1},onLogin:function(e){this.showLoading(),this._super.apply(this,arguments)},closeDialog:function(){this.standalone&&(o.dialogFor(this).close_(),this.parent()&&this.parent().standaloneRefreshFeed())},_onLogin:function(e){var t=this.serverCall("connect_facebook").kwargs({fb_access_token:e.accessToken,fb_uid:e.userID,expires:e.expiresIn});this.live_mutate&&t.liveMutate(),t.success(this.closeDialog.bind(this)).error(this.closeDialog.bind(this)).send()},onLoginFailed:function(){this.serverCall("record_connect_failure").send()},showLoading:function(){this.$id("@normal_text").hide(),this.$id("@loading_text").show(),this.$id("@row").addClass("complete")}}),t.FacebookFindFriendsAndContinueButton=t.FacebookFindFriendsButton.extend({onLoginFailed:function(){this.standalone?o.dialogFor(this).close_():this.serverCall("login_failed").liveMutate().send(),this.serverCall("record_connect_failure").send()}}),t.FriendFollowIndicatorLink=n.extend({onLoad:function(){this.$toggle=this.$id("@toggle"),this.$toggle.on("click",this.onClick.bind(this)),this.isSelected=this.$toggle.hasClass("selected");var e=this;this.handleEvent(r.Types.NUX_DIALOG_FRIENDS_UPDATE,function(t){t.payload.addAll?e.toggleSelection(!0):t.payload.removeAll&&e.toggleSelection(!1)})},toggleSelection:function(e){this.isSelected=e,this.$toggle.toggleClass("selected",e),this.$toggle.toggleClass("unselected",!e)},onClick:function(){this.toggleSelection(!this.isSelected),this.isSelected?this.emitEvent({type:r.Types.NUX_DIALOG_FRIENDS_UPDATE,payload:{addFriend:this.fuid}}):this.emitEvent({type:r.Types.NUX_DIALOG_FRIENDS_UPDATE,payload:{removeFriend:this.fuid}})}}),t.FriendToggleCheckbox=n.extend({onLoad:function(){this.checkbox=this.$id("@friend_row").find(":checkbox"),this.checkbox.on("change",this.onChange.bind(this));var e=this;this.$id("@friend_row").on("click",function(){e.onChange()}),this.handleEvent(r.Types.NUX_DIALOG_FRIENDS_UPDATE,function(t){t.payload.addAll?e.toggleChecked(!0):t.payload.removeAll&&e.toggleChecked(!1)})},toggleChecked:function(e){this.checkbox.prop("checked",e)},onChange:function(){this.checkbox.prop("checked")?this.emitEvent({type:r.Types.NUX_DIALOG_FRIENDS_UPDATE,payload:{addFriend:this.fuid}}):this.emitEvent({type:r.Types.NUX_DIALOG_FRIENDS_UPDATE,payload:{removeFriend:this.fuid}})}}),t.UnfollowedInferredFriendsToggleLink=n.extend({onLoad:function(){this.$id("@add").on("click",this.onAddClick.bind(this)),this.$id("@remove").on("click",this.onRemoveClick.bind(this));var e=this;this.handleEvent(r.Types.NUX_DIALOG_FRIENDS_UPDATE,function(t){t.payload.updateAll&&e.updateFriendsList()})},changeAll:function(e){this.emitEvent({type:r.Types.NUX_DIALOG_FRIENDS_UPDATE,payload:{addAll:e,removeAll:!e}})},updateFriendsList:function(){this.action&&this.changeAll("add_all"==this.action)},onAddClick:function(){this.action="add_all",this.changeAll(!0),this.$id("@add").hide(),this.$id("@remove").show(),this.serverCall("button_clicked").kwargs({button_name:this.action}).send()},onRemoveClick:function(){this.action="remove_all",this.changeAll(!1),this.$id("@add").show(),this.$id("@remove").hide(),this.serverCall("button_clicked").kwargs({button_name:this.action}).send()}}),t.InferredFriendsList=d.extend({onUpdate:function(e){this._super.apply(this,arguments),this.emitEvent({type:r.Types.NUX_DIALOG_FRIENDS_UPDATE,payload:{updateAll:!0}})}})},"./app/view/oauth.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.OauthCallbackPage=n.extend({onLoad:function(){if(window.opener){var e=window.opener.require("shared/jquery");this.access_token?e(window.opener.document).trigger("oauth_approved",{service:this.service,accessToken:this.access_token}):e(window.opener.document).trigger("oauth_rejected",{service:this.service}),window.close()}else this.$id("@me").text("access token: "+JSON.stringify(this.access_token))}})},"./app/view/payment/receivable.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/modal.js").ModalBase;t.PaymentSettings=n.extend({onLoad:function(){var e=this,t=e.$id("@change_default"),i=t.find("input:radio");e.$id("@edit").click(function(t){t.preventDefault(),e.createModal("load_edit_card_modal").show()}),i.change(function(){e.serverCall("update_default_card").kwargs({index:i.index(t.find(":checked"))}).send()})}}),t.EditCardModal=o.extend({onSubmit:function(){var e=this,t=e._super;e.child("add_card_form").submit(function(){t.apply(e,arguments)})}}),t.DeleteCardLink=n.extend({onLoad:function(){var e=this;e.$id("@create_modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").show()})}}),t.DeleteCardConfirmationModal=o.extend({onSubmit:function(){this.serverCall("delete_card").liveMutate().send(),this.close()}}),t.CannotDeleteCardModal=o.extend({onSubmit:function(){this.close()}})},"./app/view/people_selector.js":function(e,t,i){var n=i("./view/selector.js").Selector,o=i("./view/selector.js").MultiSelector;t.LegacyPeopleSelector=n.extend({resultWasSelected:function(e){this.parent().setTo(e.data.uid),this.setQuery(""),this.$input.blur()}}),t.PeopleMultiSelector=o.extend({whenOnSavedResultsChanged:function(e){this._onSavedResultsChanged=e},onSavedResultsChanged:function(){this._onSavedResultsChanged&&this._onSavedResultsChanged(this.saved_results)}})},"./app/view/photo.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./w2.dialog.js"),s=i("./shared/jquery.js"),a=i("./shared/errors.js"),r=i("./shared/window_manager.js");t.EditPhotoDialogLink=n.extend({onLoad:function(){var e=this;this.$id("@open_edit_photo").click(function(){return e.editPhoto(),!1}),e.prompt_add_photo&&e.editPhoto()},editPhoto:function(){var e=this;this._dialog||(this._dialog=o.createDialog(this,{showXButton:!0,closeOnClickOut:!0,width:550}).title(this.dialog_title).load("set_dialog_contents").close(function(){e._dialog=null}))}}),t.InlineEditPhotoChoice=n.extend({onLoad:function(){var e=this;this.$id("@choices").on("click",".choose_pic",function(t){var i=s(t.target).attr("choice");return e.serverCall("choose_photo").kwargs({choice:i}).liveMutate().success(function(){e.next_url?r.navigateTo(e.next_url):o.Dialog.dialogFor(e).close_()}).send(),e.$id("@choices").text(e.setting_text),!1})}}),t.InlineUploadPhotoWeb=n.extend({onLoad:function(){this.$id("@download").on("click",this.onClick.bind(this)),this.$id("@url").on("input",this.onChange.bind(this)),this.downloading=!1},onChange:function(){var e=this.$id("@url").val();this.$id("@download").toggleClass("hidden",!e)},onClick:function(){if(!this.downloading){var e=this.$id("@url").val();if(e){this.downloading=!0;var t=new Image;t.onload=this.downloadImage.bind(this,e),t.onerror=this.downloadImageError.bind(this),t.src=e}}},downloadImageError:function(){this.downloading=!1,alert(this.invalid_image_text),this.$id("@url").val("")},downloadImage:function(e){if(!this._contentForTarget)return void a.logJsError("InlineUploadPhotoWeb","contentFor target not set.");var t=this;this.serverCall("download").kwargs({target_id:this.target_id,target:this.target,url:e}).contentFor(this._contentForTarget).liveMutate().except("image_error",function(e){alert(e.message),o.Dialog.dialogFor(t).close_()}).except("thumbs_already_set",function(){o.Dialog.dialogFor(t).close_()}).success(this.onShowPhotoChoice.bind(this)).send()},focus:function(){this.$id("@url").focus()},setContentForTarget:function(e){this._contentForTarget=e},setShowPhotoChoiceCallback:function(e){this._showPhotoChoice=e},onShowPhotoChoice:function(){this._showPhotoChoice&&this._showPhotoChoice()}})},"./app/view/pmsg/pmsg.js":function(e,t,i){var n=i("./view/pmsg.js");t.FlagConfirmationPmsg=n.PMsg.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.$id("@undo").click(function(t){return e.undo(),!1})},undo:function(){this.serverCall("undo").liveMutate().send()}})},"./app/view/query/filters.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/fixable2.js"),s=i("./view/selector.js").Selector;t.SearchFilters=n.extend({onLoad:function(){var e=this;o.makeFixable(e.$id("@sidebar_filters"),{min_height:e.$id("@sidebar_filters").outerHeight()+e.$id("@sidebar_filters").offset().top,min_width:990})}}),t.SearchFilterAuthorSelector=s.extend({resultWasSelected:function(e){this.parent().addFilterToKey(e.data.uid)}}),t.SearchFilterTopicSelector=s.extend({resultWasSelected:function(e){this.parent().addFilterToKey(e.data.topic_routing_name)}})},"./app/view/query/query.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./w2.dialog.js"),a=i("./shared/viewport.js"),r=i("./shared/action_log.js");t.QueryResult=r.ActionableComponent.extend({onLoad:function(){this._super.apply(this,arguments),this.setDvar("query_id",this.query_id),this.setDvar("index",this.index);var e="_blank";this.compact&&(e="_parent"),this.$id('@title a[href!="#"]').attr("target",e),this.$id('@content a[href!="#"]').attr("target",e),this.checkHighlight(),this.unseen.bound||(document.addEventListener("scroll",this.recordPrivateViews.bind(this)),setTimeout(this.recordPrivateViews.bind(this),400),this.unseen.bound=!0),this.unseen.items[this.cid]=this,this.view_item=[this.type,this.object_id]},navigateToObject:function(){var e=this.$id("@title a").attr("href");window.open(e,"_parent")},checkHighlight:function(){var e=this.$id("@title").get(0),t=this.$id("@content").get(0);(null==e||null==t||(e.innerHTML+t.innerHTML).indexOf("matched_term")<0)&&this.serverCall("log_highlight_error").send()},unseen:{bound:!1,items:{},lastCheckTime:0,rateLimit:500},recordPrivateViews:function(){var e=+new Date;if(!(e<this.unseen.lastCheckTime+this.unseen.rateLimit)){this.unseen.lastCheckTime=e;var t=[],i=[];for(var n in this.unseen.items){var o=this.unseen.items[n];a.isElementInViewport(o.$id("@item").get(0))&&(t.push(o),i.push(o.view_item),delete this.unseen.items[n])}t.length>0&&t[0].serverCall("log_private_views").kwargs({view_items:i}).send()}}}),t.QueryResultRankingMetadata=n.extend({onLoad:function(){var e=this;this.$id("@metadata").click(function(){var t=e.$id("@metadata").parent().hasClass("expanded");o(".metadata").parent().removeClass("expanded"),t||e.$id("@metadata").parent().addClass("expanded")})}}),t.QueryResults=n.extend({onLoad:function(){var e=this;this.$id("@create_topic_link").click(function(){return s.createDialog(e).load("create_topic_dialog"),!1})}})},"./app/view/question.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./shared/debounce.js").debounce,a=i("./view/dialog.js"),r=i("./shared/impression_tracker.js"),d=i("./tooltip.js"),l=i("./shared/jquery.js"),c=i("./shared/events/index.js"),u=i("./shared/viewport.js"),h=i("./shared/window_manager.js"),p=i("./view/inline_editor.js").InlineEditor,f=i("./shared/scroll_animation_handler.js"),_=i("./view/fixable2.js"),m=i("./shared/log_sender.js"),g=i("./unified_view/toggle.js"),v=i("./shared/question_page_reading_time.js"),w=i("./shared/question_answer_page_reading_time.js"),b=c.Types,y=t.NewGridQuestionPage=o.extend({onLoad:function(){var e=this;e.handleEvent(b.QUESTION_DELETE_STATE_CHANGE,function(t){t.payload.qid==e.qid&&h.reload()})}}),C=r.createTracker(function(e){m.log("question_page_monitoring",e)});t.QuestionMain=y.extend({onLoad:function(e){this._super.apply(this,arguments),e&&this.record_impression&&setTimeout(function(){m.log("funnel_impression",{impression_type:"question_page_impression"})},1e3);var t={qid:this.qid,component_type:"question_main"};if(C.observe(this.$id("@grid").get(0),t),null!=this.child("ad")){var i=this.$id("@right_col_fixable"),n=l(document),o=53,s=this.$id("@actions").height()+o;_.makeFixable(i,{scroll_dep:!0,min_scroll_callback:function(){return s},max_scroll_callback:function(){return n.height()-1500},min_width:1e3}),this.handleEvent(b.RELATED_QUESTIONS_EXPAND,function(e){_.removeFixable(i)})}}}),t.RelatedQuestions=g.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments);var e={qid:this.qid,component_type:"related_questions"};C.observe(this.$id("@related_questions").get(0),e)},switchEnd:function(){this._super.apply(this,arguments),this.emitEvent({type:c.Types.RELATED_QUESTIONS_EXPAND,payload:{elem:this.$switchShow}})}}),t.RelatedQuestionsList=o.extend({onLoad:function(){var e=this,t=!1;if(!this.inline&&!this.is_expanded){var i=e.$id("@related_questions_list").get(0),n=l(".layout_2col_side").height()+l(".SiteHeader").height()+10;if(n-300>l(window).height()&&(t=!0),t){var o=l(i).find(".related_question").slice(8);i&&_.makeFixable(i,{scroll_dep:!0,min_scroll_callback:function(){return n},min_height:0,footer:l(".first_content_page_feed").get(0)}),f.add(window,function(){window.scrollY>n?o.addClass("hidden"):o.removeClass("hidden")})}else i&&_.makeFixable(i,{scroll_dep:!0,min_height:n,min_scroll:l(i).offset().top-83,footer:l(".first_content_page_feed").get(0),max_scroll_callback:function(){return document.documentElement.scrollHeight-1200}})}}}),t.QuestionArea=o.extend({onLoad:function(){this._super.apply(this,arguments),this._detailsOverLimit=!1,this._textOverLimit=!1;var e=this;this.handleEvent(c.Types.QUESTION_EDITING_STATE,function(t){t.payload.qid==e.qid&&("edit"==t.payload.state?e.editLinkClicked():"cancel"==t.payload.state?e.cancelLinkClicked():"text_limit"==t.payload.state?e._textOverLimit=t.payload.is_over:"details_limit"==t.payload.state&&(e._detailsOverLimit=t.payload.is_over))}),e.$id("@question_update").click(function(t){t.preventDefault(),e.emitEvent({type:c.Types.QUESTION_EDITING_STATE,payload:{qid:e.qid,state:"request"}}),e.$id("@form_button_container").addClass("hidden"),e.block_details_edit&&e.$id("@details_container").removeClass("hidden")}),e.$id("@question_cancel").click(function(t){t.preventDefault(),e.emitEvent({type:c.Types.QUESTION_EDITING_STATE,payload:{qid:e.qid,state:"trigger_cancel"}}),e.$id("@form_button_container").addClass("hidden"),e.block_details_edit&&e.$id("@details_container").removeClass("hidden")})},editLinkClicked:function(){this.$id("@form_button_container").removeClass("hidden"),this.block_details_edit&&this.$id("@details_container").addClass("hidden")},cancelLinkClicked:function(){this.$id("@form_button_container").addClass("hidden"),this.block_details_edit&&this.$id("@details_container").removeClass("hidden")},updateButton:function(){this.$id("@question_update").toggleClass("disabled",this._textOverLimit||this._detailsOverLimit),this.block_details_edit&&this.$id("@details_container").removeClass("hidden")}});var k=p.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.handleEvent(c.Types.QUESTION_EDITING_STATE,function(t){t.payload.qid==e.id&&("edit"==t.payload.state?e.editorShown||e.toggle_editor():"cancel"==t.payload.state?e.editorShown&&e.toggle_editor():"request"==t.payload.state?e.trigger_request():"trigger_cancel"==t.payload.state&&e.trigger_cancel())})},onEditLinkClick:function(){this.emitEvent({type:c.Types.QUESTION_EDITING_STATE,payload:{qid:this.id,state:"edit"}})},cancelEditor:function(){this._super.apply(this,arguments),this.emitEvent({type:c.Types.QUESTION_EDITING_STATE,payload:{qid:this.id,state:"cancel"}})}});t.QuestionTextInlineEditor=k.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.editor.setLengthChangeCallback(function(t){e.emitEvent({type:c.Types.QUESTION_EDITING_STATE,payload:{qid:e.id,state:"text_limit",is_over:t}})})}}),t.FeedQuestionTextInlineEditor=t.QuestionTextInlineEditor.extend({toggle_editor:function(){}}),t.QuestionDetailsInlineEditor=k.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.editor.setLengthChangeCallback(function(t){e.emitEvent({type:c.Types.QUESTION_EDITING_STATE,payload:{qid:e.id,state:"details_limit",is_over:t}})})}}),t.FeedQuestionDetailsInlineEditor=t.QuestionDetailsInlineEditor.extend({toggle_editor:function(){}}),t.QuestionDeleteUndeleteLink=o.extend({onLoad:function(){var e=this;this.$id("@undelete_question_link").click(function(){return e.createModal("question_undelete_modal").onSubmit(function(){e._request("undelete_question")}).show(),!1})},_request:function(e){var t=this;this.serverCall(e).kwargs({qid:this.qid}).success(function(){t.emitEvent(c.helpers.changeQuestionDeletionState(t.qid))}).liveMutate().send()}}),t.QuestionDeleteDialog=a.AddCommentDialog.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.setSuccessCallback(function(){e.emitEvent(c.helpers.changeQuestionDeletionState(e.object_id))})},getPars:function(){return(!this.comment_required||!this.editor.isOnlyWhiteSpace())&&{comment:this.editor.serialize(),review:this.review}}}),t.AnswerPermaLink=o.extend({onLoad:function(){this.tooltip&&d.attach(this.$id("@link"),this.tooltip)}}),t.AnswerUndeleteBanner=o.extend({onLoad:function(){var e=this;e.$id("@answer_undelete").on("click",function(t){e.createModal("load_answer_undelete_modal").onSubmit(function(){e.serverCall("unremove_answer").kwargs({aid:e.aid}).liveMutate().send()}).show()}),e.$id("@answer_edit").on("click",function(t){e.emitEvent(c.helpers.inlineEditorEdit("answer",e.aid))})}}),t.CreateAnswerWikiLink=o.extend({onLoad:function(){this.$id("@create_answer_wiki").click(function(e){l("#answer_wiki").toggleClass("hidden"),e.preventDefault()})}}),t.QuestionAnswerMain=o.extend({onLoad:function(e){e&&setTimeout(function(){m.log("funnel_impression",{impression_type:"answer_page_impression"})},1e3),this.recordStep("share_impression")},recordStep:function(e){this.serverCall("record_step").kwargs({step_name:e}).send()}});var S=y;t.QuestionAnswerPageMain=S.extend({onLoad:function(e){var t=this;this._super.apply(this,arguments),t.prompt_topic_bio?t.createModal("credentials_modal").kwargs({aid:t.aid}).show():t.prompt_quora_share?t.createModal("quora_share_answer_modal").kwargs({aid:t.aid}).show():t.prompt_share_answer&&t.createModal("share_answer_modal").kwargs({aid:t.aid}).show(),e&&setTimeout(function(){m.log("funnel_impression",{impression_type:"answer_page_impression"})},1e3),this.recordStep("share_impression"),w.startLogging(t.aid)},recordStep:function(e){this.serverCall("record_step").kwargs({step_name:e}).send()}});var E=t.AnswerPagedListItem=o.extend({onLoad:function(){this.waitMs=50,0===this.index?this.setupCustomSignupWallTrigger():1==this.index&&l(document).on("scroll",s(this.surveyScrollTrigger.bind(this),this.waitMs)),v.registerAnswerComponent(this.child("answer"),this.aid)},setupCustomSignupWallTrigger:function(){this.triggerPercent!==undefined&&l(document).on("scroll",s(this._maybeTriggerSignupWall.bind(this),this.waitMs))},_maybeTriggerSignupWall:function(){var e=n.getLiveDomElement(this.cid),t=u.percentScrolledPastViewport(e);(this.triggerPercent<t||u.scrolledToBottom())&&this.emitEvent({type:c.Types.SIGNUP_WALL_FROM_AD_REFERRAL,payload:{}})},surveyScrollTrigger:function(){var e=this;e.surveyTriggered||e.shouldShowSurvey()&&(e.emitEvent({type:c.Types.QUESTION_SURVEY_SHOW,payload:{}}),e.surveyTriggered=!0)},shouldShowSurvey:function(){var e=n.getLiveDomElement(this.cid);return u.isElementInViewport(e)&&l(window).scrollTop()>0}});t.AnswerPageAnswer=E.extend({onLoad:function(){this.setupCustomSignupWallTrigger(),-1!=h.getURL().indexOf("?pa_story=")&&h.removeURLParam("pa_story")}})},"./app/view/question/add_answer.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./shared/jquery.js"),a=i("./view/inline_editor.js").InlineEditor,r=i("./shared/window_manager.js"),d=i("./view/modal.js").Base,l=i("./shared/action_log.js"),c=i("./shared/client_log.js"),u=i("./app/view/share.js").showShareAction,h=i("./shared/events/index.js"),p=i("./shared/upload.js");t.AnswerAdd=o.extend({onLoad:function(){var e=this;e.$id("@toggle_zen").click(function(){e.toggleZen()}),e.$id("@answer_add").find(".submit_button").click(function(){e.$id("@answer_add").hasClass("is_zen")&&e.toggleZen()});var t=this.child("editor_section").child("editor");t.whenOnLoaded(t.focusEditorInputWhenReady.bind(t)),e.should_quora_share=!1,e.handleEvent(h.Types.QUORA_SHARE_ANSWER_TO_FOLLOWERS_TOGGLED,function(t){e.toggleQuoraShareEditor(t.payload.newState)}),t.onAnswerSubmit(function(){return{should_quora_share:e.should_quora_share,quora_share_comment:e.getShareComment()}})},toggleZen:function(){function e(e){27==e.keyCode&&t.toggleZen()}var t=this;t.$id("@answer_add").hasClass("is_zen")?(t.serverCall("zen_mode_exited").send(),s(document).off("keyup",e)):(t.serverCall("zen_mode_entered").send(),s(document).keyup(e)),s("body").toggleClass("zen_mode"),t.$id("@answer_add").toggleClass("is_zen"),t.$id("@zen_bg").toggleClass("hidden")},toggleQuoraShareEditor:function(e){var t=this,i=t.$id("@quora_share_editor");"toggled_off"==e?(i.slideUp(65),t.should_quora_share=!1):"toggled_on"==e&&(i.slideDown(65),t.should_quora_share=!0)},getShareComment:function(){if(this.child("quora_share_editor"))return this.child("quora_share_editor").$id("@share_comment").val()}});var f=t.AnswerEditor=a.extend({onLoad:function(){this.editor=this.child("editor"),this.answerShareForm=this.child("answer_share_form"),this.editorShare=this.answerShareForm&&this.answerShareForm.child("editor_share");var e=this;this.editor.prevent_load_drop_zone=!0,this._super.apply(this,arguments),this.disclaimer_update="",this.editor.setFocusCallback(function(){e.focusEditor()}),this.editor.isInteractive()||this.focusEditor(),this.updated_question_modal_shown=!1;var t=this.editor&&this.editor.getHeaderImage();t&&t.setDraftSaveCallback(function(){e.save_draft(!0)})},getQuoraShare:function(){if(this._onQuoraShareCallback)return this._onQuoraShareCallback()},onAnswerSubmit:function(e){this._onQuoraShareCallback=e},focusEditor:function(){this.editor.support_drag_and_drop_upload&&(this.dragAndDropFormLoaded||(this.dragAndDropFormLoaded=!0,this.editor.loadDragAndDropForm()))},focusEditorInputWhenReady:function(){var e=this;this.editor.setEditorReadyCallback(function(){e.editor.hideFakeEditor()})},showShareWarningDialog:function(){var e=this,t=this.editorShare.getValues();this.editorShare.serverCall("warning_dialog_shown").send(),this.createModal("share_warning_modal").kwargs({share_tw:t.tw}).onSubmit(function(){e.shouldShowShareWarningDialog=!1,e.input_button_obj.click()}).show()},submitHandler:function(){var e=this;this.input_button_obj.click(function(t){if(p.isVideoUploadInProgress())return e.editor.alertUploadInProgress(),!1;var i=e.getQuoraShare();if(e.should_quora_share=i.should_quora_share,e.quora_share_comment=i.quora_share_comment,e.getEditor()&&e.isEditorEmpty())return!1;var n={};if(e.editorShare&&(n=e.editorShare.getValues()),n.tw&&e.shouldShowShareWarningDialog)return e.showShareWarningDialog(),!1;e.trigger_request(),t.preventDefault()})},ajax_callback:function(e){return e.ans_url&&r.navigateTo(e.ans_url),e&&e.show_updated_question_modal?(this.save_draft(!0),this.createModal("load_changed_modal").kwargs({submit_id:this.input_button_obj.attr("id"),qid:e.qid}).show(),this.updated_question_modal_shown=!0,void(this.locked=!1)):(e.share_data&&e.share_data.autoShowShareDialog&&u(e.share_data),r.sameDomainURL(e.url)&&r.navigateTo(e.url),e.unconfirmed_email&&this.createModal("load_unconfirmed_email_modal").show(),this._super.apply(this,arguments))},maybeLogAction:function(e){c.logEvent("AddAnswer",n.getAnyElement(this),{qid:this.id}),l.logSecondaryAction("AnswerAdd",null)},logSaveDraft:function(){var e=n.getAnyElement(this);c.logEvent("QuestionSaveDraft",e,{qid:this.id})},_get_kwargs:function(){var e={id:this.id,input:this.get_value(),disclaimer_update:this.disclaimer_update,updated_question_modal_shown:this.updated_question_modal_shown,redirect_to_answer_page:this.redirect_to_answer_page,create_quora_share:this.should_quora_share,quora_share_comment:this.quora_share_comment};this.editorShare&&(e.share_values=this.editorShare.getValues());var t=this.editor&&this.editor.getHeaderImageData();return t&&(e.header_data=t),e},getSaveDraftKwargs:function(){var e=this._super.apply(this,arguments),t=this.editor&&this.editor.getHeaderImageData();return t&&(e.header_data=t),e}});t.AnswerInFeedEditor=f.extend({ajax_callback:function(e){this.$id("@inline_editor_form").parents(".answer_editor").addClass("hidden"),this._super.apply(this,arguments)}}),t.AnswerDraftPageEditor=f.extend({onLoad:function(){this._super.apply(this,arguments),this.should_toggle_on_submit=!1,this.editor=this.child("editor"),this.editor.focus()}}),t.AnswerEditorMetadataItem=o.extend({onLoad:function(){var e=this,t=this.$id("@toggle");t.click(function(){return e.$id("@item").toggleClass("ghosted"),t.text()===e.show_text?(e.showItem(),t.text(e.hide_text)):(e.hideItem(),t.text(e.show_text)),!1})},showItem:function(){return!1},hideItem:function(){return!1}}),t.ChangedQuestionModal=d.extend({onSubmit:function(){var e=this;this._closeModal(),s("#"+e.submit_id).click()},onCancel:function(){s(".answer_editor").removeClass("hidden"),this._closeModal()},onClose:function(){s(".answer_editor").removeClass("hidden"),this._closeModal()}})},"./app/view/question/answer_tag.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./tooltip.js"),s=i("./w2.dialog.js"),a=i("./unified_view/modal.js").ModalBase,r=s.Dialog;t.AnswerTagAdminActions=n.extend({onLoad:function(){this.enabled||this.$id("@tag_options").addClass("hidden")}}),t.AnswerTagOption=n.extend({onLoad:function(){var e=this;this.$id("@select_tag").click(function(){return e._dialog=s.createDialog(e).title(e.dialog_title).load("add_tag_dialog"),!1})}}),t.AnswerSoftCollapseMenuListItem=n.extend({onLoad:function(){var e=this;e.$id("@toggle_soft_collapse").on("click",function(t){t.preventDefault(),e.serverCall("toggle_soft_collapse").liveMutate().send()})}}),t.AddTagDialog=n.extend({onLoad:function(){var e=this;this.$id("@cancel").click(function(){return r.dialogFor(e).close_(),!1}),this.$id("@add_tag").click(function(){var t=null;if(e.should_show_editor){t=e.child("editor").serialize()}var i=e.$id("@locked").is(":checked");return e.serverCall("add_tag").kwargs({comment:t,lock:i}).liveMutate().success(function(){r.dialogFor(e).close_()}).send(),!1})}}),t.AnswerTag=n.extend({onLoad:function(){var e=this;this.$id("@show_comment").click(function(){return e.$id("@comment").removeClass("hidden"),e.$id("@show_comment").addClass("hidden"),!1}),o.attach(this.$id("@remove"),this.remove_short_text),this.$id("@remove").click(function(){return e.createModal("remove_tag_modal").kwargs({aid:e.aid,tag:e.tag}).show(),!1})}}),t.SoftenAnswerTag=n.extend({onLoad:function(){var e=this;this.$id("@remove").click(function(){return e.createModal("remove_tag_modal").kwargs({aid:e.aid,tag:e.tag}).show(),!1})}}),t.RemoveTagModal=a.extend({onSubmit:function(){var e=this.child("editor"),t=e.serialize();this.serverCall("remove_tag").kwargs({comment:t}).liveMutate().send(),this.close()}}),t.AnswerCollapsedTag=n.extend({onLoad:function(){var e=this;this.$id("@show_comment").click(function(t){t.preventDefault(),e.$id("@comment").removeClass("hidden"),e.$id("@show_comment").addClass("hidden")})}})},"./app/view/question/cant_answer.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./unified_view/modal.js").ModalBase,a=i("./shared/client_log.js"),r=i("./shared/perf.js");t.CantAnswerLink=n.extend({onLoad:function(){var e=this;this.$id("@cant_answer").on("click",function(t){return e._userPerceivedAction=r.startUserPerceived({hmac:e.getHmac(),method:"mark_as_cant_answer"}),a.logEvent("QuestionPass",t.target),e.emitEvent(o.helpers.addQuestionCantAnswer(e.id)),e._userPerceivedAction&&(r.finishAction(e._userPerceivedAction),e._userPerceivedAction=null),e.cantAnswer(),!1})},cantAnswer:function(){return this.serverCall("mark_as_cant_answer").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).send(),!1}}),t.A2ACantAnswerLink=n.extend({onLoad:function(){var e=this;this.$id("@cant_answer").on("click",function(){return e._userPerceivedAction=r.startUserPerceived({hmac:e.getHmac(),method:"decline"}),e.emitEvent(o.helpers.addQuestionCantAnswer(e.id)),e._userPerceivedAction&&(r.finishAction(e._userPerceivedAction),e._userPerceivedAction=null),e.decline(),!1})},decline:function(){return this.serverCall("decline").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).send(),!1}}),t.A2ACantAnswerReasonLink=n.extend({onLoad:function(){var e=this;this.$id("@a2a_cant_answer").on("click",function(){return e.allow_reason&&e.createModal("decline_modal").show(),!1})}}),t.A2ACantAnswerReasonModal=s.extend({onLoad:function(){this._super.apply(this),this.reason=this.child("editor")},onSubmit:function(){this.serverCall("attach_decline_reason").kwargs({reason:this.reason.serialize()}).liveMutate().send(),this.close()}}),t.UndoCantAnswerLink=n.extend({onLoad:function(){var e=this;this.$id("@undo_cant_answer").on("click",function(){return e.emitEvent(o.helpers.removeQuestionCantAnswer(e.id)),e.undoCantAnswer(),!1})},undoCantAnswer:function(){return this.serverCall("undo_mark_as_cant_answer").liveMutate().send(),!1}})},"./app/view/question/lookup_bar.js":function(e,t,i){var n=i("./webnode2.js"),o=i("./shared/core/webnode.js"),s=i("./shared/jquery.js"),a=i("./view/selector.js").WithServerCallMessageMixin,r=i("./shared/window_manager.js"),d=i("./shared/events/index.js"),l=i("./shared/debounce.js").debounce,c=i("./shared/dom.js"),u=i("./shared/siteuri.js").URI,h=i("./shared/cookies.js"),p=i("./third_party/autosize.js"),f=i("./app/view/site_header/logged_in.js").LoggedInSiteHeaderContext,_=i("./unified_view/question/ask_question.js").AskQuestionButton,m=i("./shared/log_sender.js"),g=null;t.LookupBarSelector=a.extend({onLoad:function(){var e=this;g=e,this._super.apply(this,arguments),e.context=e.getContext(f),e.logged_in&&e.context.set("question_query_empty",this.isQueryEmpty()),this.$results_wrapper=this.$id("@results_wrapper"),this.$results_container.removeClass("hidden"),e.displayedRevision=0,e.currentRevision=0,e.currentOutstandingRequests=0,e.lastIssuedQuery=null,e.lastSeenQuery=null,e.serverCallTimeout=250,e.lastRevisionNeedsUpdate=!1,e.cache={},e.cacheSize=0,e.focused=!0,e.shouldSimScroll=!0,e.$wrapper=e.$id("@wrapper"),e.shouldHighlightOnFocus=!e.should_autofocus,e.editingQuestionDetails=!1,e.targetType=null,e.targetOid=null,e.adding_followup=!1,e.hasResults=!1,s(document).mousedown(function(t){e.$wrapper.is(t.target)||0!==e.$wrapper.has(t.target).length||s(t.target).closest(".SiteHeader.search_focused")[0]?e.$id("@details_wrapper").has(t.target).length>0?e.showResults(!1):(e.focused||m.log("search_monitoring",{type:"bar_open"}),e.shouldSimScroll=!1,e.focused=!0,0!==e.query.trim().length?e.hasResults?e.showResults(!0):e._setQuery(e.$input.val()):e.showResults(!1)):(e.focused=!1,e.setHighlight(!1),e.showResults(!1),"forced"===e.askMode&&(e.isQueryEmpty()?(e.setAskMode(!1),e.setQuery("")):e.askMode=!0))}),e.$input.click(function(){if(e.shouldHighlightOnFocus||e.setHighlight(!0),e._queryIsPunctation(e.query)&&"forced"===e.askMode){var t=e.opening_question_punctuation.length;e.$input[0].setSelectionRange(t,t)}}),e.askMode=!1,e.showingInterstitial=!1,e.source=null,e.currentSession=0,this.handleEvent(d.Types.LOOKUP_BAR_QUESTION_DETAILS_STATE,function(t){"focused"==t.payload.state?e.showResults(!1):"shown"==t.payload.state?(e.$id("@details_wrapper").removeClass("hidden"),e.editingQuestionDetails=!0):"hidden"==t.payload.state&&(e.$id("@details_wrapper").addClass("hidden"),e.editingQuestionDetails=!1,e.$input.focus())}),this.handleEvent(d.Types.ASK_QUESTION_MODAL_SUCCESS,function(t){e.$input.val("")}),e.debouncedUpdate=l(function(){e.lastIssuedQuery!=e.lastSeenQuery?(e.query=e.lastSeenQuery,e.lastIssuedQuery=null,e.updateResults()):e.lastIssuedQuery=null},e.serverCallTimeout)},inputFocusHandler:function(){this._super.apply(this,arguments),this.shouldHighlightOnFocus&&(this.setHighlight(!0),this.isQueryEmpty()||!this.hasResults||this.editingQuestionDetails||this.showResults(!0))},inputBlurHandler:function(){if(this._super.apply(this,arguments),this.logged_in){var e=this;document.activeElement.id==e.$input.attr("id")||e.focused||(e.setHighlight(!1),e.shouldHighlightOnFocus=!0)}},handleEscKey:function(){this._super.apply(this,arguments),this.logged_in&&this.setHighlight(!1)},capitalize:function(e){return e?e=e.charAt(0).toUpperCase()+e.slice(1):e},setInputVal:function(e,t){var i=this.$input[0].selectionStart,n=this.$input[0].selectionEnd;t&&(i+=t,n+=t),this.$input.val(e),e.length>0&&this.$input[0].setSelectionRange(i,n)},_queryIsPunctation:function(e){return e===this.opening_question_punctuation+this.closing_question_punctuation||e===this.opening_question_punctuation&&e.length>0||e===this.closing_question_punctuation&&e.length>0},_setQuery:function(e,t){var i=this.capitalize(e);if(t||this.askMode&&i!==e){var n="";(e||t)&&-1==e.indexOf(this.opening_question_punctuation)&&(n=this.opening_question_punctuation);var o="";(e||t)&&-1==e.indexOf(this.closing_question_punctuation)&&(o=this.closing_question_punctuation),e=n+i+o,this.setInputVal(e,n.length)}else this.askMode&&"forced"!==this.askMode&&this._queryIsPunctation(e)&&(e="",this.setInputVal(e));if(this.length_limit&&this.logged_in){var s=e.length>this.length_limit;this.context.set("question_title_over_limit",s)}this._super.apply(this,[e])},addToCache:function(e,t){if(e in this.cache||this.cacheSize++,this.cache[e]=t,this.cacheSize>this.max_cache_size){var i=this.currentRevision+1,n=null;for(var o in this.cache)this.cache[o][1]<i&&(i=this.cache[o][1],n=o);this.cacheSize--,delete this.cache[n]}},updateResults:function(){var e=this;""===e.query&&e.setAskingTarget(null,null);var t=e.query.trim();if(e.lastSeenQuery=t,"forced"===e.askMode&&(e._queryIsPunctation(t)||""===t))return void e.showInterstitial("ask_question");var i={query:e.query},n=e.getExtraKwargs();for(var o in n)i[o]=n[o];var s=e.currentRevision;if(e.lastRevisionNeedsUpdate=!1,0===t.length)e.displayedRevision=s,e.setAskMode(!1),e.showResults(!1),e.currentSession++;else if(d in e.cache)e.currentOutstandingRequests++,e.resultsServerCallHandler(s,e.cache[d][0],this.showingInterstitial);else{var a=3;if(e.currentOutstandingRequests<a){i.parent_cid=e.cid,i.selector_id=e.selector_id;var r=e.showingInterstitial,d=JSON.stringify(i);if(null!==e.lastIssuedQuery)return;var l=Date.now();e.lastIssuedQuery=e.query,e.currentOutstandingRequests++,this.debouncedUpdate(),e.serverCall("results_content_for").kwargs(i).sendJsData(e.shouldSendJSData).success(function(t){var i=Date.now()-l;e.resultsServerCallHandler(s,t,d,r,i)}).except(function(){var t=Date.now()-l;e.resultsServerCallHandler(s,null,d,r,t)}).error(function(){var t=Date.now()-l;e.resultsServerCallHandler(s,null,d,r,t)}).send()}else e.lastRevisionNeedsUpdate=!0}var c=this.child("results");c&&c.setSelection(0)},getExtraKwargs:function(){return{ask_mode:this.askMode,current_session:this.currentSession}},resultsServerCallHandler:function(e,t,i,s,a){if(a===undefined&&(a=0),this.currentOutstandingRequests--,this.hasResults=!0,!(e<=this.displayedRevision)){if(a<=this.serverCallTimeout&&(this.lastIssuedQuery=null),s&&(this.showingInterstitial=!1,this.$id("@ask_mode_interstitial").addClass("hidden"),this.$id("@results").removeClass("hidden")),null!==t&&(n.forgetContents(this.$results),o.setContent(this.$results,t),this.displayedRevision=e,this.addToCache(i,[t,e])),this.showResults(!0),this.lastRevisionNeedsUpdate)return this.lastIssuedQuery=null,void this.updateResults();this.lastSeenQuery!=this.lastIssuedQuery?(this.lastIssuedQuery=null,this.query=this.lastSeenQuery,null!==t&&this.updateResults()):(this.lastIssuedQuery=null,this.debouncedUpdate.cancel())}},queryDidChange:function(){this.currentRevision++,this.logged_in&&(this.context.set("question_query_empty",this.isQueryEmpty()),this.context.set("force_enable_button",!0)),this._super.apply(this,arguments),this.is_textarea&&!this.hasAutoSized&&(p(this.$input),this.hasAutoSized=!0)},isQueryEmpty:function(){return""===this.query.trim()||this._queryIsPunctation(this.query.trim())},showResults:function(e){var t=this;e&&t.focused&&!t.isQueryEmpty()?(t.$results_wrapper.removeClass("fade_out"),t.setHighlight(!0)):c.addAnimationClass(t.$results_wrapper,"fade_out",function(){})},resultWasSelected:function(e,t){var i=this,n=this.child("results").child(e.data.cname);n&&(n.processAction(e.data.action_mousedown),"search"===e.ty?i.goToSearch(t):(-1!==e.data.qid&&h.setMessage("look",[e.data.qid,!0]),i.query.length<140&&h.setCookie("qsu-q",JSON.stringify(i.query),{expires:1}),i.storeSearchResultClicked(e.data.oid,e.ty),-1!==e.data.qid&&i.targetType?i.adding_followup||(i.adding_followup=!0,i.serverCall("add_followup").kwargs({qid:e.data.qid,target_type:i.targetType,target_oid:i.targetOid}).success(function(e){t?r.navigateTo(e,"present"):r.navigateTo(e),i.adding_followup=!1}).error(function(){i.adding_followup=!1}).send()):t?r.navigateTo(e.data.url,"present"):r.navigateTo(e.data.url)),m.log("search_monitoring",{type:"result_selected"}))},hideInterstitials:function(){this.showingInterstitial=!1,this.$id("@ask_mode_interstitial").addClass("hidden"),this.$id("@results").removeClass("hidden")},showInterstitial:function(e){this.hideInterstitials(),this.showingInterstitial=!0,this.$id("@ask_mode_interstitial").removeClass("hidden"),this.$id("@results").addClass("hidden");var t=this.interstitials[e][0],i=this.interstitials[e][1];this.$id("@interstitial_title").text(t),this.$id("@interstitial_text").text(i)},setHighlight:function(e,t){var i=this.parent().parent().$id("@body_blur");if(e){i.addClass("lookup_bar_modal_overlay"),i.removeClass("closing"),this.logged_in&&this.context.set("force_enable_button",!0),this.emitEvent({type:d.Types.SITE_HEADER_SEARCH_FOCUSED,payload:{focused:!0}});var n=this.$input.outerWidth();this.$results_wrapper.width(n-2),this.focused=!0}else c.addAnimationClass(i,"closing",function(){i.hasClass("lookup_bar_modal_overlay")&&i.removeClass("lookup_bar_modal_overlay")}),this.emitEvent({type:d.Types.SITE_HEADER_SEARCH_FOCUSED,payload:{focused:!1}}),this.focused=!1;this.nextHighlightCallback&&this.nextHighlightCallback(),this.nextHighlightCallback=t},setAskMode:function(e,t){this.askMode=e,(this.query.trim()||e)&&this._setQuery(this.query.trim(),!0),e&&(this.$input.focus(),t?this.showInterstitial(t):this.query.trim().length>=10&&this.query.split(" ").length>=3?this.showInterstitial("good"):this.showInterstitial("bad"),this.logMiscAction("LookupBarSetAskModeClickthrough"),this.lastRevisionNeedsUpdate=!1,this.focused=!0,this.showResults(!0))},logMiscAction:function(e){var t=this.child("results");if(t){var i=t.child("search");i&&i.processAction(e)}},submit:function(e){this.logged_in?this.should_go_to_search_on_enter?(this.logMiscAction("LookupBarPressEnterSearch"),this.goToSearch(e)):this.logMiscAction("LookupBarPressEnterNothing"):(this.logMiscAction("LookupBarPressEnterSearch"),this.goToSearch(e))},goToSearch:function(e){if(this.query.trim()){var t=u("/search?q="+encodeURIComponent(this.query).replace(/%20/g,"+")+this.keepFilters);e?r.navigateTo(t.unicode(),"present"):r.navigateTo(t.unicode())}},getQuestionDetails:function(){var e=this.child("question_details");return e?e.serialize():""},setSource:function(e){this.source=e},updateServerMessage:function(e,t){var i=this;return e?(t.url&&(i.logMiscAction("LookupBarAddQuestionSuccess"),r.navigateTo(t.url)),!1):"confirm_email"===t.type?(i.createModal("email_confirmation_dialog_contents").onSubmit(function(){i.serverCall("resend_email_confirmation").send()}).show(),!1):(i.logMiscAction("LookupBarAddQuestionFail"),i.context.set("force_enable_button",!0),i.$input.focus(),!(!t||!t.message)&&(this.$id("@server_message_title").text(t.message.title),t.message.note&&this.$id("@server_message_note").text(t.message.note),!0))},setAskingTarget:function(e,t){this.targetType=e,this.targetOid=t,this.emitEvent({type:d.Types.LOOKUP_BAR_SET_ASKING_TARGET,payload:{isCleared:null==this.targetType}})},storeSearchResultClicked:function(e,t){this.serverCall("store_search_result_clicked").kwargs({res_type:t,oid:e}).send()}}),t.LookupBarAskQuestionModalButton=_.extend({onClick:function(){var e=g.query;g.setHighlight(!1),this.showModal(e),this.serverCall("log_ask_question_modal_opened").kwargs({source:this.source,page_type:this.page_type,initial_query:e}).send()}})},"./app/view/question/lookup_bar_details.js":function(e,t,i){var n=i("./unified_view/qtext2/editor.js").Editor,o=i("./shared/events/index.js"),s=i("./app/view/site_header/logged_in.js").LoggedInSiteHeaderContext;t.AskBarDetails=n.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.context=e.getContext(s),e.setLengthChangeCallback(function(t){e.context.set("question_details_over_limit",t),e.context.set("question_details_is_empty",e.isOnlyWhiteSpace())}),this.handleEvent(o.Types.LOOKUP_BAR_QUESTION_DETAILS_STATE,function(t){"focused"==t.payload.state?e.focus():"hidden"==t.payload.state&&(e.clear(),e.context.set("question_details_is_empty",!0))})}})},"./app/view/question/merge/_merge.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js");t.QuestionMergeCandidates=n.extend({onLoad:function(){var e=this;e.$insertionEl=e.$id("@insert_candidate"),e.$showAllLinkEl=e.$id("@show_all_link"),e.$showAllLinkEl.click(function(t){t.preventDefault(),e.$id("@candidates .candidate").removeClass("hidden"),e.$showAllLinkEl.addClass("hidden")})},selectQID:function(e){var t,i=this;t=this.improvedFlow?i.$id("@candidates input[type=radio][value="+e+"]"):i.$id("@candidates input[type=checkbox][value="+e+"]"),t.length?t.map(function(){var e=o(this),t=o("label[for='"+e.attr("id")+"']");e.prop("checked",!0),e.change(),o(this).parent().insertAfter(i.$insertionEl),t.removeClass("hidden")}):i.serverCall("get_checkbox_content").kwargs({qid:e}).contentFor(i.$insertionEl).success(function(){i.$id("@candidates input[type=radio][value="+e+"]").prop("checked",!0),i.$id("@candidates input[type=radio][value="+e+"]").change(),i.$insertionEl.children().map(function(){o(this).insertAfter(i.$insertionEl)})}).send()},getSelectedQIDs:function(){var e,t=[];return e=this.improvedFlow?"@candidates input[type=radio]:checked:not(:disabled)":"@candidates input[type=checkbox]:checked:not(:disabled)",this.$id(e).map(function(){t.push(parseInt(this.value))}),t}}),t.QuestionMergeCanonicalPicker=n.extend({onLoad:function(){var e=this;e.$radios=e.$id("@picker input[type=radio]"),e.$radios.change(function(t){e.$radios.map(function(){var e=o(this),t=o("label[for='"+e.attr("id")+"']");t.toggleClass("selected",e.is(":checked")),t.toggleClass("not_selected",!e.is(":checked"))})})},getSelectedQID:function(){var e=this.$id("@picker input[type=radio]:checked");if(e)return parseInt(e.val())}}),t.OriginallyAnsweredBanner=n.extend({onLoad:function(){var e=this;e.$id("@remove").click(function(t){t.preventDefault(),e.serverCall("remove_banner").liveMutate().send()})}})},"./app/view/question/merge/modal.js":function(e,t,i){var n=i("./shared/window_manager.js"),o=i("./view/modal.js"),s=i("./shared/util.js");t._QuestionMergeModal=o.MultiStep.extend({onSubmitSuccess:function(e,t,i,o){var s=this,a=25e3,r=1e3;if(this.improvedFlow||this.merge_policy)return void n.navigateTo(e);o<a?setTimeout(function(){s.serverCall("answer_has_moved").kwargs({qids:t,canonical_qid:i,time_so_far:o+r}).success(function(o){o?s.onSubmitSuccess(e,t,i,o):n.navigateTo(e)}).send()},r):(s.serverCall("log_timeout_before_answers_moved").kwargs({time_taken:o+r}).send(),n.navigateTo(e))},getCallBacks:function(){var e=this;return{QuestionMergeModalSelectorStep:{isLastStep:!1,getStepData:function(){var t=e.data_cache[e.key],i=e.child("candidates").getSelectedQIDs();return i.push(t.qid),s.extend(t,{selectedQIDs:i})},onSubmit:function(){if(e.child("candidates").getSelectedQIDs().length)if(e.merge_policy){e.disableSubmit();var t=e.data_cache.QuestionMergeModalSelectorStep,i=e.child("candidates").getSelectedQIDs();e.serverCall("submit").kwargs({qids:i,canonical_qid:t.qid}).success(function(t){e.onSubmitSuccess(t.url,i,i[0],0)}).liveMutate().send()}else e._loadNext()}},QuestionMergeModalMultipleLockedStep:{isLastStep:!0,onSubmit:function(){e.disableSubmit();var t=e.data_cache.QuestionMergeModalSelectorStep,i=t.selectedQIDs;e.serverCall("submit").kwargs({qids:i}).success(function(){e._closeModal()}).send()}},QuestionMergeModalCanonicalStep:{isLastStep:!0,onSubmit:function(){var t=e.child("picker").getSelectedQID(),i=e.data_cache.QuestionMergeModalSelectorStep;if(t){e.disableSubmit();var n=i.selectedQIDs;e.serverCall("submit").kwargs({qids:n,canonical_qid:t}).success(function(i){e.onSubmitSuccess(i.url,n,t,0)}).liveMutate().send()}}}}}})},"./app/view/question/merge/selector.js":function(e,t,i){var n=i("./view/selector.js").Selector;t.QuestionMergeESSelector=n.extend({resultWasSelected:function(e){var t=this;t.parent().child("candidates").selectQID(e.data.qid),t.setQuery("")},getExtraKwargs:function(){return{ignore_qids:this.parent().child("candidates").getSelectedQIDs()}}})},"./app/view/question/not_helpful.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.CollapseAnswerLink=n.extend({onLoad:function(){var e=this;this.$id("@undo_not_collapsible").click(function(t){return e.serverCall("undo_not_collapsible").kwargs({aid:e.aid}).liveMutate().send(),!1}),this.$id("@make_uncollapsible").click(function(t){return e.serverCall("make_uncollapsible").kwargs({aid:e.aid}).liveMutate().send(),!1})}})},"./app/view/question/question_add.js":function(e,t,i){var n=i("./app/view/topic_selector.js").TopicSelector,o=i("./shared/events/index.js");t.AddQuestionTopicTempSelector=n.extend({addIgnoreOid:function(e){e&&this.ignore_tids.push(e)},maybeAddTopic:function(e,t){t&&-1==this.ignore_tids.indexOf(e)&&(this.addIgnoreOid(e),this.emitEvent({type:o.Types.QUESTION_TOPIC_SELECTION_ADD,payload:{selector_cname:this.cname,name:t}}))},topicWasSelected:function(e,t){this.maybeAddTopic(e,t),this.setQuery(""),this.blur()},createTopicWasSelected:function(e){this.maybeAddTopic(null,e),this.setQuery(""),this.blur()}})},"./app/view/question/suggested_answer.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.AnswerSuggestedEditDiscardButtonInline=n.extend({onLoad:function(){var e=this;this.$id("@submit").click(function(){return e.serverCall("discard_suggested_edit").kwargs({aid:e.aid}).liveMutate().send(),!1})}})},"./app/view/question/wanted_answer.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/events/index.js"),a=i("./shared/action_log.js").ActionableComponent,r=i("./view/selector.js").Selector,d=i("./view/editable_list.js").EditableList,l=i("./unified_view/a2a.js").A2ASelectorResultsMixin,c=i("./settings.js").interface_strings;t.A2AFiltersListContentItem=n.extend({onLoad:function(){var e=this;e.$id("@filter_item").click(function(t){var i=t.currentTarget;o(".A2AFiltersListContentItem").removeClass("nav_item_selected"),o(i).addClass("nav_item_selected");var n=o(".suggestions_page_wrapper"),s=o(".filters_list"),a=e.parent()&&e.parent().parent();a&&a.is_editing||(n.addClass("working"),s.addClass("u-disabled"),e.serverCall("filtered_list").kwargs({tid:e.tid}).contentFor(n).success(function(){n.removeClass("working"),s.removeClass("u-disabled")}).send())})}}),t.WantedAnswerSelector=r.extend(l),t.WantedAnswerSuggestions=n.extend({onLoad:function(){var e=this;this.child("selector")&&this.child("selector").focus(),this.handleEvent(s.Types.A2A_SELECTOR_TOGGLE,function(t){t.payload.show?e.$id("@cancel_button").removeClass("hidden"):e.$id("@cancel_button").addClass("hidden")})},a2aHeaderCountClicked:function(){this.$id("@a2a_suggestions").hide(),this.$id("@outstanding_requests").show()},a2aHeaderTitleClicked:function(){this.$id("@a2a_suggestions").show(),this.$id("@outstanding_requests").hide()}}),t.WantedAnswerSuggestionsWrapper=n.extend({onLoad:function(){var e=this;e.handleEvent(s.Types.A2A_EDIT_TOPIC_TOGGLE,function(t){e.topicEditToggle(t.payload.state)})},topicEditToggle:function(e){var t=this;e?(t.$id("@suggestions_overlay").removeClass("hidden"),setTimeout(function(){t.$id("@suggestions_overlay").addClass("active")},50)):(t.$id("@suggestions_overlay").removeClass("active"),setTimeout(function(){t.$id("@suggestions_overlay").addClass("hidden")},300))}}),t.AskedBy=n.extend({onLoad:function(){var e=this;this.$id("@modal_link").on("click",function(){return e.createModal("load_inner").kwargs({qid:e.qid,to_uid:e.to_uid}).show(),!1})}}),t.AnswerAttributionSection=n.extend({onLoad:function(){var e=this;this.$id("@modal_link").on("click",function(){return e.createModal("load_inner").kwargs({aid:e.aid,qid:e.qid}).show(),!1})}}),t.WantedAnswerWithCreditQuestionListItem=a.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(s.Types.QUESTION_CANT_ANSWER_STATE,function(t){if(t.payload.qid==e.qid){var i="passed"==t.payload.state;e.$id("@item").toggleClass("cant_answer",i)}})}}),t.EmptySuggestions=n.extend({onLoad:function(){var e=this;e.$id("@edit_topic_link").on("click",function(t){t.preventDefault(),e.emitEvent({type:s.Types.A2A_MODAL_ADD_TOPIC_FILTER,payload:{}})})}}),t.A2AFiltersList=d.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.handleEvent(s.Types.A2A_MODAL_ADD_TOPIC_FILTER,function(){e.toggleEdit(),e.child("topic_selector").focus()})},toggleEdit:function(){var e=this;e._super.apply(e,arguments),s.DocumentProxy.dispatch({type:s.Types.A2A_EDIT_TOPIC_TOGGLE,payload:{state:e.is_editing}}),e.serverCall("toggle_edit_topics").kwargs({qid:e.qid,is_editing:e.is_editing}).send()},update:function(e){var t=this;t.is_editing?(t.$id("@wrapper").addClass("is_editing"),t.editLink.text(c.done)):(t.$id("@wrapper").removeClass("is_editing"),t.editLink.text(this.edit_text),e||s.DocumentProxy.dispatch({type:s.Types.A2A_UPDATE_TOPIC,payload:{}}))}}),t.A2AFiltersListItem=n.extend({onLoad:function(){var e=this;this.$id("@remove").click(function(t){t.preventDefault(),e.serverCall("remove").success().liveMutate().send()})}})},"./app/view/quora_meets_bagel.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.QMBPage=n.extend({onLoad:function(){var e=this;e.$id("@container").on("click",".qmb_button",function(t){var i=t.target.id;return e.serverCall("take_qmb_action").kwargs({which_action:i}).success(function(){window.location.reload()}).send(),!1})}})},"./app/view/reading_list.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/fixable2.js");t.ReadingListMain=n.extend({onLoad:function(){var e=this,t=this.$id("@left_col_inner"),i=this.$id("@left_col");e.notifBanner||i.length>0&&t.length>0&&o.makeFixable(t,{min_height:i.outerHeight()+i.offset().top,min_width:990})}})},"./app/view/settings.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/inline_editor.js").InlineEditor,s=i("./app/view/share/connect.js").SocialConnector,a=i("./shared/facebook.js"),r=i("./shared/window_manager.js"),d=i("./w2.modal.js"),l=i("./shared/core/rpc.js"),c=i("./view/modal.js").Base,u=i("./shared/fx.js"),h=i("./shared/jquery.js");t.CallbackModal=c.extend({onSubmit:function(){this._super.apply(this,arguments),d.Modal.modalFor(this).executeOnSubmitCallBack()}}),t.SettingsPhoneNumberOption=n.extend({onLoad:function(){var e=this;this.setCountryCodeText(),this.$id("@country_code").on("change",function(){e.setCountryCodeText()}),this.$id("@remove_phone_number").on("click",function(){e.serverCall("remove_phone_number").liveMutate().send()}),this.$id("@add_phone_number").on("click",function(){e.createModal("load_inner_verify_phone_number").onSubmit(function(t){e.serverCall("connect").liveMutate().send()}).show()})},setCountryCodeText:function(){var e=this,t=this.countries;h("select > option").each(function(){var i=e.$id("@country_code option:selected").text(),n=this.text,o=this.value;if(i==n)e.$id("@country_code option:selected").text(o);else for(var s in t){var a=t[s],r=a[0],d=a[1];n==d&&e.$id('@country_code option[value="'+n+'"]').text(r)}})}}),t.EditAccountManagers=n.extend({onLoad:function(){var e=this,t=this.$id("@add_manager_uid"),i=this.$id("@remove_manager_uid");this.$id("@submit_add_manager_uid").on("click",function(){e.serverCall("add_manager_uid").kwargs({manager_uid:t.val()}).success(function(){r.reload()}).send()}),this.$id("@submit_remove_manager_uid").on("click",function(){e.serverCall("remove_manager_uid").kwargs({manager_uid:i.val()}).success(function(){r.reload()}).send()})}}),t.SettingsAccountEmailOption=n.extend({onLoad:function(){var e=this;this.$id("@add_another_email_link").click(function(t){return e.$id("@add_another_email_row").toggleClass("hidden"),e.$id("@add_email_input_row").toggleClass("hidden"),e.$id("@new_email").focus(),!1}),this.$id("@add_another_email").click(function(){var t=e.$id("@new_email").val();return!!t&&(e.serverCall("add_email").kwargs({email:t}).liveMutate().send(),!1)})}}),t.FindFacebookFriendsModalLink=n.extend({onLoad:function(){var e=this;this.$id("@link").on("click",function(){e.createModal("find_facebook_friends_modal").show()})}});var p=t.SettingsOption=n.extend({onLoad:function(e){var t=this;if(this.$id("@view_option_link").click(function(){return t.serverCall("check_reauth").success(function(){t.expandOption()}).send(),!1}),this.auto_open_url_hash&&e&&r.getHash().substr(0,30)=="#"+this.auto_open_url_hash){this.expandOption();var i=this.$id("@option_content").css("background-color","#E0E0E0");u.highlight(i,1500)}},expandOption:function(){this.$id("@view_option").toggleClass("hidden"),this.$id("@option_content").toggleClass("hidden")}});t.AdultSettingsOptionToggle=n.extend({onLoad:function(){var e=this;this.$id("@no_adult_content").click(function(){return e.serverCall("no_adult_content").liveMutate().send(),!1}),this.$id("@allow_adult_content").click(function(){return e.serverCall("allow_adult_content").liveMutate().send(),!1})}}),t.UserDisclaimerDialogEditor=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.$id("@inline_editor_cancel").click(function(){return d.Modal.modalFor(e).close(),!1}),this.$id("@inline_editor_submit").click(function(){return d.Modal.modalFor(e).close(),!1})}}),t.ChangePasswordOption=p.extend({onLoad:function(){this._super.apply(this,arguments),this.clear_passwords=function(){this.$id("@new_password").val(""),this.$id("@confirm_password").val("")};var e=this;this.$id("@change_password_submit").click(function(){return e.$id("@new_password").val()!==e.$id("@confirm_password").val()?(e.$id("@password_and_confirmation_mismatch").removeClass("hidden"),e.$id("@password_changed").addClass("hidden"),!1):(e.$id("@change_password_error").addClass("hidden"),e.$id("@password_and_confirmation_mismatch").addClass("hidden"),l.rpc("/settings/change_password_POST").kwargs({new_password:e.$id("@new_password").val()}).success(function(t){var i=t[0],n=t[1];e.clear_passwords(),i?e.$id("@password_changed").removeClass("hidden"):(e.$id("@password_changed").addClass("hidden"),e.$id("@change_password_error").removeClass("hidden"),e.$id("@change_password_error").text(n))}).send(),!1)})}}),t.RemoveDisclaimerOption=p.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.$id("@remove_disclaimer_submit").click(function(){return e.serverCall("remove_disclaimer").send(),!1})}}),t.GoogleConnect=n.extend({onLoad:function(){var e=this;this.$id("@google_disconnect_button").click(function(){return e.serverCall("disconnect_google").liveMutate().send(),!1})}}),t.LinkedinConnect=n.extend({onLoad:function(){var e=this;this.$id("@linkedin_disconnect_button").click(function(){return e.serverCall("disconnect_linkedin").liveMutate().send(),!1})}}),t.LinkedinConnectButton=s.extend({onLoad:function(){var e=this;this.$id("@linkedin_connect_button").on("click",function(){e.connectLinkedin()})}}),t.LinkedinPublicProfileLink=n.extend({onLoad:function(){var e=this;this.serverCall("get_profile_info").kwargs({li_uid:this.liUid}).success(function(t){null===t?e.$id("@linkedin_link").text("").attr("href","#"):e.$id("@linkedin_link").text(t.first_name+" "+t.last_name).attr("href",t.url)}).send()}}),t.ConfirmEmailModal=c.extend({onSubmit:function(){var e=this;e.serverCall("resend_email_confirmation").success(function(){e._closeModal()}).liveMutate().send()}}),t.RemoveEmailModal=c.extend({onSubmit:function(){var e=this;e.serverCall("remove_email").success(function(){e._closeModal()}).liveMutate().send()}}),t.EmailAddressRow=n.extend({onLoad:function(){var e=this;this.$id("@confirm_email").click(function(){return e.createModal("load_inner_confirm_email").kwargs({email:e.email}).show(),!1}),this.$id("@make_primary").click(function(){return e._serverCallHelper("set_primary_email")}),this.$id("@delete_email_icon").click(function(){return e.createModal("load_inner_remove_email").kwargs({email:e.email}).show(),!1})},_serverCallHelper:function(e){return this.serverCall(e).kwargs({email:this.email}).liveMutate().send(),!1}}),t.MutedRowToggle=n.extend({onLoad:function(){var e=this;this.$id("@unmute").click(function(t){e.serverCall("unmute").kwargs({oid:e.oid}).liveMutate().send(),t.preventDefault()}),this.$id("@mute").click(function(t){e.serverCall("mute").kwargs({oid:e.oid}).liveMutate().send(),t.preventDefault()})}}),t.BlockedUserToggle=n.extend({onLoad:function(){var e=this;this.$id("@unblock").click(function(t){e.createModal("load_unblock_modal").kwargs({oid:e.oid}).show(),t.preventDefault()}),this.$id("@block").click(function(t){e.createModal("load_block_modal").kwargs({oid:e.oid}).show(),t.preventDefault()})}}),t.FacebookAccountConnectedTo=n.extend({onLoad:function(){this.$id("@facebook_disconnect_button").on("click",this.disconnect.bind(this))},disconnect:function(){return this.serverCall("disconnect_facebook").liveMutate().success(function(){a.onInit(function(){window.FB.getLoginStatus(function(){},!0)})}).send(),!1}}),t.OptionLinkBase=n.extend({onLoad:function(){this.$id("@enable").on("click",this.onClickEnable.bind(this)),this.$id("@disable").on("click",this.onClickDisable.bind(this))},onClickEnable:function(){return this.serverCall("toggle_option").kwargs({enabled:!0}).liveMutate().send(),!1},onClickDisable:function(){return this.serverCall("toggle_option").kwargs({enabled:!1}).liveMutate().send(),!1}})},"./app/view/share.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/twitter.js"),a=i("./shared/facebook.js"),r=i("./shared/client_log.js"),d=t.ShareAction=o.extend({onLoad:function(){var e=this;e.$id("@share").on("click",function(t){t.preventDefault(),e.createModal("load_modal").kwargs({serialized_share:e.serialized_share,default_tab:e.default_tab,class_name:e.class_name,calling_class:e.calling_class}).show()})}});t.AutoShowShareAction=d.extend({onLoad:function(){n=this},show:function(e){this.__js_init=e,setTimeout(this.showDialog.bind(this),1500)}}),t.showShareAction=function(e){n&&n.show(e)},t.CopyToClipboardShareLink=o.extend({onLoad:function(){var e=this;this.$id("@link").click(function(t){t.preventDefault();var i=document.createElement("textarea");document.body.appendChild(i),i.value=e.copy_url,i.select();var n=document.execCommand("copy");i.remove(),e.serverCall("record_copy_link").kwargs({success:n,share_url:e.copy_url,share_info:e.share_info}).send(),n&&e.serverCall("link_copy_success").send()})}}),t.TwitterNetworkShare=o.extend({onLoad:function(){var e=this;s.onInit(function(){window.twttr.events.bind("tweet",function(t){e.isTweeted(t)&&(r.logEvent("ShareTwitter",t.target),e.serverCall("record_tweet").send())})}),e.$id("@share").on("click",function(t){t.preventDefault(),e.openTwitterPopup()}),e.actionButton=e.child("share_twitter"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(){e.openTwitterPopup()})},openTwitterPopup:function(){var e=this,t="500",i="400",n="True",o="width="+t+",height="+i+",resizable="+n;window.open(e.share_url,"_BLANK",o)},isTweeted:function(e){var t=this,i=String(e.target.id),n=String(t.cid);return i.indexOf(n)>-1}}),t.LineNetworkShare=o.extend({onLoad:function(){this.$id("@share").on("click",this.onClick.bind(this))},onClick:function(e){var t=this;window.open(t.line_url,"Share on LINE","height=450,width=500"),e.preventDefault()}}),t.FacebookNetworkShare=o.extend({onLoad:function(){var e=this;a.load(),e.$id("@share").on("click",e.onClick.bind(e)),e.actionButton=e.child("share_facebook"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(t){e.onClick(t)})},onClick:function(e){var t=this;return t.is_debugging_mode&&(console.log(t.share_url),console.log(t.target)),window.FB.ui({method:"feed",display:"popup",link:t.share_url},function(i){i&&i.post_id&&(r.logEvent("ShareFacebook",e.target),t.serverCall("record_facebook_share").send())}),!1}})},"./app/view/share/connect.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/siteuri.js").URI,a=t.socialConnectorBase={connectLinkedin:function(e){var t=this;o(document).one("linkedin_oauth_approved."+t.cid,function(i,n){t.serverCall("connect_linkedin").kwargs({li_uid:n}).liveMutate().send(),e&&e()});var i=s("/linkedin_/oauth_window");window.open(i.unicode(),"_BLANK","height=365,width=600")},connectTwitter:function(e){var t=this;o(document).one("twitter_oauth_approved."+t.cid,function(i,n){var o=n.accessToken;t.serverCall("connect_twitter").kwargs({access_token_key:o.key}).liveMutate().send(),e&&e()});var i=s("/twitter/oauth_window");window.open(i.unicode(),"_BLANK","height=558,width=800")}};t.SocialConnector=n.extend(a)},"./app/view/share/form.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./app/view/share/connect.js").SocialConnector,s=i("./tooltip.js"),a={_state:{},get:function(e){return this._state[e]},set:function(e,t){this._state[e]=t}},r=o.extend({contextProperty:null,onLoad:function(){var e=this;if(this.list_item=this.$id("@share_checkbox_list_item"),this.checkbox=this.$id("@checkbox"),this.action_link=this.$id("@action_link"),this.message_preview=this.$id("@message_preview"),this.message_preview_text=this.$id("@message_preview_text"),this.label_clickable=this.$id("@label_clickable"),!this.is_disabled){var t=a.get(this.contextProperty);this.list_item.toggleClass("is_not_checked",!t),this.checkbox.prop("checked",t)}this.checkbox.on("change",function(){var t=e.isChecked();if(t&&e.needs_action)return e.remedyDisabled(),void e.checkbox.prop("checked",!1);e.logCheckboxChangedJS(t),e.list_item.toggleClass("is_not_checked",!t),a.set(e.contextProperty,t)}),this.label_clickable.on("click",function(){e.checkbox.click()}),this.action_link.on("click",function(){return e.is_disabled?e.remedyDisabled():e.editText(),!1})},logCheckboxChangedJS:function(e){this.serverCall("log_checkbox_changed_js").kwargs({is_checked:e,share_info:this.share_info}).send()},isChecked:function(){return this.checkbox.prop("checked")},remedyDisabled:function(){},beginEditingText:function(){}}),d=r.extend({contextProperty:"shareToTwitter",remedyDisabled:function(){this.connectTwitter()}});t.ShareCheckboxTwitterCompact=d.extend({onLoad:function(){this._super.apply(this,arguments),s.attach(this.list_item,this.default_text)},remedyDisabled:function(){var e=this;this.connectTwitter(function(){e.checkbox.prop("checked",!0)})}}),t.ShareForm=n.extend({getValues:function(){var e=this.child("checkbox_tw");return{tw:e&&e.isChecked()}}}),t.ShareFormMessageEditor=n.extend({onLoad:function(){this.$editor=this.$id("@editor"),this.focus()},focus:function(){this.$editor.focus()},isOnlyWhiteSpace:function(){return""===this.$editor.val().trim()},getText:function(){return this.$editor.val()}})},"./app/view/share/modal.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/core/component.js"),s=i("./app/view/share/connect.js").socialConnectorBase,a=i("./view/modal.js").Base,r=i("./shared/window_manager.js"),d=i("./shared/action_log.js"),l=i("./shared/client_log.js");t.ShareFormModal=a.extend(n.extend({},s,{onLoad:function(){var e=this;e.results=[],e.shortURLCopyField=e.$id("@short_url_copy_field"),e.boardCheckbox=e.$id("@board_checkbox"),e.boardSelectorContainer=e.$id("@board_selector_container"),e.boardSelector=e.child("board_selector"),e.sendCheckbox=e.$id("@send_checkbox"),e.multiSelectorContainer=e.$id("@multi_selector_container"),e.child("selector").whenOnSavedResultsChanged(function(t){e.updateResults(t)}),"function"==typeof window.history.pushState&&(r.isParamInURL("share")||window.history.pushState(null,"",r.addParamToURL(""+window.location,"share","1"))),e.isChecked(e.boardCheckbox)&&e.boardSelectorContainer.show(),e.isChecked(e.sendCheckbox)&&e.multiSelectorContainer.show(),e.boardCheckbox.click(function(){e.isChecked(e.boardCheckbox)?e.enableSubmit():e.disableSubmitIfNecessary()}),e.sendCheckbox.click(function(){if(!e.isChecked(e.sendCheckbox))return e.multiSelectorContainer.addClass("hidden"),void e.disableSubmitIfNecessary();e.multiSelectorContainer.removeClass("hidden")}),e.shortURLCopyField.click(function(){n(this).select()}),this._super.apply(this,arguments),e.disableSubmitIfNecessary()},onClose:function(){return this._closeModal(),this.originalUrl&&"function"==typeof window.history.pushState&&window.history.pushState(null,"",this.originalUrl),!1},onSubmit:function(){var e=this;e.boardSelector&&e.boardSelector.selected_board?(e.boardInfo.bid=e.boardSelector.selected_board.bid,e.boardInfo.name=e.boardSelector.selected_board.name,e.boardInfo.is_submission=e.boardSelector.selected_board.is_submission):e.isChecked(e.boardCheckbox)&&e.boardCheckbox.click();var t=e.checkboxValues();if(t.send=e.isChecked(e.sendCheckbox),!e.atLeastOneChecked(t))return e.disableSubmit(),!1;for(var i in t)if(!0===t[i]){var n="Share"+i[0].toUpperCase()+i.slice(1);l.logEvent(n,o.getAnyElement(e))}d.logSecondaryAction("Share",e.share_target),e.disableSubmit(),e.serverCall("dialog_submit_controller").kwargs({checkboxes:t,message:e.child("message_editor").getText(),board_info:e.boardInfo,send_recipients:e.results}).success(function(t){e._closeModal()}).error(function(){e._closeModal()}).liveMutate().send()},checkboxValues:function(){var e=this,t={};return n.each(e.shareChannels,function(){t[this]=e.isChecked(e.$id("@"+this+"_checkbox"))}),t},atLeastOneChecked:function(e){var t=!1;return n.each(e,function(e,i){t=t||i}),t},uncheckAll:function(){var e=this;n.each(e.shareChannels,function(){e.$id("@"+this+"_checkbox").prop("checked",!1)}),e.disableSubmit()},disableSubmitIfNecessary:function(){var e=this.checkboxValues();this.atLeastOneChecked(e)||0!==this.results.length||this.disableSubmit()},updateResults:function(e){for(var t=0;t<e.length;t++)this.results.push(e[t].data.uid);this.results.length>0||this.atLeastOneChecked(this.checkboxValues())?this.enableSubmit():this.disableSubmit()},isChecked:function(e){return e.prop("checked")}}))},"./app/view/signup_validation.js":function(e,t,i){var n=i("./input_validate.js").InputValidator,o=i("./unified_view/signup/_signup.js").SignupContext;t.SignupValidator=n.extend({onLoad:function(){this._super.apply(this,arguments),this.signupContext=this.getContext(o),this.signupContext.get("validators")[this.id]=this}})},"./app/view/site_header.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.NonMemberSiteHeaderBase=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.SITE_HEADER_SEARCH_FOCUSED,function(t){e.$id("@header").toggleClass("search_focused",t.payload.focused)})}})},"./app/view/site_header/logged_in.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./view/hover_menu.js"),a=i("./shared/events/index.js"),r=i("./shared/cookies.js"),d=i("./shared/w2.context.js"),l=i("./shared/window_manager.js"),c=i("./unified_view/messages.js").createMessagesManager,u=i("./gating.js");t.LoggedInSiteHeaderContext=d.Context.extend({initialProperties:function(){return{question_query_empty:!0,question_title_over_limit:!1,question_details_over_limit:!1,question_details_is_empty:!0,force_enable_button:null}}}),t.LoggedInSiteHeader=n.extend({contextConstructor:function(){return t.LoggedInSiteHeaderContext},onLoad:function(){var e=this;this.handleEvent(a.Types.SITE_HEADER_SEARCH_FOCUSED,function(t){e.$id("@header").toggleClass("search_focused",t.payload.focused)})}}),t.MoreHoverMenuContents=n.extend({onLoad:function(){var e=this;if(u.new_messages_modal){var t=c(this);this.$id("@messages_modal").on("click",function(e){e.preventDefault(),t.activate()})}else this.$id("@messages_modal").on("click",function(t){e.createModal("load_messages_modal").kwargs({previous_url:l.getURL(),previous_title:l.getTitle()}).webOnlyOptions({closeOnBackgroundClick:!1}).show(),t.preventDefault()})}}),t.FeedNavBadge=n.extend({onLoad:function(){var e=this;e.should_growl&&e.serverCall("send_growl").send()}}),t.NotifsNavBadge=n.extend({onLoad:function(){var e=this;this.handleEvent(a.Types.NOTIFS_CLEAR_BADGE,function(t){e.$id("@badge").addClass("hidden"),l.setTitle(l.getTitle().replace(/^\(.+?\)/g,""))})}}),t.MoreNavItem=s.HoverMenu.extend({onLoad:function(){var e=this;e._super.apply(this,arguments),e.$id("@link").click(function(){e.serverCall("maybe_log_header_click").liveMutate().send()})}}),t.NotifsNavItemBase=s.HoverMenu.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.handleEvent(a.Types.NOTIFS_HIDE_DROPDOWN,function(){e.cancelHover=!0,e.doHide()})},isInvalidCloseTarget:function(e){var t=this.$id("@link"),i=".SiteHeaderHoverMenuContents";return!!(e.is(t)||e.parents(t).is(t)||e.is(i)||0!==e.parents(i).length)},doShow:function(){this.emitEvent({type:a.Types.NOTIFS_CLEAR_BADGE,scope:a.scope.GLOBAL,payload:{}}),this.serverCall("clear_badge").send(),this._super.apply(this,arguments)}}),t.NotifsHoverMenuContents=n.extend({onLoad:function(){this.$id("@dropdown").on("DOMMouseScroll mousewheel",function(e){var t=this.scrollTop,i=this.scrollHeight,n="DOMMouseScroll"==e.type?4*e.originalEvent.detail:e.originalEvent.deltaY,s=n<0;!s&&n>i-o(this).height()-t?(o(this).scrollTop(i),e.preventDefault()):s&&-n>t&&(o(this).scrollTop(0),e.preventDefault())})}}),t.MobileSiteLink=n.extend({onLoad:function(){this.$id("@mobile_link").click(function(){return r.setCookie("m","1"),window.location.reload(!0),!1})}})},"./app/view/site_header/logged_out.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.LoggedOutSiteHeader=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.SITE_HEADER_SEARCH_FOCUSED,function(t){e.$id("@header").toggleClass("search_focused",t.payload.focused)}),e.$id("@signup").click(function(){return e.serverCall("show_signup_wall_if_not_logged_in").liveMutate().send(),!1}),e.$id("@login").click(function(){return window.loginIntent=!0,e.serverCall("show_signup_wall_if_not_logged_in").liveMutate().send(),!1})}})},"./app/view/static.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js");t.JobsMain=n.extend({onLoad:function(){var e=this;o(".expand_link").click(function(t){t.preventDefault();var i=o(this).attr("id").split("_").pop();e.$id("@expand_"+i).toggleClass("hidden"),o(this).toggleClass("active_section")}),o.easing.easeOutExpo=function(e){return 1-Math.pow(1-e,6)},o(".jobs_listing_button").click(function(t){t.preventDefault();var i=e.$id("@careers");i.length&&o("html, body").animate({scrollTop:i.offset().top-100},2500,"easeOutExpo")})}}),t.FeedbackTopicSelector=n.extend({onLoad:function(){var e=this;if(e.$id("@topic_selector").on("change",function(t){t.preventDefault();var i=parseInt(o(this).val());e.changeSelectorWithVal(i)}),window.location.search){var t=e.findGetParameter("option");e.$id("@topic_selector option").each(function(){t==o(this).val()&&(e.changeSelectorWithVal(parseInt(t)),e.$id("@topic_selector").val(t))})}},findGetParameter:function(e){var t=null,i=[];return window.location.search.substr(1).split("&").forEach(function(n){i=n.split("="),i[0]===e&&(t=decodeURIComponent(i[1]))}),t},changeSelectorWithVal:function(e){var t=this;t.serverCall("choose_selector").kwargs({feedback_type:e}).contentFor(t.$id("@faq_selector")).send(),i("./shared/log_sender.js").log("feedback_topic_selector",{feedback_type:e,is_mobile:!1})}}),t.SuggestedFAQ=n.extend({onLoad:function(){var e=this;e.$id("@need_help_button").on("click",function(){o(this).hide(),e.$id("@general_form").removeClass("hidden")})}}),t.JobListingMain=n.extend({onLoad:function(){this.$id("@apply_button").on("click",this.onClickApplyNow.bind(this))},onClickApplyNow:function(){var e=this;if(e.pixel_action)qp&&qp("track",e.pixel_action),window.location.href=e.apply_url;else if(e.pixel_url){var t=new XMLHttpRequest;t.onreadystatechange=function(){window.location.href=e.apply_url},t.open("GET",e.pixel_url,!0),t.send(null)}else window.location.href=e.apply_url;return!1}})},"./app/view/survey/question_page.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js");t.Survey=n.extend({onLoad:function(){var e=this;e.bindSurveyDismissHandler(),e.bindSurveySubmitHandler(),e.serverCall("show_card").send()},bindSurveySubmitHandler:function(){var e=this;this.$id("@submit_form").on("click",function(){var t=e.$id("@survey_form").find("input[type='radio']:checked").val(),i=o(this).parents(".Survey"),n=e.$id("@response_input").val();void 0!==t&&e.serverCall("submit_survey").kwargs({selected_option:t,response_text:n}).success(function(){e.$id("@survey_wrapper").addClass("hidden"),e.$id("@feedback").removeClass("hidden"),i.hide()}).send()})},bindSurveyDismissHandler:function(){var e=this;this.$id("@dismiss").on("click",function(){e.$id("@survey").fadeOut(800),e.serverCall("dismiss_survey").send()})}})},"./app/view/thanks.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.ThanksLink=n.extend({onLoad:function(){var e=this;this.$id("@thanks_link").click(function(){return e.serverCall("send_thanks").liveMutate().send(),!1})}})},"./app/view/thread.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./qtext2/constants.js"),a=i("./third_party/autosize.js");t.ModalThreadMessageInlineEditor=n.extend({onLoad:function(){var e=this;this.editor=this.child("editor"),this.$messageTextarea=this.$id("@message_textarea"),this.$submitButton=this.$id("@inline_editor_submit"),this.editorShown=this.show_editor,this.submitHandler(),e.focus_onload&&e.focusInput(),this.handleEvent(o.Types.MULTIMODAL_SHOW,function(){e.focus_onload&&e.focusInput()}),this.$messageTextarea.attr("rows",1),a(this.$messageTextarea),this.$messageTextarea.on("keypress",function(t){t.keyCode==s.ENTER_KEY&&t.shiftKey||t.keyCode==s.ENTER_KEY&&(t.preventDefault(),e.triggerRequest())})},submitHandler:function(){var e=this;this.$submitButton.click(function(){return e.triggerRequest(),!1})},getValue:function(){return this.is_qtext?this.editor.serialize():this.$messageTextarea.val()},getKwargs:function(){return{id:this.id,input:this.getValue()}},triggerRequest:function(){this.invokeSendMessageServerCall(this.getKwargs())},invokeSendMessageServerCall:function(e){var t=this;this.content_type&&this.emitEvent(o.helpers.inlineEditorSubmit(this.content_type,this.id)),this.$submitButton.addClass("disabled");var i=function(){t.locked=!1,t.$submitButton.removeClass("disabled")},n=function(){i()};this.serverCall("send_message").kwargs(e).success(function(e){t.resetEditorState(e),i()}).error(n).except(n).liveMutate().send()},resetEditorState:function(e){null!==e&&(this.$messageTextarea.val(""),this.$messageTextarea.attr("rows","1"),this.$messageTextarea.css("height","35px")),this._latestSavedState=null},focusInput:function(){this.$messageTextarea.focus()}}),t.ModalMessageThreadList=n.extend({onLoad:function(){this.serverCall("mark_thread_as_read").liveMutate().send()}})},"./app/view/threaded_comments.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./settings.js"),s=i("./shared/debounce.js").debounce,a=i("./shared/broadcast.js"),r=i("./shared/w2.context.js"),d=i("./shared/events/index.js"),l=i("./shared/client_log.js"),c=i("./shared/core/component.js"),u=i("./view/inline_editor.js").InlineEditor,h=r.Context.extend({initialProperties:function(){return{expanded:!1,visible:!0,showReplyBox:!1}}});t.TCommentListWrapper=n.extend({onLoad:function(){this.tcommentContext=this.getContext(h),this.moreLink=this.$id("@comment_list_more_link"),this.collapsedLink=this.$id("@collapsed_link"),this.isMoreLinkActive=!0,this.isFirstExpand=!0,this.offset=this.initial_limit,this.moreLink&&this.moreLink.on("click",this.handleMoreLinkClick.bind(this)),this.tcommentContext&&this.tcommentContext.on("expanded",this.handleVisible.bind(this));var e=this.is_root||this.tcommentContext&&this.tcommentContext.get("expanded");this.handleVisible(null,e),this.handleEvent(d.Types.COMMENT_ADD,this.handleAddComment.bind(this))},handleAddComment:function(e){e.payload.object_id!=this.object_id&&e.payload.comment_type_int==this.comment_type&&0==this.level||a.rerenderComponent(this.cid)},handleMoreLinkClick:function(e){e.stopPropagation(),e.preventDefault(),this.isMoreLinkActive&&(this.isMoreLinkActive=!1,this.pageComment())},handleVisible:function(e,t){this.$id("@comment_list_wrapper").toggleClass("hidden",!t),t&&this.lazy_load_children&&this.loadChildren()},pageComment:function(){var e=this;this.moreLink.addClass("hidden"),this.serverCall("page_comment").kwargs({object_id:this.object_id,reply_to_id:this.reply_to_id,level:this.level,offset:this.offset,limit:this.getNextPageLimit(),comment_type:this.comment_type}).success(function(){e.moreLink.removeClass("hidden"),e.isMoreLinkActive=!0,e.offset=e.getNextPageLimit(),(null===e.offset||e.offset>=e.num_children)&&(e.moreLink.addClass("hidden"),e.collapsedLink.removeClass("hidden")),e.isFirstExpand=!1}).error(function(){e.moreLink.removeClass("hidden"),e.isMoreLinkActive=!1}).contentFor(this.$id("@comment_list_first_level_placeholder_"+this.offset)).sendOnlyOnce()},getNextPageLimit:function(){return this.isFirstExpand?this.offset+this.offsetStep:this.offset+this.nextOffsetStep},loadChildren:function(){this.lazy_load_children&&(this.lazy_load_children=!1,this.serverCall("load_child_list").kwargs({object_id:this.object_id,reply_to_id:this.reply_to_id,level:this.level,comment_type:this.comment_type}).contentFor(this.$id("@comment_list_placeholder")).send())}}),t.TComment=n.extend({contextConstructor:function(){return h},parentComment:function(){return this.parent().parent().parent()},onLoad:function(){this.tcommentContext=this.getContext(h),this.tcommentContext.on("expanded",this.handleExpand.bind(this)),this.tcommentContext.on("visible",this.handleVisible.bind(this)),this.tcommentContext.set("expanded",this.force_expanded),this.tcommentContext.set("visible",!0),this.handleHighlightedComment()},handleHighlightedComment:function(){var e=this.$id("@comment_inner");this.should_scroll_into_view&&(e.get(0).scrollIntoView({behavior:"smooth"}),e.addClass("highlighted"))},handleExpand:function(e,t){this.$id("@comment_inner").toggleClass("expanded",t)},handleVisible:function(e,t){this.$id("@comment").toggleClass("hidden",!t)}}),t.TCommentReplyBox=n.extend({onLoad:function(){var e=this;this.isSubmittingComment=!1,this.editor=this.child("editor"),this.editor&&this.editor.setMeaningfulChangeCallback(s(this.save_draft.bind(this),1e3,{maxWait:6e4})),this.tcommentContext=this.getContext(h),this.tcommentContext.on("showReplyBox",function(t,i){e.$id("@reply_box").toggleClass("hidden",!i),i&&e.maybeFocusEditor()}),this.$id("@add_comment_link").on("click",function(t){t.preventDefault(),e.addComment()}),this.tcommentContext.set("showReplyBox",!1),this.$id("@reply_box").on("focusout",function(){e.editor.isEmpty()&&(e.tcommentContext.set("showReplyBox",!1),e.emitEvent({type:d.Types.COMMENT_REPLY_FOCUS,payload:{comment_id:e.reply_to_id,comment_type:e.comment_type}}))})},maybeFocusEditor:function(){var e=this;setTimeout(function(){e.editor&&e.editor.focus()},0)},addComment:function(){var e=this;if(this.tcommentContext.set("showReplyBox",!1),!this.editor.isOnlyWhiteSpace()){var t=this.editor.serialize();this.isSubmittingComment=!0,this.serverCall("add_comment").kwargs({oid:this.object_id,comment:t,reply_to_id:this.reply_to_id}).success(function(t){e.tcommentContext.set("expanded",!0),e.editor.clear(),e.isSubmittingComment=!1,e.$id("@reply_box").blur(),e.onAddCommentSuccessExtra()}).error(function(){e.isSubmittingComment=!1}).liveMutate().sendOnlyOnce()}},save_draft:function(){this.isSubmittingComment||this.serverCall("save_draft").kwargs({content:this.editor.serialize(),window_id:o.windowId,draft_space:this.draft_space}).send()},onAddCommentSuccessExtra:function(){}}),t.TCommentAddRoot=n.extend({onLoad:function(){var e=this;this.editor=this.child("editor"),this.editor&&this.editor.setMeaningfulChangeCallback(s(this.save_draft.bind(this),1e3,{maxWait:6e4})),this.isSubmittingComment=!1,this.$addRootLink=this.$id("@add_root_link"),this.$addRootLink.on("click",function(t){t.preventDefault(),e.addComment()})},addComment:function(){var e=this;if(!this.editor.isOnlyWhiteSpace()){this.isSubmittingComment=!0;var t=this.editor.serialize();this.serverCall("add_comment").kwargs({oid:this.object_id,comment:t}).success(function(i){e.editor.clear(),e.isSubmittingComment=!1,i&&i.unconfirmed_email&&e.createModal("load_unconfirmed_email_modal").show(),d.DocumentProxy.dispatch({type:d.Types.COMMENT_ADD,payload:{object_id:e.object_id,comment_type:e.comment_type,comment_type_int:e.comment_type_int,comment_input:t}})}).error(function(){e.isSubmittingComment=!1}).liveMutate().sendOnlyOnce()}},save_draft:function(){this.isSubmittingComment||this.serverCall("save_draft").kwargs({content:this.editor.serialize(),window_id:o.windowId,draft_space:this.draft_space}).send()}}),t.AnswerTCommentAddRoot=t.TCommentAddRoot.extend({addComment:function(){var e=this;e._super.apply(e,arguments),l.logEvent("AddAnswerComment",c.getAnyElement(this))}}),t.TCommentRepliesCollapsed=n.extend({onLoad:function(){var e=this;this.tcommentContext=this.getContext(h),this.tcommentContext.on("expanded",function(t,i){e.setHidden(i)}),this.$id("@show_child_link").on("click",function(t){t.preventDefault(),e.tcommentContext.set("expanded",!0)}),this.setHidden(this.tcommentContext.get("expanded"))},setHidden:function(e){this.$id("@show_child_link_wrapper").toggleClass("hidden",e)}}),t.TCommentWhoVoted=n.extend({onLoad:function(){var e=this;this.$id("@modal_link").click(function(t){t.preventDefault(),e.createModal("load_inner").kwargs({object_id:e.object_id,comment_id:e.comment_id,comment_type:e.comment_type}).show()})}}),t.DeleteCommentButton=n.extend({onLoad:function(){var e=this;this.$id("@delete").click(function(t){return e.deleteComment(),!1})},deleteComment:function(){this.serverCall("delete").liveMutate().send()}}),t.CommentReply=n.extend({onLoad:function(){var e=this;this.tcommentContext=this.getContext(h),this.$id("@show_reply_box_link").focus(this.startEditing.bind(this)),this.$id("@show_reply_box_link").on("click",function(t){t.preventDefault(),e.startEditing()}),this.handleEvent(d.Types.COMMENT_REPLY_FOCUS,function(t){t.payload.comment_id==e.comment_id&&t.payload.comment_type==e.comment_type&&e.$id("@show_reply_box_link").toggleClass("hidden")})},startEditing:function(){this.tcommentContext.set("showReplyBox",!0),this.emitEvent({type:d.Types.COMMENT_REPLY_FOCUS,payload:{comment_id:this.comment_id,comment_type:this.comment_type}})}}),t.TCommentFullTextInlineEditor=u.extend({_get_kwargs:function(){return{id:this.id,input:this.get_value(),comment_type:this.comment_type}}})},"./app/view/threaded_comments/featured.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/toggle.js"),s=i("./shared/events/index.js"),a=i("./shared/log_sender.js");t.FeedInlineAnswerAutoExpandedCommentsToggle=o.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(s.Types.FEED_ANSWER_INLINE_EXPAND,function(t){t.payload.aid==e.aid&&e.triggerSwitch()})}}),t.WebExpandedFeaturedComments=n.extend({onLoad:function(){var e=this;this.has_fetched_all_comments=!1,e.handleEvent(s.Types.ANSWER_COMMENT_SORT_ALL,function(t){t.payload.aid==e.oid&&e.toggleCommentList("all")}),e.handleEvent(s.Types.COMMENT_ADD,function(t){t.payload.object_id==e.oid&&t.payload.comment_type==e.comment_type&&e.toggleCommentList("featured")}),e.$id("@toggle_featured").click(function(t){t.preventDefault(),e.toggleCommentList("featured")}),e.$id("@toggle_all").click(function(t){t.preventDefault(),e.toggleCommentList("all")}),e.logHeight()},logHeight:function(){var e=this;e.oid%100==0&&setTimeout(function(){var t=e.$id("@expanded_comments").height();if(0!==t){var i={aid:e.aid,height:t};a.log("comment_auto_expanded_height",i)}},500)},fetchAllComments:function(){var e=this;e.has_fetched_all_comments=!0,e.serverCall("fetch_all_comments").kwargs({oid:e.oid,comment_type:e.comment_type}).contentFor(e.$id("@container_all")).sendOnlyOnce()},toggleAllComments:function(){this.$id("@container_featured").addClass("hidden"),this.$id("@container_all").removeClass("hidden"),this.$id("@toggle_featured").removeClass("is_selected"),this.$id("@toggle_all").addClass("is_selected"),this.has_fetched_all_comments||this.fetchAllComments()},toggleFeaturedComments:function(){this.$id("@container_featured").removeClass("hidden"),this.$id("@container_all").addClass("hidden"),this.$id("@toggle_all").removeClass("is_selected"),this.$id("@toggle_featured").addClass("is_selected")},toggleCommentList:function(e){var t=this;"featured"==e?this.toggleFeaturedComments():this.toggleAllComments();var i={comment_type:t.comment_type,object_id:t.oid,to_sort:e};a.log("answer_comments_toggle_featured",i,{scribeOnly:!0})}})},"./app/view/topic.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./w2.dialog.js"),s=i("./shared/w2.context.js"),a=i("./settings.js").interface_strings;t.TopicAliases=n.extend({onLoad:function(){var e=this,t=this.addAliasSubmit.bind(this);this.$id("@topic_alias_add").click(t),this.$id("@topic_alias_add_form").submit(t),this.$id("@show_alias_link").click(function(t){t.preventDefault(),e.$id("@add_topic_alias").removeClass("hidden"),e.$id("@show_alias").hide(),e.$id("@topic_alias_input").focus()})},get_value:function(){return this.$id("@topic_alias_input").val()},addAliasSubmit:function(){return this._request(this.get_value()),!1},_request:function(e){var t=this;if(!this.tid||!e)return!1;this.serverCall("add_topic_alias").kwargs({tid:this.tid,alias:e}).success(function(){t.$id("@topic_alias_input").val(""),t.$id("@topic_alias_input").focus()}).liveMutate().send()}}),t.TopicAlias=n.extend({onLoad:function(){var e=this;this.$id("@topic_alias_remove").click(function(){return e.createModal("remove_topic_alias_modal").onSubmit(function(){e._request()}).show(),!1})},_request:function(){if(!this.tid||!this.alias)return!1;this.serverCall("remove_topic_alias").kwargs({tid:this.tid,alias:this.alias}).liveMutate().send()}}),t.TopicDelete=n.extend({onLoad:function(){var e=this;this.$id("@delete_topic_link").click(function(){return e.showDialog(!0),!1}),this.$id("@undelete_topic_link").click(function(){return e.showDialog(!1),!1})},getKwargs:function(e){return{tid:this.tid,comment:e.serialize()}},showDialog:function(e){var t=this.title,i=e?"delete_topic":"undelete_topic",n=e?"delete_dialog":"undelete_dialog",s=this;o.createDialog(s).title(t).ok(function(e){var t=e.dialogComponent.child("editor");if(t.isOnlyWhiteSpace())return!1;s.serverCall(i).kwargs(s.getKwargs(t)).liveMutate().send()},a.ok).cancel(null,a.cancel).load(n)}}),t.HoverTopicMenuMuteLink=n.extend({onLoad:function(){this.hoverMenuContext=this.getContext(s.HoverMenu),this.$link=this.$id("@link");var e=this;this.$link.on("click",function(){return e.$link.hasClass("topic_muted")?e.serverCall("unmute").liveMutate().send():(e.hoverMenuContext&&e.hoverMenuContext.set("hidden",!0),e.serverCall("mute").liveMutate().send()),!1})}})},"./app/view/topic/edit_topic_modal.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.EditTopicsList=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.TOPIC_LIST_REMOVE,function(t){e.removeTid(t.payload.tid)})},removeTid:function(e){this.serverCall("remove").kwargs({tid:e}).liveMutate().send()}}),t.EditTopicsLink=n.extend({onLoad:function(){var e=this;this.$id("@edit_topics").click(function(t){t.preventDefault(),e.createModal("load_modal").kwargs({metadata:e.metadata}).show()})}}),t.TopicRow=n.extend({onLoad:function(){var e=this;e.actionButton=e.child("remove"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(){e.emitEvent({type:o.Types.TOPIC_LIST_REMOVE,payload:{tid:e.tid}})})}}),t.SelectableTopicList=n.extend({getTidSelection:function(){var e={};return this.children().forEach(function(t){e[t.tid]=t.isSelected()}),e}}),t.SelectableTopic=n.extend({onLoad:function(){var e=this;e.$id("@topic").on("click",function(){e.toggleSelected()}),e.$id("@topic_checkbox").on("click",function(){e.toggleSelected()})},isSelected:function(){return this.$id("@topic_checkbox").prop("checked")},toggleSelected:function(){var e=this;e.isSelected()?e.$id("@topic_checkbox").prop("checked",!1):e.$id("@topic_checkbox").prop("checked",!0)}})},"./app/view/topic/faq.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/events/index.js"),a=i("./view/reorderable_list.js").ReorderableList,r=i("./view/reorderable_list.js").ReorderableListContents,d=i("./view/reorderable_list.js").ReorderableListItem,l=i("./view/modal.js").Base,c=i("./shared/action_log.js"),u=c.ActionableComponent;t.TopicFaqMainListWrapper=u.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@actionable").off("mousedown"),this.$id("@actionable").off("click")}}),t.TopicFaqSubPageMainList=a.extend({onLoad:function(){this._super.apply(this,arguments),this.user_can_edit&&(this.setEditLink(),this.update(),this.bindClickHandler(),this.updateToc()),this.updateFixable();var e=this;this.handleEvent(s.Types.REORDERABLE_LIST_TOGGLE_EDIT,function(){e.toggleEditMode()}),this.handleEvent(s.Types.TOPIC_FAQ_HIGHLIGHT_QUESTION,function(t){if(e.is_editing){var i=["div[sid='",t.payload.section_id,"']","[oid='",t.payload.qid,"']"].join("");o(i).addClass("highlighted")}})},enableLocalUpdate:!1,resetActiveState:function(){this.$id("@wrapper").find(".active").removeClass("active")},update:function(){this.is_editing?(this.$id("@wrapper").addClass("is_editing"),this.attach()):(this.$id("@wrapper").removeClass("is_editing"),this.detach()),this.resetActiveState()},showErrorOnLiveUpdate:function(){if(this.isOnDragActive){this.isOnDragActive=!1,o("html, body").stop();var e=this;this.serverCall("show_error_on_liveupdate").success(function(){setTimeout(function(){e.detach(),e.attach()},0)}).send()}},toggleEditMode:function(){this.is_editing=!this.is_editing,this.update(),this.resetActiveState(),this.updateFixable()},editLinkClickCallback:function(){},onEndSectionMousedownCallback:function(e,t){o(t).addClass("dragging_node node_clone_section on_drag"),e.style.height=o(t).outerHeight()+"px"},onEndSubsectionMousedownCallback:function(e,t){o(e).addClass("dragging_node node_clone on_drag"),t<1?o(e).addClass("primary_section"):o(e).addClass("sec_section")},onEndSubsectionMouseupCallback:function(e,t,i,n,s,a){if(o(t).removeClass("on_drag"),o(t).addClass("on_release"),i===n&&s===a)return void this.setToDefaultView();e=e.firstChild;var r=e.getAttribute("sid"),d=this.sectionNodes[s][0].firstChild.getAttribute("sid"),l=this;s===a?this.serverCall("move_question_in_section").kwargs({section_id:parseInt(d),qid:parseInt(e.getAttribute("oid")),new_pos:i}).liveMutate().success(function(){l.setToDefaultView()}).error(function(){l.setToDefaultView(),setTimeout(function(){l.detach(),l.attach()})}).send():this.serverCall("move_question_across_section").kwargs({section_id:parseInt(d),old_section_id:parseInt(r),qid:parseInt(e.getAttribute("oid")),new_pos:i}).liveMutate().success(function(){l.setToDefaultView()}).error(function(){l.setToDefaultView(),setTimeout(function(){l.detach(),l.attach()})}).send()},onEndSectionMouseupCallback:function(e,t,i,n){if(o(t).removeClass("on_drag"),o(t).addClass("on_release"),i<1||i===n)return void this.setToDefaultView();if(e=e.firstChild,i!=n){var s=this;this.serverCall("move_section").kwargs({section_id:parseInt(e.getAttribute("sid")),tid:s.tid,new_pos:i}).liveMutate().success(function(){s.setToDefaultView()}).send()}},updateFixable:function(){},setEditLink:function(){},bindClickHandler:function(){},updateToc:function(){}}),t.TopicFaqMainListEditLink=u.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.$id("@edit").on("click",function(t){t.preventDefault(),e.toggleMainListEditMode()}),this.$id("@done").on("click",function(t){t.preventDefault(),e.toggleMainListEditMode()})},toggleMainListEditMode:function(){this.emitEvent({type:s.Types.REORDERABLE_LIST_TOGGLE_EDIT,payload:{}})}}),t.TopicFaqContents=r.extend({onLoad:function(){this._super.apply(this,arguments),this.emitEvent({type:s.Types.REORDERABLE_LIST_ITEM_UPDATE,payload:{}});var e=this;document.addEventListener("mousedown",function(){e.emitEvent({type:s.Types.REORDERABLE_LIST_ITEM_ACTIVE,payload:{}})},!0),this.handleEvent(s.Types.TOPIC_FAQ_VIEW_MORE,function(){e.$id("@contents_wrapper").addClass("show_hidden_items")})}}),t.TopicSection=n.extend({}),t.RecentlyAddedQuestionHighlighter=n.extend({onLoad:function(){this.emitEvent({type:s.Types.TOPIC_FAQ_HIGHLIGHT_QUESTION,payload:{section_id:this.section_id,qid:this.highlight_question}})}}),t.TopicSectionEmptyState=n.extend({onLoad:function(){var e=this;this.$id("@add_question").on("click",function(t){t.preventDefault(),e.emitEvent({type:s.Types.REORDERABLE_LIST_TOGGLE_EDIT,payload:{}})})}});var h=!1;t.TopicFaqViewMoreLabel=n.extend({onLoad:function(){var e=this;e.$id("@view_more").click(function(t){h=!0,t.preventDefault(),e.expand()}),h&&e.expand()},expand:function(){this.emitEvent({type:s.Types.TOPIC_FAQ_VIEW_MORE,payload:{}}),this.$id("@view_more").removeClass("view_mode_only"),this.$id("@view_more").addClass("hidden")}}),t.TopicSectionQuestionItem=d.extend({remove:function(){this.createModal("remove").kwargs({oid:this.oid,section_id:this.section_id}).show()}}),t.TopicFaqRemoveQuestionWarning=l.extend({onSubmit:function(){var e=this;e.serverCall("remove").liveMutate().success(function(){e._closeModal()}).sendOnlyOnce()}})},"./app/view/topic/flag.js":function(e,t,i){var n=i("./view/dialog.js"),o=i("./shared/window_manager.js");t.EnableFAQFlagOverflowDialog=n.AddCommentDialog.extend({submitServerCall:function(e){var t=this;this.serverCall("dialog_submit_controller").kwargs(e).success(function(e){o.navigateTo(e),t.close()}).send()}})},"./app/view/topic/location.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.TopicLocationPreview=n.extend({onLoad:function(){var e=this;this.$id("@enlarge_map").click(function(){return e.$id("@enlarge_map").hide(),e.$id("@wrapper").css("height","auto"),e.$id("@wrapper").css("width","auto"),e.$id("@wrapper").removeClass("mask"),e.$id("@content").removeClass("mask_content"),e.$id("@content").css("top","0px"),e.child("topicmap").child("picker").toggleControls(!0),!1})}})},"./app/view/topic/merge.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./w2.dialog.js"),s=i("./app/view/topic_selector.js").TopicSelector,a=i("./settings.js").interface_strings;t.TopicMergeSelector=s.extend({topicWasSelected:function(e){var t=function(t){var i=t.dialogComponent.child("editor");if(i.isOnlyWhiteSpace())return!1;this.serverCall("merge").kwargs({to_tid:e,from_tid:this.from_tid,comment:i.serialize()}).liveMutate().send()}.bind(this);o.createDialog(this).title(this.topic_merge_text).ok(t,a.ok).cancel(null,a.cancel).load("merge_dialog")}}),t.TopicMergeUnmerge=n.extend({onLoad:function(){var e=this;this.is_locked_for_user||this.$id("@show_merge").click(function(){return e.$id("@merge").removeClass("hidden"),e.$id("@show_merge").addClass("hidden"),e.child("selector").focus(),!1})}}),t.TopicUnmergeLink=n.extend({onLoad:function(){var e=this;this.$id("@unmerge").click(function(){return e.serverCall("unmerge_topic").kwargs({tid:e.tid}).liveMutate().send(),!1})}})},"./app/view/topic/topic_create.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/window_manager.js"),s=i("./w2.dialog.js").Dialog,a=i("./view/selector.js").Selector,r=i("./view/selector.js").NavigateToResultUrlSelectorMixin;t.TopicNavigateSelector=a.extend(r),t.TopicCreateMain=n.extend({onLoad:function(){var e=this;this.submitted=!1,this.$id("@fake_editor").click(function(){return e.$id("@fake_editor_row").hide(),e.$id("@editor_row").removeClass("hidden"),e.child("editor").focus(),!1}),this.$id("@create").click(function(){var t=e.getTopicName();if(!t||/^\s+$/.test(t)||e.submitted)return!1;e.submitted=!0;var i=e.child("editor").serialize();e.serverCall("create_topic").kwargs({topic_name:t,about:i}).success(function(e){o.sameDomainURL(e)&&o.navigateTo(e)}).liveMutate().send()}),this.$id("@cancel").click(function(){return e.cancelClicked(),!1})},getTopicName:function(){return this.child("selector").query},cancelClicked:function(){}}),t.TopicCreateDialog=t.TopicCreateMain.extend({cancelClicked:function(){s.dialogFor(this).close_()}})},"./app/view/topic/topic_list.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/multimodal.js").openSingleModalStep;t.TopicListItem=n.extend({onLoad:function(){var e=this;e.actionButton=e.child("remove"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(){e.serverCall("remove_topic").liveMutate().send()})}}),t.QuestionTopicHorizontalList=n.extend({onLoad:function(){var e=this;e.$id("@modal_link").on("click",function(t){t.preventDefault(),o(e,{qid:e.qid,is_anon_page:e.is_anon_page})})}})},"./app/view/topic/topic_ontology.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.AddTopicParent=n.extend({onLoad:function(){var e=this;this.$id("@existing_link").click(function(t){t.preventDefault(),e.$id("@existing_link").addClass("hidden"),e.$id("@existing").removeClass("hidden"),e.child("parent_selector").focus()})}}),t.AddTopicChildren=n.extend({onLoad:function(){var e=this;this.$id("@existing_link").click(function(t){t.preventDefault(),e.$id("@existing_link").addClass("hidden"),e.$id("@existing").removeClass("hidden"),e.child("child_selector").focus()})}}),t.OrganizeChildItem=n.extend({onLoad:function(){var e=this;e.actionButton=e.child("remove"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(){e.serverCall("remove_topic").liveMutate().send()})},toggleInstruction:function(){this.$id("@instruction").toggleClass("hidden")}}),t.ManageParentTopicsLink=n.extend({onLoad:function(){var e=this;e.$id("@link").click(function(t){t.preventDefault(),e.createModal("load").kwargs({tid:e.tid}).show()})}})},"./app/view/topic/topic_redesign.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.TopicPhotoCard=n.extend({onLoad:function(){var e=this;e.$id("@card").click(function(t){return e.onCardClick(),!1})},onCardClick:function(){this.isSelected=!this.isSelected,this.isSelected?this.select():this.deselect()},select:function(){this.$id("@card").addClass(this.selectClass),this.emitEvent({type:o.Types.TOPICS_GRID_ADD,payload:{tid:this.tid}})},deselect:function(){this.$id("@card").removeClass(this.selectClass),this.emitEvent({type:o.Types.TOPICS_GRID_REMOVE,payload:{tid:this.tid}})}})},"./app/view/topic_selector.js":function(e,t,i){var n=i("./view/selector.js").Selector,o=i("./view/selector.js").SelectorResults,s=i("./w2.dialog.js"),a=i("./shared/events/index.js"),r=i("./shared/log_sender.js"),d=t.TopicSelector=n.extend({resultWasSelected:function(e,t,i){if(this.logResultWasSelected(e),"topic"===e.ty||"topic_alias"===e.ty)this.topicWasSelected(e.data.tid,e.data.topic_name,t,i,e);else{if("create_topic"!==e.ty)throw Error();this.createTopicWasSelected(e.data.new_topic_name,t,i)}},topicWasSelected:function(e,t,i,n){},createTopicWasSelected:function(e,t,i){},logResultWasSelected:function(e){var t={type:e.ty,data:e.data,index:this.child("results").selectedIndex};this.should_log&&r.log("topic_selector",{action:"result_selected",query:this.query,action_data:t,selector_type:this.selectorType,selector_id:this.selectorId})}});t.TopicSelectorResults=o.extend({onLoad:function(){this.query&&this.parent().should_log&&r.log("topic_selector",{action:"query",query:this.query,action_data:this.results,selector_type:this.parent().selectorType,selector_id:this.parent().selectorId}),this._super.apply(this,arguments)}}),t.AddTopicSelector=d.extend({showErrorDialog:function(){s.createDialog(this).title(this.dialog_title).ok(null,this.close_button_text).text(this.dialog_message)},topicWasSelected:function(e,t,i,n){this.emitEvent({type:a.Types.QUESTION_TOPIC_SELECTION_ADD,payload:{tid:e}}),this.clear_query_on_select&&this.setQuery(""),this.serverCall("add_topic").kwargs({tid:e}).liveMutate().error(this.showErrorDialog.bind(this)).send(),this.clear_query_on_select||this.updateResults()},createTopicWasSelected:function(e,t,i){this.setQuery(""),this.serverCall("create_and_add_topic").kwargs({new_topic_name:e}).liveMutate().error(this.showErrorDialog.bind(this)).send()}}),t.TopicSelectorForFormField=t.AddTopicSelector.extend({onTopicSelected:function(e){this._onTopicSelectedCallback=e},topicWasSelected:function(e,t,i){this._onTopicSelectedCallback&&this._onTopicSelectedCallback(t,e),this.setQuery("")},createTopicWasSelected:function(e,t){var i=this;i.serverCall("create_and_add_topic").kwargs({new_topic_name:e}).success(function(t){i._onTopicSelectedCallback&&t&&i._onTopicSelectedCallback(e,t),i.setQuery("")}).liveMutate().send()}})},"./app/view/tribe.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.TribeTopicList=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.TOPIC_LIST_REMOVE,function(t){e.removeTid(t.payload.tid)})},removeTid:function(e){this.serverCall("remove").kwargs({tid:e}).liveMutate().send()}})},"./app/view/twitter.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/cookies.js");t.TwitterConnectCallbackPage=n.extend({onLoad:function(){if(o.setCookie("twitter_oauth_access_key",this.access_token.key,{path:"/twitter/"}),window.opener&&window.opener.document){window.opener.require("shared/jquery")(window.opener.document).trigger("twitter_oauth_approved",{accessToken:this.access_token,userData:this.user_data})}window.close()}})},"./app/view/user.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./w2.dialog.js"),a=i("./settings.js"),r=a.interface_strings;t.UserStatusMain=n.extend({onLoad:function(){this.admin_log_list=this.$id("@admin_log_scroll_context"),this.admin_log_list.on("mouseover",function(){document.body.style.overflowY="hidden"}),this.admin_log_list.on("mouseout",function(){document.body.style.overflowY="auto"}),o(".inline_editor_create").on("click",function(){o(".admin_qtext").addClass("visible")}),o(".inline_editor_cancel_button").on("click",function(){o(".admin_qtext").removeClass("visible")})}}),t.ProfilePhoto=n.extend({toggleSuggestion:function(){}}),t.BatchRevertControls=n.extend({onLoad:function(){var e=this;this.$id("@select_all_word").click(function(){return e.toggleCheckboxes(),"Select All"==e.$id("@select_all_word").text()?e.$id("@select_all_word").html("Select None"):e.$id("@select_all_word").html("Select All"),!1}),this.$id("@revert").click(function(){return e.batchRevert(),!1})},batchRevert:function(){var e=this,t=[];return o(".user_log_operations_to_revert input:checked").each(function(e){t.push(o(this).attr("name"))}),0!==t.length&&(this._dialog=s.createDialog(this).title(this.dialog_title).cancel(null,r.cancel).ok(function(i){var n=i.dialogComponent,o=n.child("editor");if(!o.isOnlyWhiteSpace()){var s=o.serialize();e.serverCall("batch_revert").kwargs({revert_strings:t,comment:s}).liveMutate().send()}}).load("batch_revert_dialog"),!1)},toggleCheckboxes:function(){var e=o(".user_log_operations_to_revert .pagedlist_hidden input:not(:disabled)").length;o(".user_log_operations_to_revert input:not(:disabled)").length-e!=o(".user_log_operations_to_revert input:checked").length?(o("input:not(:disabled)").prop("checked",!0),o(".user_log_operations_to_revert .pagedlist_hidden input").each(function(e){o(this).prop("checked",!1)})):o("input:not(:disabled)").prop("checked",!1)},getKwargs:function(e,t){return{revert_strings:e,comment:t.serialize()}}}),t.UnconfirmedEmailBlockedEditor=n.extend({onLoad:function(){var e=this;this.$id("@resend").click(function(){return e.serverCall("resend_email_confirmation").send(),!1})}})},"./app/view/user/content.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./app/view/topic_selector.js").TopicSelector,s=i("./shared/window_manager.js"),a=i("./shared/core/component.js").Component;t.UserContentFilter=a.extend({onLoad:function(){var e=this;this.$id("@filter_links a").click(function(){var t=n(this);if(t.hasClass("selected"))return!1;var i=t.attr("data-value"),o={};o[e.data_key]=i;var a=s.makeUpdatedURL(o);return s.navigateTo(a),!1})}}),t.UserContentFilterTopics=a.extend({onLoad:function(){var e=this;this.$id("@all_topics").click(function(){return e.$id("@all_topics").hasClass("selected")||e.clearChosenTopic(),!1}),this.$id("@remove_chosen_topic").click(function(){return e.clearChosenTopic(),!1})},clearChosenTopic:function(){var e={};e[this.data_key]=null;var t=s.makeUpdatedURL(e);s.navigateTo(t)}}),t.UserContentFilterTopicSelector=o.extend({topicWasSelected:function(e,t,i,n,o){if(t){var a={};a.topic=o.data.topic_routing_name;var r=s.makeUpdatedURL(a);s.navigateTo(r)}}})},"./app/view/user/profile.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./tooltip.js"),s=i("./shared/window_manager.js"),a=i("./view/editable_list.js").EditableList,r=i("./app/view/topic_selector.js").TopicSelectorForFormField;t.VerificationBadge=n.extend({onLoad:function(){o.attach(this.$id("@badge"),this.tooltip_text)}}),t.BlockUserBadge=n.extend({onLoad:function(){var e=this;e.$id("@block_badge").on("click",function(t){e.createModal("load_unblock_modal").kwargs({target_uid:e.target_uid}).show(),t.preventDefault()})}}),t.NGProfileNameEditor=n.extend({onLoad:function(){this.$id("@update").click(this.updateName.bind(this)),this.$id("@edit").click(this.toggleEditor.bind(this)),this.$id("@cancel").click(this.toggleEditor.bind(this))},toggleEditor:function(){var e=this;return this.$id("@initial").toggleClass("hidden"),this.$id("@editor").toggleClass("hidden"),this.$id("@name").focus(),this.$id("@name").val(""),this.$id("@name").val(e.full_name),!1},updateName:function(){var e=this.$id("@name").val(),t=this;return this.serverCall("update").kwargs({name:e}).success(function(e){e?(t.toggleEditor(),s.reload()):t.toggleEditor()}).liveMutate().send(),!1}}),t.ProfileExperienceList=a.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.shouldLoadModal&&e.createModal("load_modal").show(),e.$id("@modal_link_title").on("click",function(){e.createModal("load_modal").show()}),e.$id("@modal_link").on("click",function(){e.createModal("load_modal").show()})}});var d=t.LanguageSelector=r.extend({resultWasSelected:function(e,t,i){this.topicWasSelected(e.data.tid,e.data.name,t,i)}});t.ProfileLanguageSelector=d.extend({resultWasSelected:function(e,t,i){this.setQuery(""),this.serverCall("add_language").kwargs({tid:e.data.tid}).liveMutate().send()}})},"./app/view/user/setup_.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./w2.dialog.js"),s=i("./shared/events/index.js"),a=!1;t.ChecklistStep=n.extend({onLoad:function(){var e=this,t=e.should_show_x;this.$id("@step_link").click(function(i){i.preventDefault(),a||(a=!0,e._dialog=o.createDialog(e).opt("width",500).opt("left","50%").opt("dialogClass","dialog_nux").opt("showXButton",t).title(e.dialog_title).load("get_step_dialog").close(e.onDialogClose.bind(e)))}),this.handleEvent(s.Types.NUX_DIALOG_STANDALONE_DONE,function(){e._dialog&&e._dialog.close_()})},onDialogClose:function(){a=!1,this.serverCall("mark_dialog_step_complete").send()}}),t.ChecklistLinkStep=n.extend({onLoad:function(){var e=this;this.$id("@step_link").click(function(){e.serverCall("log_link_click").send()})}})},"./app/view/user/subscribe.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/core/component.js").Component,s=i("./view/modal.js").Base;t.UserSubscribeLink=o.extend({onLoad:function(){var e=this;e.button=e.$id("@user_subscribe_button"),e.button.click(function(t){e.isSubscribing?e.serverCall("unsubscribe").kwargs({subscribed_uid:e.uid,from_hovercard:e.getDvar("hovermenu_parent")}).liveMutate().send():e.createModal("load_inner").kwargs({should_show_subscribe:e.canSubscribe(),subscribe_to_uid:e.uid}).show(),t.preventDefault()})},canSubscribe:function(){return!this.button.hasClass("unsubscribe_button")}}),t.SubscribeConfirmModal=s.extend({onLoad:function(){this._super.apply(this,arguments),n(".modal_overlay").addClass("notif_subscribe")},onClose:function(){this._super.apply(this,arguments),n(".modal_overlay").removeClass("notif_subscribe")},onSubmit:function(){this.serverCall("change_subscription").kwargs({from_hovercard:this.getDvar("hovermenu_parent")}).liveMutate().success(this._closeModal.bind(this)).send()}})},"./app/view/user/topics.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./view/modal.js").Base,s=i("./app/view/topic_selector.js").AddTopicSelector,a=i("./app/view/topic/edit_topic_modal.js").EditTopicsList;t.EditKnowsAboutTopicsModal=o.extend({onLoad:function(){this._super.apply(this,arguments),this.topicsChanged=!1;var e=this;this.handleEvent(n.Types.PROFILE_TOPICS_UPDATED,function(){e.topicsChanged=!0})},_closeModal:function(){this._super.apply(this,arguments),this.topicsChanged&&window.location.reload()}}),t.KnowsAboutTopicsList=a.extend({removeTid:function(){this._super.apply(this,arguments),this.emitEvent({type:n.Types.PROFILE_TOPICS_UPDATED,payload:{}})}}),t.EditKnowsAboutTopicsModalSelector=s.extend({topicWasSelected:function(){this._super.apply(this,arguments),this.emitEvent({type:n.Types.PROFILE_TOPICS_UPDATED,payload:{}})},createTopicWasSelected:function(){this._super.apply(this,arguments),this.emitEvent({type:n.Types.PROFILE_TOPICS_UPDATED,payload:{}})}})},"./app/view/user_settings/settings.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.SettingsRow=n.extend({onLoad:function(){var e=this;this.$id(e.selectorId).on("click",function(){e.optionSelected()})},optionSelected:function(){this.serverCall("settings_toggle").liveMutate().send()}})},"./app/view/user_stats.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/events/index.js"),a=i("./view/hover_menu.js").HoverMenu;t.StatsMain=n.extend({onLoad:function(){this.handleEvent(s.Types.USER_STATS_SHOW,this.show.bind(this));var e=this;this.handleEvent(s.Types.USER_STATS_UPDATE_ATTRIBUTES,function(t){e.updateAttributes(t.payload)})},show:function(){this.$id("@stats_main").removeClass("fade_in")},updateGraph:function(e,t){this.child("graphs_section").updateGraphs(e,this.interval_type,t)},updateContentList:function(){this.serverCall("render_new_content_list_wrapper").args(this.content_type,this.interval_type).contentFor(this.$id("@stats_side")).send()},updateAttributes:function(e){var t=!1,i=!1;if("oid"in e&&this.oid!=e.oid&&(this.oid=e.oid,t=!0,4===this.content_type))return void this.updateGraph(e.content_type,this.oid);if("interval_type"in e&&(e.interval_type=parseInt(e.interval_type),this.interval_type!=e.interval_type&&(this.interval_type=e.interval_type,t=!0,i=!0)),"content_type"in e&&(e.content_type=parseInt(e.content_type),this.content_type!=e.content_type&&(this.content_type=e.content_type,t=!0,i=!0)),t){var n=null;i||(n=this.oid),this.updateGraph(this.content_type,n)}i&&this.updateContentList()}}),t.Filter=a.extend({registerClickHandlers:function(){var e=this;this._super.apply(this,arguments),this.$id("@menu").on("click",".option",function(t){e.updateAttributes(o(t.target).attr("name")),e.$id("@link").text(o(t.target).text()),o(t.target).parent().siblings().removeClass("selected"),o(t.target).parent().addClass("selected"),t.preventDefault()})},updateAttributes:function(){}}),t.FilterIntervalType=t.Filter.extend({updateAttributes:function(e){this.emitEvent({type:s.Types.USER_STATS_UPDATE_ATTRIBUTES,payload:{interval_type:e}})}}),t.FilterContentType=t.Filter.extend({updateAttributes:function(e){this.emitEvent({type:s.Types.USER_STATS_UPDATE_ATTRIBUTES,payload:{content_type:e}})}}),t.TabbedStatsNavController=n.extend({onLoad:function(){var e=this;o(".tabbed_nav_wrapper .content_type_tab").click(function(t){t.preventDefault();var i=o(this).attr("id");o(".tabbed_nav_wrapper .content_type_tab").removeClass("active"),o(this).addClass("active"),o("#"+i).addClass("active"),e.emitEvent({type:s.Types.USER_STATS_UPDATE_ATTRIBUTES,payload:{content_type:i}})})}}),t.ContentListWrapper=n.extend({onLoad:function(){var e=this.$id("@content_list_wrapper"),t=e.outerHeight(),i=o(window).height(),n=e.offset().top,a=i-n-32;a>t&&e.css("height",a),this.emitEvent({type:s.Types.USER_STATS_SHOW,payload:{}})}}),t.ContentListItem=n.extend({onLoad:function(){var e=this;this.$id("@content_external_link").click(function(e){e.stopPropagation()}),this.$id("@link").click(function(){e.$id("@link").hasClass("is_active")||(o(".is_active").removeClass("is_active"),e.$id("@link").addClass("is_active")),e.emitEvent({type:s.Types.USER_STATS_UPDATE_ATTRIBUTES,payload:{oid:e.oid,content_type:e.content_type}})})}}),t.RSGraph=n.extend({onLoad:function(){var e=this,t=new Rickshaw.Color.Palette({scheme:this.colors}),i=this.getHeight(),n=this.width;for(var o in this.data_json)this.data_json[o].color=t.color();var s=new Rickshaw.Graph({element:this.$id("@rsgraph").get(0),series:this.data_json,width:n,height:i,renderer:"bar",stroke:!0,min:this.min,max:this.max,xmin:this.xmin,xmax:this.xmax,interpolation:"step-after",nearestPoint:!1});s.render(),new Rickshaw.Graph.Axis.Y({graph:s,tickFormat:this.ypercent?function(e){return(100*e).toFixed(1)+"%"}:null}).render(),new Rickshaw.Graph.Axis.Time({graph:s}).render();new Rickshaw.Graph.HoverDetail({graph:s,formatter:function(t,i,n){return e.hover_text+": "+n}})},getHeight:function(){var e=o(window).height(),t=o(".graphs").offset().top,i=e-t-32;return i>this.height?i:this.height}}),t.Graphs=n.extend({onLoad:function(){var e=this,t=window.location.hash;this.metrics.forEach(function(t){e.child("headsup_section").$id("@"+t).click(function(i){var n=o(i.target);return n.hasClass("heads_up_item")||(n=n.parents(".heads_up_item")),n.hasClass("is_active")||(n.siblings(".is_active").removeClass("is_active"),n.addClass("is_active")),e.active_metric!=t&&(o(".stats_graph").addClass("hidden"),e.child("stats_graphs").$id("@graph_"+t).removeClass("hidden"),e.active_metric=t),i.preventDefault(),!1})}),this.metrics.forEach(function(i){"#"+i==t&&e.child("headsup_section").$id("@"+i).click()})},updateGraphs:function(e,t,i){var n=this;o(".heads_up_item").first().addClass("is_active"),this.serverCall("render_new_graphs").args(e,t,i).contentFor(this.$id("@graphs"),{useLoadingSpinner:!1}).send(),this.serverCall("get_new_counts").args(e,t,i).success(function(e){e.forEach(function(e){null===e[1]?n.child("headsup_section").$id("@"+e[0]).addClass("hidden"):(n.child("headsup_section").$id("@"+e[0]).removeClass("hidden"),n.child("headsup_section").$id("@"+e[0]+">.big_num").text(e[1]),n.child("headsup_section").$id("@"+e[0]+">.num_label").text(e[2])),o(".heads_up_item").first().addClass("is_active")})}).send()}})},"./app/view/vc.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./w2.dialog.js"),a=i("./settings.js").interface_strings;t.RevertDialog=n.extend({onLoad:function(){this.radioChangeListener()},radioChangeListener:function(){o("input:radio").change(function(){o("input:radio").each(function(){o(this).prop("checked")&&o(".content").html(o(this).val())})})},validateReason:function(){return!0}}),t.OperationRevert=n.extend({onLoad:function(){var e=this;e.$id("@operation_revert").click(function(){return s.createDialog(e).title(e.dialog_title).ok(function(t){var i=t.dialogComponent.child("editor");e.serverCall("revert_revision").kwargs(e.getKwargs(i)).liveMutate().send()},e.ok_text).cancel(null,a.cancel).load("revert_dialog"),!1})},getKwargs:function(e){return{oid:this.oid,comment:e.serialize()}}}),t.AddQuestionRedirectRevertLink=n.extend({onLoad:function(){var e=this;e.$id("@revert").click(function(t){t.preventDefault(),s.createDialog(e).title(e.dialog_title).ok(function(t){var i=t.dialogComponent.child("editor");e.serverCall("revert").kwargs({to_qid:e.to_qid,from_qid:e.from_qid,comment:i.serialize()}).liveMutate().send()},e.ok_text).cancel(null,a.cancel).load("revert_dialog")})}})},"./app/view/write.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/fixable2.js"),s=i("./view/modal.js").Base,a=i("./shared/window_manager.js");t.WriteMain=n.extend({onLoad:function(){var e=this,t=this.$id("@left_col_inner"),i=this.$id("@left_col");e.notifBanner||i.length>0&&t.length>0&&o.makeFixable(t,{min_height:i.outerHeight()+i.offset().top,min_width:990})}}),t.PersonalRequestsMain=n.extend({onLoad:function(){if(this.scroll_to_lowpri){var e=this.$id("@lowpri_header").prop("offsetTop");e&&window.scrollTo(0,e+70)}}}),t.RemoveAllDraftsLink=n.extend({onLoad:function(){var e=this;this.$id("@confirmation_dialogue").on("click",function(t){return e.createModal("load_inner").show(),!1})}}),t.WritePageBatchActionConfirmationModal=s.extend({onSubmit:function(){this.removeAll()},removeAll:function(){var e=this;this.serverCall("remove_all").liveMutate().success(function(t){e._closeModal(),a.reload()}).send()}})},"./facebook.js":function(e,t,i){function n(e,t,i){FB.login(function(n){if("connected"==n.status){var o=n.authResponse;e&&o.userID!=e?i(o.userID):t(o.userID,o.accessToken,o.expiresIn)}},{scope:"publish_actions"})}var o=i("./shared/facebook.js"),s=i("./shared/core/component.js").Component,a=i("./shared/events/index.js");t.maybePromptToPublish=function(e,t,i){if(!o.isLoaded())return o.asyncUpdatePermissions(),!1;var s=null;return FB.getAuthResponse()&&(s=FB.getAuthResponse().userID),s&&e?s==e?o.hasPermission("publish_actions")?t():n(e,t):i(s):n(e,t,i),!1};var r=s.extend({onLoad:function(){o.load(),this.$id("@facebook_connect_button").on("click",this.onClickFacebookConnectButton.bind(this))},connect:function(){var e=this;FB.login(function(t){t&&"connected"==t.status?e.onLogin(t.authResponse):e.onLoginFailed()},{scope:this.perms})},onClick:function(){},onLogin:function(e){},onLoginFailed:function(){},onClickFacebookConnectButton:function(){return o.isLoaded()&&(this.connect(),this.onClick()),!1}});t.FacebookConnectButton=r.extend({onLogin:function(e){this._onLogin(e)},_onLogin:function(e){this.serverCall("connect_facebook").kwargs({fb_access_token:e.accessToken,fb_uid:e.userID,expires:e.expiresIn}).liveMutate().send()}}),t.FacebookConnectButtonZapdos=t.FacebookConnectButton.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@facebook_connect_button").on("click",function(){e.dismissWall()})},dismissWall:function(){var e=this;e.emitEvent({type:a.Types.ZAPDOS_WALL_DISMISS,payload:{cardType:e.card_type}})}})},"./gating.js":function(e,t){e.exports=window.Q.gating},"./init.js":function(e,t,i){i("./third_party/json2.js");var n=i("./shared/window_manager.js"),o=i("./shared/onload.js"),s=i("./shared/events/index.js"),a=i("./visibility.js"),r=i("./shared/jquery.js");i("./w2.errors.js");var d=function(){var e=a.getFrameElement();if(e&&"true"===e.getAttribute("autoresize")){var t=r(document),i=t.width(),n=t.height();r(e).width(i).height(n)}};window.addEventListener("resize",d),r(document).ready(d),i("./qtext.js").init(),s.GlobalProxy.subscribe(s.Types.LOGOUT_USER,function(){n.reload()}),o.execAfterLoadDelayed(function(){r(document).on("fire_facebook_conversion_pixel",function(e,t){new Image(1,1).src="https://www.facebook.com/offsite_event.php?id="+t+"&amp;value=0.01&amp;currency=USD"})})},"./input_validate.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js");t.InputValidator=n.extend({init:function(){this._super.apply(this,arguments),this.isValid=null},onLoad:function(){var e,t=this.input(),i=this;t.on("change blur",function(){var n=t.val();n!==e&&(e=n,i.validate())}),this._managerComponent().__validators=this._managerComponent().__validators||[],this._managerComponent().__validators.push(this)},input:function(){return this.parent().$id(this.id)},_managerComponent:function(){return this.parent()},validate:function(e){var t=this;if(e=e||{},this.input().val()){this.hideAllErrors();var i={value:this.input().val()},n=this.additional_kwargs();for(var o in n)i[o]=n[o];this.serverCall("validate").kwargs(i).success(function(i){t.hideAllErrors(),i.valid?(t.isValid=!0,t.hideAllErrors(),t.input().removeClass("error"),"function"==typeof e.valid&&e.valid(i.message)):(t.isValid=!1,i.message&&(t.setWidth(t.$id("@invalid_message")),t.$id("@invalid_message").text(i.message),t.invalidMessage=i.message),t.hideAllErrors(),t.showErrorOnComponent("@validator .invalid"),"function"==typeof e.invalid&&e.invalid(i.message))}).send()}else this.hideAllErrors(),this.isValid=null},additional_kwargs:function(){return{}},populate_if_valid:function(e,t){var i=this;this.serverCall("validate").kwargs({value:e}).success(function(n){n.valid&&(i.isValid=!0,t.val(e))}).send()},setWidth:function(e){var t=parseInt(this.input().width())-4;t>0&&e.css("width",t+"px")},hideAllErrors:function(){this.$id("@validator .invalid").hide(),this.$id("@validator .valid").hide(),this.input().removeClass("error"),o("textarea").removeClass("error")},showErrorOnComponent:function(e){this.$id(e).show(),this.input().addClass("error"),o("textarea").addClass("error")}}),t.InputValidator.validate=function(e,t){t=t||{},e.__validators&&e.__validators.length?e.__validators[0].validate(t):"function"==typeof t.valid&&t.valid()}},"./interface/settings.js":function(e,t,i){var n=i("./settings.js");t.action=n.action,t.batchedServerCallUrl=n.batchedServerCallUrl,t.componentInspector=n.componentInspector,t.controller=n.controller,t.debug=n.debug,t.enableFrameBusting=n.enableFrameBusting,t.interface_strings=n.interface_strings,t.isLoggedIn=n.isLoggedIn,t.logComponentTime=n.logComponentTime,t.serverCallUrl=n.serverCallUrl,t.windowId=n.windowId},"./login.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/errors.js"),s=i("./shared/events/index.js"),a=i("./shared/core/component.js").Component,r=i("./shared/window_manager.js"),d=i("./shared/siteuri.js").URI,l=i("./settings.js"),c=i("./unified_view/signup/_signup.js").SignupContext,u=i("./view/modal.js").Base;t.LoginButton=a.extend({onLoad:function(){this.$id("@login_link").click(function(e){var t=d("/?next="+encodeURIComponent(r.getURL()));return r.navigateTo(t.unicode()),!1})}});var h=t.InlineLogin=a.extend({onLoad:function(){var e=this;e.checkingPassword=!1,e.hasLoggedIn=!1;var t=function(t){13==(t.keyCode||t.which)&&e.$id("@submit_button").click()},i=t.bind(e);e.$id("@password").keydown(i),e.$id("@email").keydown(i),e.$id("@resend_confirmation").click(function(t){return e.serverCall("resend_confirmation_link").kwargs({email:e._email()}).success(function(){e.hideAllErrors()}).send(),!1}),e.$id("@reset_password_link").click(e.resetPasswordHandler.bind(this)),e.$id("@forgot_password_link").click(e.resetPasswordHandler.bind(this)),e.$id("@email").on("input",function(){setTimeout(function(){e.updatePreview()},10)}),e.$id("@submit_button").click(function(){return e.checkPassword(),!1}),e.$id("@submit_button").on("touchend",function(){return e.checkPassword(),!1}),e.$id("@login_link").click(function(){return e.$id("@associated").addClass("hidden"),e.$id("@alt_login_row").addClass("hidden"),e.$id("@login_form").removeClass("hidden"),e.$id("@email").focus(),!1}),this.handleEvent(s.Types.LOGIN_UPDATE_FIELDS,function(t){e.$id("@email").val(t.payload.email),e.updatePreview(),e.$id("@password").focus()});var o=this.getContext(c);o&&this.$id("@email_not_found_error a").click(function(){var e={email:this.$id("@email").val(),password:this.$id("@password").val()};return o.set("loginData",e),!1}.bind(this)),n(document).ready(function(){e.updatePreview()})},resetPasswordHandler:function(){var e=this;return e.serverCall("reset_password").kwargs({email:e._email()}).success(function(){e.hideAllErrors()}).send(),!1},updatePreview:function(){this._updatePreviewMemCache=this._updatePreviewMemCache||{};var e=this,t=e._email(),i=e._updatePreviewMemCache,o=function(o){i[t]=o,e.customSuccessUpdatePreviewCallback?(e.customSuccessUpdatePreviewCallback(o),e.removeButtonDisabled()):(n(".usercard_big").fadeTo(1,1),e.$id("@preview").hide(),e.$id("@associated").addClass("hidden"),e.$id("@alt_login_row").addClass("hidden"),e.$id("@login_form").removeClass("hidden"),e.$id("@password").focus(),e.$id("@name").text(o.name),e.$id("@pic").attr("src",o.photo_url),e.$id("@preview").show(),e.removeButtonDisabled(),e.hideAllErrors())};if(i[t])return void o(i[t]);e.serverCall("preview_info").kwargs({email:t}).success(o).except("email_not_found",function(t){return e.$id("@preview").fadeOut(120),e.hideAllErrors(),e.showErrorOnComponent("@email_not_found_error","@email"),e.addButtonDisabled(),!1}).except("no_email",function(t){e.$id("@preview").fadeOut(120),e.hideAllErrors(),e.addButtonDisabled()}).except("email_unconfirmed",function(t){e.$id("@preview").fadeOut(120),e.hideAllErrors(),e.showErrorOnComponent("@email_not_confirmed_error","@email"),e.removeButtonDisabled()}).except("refused",function(t){e.$id("@preview").fadeOut(120),e.hideAllErrors(),e.removeButtonDisabled()}).send()},removeButtonDisabled:function(){this.$id("@submit_button").removeClass("submit_button_disabled")},addButtonDisabled:function(){this.$id("@submit_button").addClass("submit_button_disabled")},loginKwargs:function(){return{email:this.$id("@email").val(),password:this.$id("@password").val()}},loginSuccessCallback:function(e){if(this.customSuccessLoginCallback)this.customSuccessLoginCallback(e);else{var t=e;this.hideAllErrors(),l.uid!=t&&"post_reload"!=l.pageMode||this.emitEvent(s.helpers.loginUser())}this.addButtonDisabled()},checkPassword:function(){this.hideAllErrors();var e=this;e.hasLoggedIn||e.checkingPassword||(e.checkingPassword=!0,e.serverCall("do_login").kwargs(e.loginKwargs()).success(function(t){e.hasLoggedIn=!0,e.checkingPassword=!1,e.loginSuccessCallback(t)}).except("email_not_found",function(){e.checkingPassword=!1,e.hideAllErrors(),e.showErrorOnComponent("@email_not_found_error","@email")}).except("incorrect_password",function(){e.checkingPassword=!1,e.hideAllErrors(),e.showErrorOnComponent("@incorrect_password_error","@password")}).except("email_unconfirmed",function(){e.checkingPassword=!1,e.hideAllErrors(),e.showErrorOnComponent("@email_not_confirmed_error","@email")}).except("banned_user",function(){e.checkingPassword=!1,e.hideAllErrors(),e.serverCall("login_user_is_banned").kwargs(e.loginKwargs()).send()}).except("too_many_attempts",function(){e.checkingPassword=!1,e.hideAllErrors(),e.serverCall("login_user_rate_limited").kwargs(e.loginKwargs()).send()}).except("password_leaked",function(){e.checkingPassword=!1,e.serverCall("load_password_leaked_dialog").kwargs({email:e._email()}).contentFor(e.$id("@email_password_leak_error")).success(function(){e.hideAllErrors(),e.$id("@login_form .login_options").addClass("hidden"),e.$id("@email_password_leak_error").removeClass("hidden")}).send()}).except("force_password_reset",function(){e.checkingPassword=!1,e.serverCall("load_force_password_reset_dialog").kwargs({email:e._email()}).contentFor(e.$id("@email_password_leak_error")).success(function(){e.hideAllErrors(),e.$id("@login_form .login_options").addClass("hidden"),e.$id("@email_password_leak_error").removeClass("hidden")}).send()}).except("two_factor_authentication",function(){e.checkingPassword=!1,e.hideAllErrors(),e.createModal("login_user_two_factor_authentication").kwargs({email:e._email()}).show()}).sendOnlyOnce())},_email:function(){return this.$id("@email").val()},hideAllErrors:function(){this.$id("@email_not_found_error").addClass("hidden"),this.$id("@email_not_confirmed_error").addClass("hidden"),this.$id("@incorrect_password_error").addClass("hidden"),this.$id("@email_password_leak_error").addClass("hidden"),this.$id("@email").removeClass("input_validation_error"),this.$id("@password").removeClass("input_validation_error"),this.$id("@login_form .login_options").removeClass("hidden")},showErrorOnComponent:function(e,t){this.$id(e).removeClass("hidden"),this.$id(t+"_menu").removeClass("hidden"),this.$id(t).addClass("input_validation_error")}});t.VerifyUser2FAModal=u.extend({onLoad:function(){this._super.apply(this,arguments)},onSubmit:function(){this._closeModal()}}),t.LoginSignal=a.extend({onLoad:function(e){if(!e){var t=this.uid;l.isLoggedIn&&o.logJsError("Got a login signal for logged in user: "+t),t?this.emitEvent(s.helpers.loginUser()):this.emitEvent(s.helpers.logoutUser())}}});var p=t.LoggedOutHomeLogin=h.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@email").focus(),this.$id("@cancel_link").on("click",this.toggleLoginOptions.bind(this))},showErrorOnComponent:function(e,t){this._super.apply(this,arguments),this.$id("@login_form .login_options").addClass("hidden")},toggleLoginOptions:function(){return this.$id("@login_form").addClass("hidden"),!0}});t.OAuthLogin=p.extend({customSuccessLoginCallback:function(e){this.hideAllErrors(),this.serverCall("get_permissions_page_response").success(function(e){r.navigateTo(e.next_url)}).send()}}),t.LoginPageLoginListener=a.extend({init:function(){this._super.apply(this,arguments),this._enabled=!0},onLoad:function(){var e=this;this.handleEvent(s.Types.LOGIN_USER,function(t){var i={};if(t.payload.pmsg&&(i.__pmsg__=t.payload.pmsg),e._enabled){var n,o=e.next,s=[];for(n in i)s.push(n+"="+encodeURIComponent(i[n]));s.length>0&&(o+=-1==o.indexOf("?")?"?":"&",o+=s.join("&")),r.navigateTo(o)}})}}),t.LeakedPasswordMessage=a.extend({onLoad:function(){var e=this;this.$id("@reset_password_link").click(function(){e.serverCall("reset_password").kwargs({email:e.email}).send()})}}),t.ForcePasswordResetMessage=a.extend({onLoad:function(){var e=this;this.$id("@reset_password_link").click(function(){e.serverCall("reset_password").kwargs({email:e.email}).success(function(t){t&&e.serverCall("show_confirmation").contentFor(e.$id("@instructions")).kwargs({email:e.email}).send()}).send()})}})},"./main.js":function(e,t,i){i("./init.js"),i("./shared/init.js"),i("./shared/w2.timing.js").logTime("mainScriptEnd")},"./qtext.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./tooltip.js");t.init=function(){n(document).on("mouseover","a[data-qt-tooltip]",function(e){var t=n(this);return!t.attr("data-tooltip")&&(t.attr("data-tooltip","attached"),o.attach(t,t.attr("data-qt-tooltip"),{attach_to_body:!0}),setTimeout(function(){t.trigger("mouseenter")},10),!1)})}},"./qtext2.js":function(e,t,i){var n=i("./unified_view/qtext2/editor/mobile.js"),o=i("./unified_view/qtext2/toolbar.js");t.handleToolbarAction=function(e,t){o.activeToolbar&&o.activeToolbar.trigger(e,t)},t.handleRestoreState=function(e){"{}"!==JSON.stringify(e)&&n.activeEditor.restoreState(e)},t.saveDraft=function(){n.activeEditor.saveDraft()},t.clearDraft=function(){n.activeEditor.clearDraft()},t.focus=function(){n.activeEditor.focus()}},"./qtext2/constants.js":function(e,t){t.CONTENT_TYPES={TEXT:"text/plain",HTML:"text/html",PUBLIC_HTML:"public.html",TEXT_URI:"text/uri-list"},t.FRACTIONS={"⅐":[1,7],"⅑":[1,9],"⅒":[1,10],"⅓":[1,3],"⅔":[2,3],"⅕":[1,5],"⅖":[2,5],"⅗":[3,5],"⅘":[4,5],"⅙":[1,6],"⅚":[5,6],"⅛":[1,8],"⅜":[3,8],"⅝":[5,8],"⅞":[7,8]},t.ELLIPSIS="…",t.OPEN_SINGLE_QUOTE="‘",t.CLOSE_SINGLE_QUOTE="’",t.OPEN_DOUBLE_QUOTE="“",t.CLOSE_DOUBLE_QUOTE="”",t.SINGLE_PRIME="′",t.DOUBLE_PRIME="″",t.EN_DASH="–",t.EM_DASH="—",t.LEFT_ARROW="←",t.RIGHT_ARROW="→",t.WORD_START_REGEX=/\s|[({[]/,t.ENTER_KEY=13},"./qtext2/container.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./qtext2/util.js").Util,s=n.extend({__init__:function(e){this.kind=e,this.node=o.create("DIV"),this.node.className=this.kind,this.children=[]},init:function(){},insertAfter:function(e,t){if(e.parent&&e.parent.removeChild(e),t){var i=t.node.nextSibling;this.node.insertBefore(e.node,i),this.children.splice(this.children.indexOf(t)+1,0,e)}else this.node.appendChild(e.node),this.children.push(e);e.parent=this},insertBefore:function(e,t){e.parent&&e.parent.removeChild(e),t?(this.node.insertBefore(e.node,t.node),this.children.splice(this.children.indexOf(t),0,e)):(this.node.appendChild(e.node),this.children.push(e)),e.parent=this},appendChild:function(e){this.insertBefore(e)},appendChildren:function(e){e.forEach(this.appendChild.bind(this))},hasChild:function(e){return-1!==this.children.indexOf(e)},removeChild:function(e){if(this.hasChild(e)){var t=this.children.indexOf(e);this.children.splice(t,1),o.safeRemoveChild(e.node,this.node)}},removeChildren:function(){for(var e,t=this.firstChild();t;)e=t.nextSibling(),this.removeChild(t),t=e},previousSibling:function(){return this.node.previousSibling&&this.Class.get(this.node.previousSibling)},nextSibling:function(){return this.node.nextSibling&&this.Class.get(this.node.nextSibling)},firstChild:function(){return 0===this.children.length?null:this.children[0]},lastChild:function(){return 0===this.children.length?null:this.children[this.children.length-1]}});s.create=function(e,t){var i;return o.assert(!t.__init__,"Do not override __init__"),t.__init__=function(){this._super(e),this.init.apply(this,arguments),this.Class=i,i.add(this,this.node)},i=s.extend(t),i.add=function(e,t){o.setData(t,"kind",e.kind),t.qtextContainer=e},i.get=function(e){return o.assert(i.is(e)),e.qtextContainer},i.is=function(t){return!!t&&(1==t.nodeType&&o.getData(t,"kind")==e)},i},t.Container=s},"./qtext2/keys.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=t.isMac=/Mac/.test(window.navigator.platform),s={8:"BACKSPACE",9:"TAB",13:"RETURN",27:"ESCAPE",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",46:"DELETE",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a=function(e){return-1!=[35,36,37,38,39,40].indexOf(e.which)},r=function(e){return e.shiftKey&&16==e.which},d=n.extend({__init__:function(e){e=e.toUpperCase(),this.alt=/ALT-/.test(e),this.ctrl=/CTRL-/.test(e)||!o&&/CMD-/.test(e),this.meta=/META-/.test(e)||o&&/CMD-/.test(e),this.shift=/SHIFT-/.test(e),this.character=e.split("-").pop()},toString:function(){var e="";return this.alt&&(e+="ALT-"),this.ctrl&&(e+="CTRL-"),this.meta&&(e+="META-"),this.shift&&(e+="SHIFT-"),e+=this.character}}),l=function(e){var t=s[e.which]||String.fromCharCode(e.which).toUpperCase(),i="";return e.altKey&&(i+="ALT-"),e.ctrlKey&&(i+="CTRL-"),e.metaKey&&(i+="META-"),e.shiftKey&&(i+="SHIFT-"),i+=t},c=n.extend({__init__:function(){this._handlers=[]},on:function(e,t){var i=new d(e);if(i in this._handlers)throw new Error("Already attached handler for "+i);this._handlers[i]=t},trigger:function(e){var t=l(e),i=this._handlers[t];return!i||i(e)}});t.getShortcutHint=function(e){var t=new d(e),i="";return o?(t.meta&&(i+="&#x2318;"),t.ctrl&&(i+="^"),t.alt&&(i+="&#x2325;"),t.shift&&(i+="&#x21E7;")):(t.ctrl&&(i+="Ctrl-"),t.alt&&(i+="Alt-"),t.shift&&(i+="Shift-")),i+t.character[0]+t.character.slice(1).toLowerCase()},t.isNavigation=a,t.isOnlyShiftKey=r,t.Hub=c,t.SPECIAL_KEYS=s},"./qtext2/modifiers.js":function(e,t){t.allModifiers=function(){return["bold","italic","underline","link","citation","math","code","image","video","embed","tweet","playable","iframe","external_source","uploading"]};var i=t.mutuallyExclusiveSet=function(){return["link","citation"]};t.nonEditableSet=function(){return["video","image","embed","tweet","playable","iframe","external_source","uploading"]},t.editableSet=function(){return["bold","italic","underline","link","citation","math","code"]};var n=t.restrictedSets=function(){return[["image","embed","tweet","video","playable","iframe","external_source","uploading"],["math"],["code"]]},o=t.canSetModifier=function(e,t){var o=e.parent;return(!o||-1!=o.allowedModifiers().indexOf(t))&&((-1==i().indexOf(t)||!i().some(function(i){return i!=t&&e.hasModifier(i)}))&&!n().some(function(i){return!(-1==i.indexOf(t)||!e.hasDifferentModifier(i))||!(-1!=i.indexOf(t)||!e.hasAnyModifier(i))}))};t.canForceModifier=function(e,t){if(o(e,t))return!0;var s=e.parent;return(!s||-1!=s.allowedModifiers().indexOf(t))&&(-1!=i().indexOf(t)||n().some(function(e){return-1!=e.indexOf(t)}))}},"./qtext2/position.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=n.extend({__init__:function(e,t){this.span=e,this.offset=t},toJSON:function(){var e=this.span.parent;return{spanIdx:e.children.indexOf(this.span),sectionIdx:e.parent.children.indexOf(e),offset:this.offset}},clone:function(){return new o(this.span,this.offset)},atSpanStart:function(){return 0===this.offset},atSpanEnd:function(){return this.offset==this.span.getLength()},atSectionStart:function(){var e=this.span.parent;return this.atSpanStart()&&this.span==e.firstChild()},atSectionEnd:function(){var e=this.span.parent;return this.atSpanEnd()&&this.span==e.lastChild()},atDocStart:function(){var e=this.span.parent,t=e.parent;return this.atSectionStart()&&e==t.firstChild()},atDocEnd:function(){var e=this.span.parent,t=e.parent;return this.atSectionEnd()&&e==t.lastChild()},equals:function(e){return e.span===this.span&&e.offset===this.offset},charBefore:function(){return this.atSectionStart()?null:this.prevPositionInSection().charAfter()},hasCharBefore:function(){var e=this.charBefore();return!!e&&0!==e.trim().length},charAfter:function(){if(this.atSectionEnd())return null;var e=this.span,t=this.offset;return this.atSpanEnd()&&(e=e.nextSibling(),t=0),e.getText()[t]},hasCharAfter:function(){var e=this.charAfter();return!!e&&0!==e.trim().length},previousWordBoundary:function(e){e=e||/\W/;var t=this.span,i=this.offset-1,n=t.getText();if(this.atDocStart())return this;if(this.atSectionStart())return t.previous().last();for(;t;){for(;i>0;){if(n[i-1].match(e))return new o(t,i);i--}t=t.previousSibling(),t&&(n=t.getText(),i=n.length)}return this.span.parent.first()},nextWordBoundary:function(e){e=e||/\W/;var t=this.span,i=this.offset+1,n=t.getText();if(this.atDocEnd())return this;if(this.atSectionEnd())return t.next().first();for(;t;){for(;i<n.length;){if(n[i].match(e))return new o(t,i);i++}t=t.nextSibling(),t&&(n=t.getText(),i=0)}return this.span.parent.last()},relativePositionInSection:function(e){if(0===e)return this;var t=this.span,i=this.offset,n=t.getLength(),s=t.previousSibling(),a=t.nextSibling(),r=e+i;return 0<=r&&r<=n?new o(t,r):r<0&&s?s.last().relativePositionInSection(e+i):r>n&&a?a.first().relativePositionInSection(e-(n-i)):null},prevPositionInSection:function(e){return e=e||1,this.relativePositionInSection(-1*e)},nextPositionInSection:function(e){return this.relativePositionInSection(e||1)},alternatePosition:function(){if(this.atSpanStart()){var e=this.span.previousSibling();if(e)return e.last()}else if(this.atSpanEnd()){var t=this.span.nextSibling();if(t)return t.first()}return this}});t.Position=o},"./qtext2/quirks.js":function(e,t,i){var n=i("./shared/browser.js"),o={usesCompositionEvents:function(){return n.gecko||n.webkit&&n.webkitVersion>532},dragEventContainsFile:function(e){var t=e.dataTransfer;return!!t&&(!!(t.files&&t.files.length>0)||!!t.types&&(!(!t.types.indexOf||-1==t.types.indexOf("Files"))||!(!t.types.contains||!t.types.contains("application/x-moz-file"))))},insertsPeriodWithDoubleSpace:function(){return n.ios}};t.Quirks=o},"./qtext2/section.js":function(e,t,i){var n=i("./qtext2/container.js").Container,o=i("./qtext2/constants.js").CONTENT_TYPES,s=i("./qtext2/modifiers.js"),a=i("./qtext2/span.js").Span,r=i("./qtext2/position.js").Position,d=i("./shared/twitter_oembed.js").tweetsEnabled,l=i("./qtext2/util.js").Util,c=function(){var e={};e.plain=i("./qtext2/sections/plain.js").PlainSection,e.code=i("./qtext2/sections/code.js").CodeSection,e.image=i("./qtext2/sections/image.js").ImageSection;var t=i("./qtext2/sections/horizontal_rule.js");e["horizontal-rule"]=t.HorizontalRuleSection;var n=i("./qtext2/sections/lists.js");e["ordered-list"]=n.OrderedListSection,e["unordered-list"]=n.UnorderedListSection;var o=i("./qtext2/sections/embed.js");return e.embed=o.EmbedSection,e["yt-embed"]=o.YouTubeEmbedSection,e.oembedly=o.OEmbedlySection,d()&&(e.tweet=o.TweetSection),e.video=i("./qtext2/sections/video.js").VideoSection,e},u=n.create("section",{init:function(e,t,i,n){var o=this;t=t&&0!==t.length?t:[new a],t.slice().forEach(function(e){o.appendChild(e)}),l.setData(this.node,"type",e),this.setIndent(i||0),this.setQuoted(n)},getType:function(){return l.getData(this.node,"type")},getLength:function(){var e=0;return this.children.forEach(function(t){e+=t.getLength()}),e},getIndent:function(){return parseInt(l.getData(this.node,"indent"))},setIndent:function(e){return e=Math.min(this.maxIndent(),Math.max(0,e)),l.setData(this.node,"indent",e),0!==this.maxIndent()},setQuoted:function(e){e?l.setData(this.node,"quoted","true"):l.removeData(this.node,"quoted")},isQuoted:function(){return!!l.getData(this.node,"quoted")},isEditable:function(){return!this.children.some(function(e){return!e.isEditable()})},allowsMultipleSoftReturns:function(){return!1},allowedModifiers:function(){return s.editableSet()},toContent:function(e,t){var i=[];return i.push(this.getContentPrefix(e,t)),i.push(this.getChildrenContents(e)),i.push(this.getContentSuffix(e,t)),i=i.join("")},getChildrenContents:function(e){return this.children.map(function(t){return t.toContent(e)}).join("")},toJSON:function(e){var t={type:this.getType(),indent:this.getIndent(),quoted:this.isQuoted(),spans:[]};return this.children.forEach(function(i){t.spans.push(i.toJSON(e))}),t},first:function(){return this.firstChild().first()},last:function(){return this.lastChild().last()},getText:function(){var e="";return this.children.forEach(function(t){e+=t.getText()}),e},deleteText:function(e,t){if(e.span==t.span)e.span.deleteText(e.offset,t.offset);else{for(e.span.deleteText(e.offset,e.span.getLength());e.span.nextSibling()!=t.span;)this.removeChild(e.span.nextSibling());t.span&&t.span.deleteText(0,t.offset)}t.span.isEmpty()&&this.children.length>1&&this.removeChild(t.span),e.span.isEmpty()&&this.children.length>1&&this.removeChild(e.span),1==this.children.length&&this.firstChild()==e.span&&e.span.isEmpty()&&e.span.removeAllModifiers()},replaceText:function(e,t,i){if(""===i)return this.deleteText(e,t);var n=e.span.getText(),o=n.substr(0,e.offset)+i;e.span==t.span?o+=n.substr(t.offset):this.deleteText(e.span.nextSibling().first(),t),e.span.setText(o)},isEmpty:function(){return 1==this.children.length&&this.children[0].isEmpty()},isOnlyWhiteSpace:function(){return this.children.every(function(e){return e.isOnlyWhiteSpace()})},_createSplitSection:function(e){return new this.constructor(e,this.getIndent(),this.isQuoted())},split:function(e){var t,i,n,o,s=e.span,r=e.offset;return 0===r?(s==this.firstChild()&&this.insertBefore(new a,s),o=s):r===s.getLength()?s==this.lastChild()?(o=new a,this.appendChild(o)):o=s.nextSibling():o=s.split(r,!0),t=this.children.indexOf(o)+1,n=this.children.slice(t),n.unshift(o),i=this._createSplitSection(n),this.parent.insertBefore(i,this.nextSibling()),o.first()},merge:function(e){var t,i,n;if(e.isEditable())if(e.isEmpty())e.parent&&e.parent.removeChild(e),t=this.last();else if(this.isEditable()){for(this.isEmpty()?(this.removeChild(this.firstChild()),this.setIndent(e.getIndent()),this.setQuoted(e.isQuoted()),t=e.first()):t=this.last();e.children.length;)this.appendChild(e.firstChild());for(i=this.firstChild();i;)if((n=i.nextSibling())&&i.hasSameModifiers(n)){var o=i.getLength();i=i.merge(n),n==t.span&&(t=new r(i,o+t.offset))}else i=n;e.parent&&e.parent.removeChild(e)}else this.parent&&this.parent.removeChild(this),t=e.first();else this.isEmpty()&&this.parent&&this.parent.removeChild(this),t=e.first();return t},changeType:function(e){var t=new e(this.children,this.getIndent(),this.isQuoted());return this.parent&&(this.parent.insertBefore(t,this),this.parent.removeChild(this)),t},getContentPrefix:function(e,t){return e==o.TEXT?this._getTextPrefix(t):e==o.HTML?this._getHTMLPrefix(t):void 0},getContentSuffix:function(e,t){return e==o.TEXT?this._getTextSuffix(t):e==o.HTML?this._getHTMLSuffix(t):void 0},_getTextPrefix:function(){var e,t="";for(e=0;e<4*this.getIndent();e++)t+=" ";return this.isQuoted()&&(t+=">"),t},_getTextSuffix:function(){return"\n"},_getHTMLPrefix:function(e){var t,i="",n=e.indexOf(this),o=this.getIndent(),s=-1;for(n>0?(t=e[n-1],t instanceof this.constructor&&(s=t.getIndent()),this.isQuoted()&&!t.isQuoted()&&(i+="<blockquote>")):this.isQuoted()&&(i+="<blockquote>");o>s;)i+=this.htmlIndentPrefix,o--;return i+this.htmlPrefix},_getHTMLSuffix:function(e){var t,i=this.htmlSuffix,n=e.indexOf(this),o=this.getIndent(),s=-1;for(n<e.length-1&&(t=e[n+1])instanceof this.constructor&&(s=t.getIndent());o>s;)o--,i+=this.htmlIndentSuffix;return!this.isQuoted()||t&&t.isQuoted()||(i+="</blockquote>"),i},maxIndent:function(){return 0}});u.fromJSON=function(e){var t=[],i=c()[e.type];return e.spans.forEach(function(e){t.push(new a(e.text,e.modifiers))}),new i(t,e.indent,e.quoted)},t.Section=u},"./qtext2/sections/code.js":function(e,t,i){var n=i("./qtext2/section.js"),o=n.Section,s=o.extend({init:function(e,t,i){this._super("code",e,t,i),this.children.forEach(function(e){e.removeAllModifiers()})},allowedModifiers:function(){return[]},htmlIndentPrefix:"",htmlIndentSuffix:"",htmlPrefix:"<pre>",htmlSuffix:"</pre>"});t.CodeSection=s},"./qtext2/sections/embed.js":function(e,t,i){var n=i("./qtext2/span.js").Span,o=i("./qtext2/section.js").Section,s=i("./qtext2/modifiers.js"),a=i("./qtext2/sections/plain.js").PlainSection,r=i("./qtext2/util.js").Util,d=i("./shared/errors.js"),l=i("./qtext2/constants.js").CONTENT_TYPES,c=i("./shared/twitter_oembed.js"),u=c.tweetsEnabled,h=c.getTweetData,p=o.extend({init:function(e,t,i){r.assert(1==e.length,"EmbedSections should have exactly one child:",e),r.assert(e[0].hasModifier("embed"),"missing embed modifier on embed span"),this._super(this.type,e,t,i);var n=e[0].getModifier("embed").url;this._setEmbed(n)},toContent:function(e,t){var i=this.children[0].getModifier("embed").url;return e==l.TEXT?i:new n(i,{link:{type:"url",url:i}}).toContent(e)},toJSON:function(e){return{type:this.getType(),indent:this.getIndent(),quoted:this.isQuoted(),spans:this.children.map(function(t){return e?t.toJSON(e):{modifiers:{embed:t.getModifier("embed")}}})}},_setEmbed:function(){},allowedModifiers:function(){return s.nonEditableSet()},_onEmbedSectionCallbackError:function(){var e=this.children[0].getModifier("embed").url,t=this.changeType(a);t.children[0].removeModifier("embed"),t.children[0].setText(e),t.parent&&t.parent.linkifySections([t])}});p.getValidRegex=function(e){var t=[];e._VALID_REGEXES.forEach(function(e){t.push("(?:"+e.source+")")});var i=t.join("|");return new RegExp(i)},p.fromOtherSection=function(e){var t=null;return e.isEditable()?(v.some(function(i){var o=w()[i],s=!0,a="",d=0,l=p.getValidRegex(o);return e.children.forEach(function(e){if(e.hasModifier("link")){var t=e.getModifier("link").url;t&&t.match(l)?(d+=1,a=e.getModifier("link").url):s=!1}else{var i=e.getText();r.splitByRegex(i,l).forEach(function(e){e.match?(d+=1,a=e.text):e.text.match(/^ *$/)||(s=!1)})}}),!(1!=d||!s)&&(t=new o([new n("",{embed:{url:a}})]),!0)}),t):null};var f=p.extend({init:function(){this._super.apply(this,arguments),this.children[0].setModifier("playable")},_onOEmbedCallbackSuccess:function(e,t,i,n){var o=this.children[0].getModifier("embed");if(i!==undefined&&null!==i){r.assert(n===undefined||null===n,"If iframe_html is supplied, iframe_url has to be null / undefined.");var s=r.create("div");s.innerHTML=i,n=s.children[0].src}r.assert(null!==n,"For OEmbedSection, we have to have the iframe URL."),o.thumbnail_url=t,o.content_type=e,o.iframe={url:n},this.children[0].setModifier("embed",o),this.children[0].setModifier("image",t)}}),_=f.extend({_setEmbed:function(e){var t=this,n=this.children[0].getModifier("embed");n.thumbnail_url&&n.content_type&&n.iframe&&n.iframe.url?t._onOEmbedCallbackSuccess(n.content_type,n.thumbnail_url,null,n.iframe.url):i("./shared/embedly.js").getOEmbedlyData(e,function(e){e?t._onOEmbedCallbackSuccess(e.type,e.thumbnail_url,e.html):t._onEmbedSectionCallbackError()})},type:"oembedly"});_._VALID_REGEXES=[/http:\/\/www.vimeo.com\/groups\/*\/videos\/.*/,/http:\/\/www.vimeo.com\/.*/,/https:\/\/www.vimeo.com\/.*/,/http:\/\/vimeo.com\/groups\/.*\/videos\/.*/,/http:\/\/vimeo.com\/.*/,/https:\/\/vimeo.com\/.*/,/http:\/\/vimeo.com\/m\/#\/.*/,/http:\/\/player.vimeo.com\/.*/,/https:\/\/player.vimeo.com\/.*/,/http:\/\/www.hulu.com\/watch.*/,/http:\/\/www.hulu.com\/w\/.*/,/http:\/\/www.hulu.com\/embed\/.*/,/http:\/\/hulu.com\/watch.*/,/http:\/\/hulu.com\/w\/.*/,/http:\/\/hulu.tv\/.*/,/http:\/\/www.ustream.tv\/recorded\/.*/,/http:\/\/www.ustream.tv\/channel\/.*/,/http:\/\/www.ustream.tv\/.*/,/http:\/\/ustre.am\/.*/,/http:\/\/link.brightcove.com\/services\/player\/bcpid.*/,/http:\/\/bcove.me\/.*/,/http:\/\/www.vevo.com\/watch\/.*/,/http:\/\/www.vevo.com\/video\/.*/,/http:\/\/video.google.com\/videoplay\?.*/,/http:\/\/.*.dailymotion.com\/video\/.*/,/http:\/\/.*.dailymotion.com\/.*\/video\/.*/,/http:\/\/khanacademy.org\/*/,/http:\/\/www.khanacademy.org\/*/,/https:\/\/khanacademy.org\/*/,/https:\/\/www.khanacademy.org\/*/,/http:\/\/www.ted.com\/talks\/.*.html.*/,/http:\/\/www.ted.com\/talks\/lang\/.*\/.*.html*/,/http:\/\/www.ted.com\/index.php\/talks\/.*.html.*/,/http:\/\/www.ted.com\/index.php\/talks\/lang\/.*\/.*.html/,/http:\/\/www.ted.com\/talks\/.*/];var m=p.extend({init:function(){this._super.apply(this,arguments),this.children[0].setModifier("playable")},_setEmbed:function(e){var t,i;i=p.getValidRegex(m).exec(e),i?t=i[1]:(d.report(new Error("YouTubeEmbedSection: url did not match regex: "+e)),t=""),this.children[0].setModifier("image","https://img.youtube.com/vi/"+t+"/0.jpg")},type:"yt-embed",htmlIndentPrefix:"",htmlIndentSuffix:"",htmlPrefix:"<p>",htmlSuffix:"</p>"});m._VALID_REGEXES=[/(?:https?:\/{2})?(?:w{3}\.)?(?:youtube\.com\/watch.+v=|youtu.be\/|youtube.com\/embed\/)([^\s?]+)(\?[^\s]+)?/];var g=p.extend({_onTweetCallbackSuccess:function(e,t){this.children[0].setModifier("tweet",!0),this.children[0].setModifier("iframe",e),t&&c.renderTweetIFrame(e)},_setEmbed:function(e){var t=this;h(e,function(e,i){e?t._onTweetCallbackSuccess(e,i):t._onEmbedSectionCallbackError()},function(){t._onEmbedSectionCallbackError()})},type:"tweet",htmlIndentPrefix:"",htmlIndentSuffix:"",htmlPrefix:"<p>",htmlSuffix:"</p>"});g._VALID_REGEXES=[/https:\/\/(.*\.)?twitter.com\/.*\/status\/.*/];var v=["oembedly","yt-embed"];u()&&v.push("tweet");var w=function(){var e={};return e["yt-embed"]=m,e.oembedly=_,u()&&(e.tweet=g),e};t.EmbedSection=p,t.OEmbedlySection=_,t.YouTubeEmbedSection=m,t.TweetSection=g,t.EMBED_SECTION_TYPES=v},"./qtext2/sections/horizontal_rule.js":function(e,t,i){var n=i("./qtext2/section.js").Section,o=i("./qtext2/span.js").Span,s=n.extend({init:function(){var e=[new o("",{image:"/static/images/hr_img_3.png"})];this._super("horizontal-rule",e,0,!1)},allowedModifiers:function(){return["image"]},getChildrenContents:function(){return""},_getHTMLPrefix:function(){return"<hr>"},_getHTMLSuffix:function(){return"</hr>"}});t.HorizontalRuleSection=s},"./qtext2/sections/image.js":function(e,t,i){var n=i("./qtext2/section.js"),o=n.Section,s=i("./qtext2/span.js").Span,a=i("./qtext2/util.js").Util,r=o.extend({init:function(e,t,i){a.assert(1==e.length,"ImageSections should have exactly one child:",e),a.assert(e[0].hasModifier("image"),"missing image modifier on image span"),this._super("image",e,t,i)},allowedModifiers:function(){return["image","external_source","uploading"]},htmlIndentPrefix:"",htmlIndentSuffix:"",htmlPrefix:"<p>",htmlSuffix:"</p>"});r.fromURL=function(e,t){var i={image:e};return t&&(i.external_source=t),new r([new s("",i)])},t.ImageSection=r},"./qtext2/sections/lists.js":function(e,t,i){var n=i("./qtext2/section.js"),o=n.Section,s=t.isListSection=function(e){return e instanceof a},a=o.extend({allowsMultipleSoftReturns:function(){return!0},maxIndent:function(){if(this.parent){var e=this.previousSibling();return e&&s(e)?Math.min(2,e.getIndent()+1):0}return 2},htmlPrefix:"<li>",htmlSuffix:"</li>"});t.UnorderedListSection=a.extend({init:function(e,t,i){this._super("unordered-list",e,t,i)},_getTextPrefix:function(e){return this._super(e)+"* "},htmlIndentPrefix:"<ul>",htmlIndentSuffix:"</ul>"}),t.OrderedListSection=a.extend({init:function(e,t,i){this._super("ordered-list",e,t,i)},_getTextPrefix:function(e){for(var t,i=this._super(e),n=this.getIndent(),o=e.indexOf(this)-1,s=1;o>=0&&(t=e[o],!(n>t.getIndent())&&t instanceof this.constructor);)n==t.getIndent()&&s++,o--;return i+s+". "},htmlIndentPrefix:"<ol>",htmlIndentSuffix:"</ol>"})},"./qtext2/sections/plain.js":function(e,t,i){var n=i("./qtext2/section.js").Section,o=n.extend({init:function(e,t,i){this._super("plain",e,t,i)},htmlIndentPrefix:"",htmlIndentSuffix:"",htmlPrefix:"<p>",htmlSuffix:"</p>"});t.PlainSection=o},"./qtext2/sections/video.js":function(e,t,i){var n,o=i("./qtext2/section.js"),s=o.Section,a=i("./qtext2/span.js").Span,r=i("./shared/errors.js"),d=i("./shared/util.js"),l=i("./shared/client.js"),c=i("./settings.js"),u=i("./qtext2/modifiers.js"),h=i("./qtext2/util.js").Util,p=i("./shared/jquery.js"),f=h.h,_=s.extend({init:function(e,t,i){h.assert(1==e.length,"VideoSection should have exactly one child:",e),h.assert(e[0].getModifier("video"),"Missing video modifier in child span."),this._super("video",e,t,i),this.maybeRequestThumbnail(),this.renderVideoIframe()},renderVideoIframe:function(){var e=$(this.getVideo()),t=e.iframeRoot;this.firstChild().setModifier("iframe",t),this.bindIframeEvents(t),p(t).closest(".span.video.iframe").css(e.iframeRootSectionStyle)},maybeRequestThumbnail:function(e){if((e||!this.getThumb())&&l.isNativeApp()){var t=this;if(!this.getId())return void r.logJsError("qtext",["Video modifier has undefined id: ",JSON.stringify(this.getVideo())].join(""));n.send("getVideoThumbnail",{uuid:this.getId()},function(e){e&&e.thumb&&t.updateVideo({thumb:e.thumb})})}},_editClick:function(e){var t=this;e.on("click",function(){t.parent.handleCommand("video",{uuid:t.getId(),version:t.getVersion()})})},_deleteClick:function(e){var t=this;e.on("click",function(){if(l.isNativeApp()){var e={title:c.qtextData.deleteVideoTitle,message:"",otherButtonTitles:[c.qtextData.deleteVideoButton]};t.getVideo().onDevice&&(e.message=c.qtextData.deleteVideoMessage),n.send("showAlert",e,function(e){1==e.buttonIndex&&t.parent.handleCommand("video:remove",t.getId()),t.parent.focus()})}else t.parent.handleCommand("video:remove",t.getId())})},_playClick:function(e){var t=this;e.on("click",function(){n.send("showVideoPlayer",{uuid:t.getId()})})},_pauseClick:function(e){var t=this;e.on("click",function(){var e=t._getVideoIframeDoc();e&&(t.failed?(t.failed=!1,t.parent.handleCommand("video:retry-upload",{resumableFile:t.resumableFile}),e.getElementsByClassName("upload-pause")[0].innerHTML=c.qtextData.pauseUploadingButton,e.getElementsByClassName("upload-status-img")[0].src=c.qtextData.uploadingSvg,e.getElementsByClassName("upload-status-title")[0].innerHTML=c.qtextData.pauseUploadingTitle):t.paused?(t.parent.handleCommand("video:resume-uploads"),t.paused=!1,e.getElementsByClassName("upload-status-title")[0].innerHTML=c.qtextData.pauseUploadingTitle,e.getElementsByClassName("upload-pause")[0].innerHTML=c.qtextData.pauseUploadingButton):(t.parent.handleCommand("video:pause-uploads"),t.paused=!0,e.getElementsByClassName("upload-status-title")[0].innerHTML=c.qtextData.resumeUploadingTitle,e.getElementsByClassName("upload-pause")[0].innerHTML=c.qtextData.resumeUploadingButton))})},bindIframeEvents:function(e){var t=this,i=p(e);i.on("load",function(){var e=i.contents();t._editClick(e.find(".qt-video-edit")),t._deleteClick(e.find(".qt-video-delete")),t._playClick(e.find(".qt-video-play")),t._pauseClick(e.find(".upload-pause"))})},_getVideoIframeDoc:function(){var e=p("#"+this.getId()+"-iframe");return 0===e.length?null:e.get(0).contentDocument},renderVideoRetry:function(e){this.failed=!0,this.resumableFile=e;var t=this._getVideoIframeDoc();t&&(t.getElementsByClassName("upload-progress")[0].style.display="none",t.getElementsByClassName("upload-status-title")[0].innerHTML=c.qtextData.uploadErrorTitle,t.getElementsByClassName("upload-status-img")[0].src=c.qtextData.uploadErrorSvg,t.getElementsByClassName("upload-pause")[0].innerHTML=c.qtextData.retryUploadingButton)},_progressText:function(e,t){var i=d.formatBytes(t);return d.formatBytes(t*e)+" / "+i},updateVideoUploadProgress:function(e,t){var i=this._getVideoIframeDoc();if(i){var n=Math.floor(100*e)+"%";i.getElementsByClassName("qt-video-control")[0].style.display="flex",i.getElementsByClassName("upload-progress")[0].style.display="block",e>=1&&(this.updateVideo({uuid:this.getId(),isUploading:!1,thumb:this.getThumb()}),n="100%",i.getElementsByClassName("upload-status-title")[0].innerHTML=c.qtextData.doneUploadingTitle,i.getElementsByClassName("qt-video-control")[0].style.display="none"),i.getElementsByClassName("upload-percentage")[0].style.width=n,i.getElementsByClassName("upload-numbers")[0].innerHTML=this._progressText(e,t)}},updateVideo:function(e){var t=this.getVideo();(e.uuid&&e.uuid!=t.uuid||e.version&&e.version!=t.version)&&delete t.jwplayer_id;var i=e.videoContentChanged;i&&(delete e.videoContentChanged,delete e.jwplayer_id),this.firstChild().setModifier("video",d.extend(t,e)),this.maybeRequestThumbnail(i),this.renderVideoIframe()},allowedModifiers:function(){return u.nonEditableSet()},getVideo:function(){return this.firstChild().getModifier("video")},getThumb:function(){return this.getVideo().thumb},getId:function(){return this.getVideo().uuid},getVersion:function(){return this.getVideo().version},isUploading:function(){return this.getVideo().isUploading},toJSON:function(e){return{type:this.getType(),indent:this.getIndent(),quoted:this.isQuoted(),spans:this.children.map(function(t){if(e)return t.toJSON(e);var i=t.getModifier("video");return{modifiers:{video:{jwplayer_id:i.jwplayer_id,library_video:i.library_video,is_creator:i.is_creator,uuid:i.uuid,version:i.version}}}})}},htmlIndentPrefix:"",htmlIndentSuffix:"",htmlPrefix:"<p>",htmlSuffix:"</p>"});_.fromVideo=function(e){return new _([new a("",{video:e})])};var m="background-color: rgba(0,0,0,0.5)",g="font-size: 14px",v="top: 12px",w="left: 12px",b="right: 12px",y="top: 50%; left: 50%; transform: translate(-50%, -50%)",C="padding: 32px",k="margin-bottom: 10px",S=function(){return f("div",{"class":"qt-video-display",style:["position: absolute",y,"text-align: center","width: 80%"].join(";")},f("img",{src:c.qtextData.videoNotPresentSvg,style:["display: inline-block","width: 70px","height: 70px"].join(";")}),f("div",{style:[g,"color: #999","margin-top: 8px"].join(";")},c.qtextData.videoNotPresent))},E=function(){return f("div",{"class":"qt-video-control",style:[m,"position: absolute",y,"width: 100%","height: 100%","display: none","align-items: center","text-align: center"].join(";")},f("div",{style:["width: 100%","box-sizing: border-box",C].join(";")},f("div",{style:["display: flex","align-items: center"].join(";")},f("img",{"class":"upload-status-img",src:c.qtextData.uploadingSvg,style:["width: 25vw","margin-right: 5vw"].join(";")}),f("div",{style:["width: 100%","text-align: left"].join(";")},f("div",{"class":"upload-status-title",style:["font-size: 16px","color: #fff","font-weight: 500",k].join(";")},c.qtextData.pauseUploadingTitle),f("div",{"class":"upload-progress",style:["position: relative","width: 100%","height: 4px","background-color: rgba(255,255,255,0.3)",k].join(";")},f("div",{"class":"upload-percentage",style:["position: absolute","left: 0","top: 0","bottom: 0","background-color: #b92b27","width: 0%"].join(";")})),f("div",{"class":"upload-numbers",style:["font-size: 12px","color: #ddd"].join(";")},"0%"))),f("div",{"class":"upload-pause",style:[m,g,"display: inline-block","color: #fff","padding: 8px 12px","border-radius: 4px","cursor: pointer"].join(";")},c.qtextData.pauseUploadingButton)))},x=function(){return f("span",{"class":"qt-video-delete",style:[m,"position: absolute",v,b,"width: 32px","height: 32px","border-radius: 20px","cursor: pointer"].join(";")},f("img",{src:c.qtextData.deleteVideoSvg,style:["position: absolute",y,"width: 24px","height: 24px"].join(";")}))},T=function(){return f("span",{"class":"qt-video-edit",style:[m,g,"position: absolute",v,w,"color: #fff","padding: 8px 12px","border-radius: 4px","cursor: pointer"].join(";")},c.qtextData.editVideo)},A=function(){return f("div",{"class":"qt-video-play",style:[m,y,"position: absolute","width: 70px","height: 70px","border-radius: 50%"].join(";")},f("img",{src:c.qtextData.playVideoSvg,style:["position: absolute",y,"display: inline-block","width: 32px","height: 32px"].join(";")}))},L=function(){return f("div",{"class":"qt-video-indicator",style:["position: absolute",v,w].join(";")},f("img",{src:c.qtextData.videoIndicatorSvg,style:["display: inline-block","width: 32px","height: 32px"].join(";")}))},$=function(e){var t=e.thumb,i=e.jwplayer_id,n=i,o=e.onDevice,s=e.is_web_upload,a=l.isNativeApp(),r=c.qtextData.canEditPostedVideos,d=c.qtextData.videoUploadOnlyGate;i&&(t="https://content.jwplatform.com/thumbs/"+i+".jpg");var u=!1;a&&!d&&(u=o&&!n||!e.library_video&&e.is_creator&&n&&r);var _=D(t,e.videoWidth,e.videoHeight,o,n),m=!s;a&&(m=!n&&!o&&!t);var g=f("div",{style:_.formatter(_.thumbParentStyles)},t&&f("img",{src:t,style:_.formatter(_.thumbStyles)}),m&&S(),!a&&d&&E(),x(),u&&T(),t&&L(),a&&!o&&!n&&t&&A(),f("style",{},"html, body { height: 100%; width: 100% }")),v=h.createPlainIframe(g);return p(v).attr("id",e.uuid+"-iframe"),{iframeRoot:v,iframeRootSectionStyle:_.placeholderParentStyles}},D=function(e,t,i,n,o){var s={"padding-bottom":"100%"},a={"font-family":'"Helvetica Neue",Helvetica,Arial,sans-serif',position:"relative","box-shadow":"inset 0 0 70px rgba(0, 0, 0, 0.1)",width:"100%",height:"100%",overflow:"hidden","background-color":"#f7f7f7"},r={position:"absolute",margin:"auto",left:"0",bottom:"0",top:"0",right:"0",width:"100%"},d=function(e){return Object.keys(e).map(function(t){return t+": "+e[t]}).join(";")},l=function(){return{placeholderParentStyles:s,thumbParentStyles:a,thumbStyles:r,formatter:d}};if(n||!e)return l();a["background-color"]="black",delete r.width,delete r.height;var c=t/i,u=.015;return c<4/3-u?(r.height="100%",l()):(c<16/9-u?(r.width="100%",s["padding-bottom"]="75%"):(r.width="100%",s["padding-bottom"]="56.25%"),l())};t.VideoSection=_},"./qtext2/shortcuts.js":function(e,t,i){var n=i("./qtext2/keys.js"),o=i("./shared/util.js").extend,s={Backspace:"backspace",Delete:"delete",Return:"return","Alt-Return":"return","Ctrl-Return":"return","Shift-Return":"soft-return"," ":"space",Tab:"indent","Shift-Tab":"deindent","Cmd-B":"bold","Cmd-I":"italic","Cmd-U":"underline","Cmd-K":"link","Cmd-Shift-7":"ordered_list","Cmd-Shift-8":"unordered_list","Cmd-Shift-9":"quote","Cmd-Shift-K":"code","Cmd-Shift-L":"math","Cmd-Z":"undo","Cmd-Shift-Z":"redo"};n.isMac?o(s,{"Ctrl-H":"backspace","Ctrl-D":"delete","Ctrl-K":"delete-forward","Cmd-Backspace":"delete-backward","Ctrl-T":"transpose","Ctrl-Backspace":"backspace","Ctrl-Delete":"delete","Shift-Backspace":"backspace","Shift-Delete":"delete","Alt-Backspace":"delete-previous-word","Alt-Delete":"delete-next-word","Ctrl-U":"underline"}):o(s,{"Ctrl-Backspace":"delete-previous-word","Ctrl-Delete":"delete-next-word","Shift-Backspace":"backspace","Shift-Delete":"delete","Alt-Backspace":"backspace","Alt-Delete":"delete"}),t.SHORTCUTS=s},"./qtext2/span.js":function(e,t,i){var n=i("./qtext2/container.js").Container,o=i("./qtext2/position.js").Position,s=i("./qtext2/constants.js").CONTENT_TYPES,a=i("./qtext2/modifiers.js"),r=i("./shared/browser.js"),d=i("./shared/util.js").extend,l=i("./qtext2/util.js").Util,c=i("./shared/util.js"),u=n.create("span",{init:function(e,t){t=t||{},this.modifiers={},this._content=this.createContentNode(),this.node.appendChild(this._content),this._image=null,this.setText(e);var i=this;c.iterItems(t,function(e,t){i.setModifier(e,t,!0)})},createContentNode:function(){var e=l.create("div");return e.className="content",e.qtextSpanContent=!0,e},merge:function(e){if(this.isEditable()&&e.isEditable()&&this.hasSameModifiers(e))return this.setText(this.getText()+e.getText()),e.parent.removeChild(e),this},hasSameModifiers:function(e){var t=this.modifiers,i=e.modifiers,n=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(i);return n.length==o.length&&n.every(function(e){if("link"==e&&i.link){var n=t.link.url;n&&"/"!=n.substr(-1)&&(n+="/");var o=i.link.url;return o&&"/"!=o.substr(-1)&&(o+="/"),n==o}return t[e]==i[e]})},toJSON:function(e,t,i){var n=d({},this.modifiers);return e||delete n.iframe,{modifiers:n,text:this.getText().slice(t,i)}},previous:function(){return this.previousSibling()||this.parent.previousSibling()&&this.parent.previousSibling().lastChild()},next:function(){return this.nextSibling()||this.parent.nextSibling()&&this.parent.nextSibling().firstChild()},first:function(){return new o(this,0)},last:function(){return new o(this,this.getLength())},updateModifiers:function(e,t){var i,n,o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],this.setModifier(i,e[i],t);this._updateClass()},setModifier:function(e,t,i){if(a.canSetModifier(this,e))return void this._setModifier(e,t);if(i&&a.canForceModifier(this,e)){var n=this.modifiers;this.modifiers={},this._setModifier(e,t);var o=this;Object.keys(n).forEach(function(e){o.setModifier(e,n[e])})}},_setModifier:function(e,t){this.modifiers[e]=t||!0,"image"==e&&(this._image||(this._image=l.create("img")),this.setText(""),this._removePlaceholder(),r.firefox&&this._image.setAttribute("contenteditable","false"),this._content.appendChild(this._image),this._image.src=t),"iframe"==e&&(this.setText(""),this._removePlaceholder(),this._content.appendChild(t)),"underline"==e&&(this._content.style.textDecoration="underline"),this._updateClass()},isEditable:function(){var e=this;return!a.nonEditableSet().some(function(t){return e.hasModifier(t)})},hasAnyModifier:function(e){return Object.keys(this.modifiers).some(function(t){return-1!=e.indexOf(t)})},hasDifferentModifier:function(e){return Object.keys(this.modifiers).some(function(t){return-1==e.indexOf(t)})},removeAllModifiers:function(){this.modifiers={},this._updateClass()},removeModifier:function(e){delete this.modifiers[e],this._updateClass()},getModifier:function(e){return this.modifiers[e]},getModifiers:function(){return d({},this.modifiers)},hasModifier:function(e){return e in this.modifiers},_updateClass:function(){this.node.className="span";for(var e in this.modifiers)this.modifiers.hasOwnProperty(e)&&this.modifiers[e]&&(this.node.className+=" "+e)},isEmpty:function(){return!!this.isEditable()&&(""===this.node.textContent||""===this.node.innerHTML||"<br>"==this.node.innerHTML)},getText:function(){return this._content.textContent},setText:function(e){this._content.textContent=e,e||this._setPlaceholder()},_removePlaceholder:function(){this._content.textContent=this.getText()},insertText:function(e,t){var i=this.getText();this.setText(i.slice(0,t)+e+i.slice(t))},deleteText:function(e,t){this.setText(this.getText().slice(0,e)+this.getText().slice(t))},getLength:function(){return this.isEditable()?this.getText().length:1},isOnlyWhiteSpace:function(){return!!this.isEditable()&&(!this.hasModifier("citation")&&0==this.getText().trim().length)},getFocusNode:function(){return l.isTextNode(this._content.firstChild)?this._content.firstChild:this._content},_setPlaceholder:function(){this._content.innerHTML="<br/>"},shouldAvoidSplitting:function(){return this.hasModifier("link")||this.hasModifier("code")||this.hasModifier("math")},split:function(e,t){var i;return!t&&this.shouldAvoidSplitting()?this:(this.isEmpty()?i=new u(null,this.modifiers):0===e?(i=new u(this.getText(),this.modifiers),this.setText("")):(i=new u(this.getText().slice(e),this.modifiers),this.setText(this.getText().slice(0,e))),this.parent.insertBefore(i,this.nextSibling()),i)},_toText:function(){var e,t;return e=this.getText(),this.hasModifier("math")&&(e="$"+e+"$"),this.hasModifier("italic")&&(e="*"+e+"*"),this.hasModifier("bold")&&(e="**"+e+"**"),this.hasModifier("underline")&&(e="_"+e+"_"),this.hasModifier("link")&&(t=this.getModifier("link"),e+=" ("+t.url+")"),e},_toHTML:function(){var e,t;return this.hasModifier("image")?'<img src="'+this.getModifier("image")+'"/>':this.hasModifier("video")?'<video src="'+this.getModifier("video")+'"/>':(e=this.getText(),e=c.escapeHTML(e),e=e.replace(/\n/gi,"<br>"),this.hasModifier("italic")&&(e="<i>"+e+"</i>"),this.hasModifier("bold")&&(e="<b>"+e+"</b>"),this.hasModifier("underline")&&(e="<u>"+e+"</u>"),this.hasModifier("link")&&(t=this.getModifier("link"),e='<a href="'+t.url+'">'+e+"</a>"),this.hasModifier("code")?e="<code>"+e+"</code>":this.hasModifier("math")&&(e="<math>"+e+"</math>"),e)},toContent:function(e){return e==s.TEXT?this._toText():e==s.HTML?this._toHTML():void 0}});t.Span=u},"./qtext2/tooltip.js":function(e,t,i){var n,o,s=null,a=i("./shared/jquery.js"),r=function(){n||(n=a("<div>").addClass("qtext2_tooltip"),a(document.body).append(n),o=a("<div>"),o.css({overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),n.append(o))};t.show=function(e,t,i){r();var d=a(e),l=a(i),c=l.outerWidth();o.html(t),n.css("max-width",c),n.removeClass("hidden");var u=d.offset(),h=u.left+.5*d.width(),p=l.offset(),f=p.left,_=f+c;u.top<30?n.css("top",d.height()+20):n.css("top",u.top-30);var m=n.outerWidth(),g=h-m/2,v=h+m/2;g<f?n.css("left",f):v>_?n.css("left",_-m):n.css("left",g),clearTimeout(s),s=setTimeout(function(){n.addClass("visible")},500)},t.hide=function(){n&&(clearTimeout(s),s=setTimeout(function(){n.removeClass("visible"),n.addClass("hidden")},100))}},"./qtext2/ui.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./qtext2/util.js").Util,s=i("./qtext2/quirks.js").Quirks,a=i("./shared/upload.js");t.LinkSelector=n.extend({__init__:function(e){this.editor=e,this.toolbar=e.toolbar,this.active=!1,this.key="",this._onSubmitCallback=null,this._onCancelCallback=null},isActive:function(){return this.active},show:function(){throw new Error("NotImplemented: Subclasses should override")},hide:function(){this.active=!1,this.key=""},submit:function(){throw new Error("NotImplemented: Subclasses should override")},cancel:function(){throw new Error("NotImplemented: Subclasses should override")},onSubmit:function(e){this._onSubmitCallback=e},onCancel:function(e){this._onCancelCallback=e},getExternalURL:function(e,t,i){this.toolbar&&(this.toolbar.on("linkInput",e),this.toolbar.showBar(0))},getLinkPreview:function(e,t,i){this.editor.serverCall("get_link_preview").kwargs({url:e}).success(t).error(i).send()}}),t.ImageUploader=n.extend({__init__:function(e,t,i,n,o){this.editor=e,this.doc=t,this.$dropZone=i,this.$fileInput=n,this.interface_strings=o,this._dragStartedInDoc=!1,this.initEventHandlers()},_debugEvent:function(e,t){},initEventHandlers:function(){o.on("dragenter",this.doc.node,this.onDragEnter.bind(this)),o.on("dragstart",this.doc.node,this.onDragStart.bind(this)),o.on("dragend",this.doc.node,this.onDragEnd.bind(this)),o.on("paste",this.doc.node,this.onPaste.bind(this)),o.on("drop",this.doc.node,this.onDropInDoc.bind(this)),o.on("dragleave",this.$dropZone,this.onDragLeave.bind(this)),o.on("dragover",this.$dropZone,this.onDragOver.bind(this)),o.on("click",this.$dropZone,this.onClick.bind(this)),o.on("drop",this.$dropZone,this.onDrop.bind(this)),o.on("change",this.$fileInput,this.onChange.bind(this))},onDragEnter:function(e){this._debugEvent("dragenter",e),s.dragEventContainsFile(e)&&(this._dragStartedInDoc||this.showDropZone())},onDragStart:function(e){this._debugEvent("dragstart",e),this._dragStartedInDoc=!0},onDragEnd:function(e){this._debugEvent("dragend",e),this._dragStartedInDoc=!1},onDropInDoc:function(e){this._debugEvent("drop (in doc)",e),this._dragStartedInDoc=!1},onDragLeave:function(e){this._debugEvent("dragleave",e),this.hideDropZone()},onDragOver:function(e){this._debugEvent("dragover",e),e.preventDefault()},onClick:function(e){this._debugEvent("click",e),this.hideDropZone()},onDrop:function(e){if(this._debugEvent("drop",e),e.preventDefault(),e.stopPropagation(),!e.dataTransfer)return void this.hideDropZone();this.startUpload(e.dataTransfer.files)},onChange:function(e){this._debugEvent("change",e),this.startUpload(this.$fileInput.files),this.$fileInput.value=null},onPaste:function(e){this._debugEvent("paste",e);var t=e.clipboardData,i=[];if(!t||!t.items)return!1;for(var n=0;n<t.items.length;++n){var o=t.items[n].type;(o.match(/image/i)||o.match(/file/i))&&i.push(t.items[n].getAsFile())}return this.startUpload(i),!1},showDropZone:function(){this.$dropZone.innerHTML=this.interface_strings.drop_images,this.$dropZone.classList.remove("hidden"),this.$dropZone.style.lineHeight=this.doc.node.clientHeight+"px",this.$dropZone.style.top=this.doc.node.offsetTop+"px"},hideDropZone:function(){this.$dropZone.classList.remove("uploading"),this.$dropZone.classList.add("hidden")},showUploading:function(e){this.showDropZone(),this.$dropZone.innerHTML=e>1?this.interface_strings.uploading_images.replace("{}",e):this.interface_strings.uploading_image},_onUpload:function(e){this.doc.insertImages(e.qimg_urls,{source:"upload"}),this.hideDropZone()},_onError:function(e){e&&e.message?alert(e.message):alert(this.interface_strings.upload_error),this.hideDropZone()},startUpload:function(e){if(0===e.length)return void this.hideDropZone();this.showUploading(e.length),a.uploadData({kind:"qtext"},e,this._onUpload.bind(this),this._onError.bind(this))},uploadImageUrl:function(e,t){this.editor.serverCall("upload_image_url").kwargs({url:e}).success(t).error(this._onError.bind(this,null)).send()}}),t.PhotoSearch=n.extend({__init__:function(e,t,i,n){this.$searchComponent=t,this.$wrapper=i,this.$searchComponent.setSelectCallback(this.submit.bind(this)),this.$searchComponent.setUploadCallback(this.hide.bind(this)),this.$searchComponent.setUploader(n),this.active=!1},isActive:function(){return this.active},fixPosition:function(){var e=this.$wrapper,t=this.$wrapper.parent(),i=6,n=function(){var o=t.find(".editor_toolbar"),s=t.offset().left+t.width()-e.width();"fixed"===o.css("position")?e.css("position","fixed").css("left",s).css("right","auto"):e.css("position","absolute").css("left","auto").css("right",0),e.css("top",parseInt(o.css("top"))+o.height()+i),window.requestAnimationFrame(n)};n()},show:function(){var e=this;e.fixPosition(),e.$wrapper.addClass("animate_in"),setTimeout(function(){e.$wrapper.removeClass("animate_in"),e.$wrapper.addClass("is_shown")},200),e.$searchComponent.makeActive(),e.active=!0},hide:function(){var e=this;e.active=!1,e.$wrapper.addClass("animate_out"),setTimeout(function(){e.$wrapper.removeClass("is_shown"),e.$wrapper.removeClass("animate_out")},200)},toggle:function(){this.active?this.hide():this.show()},submit:function(e){this._onInsertCallback&&this._onInsertCallback(e)},cancel:function(){if(this._onCancelCallback)return this._onCancelCallback(),!1},onInsert:function(e){this._onInsertCallback=e},onCancel:function(e){this._onCancelCallback=e}})},"./qtext2/util.js":function(e,t,i){var n=i("./shared/email.js").isValidEmail,o=i("./shared/jquery.js"),s=["keydown","keyup","keypress"],a=i("./shared/linkify.js"),r=/^https?\:\/\//,d=i("./shared/util.js"),l={assert:function(e){if(!e){var t=Array.prototype.slice.call(arguments,1);throw new Error(t)}},create:function(e){return document.createElement(e)},objectIntersection:function(e,t){for(var i=Object.keys(e),n={},o=0;o<i.length;o++){var s=i[o];d.jsonEqual(e[s],t[s])&&(n[s]=e[s])}return n},removeNullValues:function(e){for(var t,i=Object.keys(e),n=0;n<i.length;n++)if(t=i[n],null===e[t])delete e[t];else if("[object Object]"===Object.prototype.toString.call(e[t]))l.removeNullValues(e[t]);else if("[object Array]"===Object.prototype.toString.call(e[t]))for(var o=0;o<e[t].length;o++)l.removeNullValues(e[t][o]);return e},getData:function(e,t){return e.getAttribute("data-"+t)},setData:function(e,t,i){e.setAttribute("data-"+t,i)},removeData:function(e,t){e.removeAttribute("data-"+t)},isTextNode:function(e){return e&&3==e.nodeType},safeRemoveChild:function(e,t){e&&e.parentNode&&e.parentNode==t&&t.removeChild(e)},on:function(e,t,i){e=e instanceof Array?e:[e],e.forEach(function(e){t.addEventListener(e,function(t){var n;return-1!=s.indexOf(e)&&(t.which=t.charCode!==undefined?t.charCode:t.keyCode),n=i(t,e),!1===n&&(t.preventDefault(),t.stopPropagation()),n})})},ensureProtocol:function(e){return n(e)?e:(r.test(e)||(e="http://"+e),e)},isValidUrl:function(e){var t=l.linkify(e);return 1===t.length&&t[0].href},splitLines:function(e){return e.split(/\n|\r\n?/)},splitByRegex:function(e,t){for(var i,n=[];e;)i=e.match(t),i?(i.index&&n.push({text:e.slice(0,i.index)}),n.push({text:i[0],match:i}),e=e.slice(i.index+i[0].length)):(n.push({text:e}),e="");return n},linkify:function(e){var t=[];return a.linkify(e,{callback:function(e,i){0!==e.length&&t.push({text:e,href:i})}}),t},firstScrollingParent:d.firstScrollingParent,getContainerOffset:function(e,t){var i=o(e).offset(),n=t||l.firstScrollingParent(e);if(n!==document.body){var s=o(n).offset();i.left+=n.scrollLeft-s.left,i.top+=n.scrollTop-s.top}return i},isAstralSymbol:function(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e)},createPlainIframe:function(e){var t=document.createElement("iframe"),i=["<html>","<head>","<style>html, body {margin: 0; padding 0;}</style>","</head>","<body>",e.outerHTML,"</body>","</html>"];return t.srcdoc=i.join(""),t},h:function(e,t){for(var i=new Array(arguments.length-2),n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o;o=null===e?document.createDocumentFragment():document.createElement(e),Object.keys(t||{}).forEach(function(e){o.setAttribute(e,t[e])});for(var s=0;s<i.length;s++){var a=i[s];a&&(Array.isArray(a)&&(a=l.h.apply(null,[null,null].concat(a))),"string"==typeof a&&(a=document.createTextNode(a)),o.appendChild(a))}return o}};t.Util=l},"./shared/Class.js":function(e,t){function i(e,t){function i(){if(o||(e.call(d),n(l,t,a),o=!0,t=null),this!==d){var i=this.__init__;i&&i.apply(this,arguments)}}var o,a=r.prototype=e.prototype,l=new r;return i.prototype=l,i.extend=s,l.constructor=i,i}function n(e,t,i){for(var n in t)t.hasOwnProperty(n)&&(e[n]=i?o(n,t,i):t[n])}function o(e,t,i){var n=t[e],o=i[e];return"function"==typeof n&&"function"==typeof o&&n!==o&&a.test(n)?function(){var t=this._super;this._super=i[e];try{return n.apply(this,arguments)}finally{this._super=t}}:n}function s(e){return i(this,e)}var a=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,r=function(){},d={};t.Class=s.call(function(){},{})},"./shared/action_log.js":function(e,t,i){function n(e,t,i,n){c.setMessage("alog",[e,t,i,n])}function o(e,t){t&&n(e,t,null,null)}function s(e,t){var i=d.actionTrail;i&&n(e,null,t,i)}function a(e,t){e&&s(e,t)}var r,d=i("./settings.js"),l=i("./shared/jquery.js"),c=i("./shared/cookies.js"),u=i("./shared/core/component.js").Component;t.logPrimaryAction=o,t.logSecondaryAction=s,t.ActionableComponent=u.extend({onLoad:function(){this._handleOnLoadDesktop()},_handleOnLoadMobile:function(){var e,t,i=this,n=i.$id("@actionable a"),o=function(e){return function(t){var n=e.getAttribute("action_mousedown")||e.getAttribute("action_click");t.stopActionLogging||i.processAction(n),e.getAttribute("action_stop_propagation")&&(t.stopActionLogging=!0)}};if(i.setDvar("impression_target",i.impression_target),n)for(t=0;t<n.length;++t)e=n[t],r.safeClickHandler(e,o(e))},_handleOnLoadDesktop:function(){var e=this;this.$id("@actionable").on("mousedown","[action_mousedown]",function(t){var i=t.originalEvent||t;i.stopActionLogging||e.processAction(l(this).attr("action_mousedown"),l(this).attr("action_target")),l(this).attr("action_stop_propagation")&&(i.stopActionLogging=!0)}),this.$id("@actionable").on("click","[action_click]",function(t){var i=t.originalEvent||t;i.stopActionLogging||e.processAction(l(this).attr("action_click"),l(this).attr("action_target")),l(this).attr("action_stop_propagation")&&(i.stopActionLogging=!0)})},processAction:function(e){var t=this;e&&o(e,t.impression_target)}}),t.init=function(){l(document).on("mousedown","[action_mousedown]",function(e){a(l(e.currentTarget).attr("action_mousedown"),l(e.currentTarget).attr("action_target"))}),l(document).on("click","[action_click]",function(e){a(l(e.currentTarget).attr("action_click"),l(e.currentTarget).attr("action_target"))})},t.findActionableComponentsInViewport=function(){},t.findFeedItemsInViewport=function(){}},"./shared/activity_metrics.js":function(e,t,i){function n(e){var i=t.doLog.bind(null,e);window.addEventListener(e,s(i,t.RESOLUTION,{trailing:!1}),!0)}var o=i("./shared/log_sender.js"),s=i("./shared/debounce.js").throttle,a=i("./interface/settings.js");t.RESOLUTION=6e4,t.doLog=function(e){var t={eventType:e,time:1e3*Date.now(),path:window.location.href,controller:a.controller,action:a.action,window_id:a.windowId};o.log("activity_metrics",t)},t.init=function(){n("scroll"),n("click"),n("keyup")}},"./shared/ads_impression_logging.js":function(e,t,i){var n=i("./shared/impression_tracker.js"),o=i("./shared/log_sender.js"),s=.5,a=1e3,r=n.createTracker(function(e){o.log("action_log",e)},{ratioThreshold:s,minTimeInViewMs:a,exitViewport:!1,oneOffTracking:!0});t.observe=r.observe.bind(r)},"./shared/ads_landing_page_time.js":function(e,t,i){var n=i("./shared/log_sender.js"),o=i("./shared/visibility_state.js"),s=null,a=null;t.startTimer=function(e){s=Date.now(),a=e};var r=function(e,t){n.log("ads_landing_page_time",{landing_page_time:e,impression_hash:t},{scribeOnly:!0})},d=function(){var e=Date.now();null!==s&&(r(e-s,a),s=null,a=null)};o.onChange(function(e){e&&d()})},"./shared/beforeunload.js":function(e,t,i){var n=i("./shared/jquery.js"),o=!1,s=[];t.registerHandler=function(e,t){t=t||0,s[t]||(s[t]=[]),s[t].push(e)},t.isUnloading=function(){return o};var a=function(e){o=!0,e=e||window.event;var t,i=Object.keys(s);i.sort();for(var n=0;n<i.length;n++){for(var a=i[n],r=s[a],d=0;d<r.length;d++){var l=r[d].call(r,e);if(l){t=l;break}}if(t)break}return e&&(e.returnValue=t),t};n(window).on("beforeunload",a)},"./shared/blockadblock.js":function(e,t,i){i("./third_party/blockadblock.js"),window.BlockAdBlock!==undefined&&(t.BlockAdBlock=window.BlockAdBlock,window.BlockAdBlock=null,window.blockAdBlock=null)},"./shared/broadcast.js":function(e,t,i){var n,o=i("./shared/core/component.js"),s=i("./shared/jquery.js"),a=i("./shared/util.js"),r=i("./shared/errors.js"),d=i("./shared/events/index.js"),l=i("./shared/core/rpc.js"),c=(i("./shared/client.js"),i("./settings.js")),u=i("./unified_view/tchannel_up.js"),h=i("./gating.js");n=i("./unified_view/live_paged_list.js").PagedList;var p=a.once(function(e){var t=e.cid,i="Component needs to be live in order to broadcast reload ";i+=o.getErrorLabel(t),i+=" isUnloaded: "+o._unloaded[t],i+=" domids: "+JSON.stringify(o._domids[t]),i+=" isClonedPage: "+c.isClonedPage,i+=" isVirtual: "+e.isVirtual,i+=" serialized_component: "+v[e.cid],r.logJsError("Broadcast",i)}),f={},_={},m={},g=null,v={},w=t._interactionModeCids={focusedCid:null,changedCids:{}},b={},y={};t.initialize=function(e){C(e[0]),k(e[1]),c.isExpandedBroadcast&&(S(),E(e[2]),x()),h.broadcast_debug_mode&&console.log("Initialize broadcast with:",{"Original data":e,"Broadcast's id":g,"Current component's id to dependencies":m,"Current dependency to component's ids":f,"Current dependency to version":_})},t.getId=function(){return g};var C=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++){var n=t[i],s=o._components[n];if(s){var a=e[n];m[n]=a,O(s,a)}}},k=function(e){v=a.extend(v,e)},S=function(){u.setBeforeReconnection($)},E=function(e){g||(g=e)},x=function(){s(document).on("focus",'[data-group="js-editable"]:not(.ignore_interaction)',function(e){var t=o.getAnyComponent(e.target);w.focusedCid=t.cid,h.broadcast_debug_mode&&w.focusedCid&&console.log("the cid ",w.focusedCid," has been focused, so it and its ancestors and descendants will not be reloaded")}),s(document).on("blur",'[data-group="js-editable"]:not(.ignore_interaction)',function(e){w.focusedCid=null,h.broadcast_debug_mode&&console.log("The previously focused cid has been blurred.")}),s(document).on("keydown",'[data-group="js-editable"]:not(.ignore_interaction)',function(e){w.focusedCid&&(w.changedCids[w.focusedCid]=!0,h.broadcast_debug_mode&&console.log("the cid ",w.focusedCid," has been changed, so it and its ancestors and descendants will not be reloaded"))})},T=t._shouldReloadComponent=function(e){if(e in b)return h.broadcast_debug_mode&&console.log("We won't reload the component",e,"because it will affect an edited component"),!1;for(var t=o._safeGetComponentByCID(e);t;){if(t.cid in w.changedCids||w.focusedCid&&t.cid==w.focusedCid)return h.broadcast_debug_mode&&console.log("We don't reload the component",t.cid,"because of the it has been focused or edited"),!1;t=t.parent()}return!0},A=t.rerenderComponent=function(e){var t=o._safeGetComponentByCID(e);if(t&&!t.isVirtual){var i=o.getLiveDomElement(t.cid);if(i){var n={serialized_component:v[t.cid],hmac:t.getHmac(),broadcast:!0,broadcast_id:g};if(!n.serialized_component)return void p(t);t.__extra_args&&t.__extra_args.nid_override!==undefined&&(n.nid_override=t.__extra_args&&t.__extra_args.nid_override),l.rpc("/api/rerender_component_POST").kwargs(n).contentFor(i,{parentCid:t.parent().cid,inPlace:!0,useLoadingSpinner:!1}).success(function(){o.unloadComponent(t.cid),delete y[t.cid],N()}).error(function(){delete y[t.cid],N()}).send({batched:!0})}}},L=function(e,t){if(h.broadcast_debug_mode&&console.log("Reload components:",e),c.isExpandedBroadcast){var i=[];e.forEach(function(e){var t=o._safeGetComponentByCID(e);t instanceof n?t.updateList():i.push(e)}),e=i}var s=[];e.forEach(function(t){for(var i=o._parents[t],n=o._safeGetComponentByCID(i);n;){if(-1!=e.indexOf(i))return;n=n.parent()}s.push(t),y[t]=!0}),t&&N(),s.forEach(function(e){try{A(e)}catch(e){r.report(e)}})};d.DocumentProxy.subscribe(d.Types.BROADCAST_RELOAD_DIRTIED_DEPKEYS,function(e){h.broadcast_debug_mode&&console.log("Received cchannel message:",e),c.isExpandedBroadcast&&e.payload&&e.payload.dirtied_depkeys&&M(e.payload.dirtied_depkeys)});var $=function(e){h.broadcast_debug_mode&&console.log("Refresh stale deps:",_);var t={dependency_to_version:_};l.rpc("/api/get_stale_deps_POST").kwargs(t).success(function(t){M(t.depkeys,!0),e(t.minSeq,t.broadcast_id,t.channelHash,t.netloc,t.targetUrl),g=t.broadcast_id}).send()},D=!1,j=function(){D||(D=!0)},I=t._updateInteractionModeAncestors=function(){b={};var e=[];w.focusedCid&&e.push(o._safeGetComponentByCID(w.focusedCid));for(var t in w.changedCids)e.push(o._safeGetComponentByCID(t));e.forEach(function(e){for(var t=e;t;)b[t.cid]=!0,t=t.parent()})},M=t.reloadDirtiedDepkeys=function(e,t,i){h.broadcast_debug_mode&&console.log("Reload dirtied depkeys:",{"Dirtied depkeys":e,"Force update version":t,"Hide LiveSpinner after reload":i});var n=e,o=[];I();for(var s=0;s<n.length;s++){var a=n[s],r=[];if(c.isExpandedBroadcast){var d=a[1];a=a[0];var l=_[a];if(!t&&l!==undefined&&d<=l)continue;var u=!0;Object.keys(f[a]||{}).forEach(function(e){T(e)?r.push(e):u=!1}),u&&a in f&&(h.broadcast_debug_mode&&console.log("Update version of",a,"from",_[a],"to",d),_[a]=d)}else r=Object.keys(f[a]||{});Array.prototype.push.apply(o,r)}L(o,i)},O=function(e,t){if(t&&0!==t.length&&!e.isVirtual){j(),t.forEach(function(t){if(c.isExpandedBroadcast){var i=t[1];t=t[0];var n=_[t];_[t]=Math.min(i,n||Number.MAX_VALUE)}f[t]=f[t]||{},f[t][e.cid]=!0}),e.whenUnloaded(function(){t.forEach(function(t){c.isExpandedBroadcast&&(t=t[0]),f[t]=f[t]||{},delete f[t][e.cid]})});if(!o.getLiveDomElement(e.cid))return void(o.getLiveDomId(e.cid)||p(e))}};t.getDataForCids=function(e){for(var t={},i={},n=0;n<e.length;n++){var o=e[n],s=m[o],a=v[o];s&&(c.isExpandedBroadcast&&s.forEach(function(e){e[1]=_[e]}),t[o]=s),a&&(i[o]=a)}return[t,i]},t.markComponentsAsSafeToReload=function(e){e&&Object.keys(w.changedCids).forEach(function(t){o.isAncestorComponent(e,o._safeGetComponentByCID(t))&&(h.broadcast_debug_mode&&console.log("Component",t,"is safe to reload"),delete w.changedCids[t])})},t.showLiveSpinner=function(){d.DocumentProxy.dispatch({type:d.Types.LIVENODE_LOADING_SPINNER,payload:{show:!0}})};var N=function(){0==Object.keys(y).length&&P()},P=t.hideLiveSpinner=function(){d.DocumentProxy.dispatch({type:d.Types.LIVENODE_LOADING_SPINNER,payload:{show:!1}})}},"./shared/browser.js":function(e,t,i){var n=i("./third_party/browser.js");n.version=parseFloat(n.version),e.exports=n},"./shared/client.js":function(e,t,i){var n=i("./settings.js"),o=i("./shared/browser.js"),s=t.DeviceType={ANDROID:0,IOS:1,WEB:2},a=t.getDeviceType=function(){var e=n.deviceName;return"iphone"==e?s.IOS:"android"==e?s.ANDROID:s.WEB},r=t.isIOSApp=function(){return a()==s.IOS},d=t.isAndroidApp=function(){return a()==s.ANDROID};t.isNativeApp=function(){return r()||d()};var l=t.isMobileWeb=function(){return!1};t.isWKWebView=function(){return!!(r()&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.Q)},t.isUIWebView=function(){return r()&&!window.webkit};var c=t.isAndroidMobileWeb=function(){return l()&&o.android},u=t.isIOSMobileWeb=function(){return l()&&o.ios};t.isAndroid=function(){return c()||d()},t.isIOS=function(){return u()||r()}},"./shared/client_log.js":function(e,t,i){var n=i("./shared/util.js"),o=i("./shared/jquery.js"),s=i("./settings.js"),a=i("./shared/siteuri.js"),r=i("./shared/errors.js"),d=i("./shared/window_manager.js"),l=i("./shared/cookies.js"),c=i("./shared/log_sender.js"),u=i("./shared/core/component.js"),h=t.logEvent=function(e,t,i){var o=n.extend({},i,m(t));e&&c.log("client_log",{eventType:e,metadata:o},{shouldDeduplicate:!0})},p=t.logClickthrough=function(e,t){var i=x(e);if(i){var n=m(t);if(0!=Object.keys(n).length){var o={expires:1};l.setMessage("clog",[n,i],null,o)}}},f={};t.associateParentChildDomIds=function(e,t){f[e]||(f[e]=[]),-1==f[e].indexOf(t)&&f[e].push(t)},t.removeParentChildAssociation=function(e,t){if(f[e]){var i=f[e].indexOf(t);if(-1==i)return i;f[e].splice(i,1)}};var _=function(e){var t=[];return Object.keys(f).forEach(function(i){var n=document.getElementById(i);(e&&e.id==i||n&&o.contains(n,e))&&f[i].forEach(function(e){var i=document.getElementById(e);i&&t.push(i)})}),t},m=t.getElemMetadata=function(e){var t=[],i=_(e);o(i).parents("[data-clog-metadata]").addBack("[data-clog-metadata]").each(function(e,i){t.push(o(i).data("clog-metadata"))}),o(e).parents("[data-clog-metadata]").addBack("[data-clog-metadata]").each(function(e,i){t.push(o(i).data("clog-metadata"))});var s=n.extend.apply(null,[{}].concat(t));s._componentPath=C(e);var a=u.getAnyComponent(e),r=a&&a.__extra_args&&a.__extra_args.nid_override;return null!=r&&(s.nid_override=r),n.extend({},v(),s)},g={},v=t.getGlobalMetadata=function(){return g},w=t.setGlobalMetadataFromObject=function(e){n.extend(g,e)},b=function(e,t){t!==undefined&&null!==t&&(g[e]=t)},y=function(e){return o(e).data("clog-event-type")},C=t._getElemComponentPath=function(e){var t=[];return[e].concat(_(e)).forEach(function(e){for(var i=u.getAnyComponent(e);i;){var n=i.getHmac();n&&-1==t.indexOf(n)&&t.push(n),i=i.parent()}}),t.reverse(),t},k=n.once(function(){return i("./shared/impression_tracker.js").createTracker(function(e,t,i){h(y(i),i)},{oneOffTracking:!0,exitViewport:!1})}),S=function(){var e=k();o("[data-clog-trigger=impression]").not("[data-clog-processed=1]").each(function(t,i){e.observe(i)}).attr("data-clog-processed",1)},E=t._getUrlFromElem=function(e){for(var t=e;"A"!=t.tagName;)if(!(t=t.parentElement))return null;return t.getAttribute("href")},x=t._getRelativeSiteUrl=function(e){return e&&a.isSiteUrl(e)?new a.SiteURI(e).relativeUrl:null},T=function(e){p(E(e),e)},A=function(){o(function(){document.addEventListener("mousedown",function(e){T(e.target),"mousedown"==o(e.target).data("clog-trigger")&&h(y(e.target),e.target)},!0)})};t.init=function(){g={},f={},b("client_log_trail",s.clientLogTrail);try{var e=d.getURLParam("__clog");e&&w(JSON.parse(decodeURIComponent(e)))}catch(e){r.report(e)}A(),u.registerAfterOnLoadCallback(S)}},"./shared/cookies.js":function(e,t,i){var n=i("./shared/util.js"),o=i("./settings.js"),s=i("./shared/errors.js"),a=o.cookiePrefix,r=".quora.com",d="/",l=i("./gating.js"),c=i("./shared/client.js"),u=function(){u.called||(u.called=!0,i("./shared/log_sender.js").log.apply(this,arguments))},h=function(e){return n.extend({expires:1825,path:d,domain:r},e)};t.setCookie=function(e,i,n,o){n=h(n);t.setCookieOnDocument(e,i,n)},t.getCookie=function(e,i){return t.getCookieOnDocument(e)},t.setCookieOnDocument=function(e,t,i){i=h(i),e=a+"-"+e;var n,o=i.document||document,s=i.path?"; path="+i.path:"",r=i.domain?"; domain="+i.domain:"",d=i.secure?"; secure":"",l="";null===t&&(t="",i.expires=-1),i.expires&&"number"==typeof i.expires&&(n=new Date,n.setTime(n.getTime()+24*i.expires*60*60*1e3),l="; expires="+n.toUTCString()),i.expires instanceof Date&&(l="; expires="+i.expires.toUTCString()),o.cookie=[e,"=",encodeURIComponent(t),l,s,r,d].join("")},t.getCookieOnDocument=function(e){e=a+"-"+e;var t,i,n,o=document;if(o.cookie&&""!==o.cookie)for(t=o.cookie.split(";"),n=0;n<t.length;n++)if(i=t[n].trim(),i.startsWith(e+"="))return decodeURIComponent(i.substring(e.length+1))};var p=function(e){var t,i,n="="+encodeURIComponent(e),o='="'+encodeURIComponent(e)+'"';if(document.cookie)for(t=document.cookie.split(";"),i=0;i<t.length;i++)if(t[i].endsWith(n)||t[i].endsWith(o))return!0;return!1},f=t.setMessage=function(e,i,n,a,r){var l,c=document,f=c.cookie.length,_=c.cookie.split(";").length;if(a=h(a),a.path!=d){var m="Trying to set a non-default path for cookie message: "+e;return void s.logJsError("cookies",m)}if(f>2400||_>50)return void u("cookie_message_errors",{key:e,args:i,size:f,count:_,cookie:c.cookie});var g=Math.floor(4294967296*Math.random()),v=JSON.stringify({key:e,args:i});r=r!==undefined?r:o.nid,l=["qm",g,r].join("-"),p(v)||t.setCookie(l,v,a,n)};t.setFeedBundleLog=function(e,t){var i,n=e.getDvar("bundle_hash"),o=e.getDvar("feed_page"),s=e.getDvar("page_data"),a=e.__extra_args&&e.__extra_args.nid_override;if(i=[1,n,o,s,t],n&&(f("fbl",i,undefined,undefined,a),l.qfeed_log_debugger)){var r={action:t,bundle_hash:n,feed_page:o,page_data:s};console.log("feed_bundle_action:",JSON.stringify(r,null,2))}},t.setScreenSizeCookie=function(){var e=window.screen.width,i=window.screen.height;c.isIOS()&&window.orientation&&90==Math.abs(window.orientation)&&(e=window.screen.height,i=window.screen.width),t.setCookie("screen_size",e+"x"+i)}},"./shared/core/component.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./shared/w2.timing.js"),s=i("./shared/eventemitter.js").EventEmitter,a=i("./shared/jquery.js"),r=i("./shared/w2.context.js"),d=i("./shared/util.js"),l=i("./interface/settings.js"),c=i("./shared/errors.js"),u=i("./shared/events/index.js"),h=(i("./gating.js"),i("./shared/client.js"),"__w2_"),p={},f={},_={},m={},g={},v={},w={},b={},y={};t._parents=p,t._components=f,t._allChildren=_,t._children=m,t._hmacs=g,t._domids=v,t._domidToCid=w,t._debugInfo=b,t._unloaded=y;var C=t.addParents=function(e){var t,i,n,o;for(t=Object.keys(e),o=0;o<t.length;o++)i=t[o],n=e[i],p[i]=n,n in _||(_[n]=[]),_[n].push(i),i in m||(m[i]={})},k=function(e){var t,i,n;for(t=Object.keys(e),i=0;i<t.length;i++)n=t[i],g[n]=e[n]},S=function(e){var t,i,n;for(t=Object.keys(e),i=0;i<t.length;i++)n=t[i],n in m||(m[n]={}),d.extend(m[n],e[n])},E=function(e){var t,i,n,o;for(t=Object.keys(e),i=0;i<t.length;i++)n=t[i],o=e[n],v[n]=o,w[o]=n},x=t.addDebugInfo=function(e){var t,i,n;for(t=Object.keys(e),i=0;i<t.length;i++)n=t[i],b[n]||(b[n]=e[n],o.timing._components&&(n in o.timing._components||(o.timing._components[n]={}),o.timing._components[n].addDebugInfo=Date.now()))};t.addComponentMetadata=function(e){var t=e.parents,i=e.children,n=e.domids,o=e.hmacs;C(t),k(o),S(i),E(n),"debugInfo"in e&&x(e.debugInfo)},t.registerComponents=function(e){return e.forEach(function(e){f[e.cid]=e}),e};var T=t._safeGetComponentByCID=function(e){return e?(f[e]||(f[e]=N(e)),f[e]):null};t.isCid=function(e){return e&&!!f[e]};var A=function(e){var t;if(v[e]&&(t=document.getElementById(v[e])))return t;try{t=a("[id^="+h+e+"]").get(0)}catch(e){}return t||void 0};t.getAnyElement=function(e){for(var t,i,n=e.cid,o=[n];o.length;){if(i=o.shift(),t=A(i))return t;Array.prototype.push.apply(o,_[n])}for(i=n;i=p[i];)if(t=A(i))return t;return null},t.getAnyComponent=function(e){for(var t=e;t;){var i=t.id;if(i&&i.startsWith(h)){var n=i.slice(h.length).split("_"),o=n.slice(0,1).join("_");if(f[o])return f[o];var s=n.slice(0,2).join("_");if(f[s])return f[s]}t=t.parentElement}return null},t.getLiveDomId=function(e){return v[e]},t.getLiveDomElement=function(e){if(e in v)return document.getElementById(v[e])},t.getComponentFromElement=function(e){for(;e&&!(e.id in w);)e=e.parentNode;return e&&T(w[e.id])};var L=t.getLiveParent=function(e){return e in v?v[e]:e in p?L(p[e]):""};t.getLiveParentDomElement=function(e){return document.getElementById(L(e))},t.getLiveChildren=function(e){var t,i,n;if(t=_[e],i=[],t)for(n=0;n<t.length;n++)t[n]in v&&i.push(v[t[n]]);return i};var $=t.getErrorLabel=function(e){return[" (",e," ",g[e],")"].join("")},D=function(e,t){var i=Date.now(),n=e.cid;try{e.onLoad(t),e._flushOnLoadCallbacks()}catch(e){e.message=e.message+$(n),c.report(e)}o.timing.components&&(o.timing.components[n]||(o.timing.components[n]={}),o.timing.components[n].l=Date.now()-i)},j=t.removeComponentMetadata=function(e){u.DocumentProxy.dispatch({type:u.Types.WEBNODE_BEFORE_REMOVE_COMPONENT_METADATA,payload:{cid:e}});var t=f[e],i=p[e],n=t&&t.cname;if(i&&n){var o=m[i];o&&o[n]==e&&delete o[n]}if(i){var s=_[i];if(s){var a=s.indexOf(e);a>-1&&s.splice(a,1)}}delete _[e],delete m[e],delete f[e],delete b[e],delete w[v[e]],delete v[e],delete p[e]},I=t.unloadComponent=function(e){try{var t=f[e];t&&(t.onUnload(),t._flushOnUnloadCallbacks(),r.unloadComponent(t));var i=_[e]||[];i=i.slice(),i.forEach(function(e){I(e)}),j(e),u.ComponentProxy.unsubscribeAll(e)}catch(e){c.report(e)}finally{y[e]=!0}};t.beforeOnLoad=function(e){e&&(o.logTime("preOnLoad"),(l.logComponentTime||l.debug||l.componentInspector)&&(o.timing.components={},o.timing._components={})),u.DocumentProxy.dispatch({type:u.Types.WEBNODE_COMPONENT_PRE_ONLOAD,payload:{isPageLoad:e}})},t.afterOnLoad=function(e){e&&(o.logTime("postOnLoad"),o.logTime("pageInteractive")),u.DocumentProxy.dispatch({type:u.Types.WEBNODE_COMPONENT_POST_ONLOAD,payload:{isPageLoad:e}})},t.registerBeforeOnLoadCallback=function(e){u.DocumentProxy.subscribe(u.Types.WEBNODE_COMPONENT_PRE_ONLOAD,function(t){e(t.payload.isPageLoad)})},t.registerAfterOnLoadCallback=function(e){u.DocumentProxy.subscribe(u.Types.WEBNODE_COMPONENT_POST_ONLOAD,function(t){e(t.payload.isPageLoad)})},t.onLoad=function(e,t){for(var i=0;i<e.length;i++)r.initComponent(e[i]);for(var n=0;n<e.length;n++)D(e[n],t);return window.clearHandlers&&window.clearHandlers(),e},t.getRootParent=function(e){if(!f[e])return null;for(var t=e;t&&!t.startsWith("*");)t=p[t];return t},t.getDescendantCids=function(e){for(var t={},i=[e];i.length;){var n=i.pop();t[n]=!0;var o=_[n];o&&Array.prototype.push.apply(i,o)}return Object.keys(t)},t.getAllDvars=function(e){for(var t,i={},n=e,o={};n;){if(n.cid in o){var s="Broke parent loop "+$(n.cid);c.logJsError("getAllDvars",s);break}t=d.extend({},n.__dvars__),i=d.extend(t,i),o[n.cid]=!0,n=n.parent()}return i},t.isAncestorComponent=function(e,t){for(var i=t;i;){if(i.cid==e.cid)return!0;i=i.parent()}return!1};var M=t.Component=n.extend({__init__:function(e,t,n,o){this.cid=e,this.cname=t,this.__js_init=n,this.__extra_args=o,this.__onloaded=!1,this.__emitter=null,this.init(n),o&&o.rerenderRace&&i("./shared/broadcast.js").rerenderComponent(e),o.nid_override!==undefined&&i("./shared/core/rpc.js").addMetadataCallback(this._addNidOverrideMetadataInRpc.bind(this))},init:function(e){d.isPlainObject(e)&&d.extend(this,e)},onLoad:function(e){},onUnload:function(){},contextConstructor:function(){},child:function(e){var t=m[this.cid],i=t?t[e]:null;return T(i)},children:function(){return(_[this.cid]||[]).map(function(e){return T(e)})},parent:function(){return T(p[this.cid])},setDvar:function(e,t){this.__dvars__=this.__dvars__||{},this.__dvars__[e]=t},getDvar:function(e){if(this.__dvars__=this.__dvars__||{},e in this.__dvars__)return this.__dvars__[e];for(var t,i=this.cid;i;)if(i=p[i],t=f[i])return t.getDvar(e);return null},getHmac:function(){return g[this.cid]},__maybeCreateEmitter:function(){this.__emitter||(this.__emitter=new s)},whenOnLoaded:function(e){if(this.__onloaded)return void e();this.__maybeCreateEmitter(),this.__emitter.on("onload",e)},whenUnloaded:function(e){this.__maybeCreateEmitter(),this.__emitter.on("unload",e)},_flushOnLoadCallbacks:function(){this.__emitter&&this.__emitter.trigger("onload"),this.__onloaded=!0},_flushOnUnloadCallbacks:function(){this.__emitter&&this.__emitter.trigger("unload")},_my:function(){return h+this.cid+"_"},ge:function(e){return document.getElementById(e.replace("@",this._my()))},createModal:function(e){var t=i("./shared/modal.js"),n=t.fromComponent(this);if(e){var o=this.getHmac();if(!o)throw new Error("Invalid hmac for component: "+this.cid);n.fromServerCall(o,e)}return n},emitEvent:function(e){u.ComponentProxy.dispatch(e,this.cid)},handleEvent:function(e,t){u.ComponentProxy.subscribe(e,t,this.cid)},$id:function(e){if("@"!=e[0])throw new Error("Expect id to begin with @. Got: "+e);return e=e.replace("@",this._my()),a("#"+e)},serverCall:function(e){var t=this.getHmac();if(t){return new(i("./shared/core/rpc.js").ServerCall)(t,e,this)}},_addNidOverrideMetadataInRpc:function(e,t){t.__extra_args.nid_override!==undefined&&(e.nid_override=t.__extra_args.nid_override)}}),O=M.extend({__init__:function(e){this._super(e,null,{},{}),this.isVirtual=!0,r.initComponent(this)}}),N=t.makeVirtualComponent=function(e){return new O(e)}},"./shared/core/rpc.js":function(e,t,i){var n,o,s,a,r,d=i("./shared/errors.js"),l=i("./shared/events/index.js"),c=i("./shared/util.js"),u=i("./shared/perf.js"),h=i("./settings.js"),p=i("./shared/loading.js"),f=i("./shared/w2.timing.js"),_=i("./shared/jquery.js"),m=i("./shared/core/component.js"),g=i("./shared/core/webnode.js"),v=i("./shared/client.js"),w=i("./shared/rpc_manager.js"),b=i("./shared/window_manager.js"),y=i("./shared/Class.js").Class,C=i("./shared/broadcast.js");h.isExpandedBroadcast||(n=i("./w2.livenode.js")),s=i("./webnode2.js"),a=i("./w2.errors.js"),o=i("./actions.js");var k={},S=!1;l.GlobalProxy.subscribe(l.Types.WEBNODE_RPC_RETRY_FAILED,function(e){var t=k[e.payload.requestId];t&&(t(),delete k[e.payload.requestId])});var E=function(e){if(Array.isArray(e.app_data)){for(var t=0;t<e.app_data.length;t++)r.send("showPMsg",e.app_data[t]);delete e.app_data}Object.keys(e).length>0&&l.GlobalProxy.dispatch({type:l.Types.PMSG_SHOW,payload:{content:e,fadeOut:!0}})},x=y.extend({__init__:function(){this.__data={args:[],kwargs:{}},this.__success=null,this.__error=null,this.__contentFor=null,this.__url=null,this.__exceptionCatchAll=null,this.__name=null,this.__liveMutation=!1,this.__inLiveMutation=!1,this.__optimisticUpdate=!1,this.__liveMutateBroadcastId=null,this.__creationTime=Date.now(),this.__isRelatedToUserAction=a.canBeRelatedToUserAction()},args:function(){return this.__data.args=Array.prototype.slice.call(arguments),this},kwargs:function(e){return this.__data.kwargs=c.extend({},e),this},url:function(e){return this.__url=e,this},_url:function(){return this.__url},_xhrFields:function(){return this.__xhrFields},xhrFields:function(e){return this.__xhrFields=e,this},_appFields:function(){return this.__appFields},appFields:function(e){return this.__appFields=e,this},success:function(e){return this.__success=e,this},error:function(e){return this.__error=e,this},_error:function(){return this.__error||this._defaultErrorHandler},_defaultErrorHandler:function(e,t,i){if((h.debug||Math.random()<.1)&&400!==e.status&&504!==e.status&&0!==e.status){var n={statusCode:e.status,status:t,error:i,name:this.__name},o="Unhandled xhr error: "+JSON.stringify(n);this._logError(o)}},except:function(e,t){switch(arguments.length){case 1:this.__exceptionCatchAll=e;break;case 2:if("string"!=typeof e)return void this._logError("Except pattern should be a string, got: "+typeof e);this.__exceptionPatterns[e]=t;break;default:var i=Array.prototype.slice.call(arguments);this._logError("Invalid arguments to except: "+JSON.stringify(i))}return this},contentFor:function(e,t){if(t=t||{},!t.parentCid){if(!this._component)return void this._logError("contentFor parentCid not specified for non component rpc.");t.parentCid=this._component.cid}return e instanceof _&&(e=e.get(0)),t=c.extend(t,{element:e}),t.useLoadingSpinner||!1===t.useLoadingSpinner||(t.useLoadingSpinner=!0),this.__contentFor=t,this},sendJsData:function(e){return this._sendJsData=!!e,this},liveMutate:function(e){return h.isExpandedBroadcast&&(this.__liveMutateBroadcastId=C.getId()),h.isExpandedBroadcast?C.showLiveSpinner():(this.__liveMutation=!0,e=e||{},e.optimisticUpdate===undefined?this.__optimisticUpdate=!1:this.__optimisticUpdate=e.optimisticUpdate),this},disableDefaultUserPerceivedLogging:function(){return this._disableDefaultUserPerceivedLogging=!0,this},sendOnlyOnce:function(){return this._onlyOnce(),this.send()},sendUsingBeacon:function(){if(v.isNativeApp())return this._send();if(!window.navigator||!window.navigator.sendBeacon)return this._send();var e=new window.FormData,t=this._data();for(var i in t)e.append(i,t[i]);try{window.navigator.sendBeacon(this._url(),e)}catch(e){this._send()}},send:function(e){if(!e||!e.batched)return this._send();w.enqueueRequest(this)},_send:function(){var e=h.subdomain_name||"www",t=this._url();if(v.isNativeApp()&&(t.startsWith("//")&&(t=window.location.protocol+t),t.startsWith("http://")||t.startsWith("https://"))){var i=c.getLocation(t),o=i.hostname,a=o.indexOf(h.subdomain_suffix);e=o.substr(0,a-1)||"www",t=i.pathname}if(!h.isExpandedBroadcast&&this.__liveMutation&&(this.__inLiveMutation=!0,this.__liveMutationInfo=n.startMutation(this.__optimisticUpdate)),this.__contentFor){if(!h.windowId)return this;this.__contentFor.useLoadingSpinner&&(this.__contentForLoadingTimeout=setTimeout(function(){s.forgetContents(_(this.__contentFor.element));var e=document.createElement("div");e.className="__contentfor_loading_dots",e.appendChild(p.createDots()),this.__contentFor.element.appendChild(e),this.__contentForLoadingDots=e}.bind(this),150))}var r={post:this._data(),url:t,subdomain:e};if(!S&&t.startsWith(h.serverCallUrl)&&(r.post.__first_server_call=!0,S=!0),this._beforeSendHandler(),this.__onlyOnce){if(this._isSimilarServerCallActive())return this;this._component.activeServerCalls[this.__method]=1}var d=this._successHandler.bind(this),l=this._error().bind(this),u=this._completeHandler.bind(this);this.__startTime=f.getTime(),r.dataType="json",r.type="POST",r.xhrFields=this._xhrFields();var m=this._beforeErrorHandler.bind(this);r.success=d,r.error=function(e,t,i){try{m.apply(this,arguments)}finally{l.apply(this,arguments)}},r.complete=u,r.data=r.post,_.ajax(r)},_beforeSendHandler:function(){this.__hmac&&(this._action=u.startPOST({hmac:this.__hmac,method:this.__method}),this._disableDefaultUserPerceivedLogging||(this._userPerceivedAction=u.startUserPerceived({hmac:this.__hmac,method:this.__method})))},_beforeErrorHandler:function(e,t,i){this.__contentFor&&this.__contentFor.useLoadingSpinner&&this.__contentForLoadingDots&&this.__contentFor.element.removeChild(this.__contentForLoadingDots),a.reportAjaxError(e,t,i,this.__isRelatedToUserAction,this.__creationTime)},_completeHandler:function(){if(this.__startTime&&f.logRequestTime(this.__name,this.__startTime),this._action&&(u.finishAction(this._action),this._action=null),!this._disableDefaultUserPerceivedLogging&&this._userPerceivedAction&&(u.finishAction(this._userPerceivedAction),this._userPerceivedAction=null),this.__onlyOnce&&this._isSimilarServerCallActive()&&delete this._component.activeServerCalls[this.__method],this.__contentForLoadingTimeout&&clearTimeout(this.__contentForLoadingTimeout),!h.isExpandedBroadcast&&this.__inLiveMutation){if(this.__liveMutationInfo){var e=this.__liveMutationInfo.transactionId;e&&n.mutationDoneAfterVersion(e,0)}this.__inLiveMutation=!1}},_successHandler:function(e){if(e.pmsg&&E(e.pmsg),e.exception)return void this._handleException(e);if(this.__contentFor){var t=_(this.__contentFor.element);s.forgetContents(t),document.body.contains(t.get(0))&&(this.__contentFor.inPlace?(t.replaceWith(_(e.value.html)),g.evaluateContentJS(e.value)):g.setContent(t,e.value)),_(document).trigger("rpc_content_for_done",{opts:this.__contentFor,value:e.value})}this.__success&&this.__success(e.value),!this.__liveMutation||"post_reload"!=h.pageMode||h.isLoggedIn||b.isPendingNavigation()||b.reload(),this.__liveMutateBroadcastId&&C.markComponentsAsSafeToReload(this._component),h.isExpandedBroadcast&&(e.dirtied_depkeys?C.reloadDirtiedDepkeys(e.dirtied_depkeys,!1,!0):C.hideLiveSpinner()),e.post_perf_html&&l.DocumentProxy.dispatch({type:l.Types.PERF_POST_HTML,payload:{html:e.post_perf_html,js:e.post_perf_js}})},_onlyOnce:function(){return this._component.activeServerCalls||(this._component.activeServerCalls={}),this.__onlyOnce=!0,this},_invokeExceptionCallback:function(e){var t=this.__exceptionPatterns[e.exception.type];return t?t(e.exception,e,this):!this.__exceptionCatchAll||void this.__exceptionCatchAll(e.exception,e,this)},_handleException:function(e){if(this._invokeExceptionCallback(e)){var t=h.request_id;l.DocumentProxy.dispatch({type:l.Types.WEBNODE_RPC_EXCEPTION,payload:{exceptionType:e.exception.type,requestId:t}}),k[t]=this.send.bind(this)}},_data:function(){h.formkey||this._logError("Formkey not set, cannot send request securely.");var e;try{e=JSON.stringify(this.__data,function(e,t){return t===undefined?null:t})}catch(t){this._logError("Unable to JSON encode arguments for RPC."),e=JSON.stringify({error:"Unable to JSON encode arguments for RPC"})}var t={json:e,revision:h.revision,formkey:h.formkey,postkey:h.postkey,window_id:h.windowId,referring_controller:h.controller,referring_action:h.action};if(this.__contentFor){t.parent_cid=this.__contentFor.parentCid;var i=this.__contentFor.element,n=m.getLiveChildren(t.parent_cid),s=n.filter(function(e){return i.contains(document.getElementById(e))});t.parent_domid=m.getLiveParent(t.parent_cid),t.domids_to_remove=JSON.stringify(s)}if(this.__liveMutation&&c.extend(t,this.__liveMutationInfo.data),this.__liveMutateBroadcastId&&(t.broadcast_id=this.__liveMutateBroadcastId),this.__hmac){t.__hmac=this.__hmac,t.__method=this.__method;var a=o.startOrUpdateAction(t.__e2e_action_id,{url:this.__url,hmac:this.__hmac,method:this.__method,args:t.args,kwargs:t.kwargs});t.__e2e_action_id=a.id}return this._component&&(this._sendJsData&&(t.js_init=JSON.stringify(this._component.__js_init)),t.__metadata=JSON.stringify(L(this._component))),t},_isSimilarServerCallActive:function(){return!!this._component.activeServerCalls&&this.__method in this._component.activeServerCalls},_errorDebugInfo:function(){return"url: "+this.__url},_logError:function(e){e=this._errorDebugInfo()+"\n\n"+e,d.logJsError("coreRpc",e)}});t.rpc=function(e){return(new x).url(e)},t.ServerCall=x.extend({__init__:function(e,t,i){this._super(),this.__hmac=e,this.__method=t,this.__name=this.__hmac+"."+this.__method,this.__exceptionPatterns={state_expired:this._stateExpired.bind(this),invalid_parent_component:this._invalidParentComponent.bind(this)};var n=h.serverCallUrl;v.isIOSApp()||(n=b.addParamToURL(n,"_h",e),n=b.addParamToURL(n,"_m",t)),this.url(n),this._component=i,this._sendJsData=!0,this._action=null,this._disableDefaultUserPerceivedLogging=!1,this._userPerceivedAction=null},_stateExpired:function(){h.isExpandedBroadcast||n.reportPageNeedsReload("livenode_state_expired")},_invalidParentComponent:function(){h.isExpandedBroadcast||(this._logError("Invalid contentFor parent: "+JSON.stringify(this.__contentFor)),n.reportPageNeedsReload("livenode_contentfor_invalid_parent"))},_errorDebugInfo:function(){return["component: "+m.getErrorLabel(this._component.cid),"method: "+this.__method].join("\n")}});var T={},A=[];t.addMetadataCallback=function(e){A.push(e)};var L=function(e){var t=e.cid,i=t in T?T[t]:{};delete T[t];for(var n=0;n<A.length;n++)A[n](i,e);return i};t.atLeastOneServerCallIsSent=function(){return S}},"./shared/core/webnode.js":function(module,exports,__webpack_require__){var coreComponent=__webpack_require__("./shared/core/component.js"),settings=__webpack_require__("./settings.js"),errors=__webpack_require__("./shared/errors.js"),broadcast=__webpack_require__("./shared/broadcast.js"),_missingComponentClasses={},logMissingComponentClassError=function(e,t,i,n){if(n||Math.random()<.1){var o=[e?'require("'+e+'").':"window.",t].join("");if(!_missingComponentClasses[o]){_missingComponentClasses[o]=!0;var s="Cannot find component class: "+o;s+=" (isPageLoad = "+n+")",s+="\n\njs_init: "+JSON.stringify(i),errors.logJsError("webnode",s)}}},parseJSInit=exports.parseJSInit=function(e){return{module:e[0],export_:e[1],cid:e[2],cname:e[3],data:e[4],extra_args:e[5],fallback_module:e[6],fallback_export_:e[7]}},_modulehasError={},getComponentCls=function(e,t,i){if(_modulehasError[e])return null;var n;try{n=e?window.require(e):window}catch(t){_modulehasError[e]=!0,"MODULE_NOT_FOUND"==t.code?i||(handleModuleNotFoundDebug(e),errors.logJsError("webnode","Module not found: "+e)):errors.report(t)}return n?n[t]:null},createComponentInstance=exports.createComponentInstance=function(e,t){var i=parseJSInit(e),n=getComponentCls(i.module,i.export_,!!i.fallback_module)||getComponentCls(i.fallback_module,i.fallback_export_);if(!n)return _modulehasError[i.module]||logMissingComponentClassError(i.module,i.export_,e,t),null;var o=new n(i.cid,i.cname,i.data,i.extra_args);return o.__initDataArray=e,o},sleep=function(e){for(var t=Date.now();;){if(Date.now()-t>e)return}};exports.initialize2=function(e,t,i,n,o,s){i&&settings.onloadDelay>0&&sleep(settings.onloadDelay),coreComponent.beforeOnLoad(i),coreComponent.addComponentMetadata(e),t=t.map(function(e){return createComponentInstance(e,i)}),t=t.filter(function(e){return e}),coreComponent.registerComponents(t),coreComponent.onLoad(t,i),n&&(o!==undefined&&(n=[n,o,s]),broadcast.initialize(n)),coreComponent.afterOnLoad(i)};var setContentHTML=exports.setContentHTML=function(e,t){e.html?e.html(t.html):e.innerHTML=t.html},evaluateContentJS=exports.evaluateContentJS=function(content){var js=content.js?content.js:content;eval(js)};exports.setContent=function(e,t){setContentHTML(e,t),evaluateContentJS(t)};var handleModuleNotFoundDebug=function(e){return}},"./shared/datetime.js":function(e,t,i){var n=i("./settings.js"),o=t.SECOND=1e3,s=t.MINUTE=60*o,a=t.HOUR=60*s,r=t.DAY=24*a,d=function(){return n.datetime_strings[n.interfaceLanguage]},l=function(e,t){return e.replace(/\{([^{}]*)\}/g,function(e,i){return t[i]})},c=function(e,t){var i,n=new Array(4),l=[r,a,s,o],c=d().timeAbbrevs;for(i=0;i<n.length;++i)n[i]=Math.floor(e/l[i]),e-=n[i]*l[i];for(var u=0;u<n.length&&!n[u];)++u;for(var h=n.length-1;h>=0&&l[h]<t;)--h;var p="";for(i=u;i<=h;++i)p+=n[i].toString()+c[i],i<h&&(p+=" ");return p};t.dayStr=function(e){var t=new Date(e/1e3);return l(d().dayMonthYearTemplate,{day:t.getDate().toString(),month:d().monthNames[t.getMonth()],year:t.getFullYear()})},t.timestampStr=function(e,t){var i,u=new Date,h=new Date(e/1e3),p=u.getTime()-h.getTime();if(p<0)return p>=-2*o?d().justNow:h.toLocaleDateString(n.interfaceLanguage,{weekday:"short",year:"numeric",month:"short",day:"numeric"});if(t&&(i=c(p,t)))return l(d().agoTemplate,{time:i});if(p<s)return d().justNow;if(p<a){return i=(Math.floor(u.getTime()/s)-Math.floor(h.getTime()/s)).toString()+d().timeAbbrevs[2],l(d().agoTemplate,{time:i})}if(p<12*a||p<r&&u.getDate()==h.getDate()){return i=(Math.floor(u.getTime()/a)-Math.floor(h.getTime()/a)).toString()+d().timeAbbrevs[1],l(d().agoTemplate,{time:i})}var f=new Date;if(f.setDate(u.getDate()-1),p<2*r&&h.getDate()==f.getDate())return d().yesterday;if(p<31*r&&u.getMonth()==h.getMonth()){return i=(Math.floor(u.getTime()/r)-Math.floor(h.getTime()/r)).toString()+d().timeAbbrevs[0],l(d().agoTemplate,{time:i})}return h.getFullYear()==u.getFullYear()?l(d().dayMonthTemplate,{day:h.getDate().toString(),month:d().monthNames[h.getMonth()]}):l(d().dayMonthYearTemplate,{day:h.getDate().toString(),month:d().monthNames[h.getMonth()],year:h.getFullYear()})}},"./shared/debounce.js":function(e,t){var i=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)};t.debounce=function(e,t,n){function o(){_&&clearTimeout(_),u&&clearTimeout(u),g=0,u=_=m=undefined}function s(){return Date.now()}function a(t,i){i&&clearTimeout(i),u=_=m=undefined,t&&(g=s(),h=e.apply(f,c),_||u||(c=f=undefined))}function r(){var e=t-(s()-p);e<=0||e>t?a(m,u):_=setTimeout(r,e)}function d(){a(w,_)}function l(){var i,n;if(c=arguments,p=s(),f=this,m=w&&(_||!b),!1===v)i=b&&!_;else{u||b||(g=p);var o=v-(p-g);n=o<=0||o>v,n?(u&&(u=clearTimeout(u)),g=p,h=e.apply(f,c)):u||(u=setTimeout(d,o))}return n&&_?_=clearTimeout(_):_||t===v||(_=setTimeout(r,t)),i&&(n=!0,h=e.apply(f,c)),!n||_||u||(c=f=undefined),h}var c,u,h,p,f,_,m,g=0,v=!1,w=!0;if("function"!=typeof e)throw new Error("Only able to debounce functions.");t=t<0?0:+t||0;var b;return!0===n?(b=!0,w=!1):i(n)&&(b=!!n.leading,v="maxWait"in n&&Math.max(+n.maxWait||0,t),w="trailing"in n?!!n.trailing:w),l.cancel=o,l},t.throttle=function(e,n,o){var s=!0,a=!0;if("function"!=typeof e)throw new Error("Only able to throttle functions.");return i(o)&&(s="leading"in o?!!o.leading:s,a="trailing"in o?!!o.trailing:a),t.debounce(e,n,{leading:s,maxWait:n,trailing:a})}},"./shared/dom.js":function(e,t,i){function n(e){if(!e||!e.parentNode)return!1;var t=e.getAttribute("id");e.setAttribute("id",d);var i=!!document.getElementById(d);return t?e.setAttribute("id",t):e.removeAttribute("id"),i}var o=i("./shared/jquery.js"),s=i("./shared/util.js"),a=i("./shared/eventemitter.js"),r=i("./shared/browser.js"),d=(new Date).toString(16),l=!1;t.onDocClick=function(){var e=new a.EventEmitter,t=s.once(function(){o(document).on("click",function(t){e.trigger("click",[t.target])})});return function(i){t(),e.on("click",i)}}(),t.getScrollbarWidth=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;return i==n&&(n=t.clientWidth),document.body.removeChild(t),i-n},t.anchor=function(e,t){if(e=o(e),l||e.length<1)return e;l=!0;var i=[],s=o(window).scrollTop(),a=o(window).scrollLeft();i.length=e.length;for(var r=0;e[r];++r)i[r]=[e[r],o(e[r]).offset().top-s];var d=function(){for(var e,t,s,r={},d=0,c=[undefined,-1];t=i[d++];)n(t[0])&&(e=o(t[0]).offset().top-t[1],s=r[e]=(r[e]||0)+1,c[1]<s&&(c=[e,s]));-1!=c[1]&&window.scrollTo(a,Math.round(c[0],0)),l=!1};return t?d:(setTimeout(d,10),e)},t.addAnimationClass=function(e,t,i){function n(){for(var e=0;e<l.length;e++){var t=a.css(l[e]);if(t)return t}}function s(e){return!!e&&e.originalEvent.animationName+d}var a=o(e);if(r.msie&&r.version<=9)return i(),a;var d="W2_css_animation",l=["-webkit-animation-name","-moz-animation-name","-o-animation-name","-ms-animation-name"];a.addClass(t),a.on("oanimationend animationend webkitAnimationEnd MSAnimationEnd",function(e){a.trigger(s(e))});var c=n()+d;return a.on(c,function(){a.off(c),a.removeClass(t),i()}),a}},"./shared/e2e.js":function(e,t,i){var n=i("./shared/util.js"),o=i("./shared/log_sender.js"),s=i("./gating.js"),a=i("./settings.js"),r=i("./shared/w2.timing.js"),d=i("./shared/window_performance.js"),l=i("./shared/client.js"),c=i("./third_party/rum-speedindex.js"),u=!1,h=!1,p=null,f=null;t.NATIVE_PERF_SAMPLE_RATE=.01;var _=!1;t.maybeReportPrefetchedData=function(){_=!0,window.performance.timing.loadEventEnd>0&&b()},t.reportPageData=function(e){if(null!==e){var t=r.timing,i={};for(var o in t)"components"!==o&&"_components"!==o&&(i[o]=t[o]);p=n.extend(e,{win_perf:{path:window.location.pathname,revision:a.revision,request_id:a.request_id,controller:a.controller,action:a.action,server_time:t.server_time,total_worker_time:t.total_worker_time,window_id:t.window_id,is_css_inlined:t.is_css_inlined,is_early_js_inlined:t.is_early_js_inlined,experiments:t.experiments},w2_timing:i}),g()}};var m=function(){return window.performance&&window.performance.timing},g=function(){if(m()&&0===window.performance.timing.loadEventEnd)return void setTimeout(g,250);v()},v=function(){p.win_perf.timing=d.getNavigationTiming()||{};var e=c.getFirstPaint();0!==e&&(p.win_perf.timing.firstPaint=e),Math.random()<=s.speed_index_sampling_rate&&(p.win_perf.speedIndex=c.getSpeedIndex()),r.stop(),u=!0,w()},w=function(){y()},b=function(){var e=!1;l.isMobileWeb()&&u&&(e=!0),!m()&&f&&(e=!0),u&&p&&f&&(e=!0),l.isNativeApp()&&a.isPagePrefetched&&!_&&(e=!1),e&&y()},y=function(){if(!h){h=!0;var e=n.extend(p||{},f||{});a.shouldReportEndToEndGet&&setTimeout(function(){e.resource_timing=d.getResourceTimingInfo(),e.cdn=a.cdn,o.log("perf/get_e2e",e)},100),a.componentInspector||(delete r.timing.components,delete r.timing._components)}}},"./shared/email.js":function(e,t){t.isValidEmail=function(){var e="[^\\x0d\\x22\\x5c\\x80-\\xff]",t="[^\\x0d\\x5b-\\x5d\\x80-\\xff]",i="[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+",n="\\x5c[\\x00-\\x7f]",o="\\x5b("+t+"|"+n+")*\\x5d",s="\\x22("+e+"|"+n+")*\\x22",a=i,r="("+a+"|"+o+")",d="("+i+"|"+s+")",l=r+"(\\x2e"+r+")*",c=d+"(\\x2e"+d+")*",u=c+"\\x40"+l,h="^"+u+"$",p=new RegExp(h);return function(e){return p.test(e)}}()},"./shared/email_normalizer.js":function(e,t){t.normalizeEmail=function(e){var t=/@(.*mail\.facebook\.com|quora\.com)/,i=/\+.*?@/,n="@gmail.com".length;return e=e.toLowerCase(),-1!=e.indexOf("+")&&-1==e.search(t)&&(e=e.replace(i,"@")),e.endsWith("@gmail.com")&&(e=e.slice(0,-n).replace(/\./g,"")+"@gmail.com"),e}},"./shared/embedly.js":function(e,t,i){function n(e,t){o(e,function(e){t(e?e:null)})}function o(e,t){s.rpc("/embedly_/get_oembedly_json_POST").kwargs({url:e}).success(function(e){t("error"in e?null:e)}).error(function(){t(null)}).send()}var s=i("./shared/core/rpc.js");t.getOEmbedlyData=n},"./shared/eventemitter.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./shared/errors.js");t.EventEmitter=n.extend({on:function(e,t){this.__handlers=this.__handlers||{},this.__handlers[e]=this.__handlers[e]||[],this.__handlers[e].push(t)},off:function(e,t){if(this.__handlers&&this.__handlers[e]){var i=this.__handlers[e].indexOf(t);-1!=i&&this.__handlers[e].splice(i,1)}},once:function(e,t){this.__onceHandlers=this.__onceHandlers||{},this.__onceHandlers[e]=this.__onceHandlers[e]||[],this.__onceHandlers[e].push(t)},trigger:function(e,t){for(var i=this.__handlers&&this.__handlers[e]||[],n=[],s=0;s<i.length;s++)try{n.push(i[s].apply(null,t||[]))}catch(e){o.report(e)}for(var a=this.__onceHandlers&&this.__onceHandlers[e]||[];0!==a.length;)try{n.push(a.pop().apply(null,t||[]))}catch(e){o.report(e)}return n}})},"./shared/events/helpers.js":function(e,t,i){var n=i("./shared/events/types.js").EventTypes,o=i("./shared/events/scope.js");t.addAnswerUpvote=function(e){return{type:n.ANSWER_VOTE_STATE,payload:{aid:e,state:"upvoted"},scope:o.GLOBAL}},t.addAnswerDownvote=function(e){return{type:n.ANSWER_VOTE_STATE,payload:{aid:e,state:"downvoted"},scope:o.GLOBAL}},t.removeAnswerDownvote=t.removeAnswerUpvote=function(e){return{type:n.ANSWER_VOTE_STATE,payload:{aid:e,state:null},scope:o.GLOBAL}},t.addUserFollow=function(e){return{type:n.USER_FOLLOW_STATE,payload:{uid:e,state:"followed"},scope:o.GLOBAL}},t.removeUserFollow=function(e){return{type:n.USER_FOLLOW_STATE,payload:{uid:e,state:null},scope:o.GLOBAL}},t.addQuestionDownvote=function(e){return{type:n.QUESTION_VOTE_STATE,payload:{qid:e,state:"downvoted"},scope:o.GLOBAL}},t.removeQuestionDownvote=function(e){return{type:n.QUESTION_VOTE_STATE,payload:{qid:e,state:null},scope:o.GLOBAL}},t.addPostUpvote=function(e){return{type:n.POST_VOTE_STATE,payload:{pid:e,state:"upvoted"},scope:o.GLOBAL}},t.removePostUpvote=function(e){return{type:n.POST_VOTE_STATE,payload:{pid:e,state:null},scope:o.GLOBAL}},t.addPostDownvote=function(e){return{type:n.POST_VOTE_STATE,payload:{pid:e,state:"downvoted"},scope:o.GLOBAL}},t.removePostDownvote=function(e){return{type:n.POST_VOTE_STATE,payload:{pid:e,state:null},scope:o.GLOBAL}},t.addHyperLinkUpvote=function(e){return{type:n.HYPERLINK_VOTE_STATE,payload:{link_id:e,state:"upvoted"},scope:o.GLOBAL}},t.addHyperLinkDownvote=function(e){return{type:n.HYPERLINK_VOTE_STATE,payload:{link_id:e,state:"downvoted"},scope:o.GLOBAL}},t.removeHyperLinkDownvote=t.removeHyperLinkUpvote=function(e){return{type:n.HYPERLINK_VOTE_STATE,payload:{link_id:e,state:null},scope:o.GLOBAL}},t.addQuoraShareUpvote=function(e){return{type:n.QUORASHARE_VOTE_STATE,payload:{share_id:e,state:"upvoted"},scope:o.GLOBAL}},t.addQuoraShareDownvote=function(e){return{type:n.QUORASHARE_VOTE_STATE,payload:{share_id:e,state:"downvoted"},scope:o.GLOBAL}},t.removeQuoraShareDownvote=t.removeQuoraShareUpvote=function(e){return{type:n.QUORASHARE_VOTE_STATE,payload:{share_id:e,state:null},scope:o.GLOBAL}},t.addQuestionCantAnswer=function(e){return{type:n.QUESTION_CANT_ANSWER_STATE,payload:{qid:e,state:"passed"},scope:o.GLOBAL}},t.removeQuestionCantAnswer=function(e){return{type:n.QUESTION_CANT_ANSWER_STATE,payload:{qid:e,state:null},scope:o.GLOBAL}},t.changeQuestionDeletionState=function(e){return{type:n.QUESTION_DELETE_STATE_CHANGE,payload:{qid:e},scope:o.GLOBAL}},t.inlineEditorCancel=function(e,t){return{type:n.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"cancel"}}},t.inlineEditorEdit=function(e,t){return{type:n.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"edit"}}},t.inlineEditorLoad=function(e,t){return{type:n.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"load"}}},t.inlineEditorSubmit=function(e,t){return{type:n.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"submit"}}},t.inlineEditorSubmitted=function(e,t){return{type:n.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"submited"}}},t.inlineEditorDisclaimer=function(e,t){return{type:n.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"disclaimer"}}},t.inlineEditorToggle=function(e,t){return{type:n.INLINE_EDITOR_STATE,payload:{oid:t,contentType:e,state:"toggle"}}},t.loginUser=function(e){return{type:n.LOGIN_USER,payload:{pmsg:e},scope:o.GLOBAL}},t.logoutUser=function(){return{type:n.LOGOUT_USER,payload:{},scope:o.GLOBAL}},t.anonLinkSaved=function(){return{type:n.ANON_LINK_SAVED,payload:{},scope:o.GLOBAL}},t.feedNegativeFeedback=function(e,t,i,s){return t?{type:n.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:e,message:t,state:"show_message",action:i,action_id:s},scope:o.GLOBAL}:{type:n.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:e,state:"hide"}}}},"./shared/events/hub.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./shared/eventemitter.js").EventEmitter,s=i("./shared/errors.js"),a=i("./shared/events/types.js"),r=n.extend({__init__:function(){this.reset()},reset:function(){this._emitter=new o,this._allEmitter=new o},_isValidType:function(e,t){if(!a.EventTypes[e]){var i="Unknown error type - "+e;return i=t?i+", "+t():i,s.logJsError("Hub",i),!1}return!0},_isValidEvent:function(e){var t=this._isValidType(e.type,function(){return"Trying to emit: "+JSON.stringify(e)}),i=!!e.payload,n=!!e.scope;return i||s.logJsError("Hub","Event object missing payload - "+JSON.stringify(e)),n||s.logJsError("Hub","Event object missing scope - "+JSON.stringify(e)),t&&i&&n},subscribe:function(e,t,i){var n=function(){return"Trying to subscribe to "+(i=i||t)};this._isValidType(e,n)&&this._emitter.on(e,t)},subscribeAll:function(e){this._allEmitter.on("any",e)},unsubscribe:function(e,t,i){var n=function(){return"Trying to unsubscribe from "+(i=i||t)};this._isValidType(e,n)&&this._emitter.off(e,t)},dispatch:function(e){this._isValidEvent(e)&&(this._emitter.trigger(e.type,[e]),this._allEmitter.trigger("any",[e]))}});t.Hub=new r},"./shared/events/index.js":function(e,t,i){var n=i("./shared/events/types.js"),o=i("./shared/events/proxy.js"),s=i("./shared/events/hub.js"),a=i("./shared/events/scope.js"),r=i("./shared/events/helpers.js");t.Types=n.EventTypes,t.GlobalProxy=o.Global,t.DocumentProxy=o.Document,t.Hub=s.Hub,t.ComponentProxy=o.Component,t.scope=a,t.helpers=r},"./shared/events/proxy.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./shared/events/hub.js").Hub,s=i("./shared/events/scope.js"),a=n.extend({__init__:function(){this._subscriptions={}},reset:function(){for(var e=Object.keys(this._subscriptions),t=0;t<e.length;t++)this.unsubscribeAll(e[t])},subscribe:function(e,t,i){var n=function(e){e.scope.contains(i)&&t(e)};this._subscriptions[i]=this._subscriptions[i]||[],this._subscriptions[i].push([e,n,t]),o.subscribe(e,n,t)},unsubscribeAll:function(e){var t=this._subscriptions[e];if(t){for(var i=0;i<t.length;i++){var n=t[i],s=n[0],a=n[1],r=n[2];o.unsubscribe(s,a,r)}delete this._subscriptions[e]}},dispatch:function(e,t){e.scope||(e.scope=this.defaultScope(e.type,t)),o.dispatch(e)},defaultScope:function(e,t){return null}}),r=a.extend({defaultScope:function(e,t){return s.GLOBAL}}),d=a.extend({defaultScope:function(e,t){return s.DOCUMENT}}),l=a.extend({defaultScope:function(e,t){return new s.ComponentScope(t)}});t.Global=new r,t.Document=new d,t.Component=new l},"./shared/events/scope.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./shared/errors.js");t.GLOBAL={contains:function(){return!0},toJSON:function(){return{type:"GlobalScope"}}},t.DOCUMENT={contains:function(){return!0},toJSON:function(){return{type:"DocumentScope"}}},t.ComponentScope=n.extend({__init__:function(e){this.source=e;var t=i("./shared/core/component.js");if(!t.isCid(e)){var n="ComponentScope used by unknown component"+t.getErrorLabel(e);o.logJsError("events",n)}this.rootParent=t.getRootParent(e)},contains:function(e){var t=i("./shared/core/component.js");return!!t.isCid(e)&&this.rootParent==t.getRootParent(e)},toJSON:function(){return{type:"ComponentScope",source:this.source,root:this.rootParent}}})},"./shared/events/types.js":function(e,t,i){var n=i("./shared/util.js");t.EventTypes=n.makeEnum(["A2A_UPDATE_TOPIC","A2A_ADD_TOPIC_SUGGESTION","A2A_MODAL_ADD_TOPIC_FILTER","A2A_SEND_REQUEST","A2A_EDIT_TOPIC_TOGGLE","A2A_SHOW_REQUEST_PROMPT","A2A_SELECTOR_TOGGLE","A2A_MODAL_TAB_SWITCH","A2A_TOGGLE_LIMIT_MESSAGE","AD_REPORTED","ADS_MANAGER_AD_EDIT_SUBMIT","ADS_MANAGER_NOTIF_CLICKTHROUGH","ADS_MANAGER_ADD_SUGGESTED_TOPIC","ADS_MANAGER_BULK_AD_EDIT_SUBMIT","ADS_MANAGER_CHANGE_TARGETING","ADS_MANAGER_CLEAR_TARGETING_DATA","ADS_MANAGER_CREATE_CONVERSION","ADS_MANAGER_CUSTOM_COLUMNS_SELECTED","ADS_MANAGER_EMAIL_REPORT_CREATED","ADS_MANAGER_EMPTY_ENTITY_NAMES","ADS_MANAGER_ERR","ADS_MANAGER_IMPORT_AD","ADS_MANAGER_LOADING","ADS_MANAGER_LOAD_TABLE","ADS_MANAGER_LOGO_INPUTS_LOADED","ADS_MANAGER_LOGO_SELECTED","ADS_MANAGER_PIXEL_EVENT_DELETED","ADS_MANAGER_PREVIEW_LOADED","ADS_MANAGER_ROW_SELECTED","ADS_MANAGER_SELECTOR_ADD_DATA","ADS_MANAGER_SELECTOR_COUNT_CHANGE","ADS_MANAGER_TABLE_ACTION_CLICKED","ADS_MANAGER_TARGETING_IMPORT_COMPLETE","ADS_MANAGER_TOGGLE_AD_FORMAT","ADS_MANAGER_UPDATE_CPC_BID","ADS_MANAGER_UPDATE_CPC_RANGE","ADS_MANAGER_UPDATE_CPC_SIDEBAR","ADS_MANAGER_UPDATE_INVENTORY","ADS_MANAGER_UPDATE_PLATFORMS","ADS_MANAGER_UPDATE_SUGGESTED_TOPIC","ADS_MANAGER_UPDATE_SUGGESTED_BID","ADS_MANAGER_UPDATE_SUMMARY","ADS_MANAGER_UPDATE_TARGET_AUDIENCE","ADS_MANAGER_UPDATE_TIME_FILTER","AD_MANAGER_VALID_ANSWER_URL_FILLED","ADS_MANAGER_CPA_CONFIRM_MODAL","ADS_REVIEW_QUEUE_ACTION","ACTIVATION_NEXT_STEP","ANON_LINK_SAVED","ANON_ACTION_VIEW_DISMISSED","ANON_QUESTION_FLAG","ANSWER_COMMENT_SORT_ALL","ANSWER_INBOX_PREVIEW_EXPAND","ANSWER_SURVEY_TRIGGER","ANSWER_MODAL_CONTENT_VISIBLE","ANSWER_TOGGLE_EDITOR","ANSWER_TEXT_SELECTED","ANSWER_VOTE_STATE","ANSWER_DRAFT_DELETED","ASK_QUESTION_MODAL_SUCCESS","ASK_QUESTION_MODAL_ENTER","ASK_QUESTION_MODAL_RESULT_CLICK","ASK_QUESTION_MODAL_QUERY_CHANGE","ASK_QUESTION_MODAL_OPEN","ASK_QUESTION_LIMIT_QUESTION_DISTRO","BROADCAST_RELOAD_DIRTIED_DEPKEYS","CAROUSEL_CHECK_DISMISS_ALL","CAROUSEL_DISMISS_ALL","COMMENT_ADD","COMMENT_REPLY_FOCUS","CREDENTIAL_ADDED","CREDENTIAL_DELETED","CREDENTIAL_ADD_FORM_VISIBILITY","CREDENTIAL_CHOSEN","BOARD_DRAFT_DELETED","FEED_NEGATIVE_FEEDBACK_STATE","FEED_NUM_PIN_TOPICS","FEED_CONTROL_UPDATE","FEED_PAGING_DONE","FEED_ANSWER_INLINE_EXPAND","FEED_ANSWER_MODAL_OPEN","FEED_TRIBE_POST_INLINE_EXPAND","FILTER_NAV_LIST_UPDATE","FIREBASE_LOAD_ATTEMPT","HOME_MULTIFEED_REFRESH","HIDE_OPEN_IN_APP_BANNER","HYPERLINK_VOTE_STATE","HYPERLINK_ADDED_BY_USER","I18N_MONITOR_QUESTIONS_ADD","INLINE_EDITOR_STATE","INTERACTION_MODE_BANNER_STATE","KNOWS_ABOUT_ADD_TOPIC","KNOWS_ABOUT_REMOVE_TOPIC","LAYOUT_SET_BACKDROP","LIVENODE_LOADING_SPINNER","LOGIN_UPDATE_FIELDS","LOGIN_USER","LOGOUT_USER","LOOKUP_BAR_ASK_QUESTION","LOOKUP_BAR_QUESTION_DETAILS_STATE","LOOKUP_BAR_SET_ASKING_TARGET","MESSAGE_THREAD_CLICKED","MOBILE_APP_MODAL_CLOSE","MOBILE_APP_MODAL_SUBMIT","MOBILE_NOTIFS_RESYNC","MULTIFEED_BUNDLE_REMOVE","MULTIFEED_TOP_QUESTIONS_FROM_NETWORK_HIDE","MULTIFEED_QUESTIONS_FOR_NEW_WRITERS_HIDE","MULTIFEED_ANSWERS_IN_TOPIC_HIDE","MULTIFEED_ANSWER_BUNDLE_EXPAND","MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_HIDE","MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_TARGET_SILO_HIDE","MULTIMODAL_PROXY_HACK","MULTIMODAL_DISMISS","MULTIMODAL_DONE","MULTIMODAL_LOAD","MULTIMODAL_LOADED","MULTIMODAL_SHOW","MULTIMODAL_SET_QUERY","MULTIMODAL_NATIVE_BACK","MULTIMODAL_NATIVE_SUBMIT","MULTI_SELECT_MODAL_SUBMIT","NOTIFS_CLEAR_BADGE","NOTIFS_HIDE_DROPDOWN","NOTIFS_MARK_ALL_READ","NUX_PROGRESS_BAR_STEP","NUX_DIALOG_CLOSE","NUX_DIALOG_NEXT_STEP","NUX_DIALOG_STANDALONE_DONE","NUX_DIALOG_SKIP_NEXT_STEP","NUX_DIALOG_FRIENDS_UPDATE","NUX_FEED_REFRESH","NUX_SELECT_TOPICS_ENABLE_SUBMIT","NUX_SELECT_TOPICS_DISABLE_SUBMIT","NETWORK_BETA_LOGIN_FORM_STATE","NETWORK_BETA_WAITLIST_FORM_STATE","NETWORK_INVITE_USER","NETWORK_JOIN_MODAL","PARTNER_INSIGHTS_TIME_CHANGE","PARTNER_QUESTION_STARTERS_TYPE_CHANGE","PARTNER_PROMPTS_TOPIC_REFRESH","PARTNER_PROMPTS_A2A_REFRESH","PENDING_CONTENT_STATUS_CHANGE","PERF_POST_HTML","PHONE_NUMBER_SEND_VERIFICATION_CODE_CLICKED","PHONE_NUMBER_CONFIRM_CODE_CLICKED","PHONE_NUMBER_VERIFIED","PHONE_NUMBER_CONFIRMATION_UNSUCCESSFUL","PILE_ON_REQUEST_MADE","PMSG_SHOW","PROFILE_SWITCH_CONTENT","PROFILE_TOPICS_UPDATED","POST_DISCLAIMER","POST_VOTE_STATE","PUBLISHER_DASHBOARD_LOAD_TABLE","PUBLISHER_DASHBOARD_LOADING","PUBLISHER_DASHBOARD_UPDATE_TIME_FILTER","QTEXT_EXPANDABLE_STATE","QUESTION_BIO_TOPIC_SELECT","QUESTION_CANT_ANSWER_STATE","QUESTION_DELETE_STATE_CHANGE","QUESTION_TOPIC_SELECTION_ADD","QUESTION_VOTE_STATE","QUESTION_EDITING_STATE","QUESTION_SURVEY_SHOW","QUESTION_TRANSLATION_PROMPT_DISMISS","QUORASHARE_VOTE_STATE","QUORA_SHARE_ANSWER_TO_FOLLOWERS_TOGGLED","QUORA_SHARE_ANSWER_EXPANDED","READING_LIST_VIEW_STATE","READING_LIST_ITEM_REMOVE","RELATED_QUESTIONS_EXPAND","REORDERABLE_LIST_ITEM_UPDATE","REORDERABLE_LIST_TOGGLE_EDIT","REORDERABLE_LIST_ITEM_ACTIVE","RESHARE_ADDED","RESHARE_DELETED","RESHARE_OPEN_TRIBE_CREATION","RESHARE_DESTINATION_UPDATED","REVIEW_QUEUE_ACTIVITY","REVIEW_QUEUE_LOGOUT","SERVICE_WORKER_REGISTERED","SMS_CODE_ENTERED","SMS_CONTINUE_PRESSED","SIGNUP_WALL_FROM_AD_REFERRAL","SITE_HEADER_SEARCH_FOCUSED","SHARE_SEND_ITEM_SELECTED","SHARE_SEND_ITEM_SHARED","TOPICS_GRID_ADD","TOPICS_GRID_REMOVE","TOPICS_GRID_UPDATE_SHOWN","TOPIC_LIST_REMOVE","TOPIC_FAQ_VIEW_MORE","TOPIC_FAQ_HIGHLIGHT_QUESTION","TRANSLATE_SELECT_EXISTING_QID","TRANSLATE_REMOVE_EXISTING_QID","TRIBE_CANDIDATE_RECOMMEND_STATE","TRIBE_FOLLOW_BUTTON_CLICK","TRIBE_ITEM_ADD","TRIBE_ITEM_VIEWER_COMMENT","TRIBE_QUESTION_SUBMITTED","TRIBE_SORT","TRIBE_ITEM_MODAL_SHOW","TRIBE_QUORA_SHARE_MODAL_CLOSED","TRIBE_SETTINGS_SAVE","TRIBE_ITEM_REMOVE","USER_FOLLOW_STATE","USER_LEADERBOARD_TOGGLE_EDIT","USER_STATS_UNSELECT_ITEMS","USER_STATS_UPDATE_GRAPHS","USER_STATS_UPDATE_ATTRIBUTES","USER_STATS_SHOW","UPLOAD_DIALOG_DROPZONE","UPLOAD_DIALOG_LOADING_STATE","VIDEO_SAVE_POSITION","VIDEO_UNMUTED","VIDEO_COMPLETE","WEBNODE_BEFORE_REMOVE_COMPONENT_METADATA","WEBNODE_COMPONENT_POST_ONLOAD","WEBNODE_COMPONENT_PRE_ONLOAD","WEBNODE_RPC_EXCEPTION","WEBNODE_RPC_RETRY_FAILED","WORDPRESS_CONNECT_SUCCESS","ZAPDOS_INLINE_DISMISS","ZAPDOS_WALL_DISMISS"])},"./shared/facebook.js":function(e,t,i){var n=i("./shared/loadjs.js").loadJS,o=i("./shared/util.js"),s=i("./shared/onload.js"),a=(i("./shared/client.js"),i("./settings.js")),r=!1,d=[],l=o.once(function(){var e=a.fbLanguageCode,t="//connect.facebook.net/"+e+"/sdk.js",i=a.fbAppId;window.fbAsyncInit=function(){for(FB.init({appId:i,oauth:!0,xfbml:!1,version:a.fbApiVersion}),r=!0;d.length;)d.pop().call()},n(t)}),c=t.onInit=function(e){r?e():(s.execAfterLoadDelayed(l),d.push(e))};t.isLoaded=function(){return r},t.load=function(){c(function(){})};var u=null,h=t.updatePermissions=function(e){FB.api("/me/permissions",function(t){t.data&&t.data.length>0?(u=t.data,e&&e(!0,t.data)):e&&e(!1,null)})};t.asyncUpdatePermissions=function(){null===u&&c(function(){FB.getLoginStatus(function(e){"connected"==e.status&&h()})})},t._disconnect=function(){FB.getLoginStatus(function(e){e.authReponse?FB.api({method:"auth.revokeAuthorization"},function(e){e?console.log("Successfully disconnected"):console.error("Disconnection failed")},console.error):console.warn("Already not connected")})};var p=t.hasPermission=function(e){return u&&1==u[e]};t.requestPermissions=function(e,t){var i=function(e){return e.split(",").every(p)};i(e)?t(!0):FB.login(function(n){"connected"===n.status?h(function(n,o){t(n&&i(e))}):t(!1)},{scope:e})};var f=function(){return r?FB.getAuthResponse():null};t.getAccessToken=function(){var e=f();return e?e.accessToken:null},t.getExpiresIn=function(){var e=f();return e?e.expiresIn:null},t.getFbUid=function(){var e=f();return e?e.userID:null}},"./shared/frame_busting.js":function(e,t,i){var n=i("./interface/settings.js");t.check=function(){if(n.enableFrameBusting){var e=!1;try{e=!/\.quora\.com$/i.test(window.top.location.host)}catch(t){e=!0}e&&""+window.top.location!=""+window.location&&(window.top.location=window.location)}}},"./shared/fx.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/util.js"),s={duration:400,easing:""},a=function(e,t){var i=!1;e.one("webkitTransitionEnd transitionEnd",function(){i=!0});var n=function(){i||e.trigger("transitionEnd")};setTimeout(n,t)},r=function(e){e.each(function(){this.offsetHeight})},d=function(e,t,i){i=o.extend({},s,i);var n="all "+i.duration+"ms "+i.easing;t.webkitTransition=n,t.mozTransition=n,t.transition=n;var r=o.once(function(){e.dequeue(),i.complete&&i.complete.apply(e)});e.queue(function(){e.one("webkitTransitionEnd transitionEnd",r),a(e),e.css(t)})},l=function(e,t,i,o){e=n(e),e.css(t),r(e),d(e,i,{duration:o||s.duration})};t.highlight=function(e,t){l(e,{backgroundColor:"#ffff99"},{backgroundColor:"transparent"},t)},t.fadeIn=function(e,t){l(e,{opacity:0},{opacity:1},t)}},"./shared/google_.js":function(e,t,i){var n=i("./shared/loadjs.js").loadJS,o=i("./shared/util.js"),s=i("./shared/onload.js"),a=i("./settings.js"),r=!1,d=[],l=o.once(function(){window.gapiAsyncInit=function(){r=!0,window.gapi.load("auth2",function(){for(window.auth2=window.gapi.auth2.init({client_id:a.googleClientId});d.length;)d.pop().call()})},n("//apis.google.com/js/client:platform.js?onload=gapiAsyncInit")});t.onInit=function(e){r?e():(s.execAfterLoadDelayed(l),d.push(e))}},"./shared/history_stack.js":function(e,t,i){var n=i("./shared/client.js"),o=i("./shared/beforeunload.js"),s=!1,a=[];t.pushState=function(e){if(!n.isNativeApp()){var t=a.push(e);window.history.pushState({n:t},"")}},t.popState=function(){n.isNativeApp()||window.history.go(-1)},t.skipBack=function(e){n.isNativeApp()||e<=0||(s=!0,a.splice(-e,e),window.history.go(-e))},n.isNativeApp()||(o.registerHandler(function(){t.skipBack(a.length)}),window.addEventListener("popstate",function(){if(s)return void(s=!1);var e=a.pop();e&&e()}))},"./shared/impression_tracker.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./shared/viewport.js"),s=i("./shared/visibility_state.js"),a=i("./shared/jquery.js"),r=i("./shared/util.js"),d=i("./third_party/intersection-observer.js").IntersectionObserver,l=function(){return window.performance&&window.performance.now?window.performance.now():Date.now()},c={ratioThreshold:.1,minTimeInViewMs:0,enterViewport:!0,exitViewport:!0,oneOffTracking:!1},u=n.extend({__init__:function(e,t){this._impressionCallback=e,this._options=r.extend({},c,t),this._randomId=r.randomId("impression-tracker"),this._observer=this._createObserver(),this._elementsInView=[],this._elementsInViewTracked=[],this._optDataKey=this._randomId+"-optData",this._lastViewedKey=this._randomId+"-lastViewed",this._elementsToTrack=[],this._handleVisibilityStateChanges()},observe:function(e,t){e&&(null!=t&&a(e).data(this._optDataKey,t),s.isVisible()?this._observer.observe(e):this._elementsToTrack.push(e))},unobserve:function(e){if(e){this._observer.unobserve(e),this._untrackElemDelayed(e);var t=this._elementsToTrack.indexOf(e);-1!==t&&this._elementsToTrack.splice(t,1)}},_handleVisibilityStateChanges:function(){var e=this;s.onChange(function(t){if(t)for(;e._elementsToTrack.length;)e.observe(e._elementsToTrack.pop())})},_getRootMargin:function(){var e=o.siteHeaderHeight();return e?["-",e,"px 0px 0px 0px"].join(""):"0px"},_createObserver:function(){var e={threshold:[this._options.ratioThreshold],rootMargin:this._getRootMargin()};return new d(this._observerHandler.bind(this),e)},_trackElemDelayed:function(e,t){-1===this._elementsInView.indexOf(e)&&(a(e).data(this._lastViewedKey,t),this._elementsInView.push(e))},_untrackElemDelayed:function(e){var t=this._elementsInView.indexOf(e);-1!==t&&(a(e).data(this._lastViewedKey,null),this._elementsInView.splice(t,1)),-1!==(t=this._elementsInViewTracked.indexOf(e))&&this._elementsInViewTracked.splice(t,1)},_observerHandler:function(e){var t=this;e.forEach(function(e){var i=e.isIntersecting&&e.intersectionRatio>t._options.ratioThreshold,n=e.target;0===t._options.minTimeInViewMs?t._onImpression(n,i):i?t._trackElemDelayed(n,e.time||l()):(-1!==t._elementsInViewTracked.indexOf(n)&&t._onImpression(n,!1),t._untrackElemDelayed(n))}),0!==t._elementsInView.length&&setTimeout(function(){for(var e=[],i=0;i<t._elementsInView.length;i++){var n=t._elementsInView[i],o=a(n).data(t._lastViewedKey);l()-o>=t._options.minTimeInViewMs&&e.push(n)}for(var s=0;s<e.length;s++)t._untrackElemDelayed(e[s]),t._elementsInViewTracked.push(e[s]),t._onImpression(e[s],!0)},t._options.minTimeInViewMs)},_onImpression:function(e,t){if((!t||this._options.enterViewport)&&(t||this._options.exitViewport)){t&&this._options.oneOffTracking&&(this._untrackElemDelayed(e),this._observer.unobserve(e));var i=a(e).data(this._optDataKey);this._impressionCallback(i,t,e)}}});t.createTracker=function(e,t){return new u(e,t)}},"./shared/init.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./shared/cookies.js"),s=i("./shared/onload.js"),a=i("./shared/client.js"),r=i("./shared/window_manager.js");i("./shared/client_log.js").init(),i("./shared/action_log.js").init(),i("./shared/log_sender.js").init(),i("./shared/activity_metrics.js").init(),i("./shared/frame_busting.js").check(),i("./shared/qtext.js").init(),i("./shared/links_logger.js"),i("./shared/lazy_load_images.js"),n.DocumentProxy.subscribe(n.Types.WEBNODE_RPC_EXCEPTION,function(e){"network_membership_required"==e.payload.exceptionType&&r.navigateTo("/join")}),a.isNativeApp()||o.setCookie("tz",(new Date).getTimezoneOffset(),{path:"/"}),s.execAfterLoadDelayed(function(){window.require.prefetchAll()})},"./shared/inline_css.js":function(e,t,i){var n=i("./shared/cookies.js"),o="q-inline-css",s=function(e){e=e||function(){};var t=document.getElementsByClassName(o);if(0==t.length)return void e();window.requestAnimationFrame(function(){for(var i;t.length;)i=t[0],i.parentElement.removeChild(i);e()})},a=function(e,t){s(),e&&t&&n.setCookie(e,t,{expires:365})};t.loadStyleSheet=function(e,t,i){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),n.setAttribute("id","onLoadCss"),n.onload=function(){a(t,i)},document.head.appendChild(n)},t.getData=function(){var e=document.getElementsByClassName(o),t=document.getElementById("inlineCssLoader");if(!t||0===e.length)return[];for(var i=[],n=0;n<e.length;n++)i.push(e[n].innerHTML),i.push(";");return[i.join(""),t.innerHTML]},t.injectData=function(e){var t=e[0],i=document.createElement("style");i.setAttribute("type","text/css"),i.setAttribute("class",o),i.innerHTML=t,document.head.appendChild(i);var n=e[1],s=document.createElement("script");s.setAttribute("type","text/javascipt"),s.setAttribute("id","inlineCssLoader"),s.innerHTML=n,document.head.appendChild(s)},t.getCssLoaderIfExists=function(){var e=document.getElementById("inlineCssLoader");return e?e.outerHTML:""},t.removeFromPage=function(e){var t=document.getElementById("inlineCssLoader");t&&t.parentElement.removeChild(t),s(e)}},"./shared/jquery.js":function(e,t,i){var n=(i("./settings.js"),i("./shared/errors.js"),i("./third_party/jquery3.js"));i("./shared/client.js");window.jQuery=n;var o=n.fn.offset,s=function(){var e,t=this[0],i={top:0,left:0};return t&&t.nodeType?(e=(t.ownerDocument||document).documentElement,n.contains(e,t)?o.apply(this,arguments):i):i};n.fn.on,n.fn.off;n.fn.offset=s,e.exports=n},"./shared/jwplayer_cloud.js":function(e,t,i){var n,o=i("./shared/loadjs.js").loadJS,s=i("./shared/util.js"),a="https://content.jwplatform.com/libraries/gPi5WqBp.js",r=[],d=s.once(function(){o(a,function(){for(n=window.jwplayer;r.length;)r.pop().call(null,n)})});t.getJwPlayer=function(e){n?e(n):(r.push(e),d())}},"./shared/keyboard_event_handler.js":function(e,t,i){var n=i("./shared/jquery.js"),o=[];t.push=function(e){o.push(e)},t.remove=function(e){var t=o.indexOf(e);t>-1&&o.splice(t,1)},n(document).on("keydown",function(e){for(var t=o.length-1;t>=0;t--){if(0==o[t](e)||e.isDefaultPrevented())return}})},"./shared/keystrokes.js":function(e,t){function i(e,t){for(var i=0,o=n.length;i<o;++i)n[i].trigger(e,t)}var n=[];document.addEventListener("keydown",function(e){e.target&&!e.target.getAttribute("contenteditable")&&"INPUT"!==e.target.nodeName&&i(e.keyCode||e.charCode,e)});var o=function(e,t){this.codes=e,this.matchHandler=t,this.position=0};o.prototype.trigger=function(e,t){e===this.codes[this.position]?this.position+=1:this.position=0,this.position===this.codes.length&&(this.matchHandler(t),this.position=0)},t.on=function(e,t){e="number"==typeof e?[e]:e.slice(0),n.push(new o(e,t))}},"./shared/lazy_load_images.js":function(e,t,i){function n(e){e.getAttribute("data-src")&&(e.setAttribute("src",e.getAttribute("data-src")),e.removeAttribute("data-src"),e.addEventListener("load",function(){e.style.opacity=1;var t=e.previousElementSibling;t&&(t.classList.contains("qtext_image_placeholder")||t.classList.contains("ui_qtext_image_placeholder"))&&setTimeout(function(){t.style.visibility="hidden"},1e3)}))}function o(){for(var e=document.querySelectorAll("img[data-src]"),t=0;t<e.length;t++)n(e[t])}function s(){o(),a.insertionQ("img").every(function(e){n(e)}),setInterval(o,r)}var a=i("./third_party/insertion_query.js"),r=2e3;i("./shared/onload.js").execAfterLoad(s)},"./shared/linkify.js":function(e,t){/*!
 * JavaScript Linkify - v0.3 - 6/27/2009
 * http://benalman.com/projects/javascript-linkify/
 *
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 *
 * Some regexps adapted from http://userscripts.org/scripts/review/7122
 */
t.iterLinks=function(e,t){i(e,{callback:function(e,i){return i&&t(i,e),""}})};var i=t.linkify=function(){var e="[a-z\\d.-]+://",t="(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+",i="(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)",n="(?:"+t+i+")",o="(?:[;/][^#?<>\\s\\[\\]]*)?",s="(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?",a="\\b"+e+"[^<>\\s\\[\\]]+",r="\\b"+n+o+s+"(?!\\w)",d="mailto:",l="(?:"+d+")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@"+n+s+"(?!\\w)",c=new RegExp("(?:"+a+"|"+r+"|"+l+")","ig"),u=new RegExp("^"+e,"i"),h={"'":"`",">":"<",")":"(","]":"[","}":"{","»":"«","›":"‹"},p={callback:function(e,t){return t?'<a href="'+t+'" title="'+t+'">'+e+"</a>":e},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/};return function(e,t){t=t||{};var i,n,o,s,a,r,l,f,_,m,g,v,w="",b=[];for(n in p)t[n]===undefined&&(t[n]=p[n]);for(;i=c.exec(e);)if(o=i[0],r=c.lastIndex,l=r-o.length,!/[\/:]/.test(e.charAt(l-1))){do{f=o,v=o.substr(-1),g=h[v],g&&(_=o.match(new RegExp("\\"+g+"(?!$)","g")),m=o.match(new RegExp("\\"+v,"g")),(_?_.length:0)<(m?m.length:0)&&(o=o.substr(0,o.length-1),r--)),t.punct_regexp&&(o=o.replace(t.punct_regexp,function(e){return r-=e.length,""}))}while(o.length&&o!==f);s=o,u.test(s)||(s=(-1!==s.indexOf("@")?s.indexOf(d)?d:"":s.indexOf("irc.")?s.indexOf("ftp.")?"http://":"ftp://":"irc://")+s),a!=l&&(b.push([e.slice(a,l)]),a=r),b.push([o,s])}for(b.push([e.substr(a)]),n=0;n<b.length;n++)w+=t.callback.apply(window,b[n]);return w||e}}()},"./shared/links_logger.js":function(e,t,i){var n=i("./shared/links.js"),o=i("./shared/log_sender.js"),s=i("./shared/siteuri.js"),a=function(e,t){s.isSiteUrl(e)||o.log("link_click",{url:e,answer_context:t,current_url:window.location.href})};n.onLinkClick(a)},"./shared/loading.js":function(e,t){t.createDots=function(e){e=e||"regular";var t=document.createElement("div");t.className="LoadingDots "+e;var i=document.createElement("div");i.className="dot first";var n=document.createElement("div");n.className="dot second";var o=document.createElement("div");return o.className="dot third",t.appendChild(i),t.appendChild(n),t.appendChild(o),t}},"./shared/loadjs.js":function(e,t,i){var n=i("./shared/util.js"),o=i("./shared/onload.js");t.loadJS=function(e,t){var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,t&&(i.onload=i.onreadystatechange=n.once(t));var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o)};var s=function(e){var t=document.createElement("object");t.data=e,t.type="application/javascript",t.width=0,t.height=0,document.body.appendChild(t)};t.lazyPrefetchJS=function(e){o.execAfterLoadDelayed(function(){s(e)})}},"./shared/log_sender.js":function(e,t,i){var n=i("./shared/beforeunload.js"),o=i("./shared/util.js"),s=i("./shared/Class.js").Class,a=i("./shared/core/rpc.js"),r=i("./shared/siteuri.js"),d=i("./gating.js"),l=i("./settings.js"),c=i("./shared/client.js"),u={sampleRate:1,scribeOnly:!1,shouldDeduplicate:!1};t.log=function(e,t,i){i=o.extend({},u,i);var n=i.sampleRate;if((n<0||n>1)&&(n=1),!(n>0&&Math.random()>n)){var s=null,a=1e3*Date.now();i.scribeOnly?(t.scribe_category=e,s={category:"scribe_only",data:t,time:a}):s={category:e,data:t,time:a};var r=p();r.enqueue(s,i.shouldDeduplicate),r.scheduleSend()}};t.debugLog=function(e){};var h=t.LoggingManager=s.extend({__init__:function(e,t,i,n){this.msgBuffer=[],this.retryBuffer=[],this.timer=null,this.maxBatchSize=null==e?20:e,this.maxBufferedSize=null==t?50:t,this.maxRetries=null==i?1:i,this.batchInterval=null==n?1e3:n},_isDuplicateMessage:function(e){return this.msgBuffer.some(function(t){return t.category==e.category&&o.jsonEqual(t.data,e.data)})},enqueue:function(e,t){t&&this._isDuplicateMessage(e)||(this.msgBuffer.push(e),this.numPending()>this.maxBufferedSize&&this.send())},enqueueForRetry:function(e){var t=this;e=e.map(function(e){return e.numRetries=(e.numRetries||0)+1,e}).filter(function(e){return e.numRetries<=t.maxRetries}),Array.prototype.push.apply(this.retryBuffer,e)},scheduleSend:function(){this.timer||0===this.numPending()||(this.timer=setTimeout(this.send.bind(this),this.batchInterval))},send:function(e){this.timer&&(clearTimeout(this.timer),this.timer=null);var t=this._getMessagesToSend();if(0!==t.length){var i=a.rpc(f());c.isIOSApp()&&i.appFields({maxRetries:1,persistent:!0});var n=this,o=i.xhrFields({withCredentials:!0}).kwargs({messages:t,nid:l.nid}).success(function(){n.scheduleSend()}).error(function(){n.enqueueForRetry(t),n.scheduleSend()});e?o.sendUsingBeacon():o.send()}},_getMessagesToSend:function(){for(var e=[];e.length<this.maxBatchSize;)if(this.msgBuffer.length)e.push(this.msgBuffer.shift());else{if(!this.retryBuffer.length)break;e.push(this.retryBuffer.shift())}return e},numPending:function(){return this.msgBuffer.length+this.retryBuffer.length}}),p=o.once(function(){return new h(20,50,1,d.client_side_batched_logging_interval)}),f=function(){var e="";return"quora.com"==l.subdomain_suffix&&(e+=[window.location.protocol,"//",r.netlocForSubdomainName("log")].join("")),e+="/ajax/batched_log_POST"},_=t.flushPendingLogs=function(){p().send(!0)};t.init=function(){n.registerHandler(function(){_()},10)}},"./shared/mathify.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/mathjax.js");t.iterMaths=function(e,t){return r(e,function(e,i){return i&&t(i,e),""})};var s=function(e,t){return e?"<b>"+e+"</b>":t},a=t.getParts=function(e){for(var t,i,n,o,s,a="\\s\\S",r=new RegExp("\\[math\\](["+a+"]+?)\\[\\/math\\]","g"),d=[],l=0;t=r.exec(e);)i=t[0],n=t[1],o=r.lastIndex,s=o-i.length,l!=s&&d.push([e.slice(l,s)]),l=o,d.push([i,n]);return l!=e.length&&d.push([e.substr(l)]),d},r=t.mathify=function(e,t){t=t||s;for(var i=a(e),n="",o=0;o<i.length;o++)n+=t.apply(window,i[o]);return n||e};t.renderMath=function(e){e instanceof n&&(e=e.get(0)),o.onInit(function(){window.MathJax&&MathJax.Hub&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])})}},"./shared/mathjax.js":function(e,t,i){var n=i("./shared/util.js"),o=i("./shared/onload.js"),s=i("./shared/loadjs.js").loadJS,a=[],r="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe",d=function(){var e={showMathMenu:!1,messageStyle:"none",errorSettings:l(),"HTML-CSS":c(),tex2jax:u(),TeX:h(),"fast-preview":{disabled:!0},Safe:{allow:{URLs:"none",classes:"none",cssIDs:"none",styles:"none",fontsize:"none",require:"none"}}};return"window.MathJax = "+JSON.stringify(e)+";"},l=function(){return{style:{color:"#000000","font-style":"normal"}}},c=function(){return{linebreaks:{automatic:!0,width:"container"},EqnChunk:150,EqnChunkDelay:20}},u=function(){return{inlineMath:[["[math]","[/math]"]],displayMath:[],ignoreClass:"edit_latex|qtext_editor_content|ignore_latex",processClass:"render_latex",processEnvironments:!1,preview:"none"}},h=function(){return{noUndefined:{attributes:{mathcolor:"red"}},noErrors:{multiLine:!0,style:{"max-width":"100%",overflow:"hidden"}},Macros:{C:"{\\mathbb{C}}",N:"{\\mathbb{N}}",O:"{\\emptyset}",Q:"{\\mathbb{Q}}",R:"{\\mathbb{R}}",Z:"{\\mathbb{Z}}"}}},p=n.once(function(){var e=["color","textDecoration","fontWeight"];MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function(){var t=MathJax.ElementJax.mml,i=t.mbase.prototype.HTMLhandleColor;t.mbase.Augment({HTMLhandleColor:function(t){var n=i.call(this,t);return e.forEach(function(e){"fontWeight"==e&&"bold"==t.style[e]||t.style[e]&&(t.style[e]="")}),n}})}),MathJax.Hub.Register.StartupHook("TeX Jax Ready",function(){var e=MathJax.InputJax.TeX.Definitions.macros,t=function(){throw new Error("Bad macro")};e.bbox=t,e.newcommand=t,e.renewcommand=t,e.newenvironment=t,e.renewenvironment=t,e.def=t,e["let"]=t}),MathJax.Hub.processSectionDelay=0}),f=n.once(function(){var e=d(),t=document.createElement("script");t.type="text/javascript",t.appendChild(document.createTextNode(e));var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),s(r,function(){for(p();a.length;)a.pop().call()})});t.onInit=function(e){window.MathJax&&MathJax.Hub?e():(o.execAfterLoad(f),a.push(e))}},"./shared/modal.js":function(e,t,i){var n,o,s=i("./shared/errors.js"),a=i("./shared/events/index.js"),r=(i("./shared/core/component.js"),i("./shared/eventemitter.js")),d=(i("./gating.js"),i("./shared/util.js")),l=i("./shared/client.js"),c=i("./shared/Class.js").Class,u=i("./shared/history_stack.js");n=i("./w2.modal.js");var h={},p=function(e){var t;return t=n.Modal.openerFor(e).cid,h[t]};t.handleClose=function(e){var t;t=p(e),t.handleClose(),t.innerModalInstance().close()},t.handleSubmit=function(e,t){return void p(e).handleSubmit(t)},t.fromComponent=function(e){return new f(e)},t.cancelLastModal=function(){var e;(e=n.Modal.getCurrentModal())&&e.close&&e.close()},a.GlobalProxy.subscribe(a.Types.WEBNODE_RPC_EXCEPTION,function(e){"login_required"==e.payload.exceptionType&&t.cancelLastModal()});var f=c.extend({__init__:function(e){this.component=e,this.emitter=new r.EventEmitter,h[this.component.cid]=this,this.__id=[d.randomId(),this.component.cid].join("-"),this.__kwargs={},this.__webOnlyOptions=null,this.__appOnlyOptions=null,this.__loaded=!1,this.__fromServerCall=!1,this.__method=null,this.__hmac=null,this.__fromElement=!1,this.__element=null},innerModalInstance:function(){if(l.isNativeApp())return void s.logJsError("shared/modal","Trying to getModalInstance on native");if(!this.__modal){var e={kwargs:this.__kwargs};e=d.extend(this.__webOnlyOptions||{},e),null==e.sendJsData&&(e.sendJsData=!0),this.__modal=new n.ModalWithCallBacks(this.component,e)}return this.__modal},load:function(){return this.__loaded?this:(this.__loaded=!0,this.innerModalInstance().fetch(this.__method),this)},show:function(){if(this.load(),l.isNativeApp()){var e=this;a.GlobalProxy.subscribe(a.Types.MOBILE_APP_MODAL_SUBMIT,function(t){e.handleSubmit(t.payload)},this.__id),a.GlobalProxy.subscribe(a.Types.MOBILE_APP_MODAL_CLOSE,function(){e.handleClose()},this.__id)}return this.innerModalInstance().load(this.__method),this},_addHashMobileWeb:function(){l.isMobileWeb()&&u.pushState(o.dismissActiveModal)},unload:function(){this.emitter.trigger("unload"),h[this.component.cid]=null,l.isMobileWeb()&&u.skipBack(1),l.isNativeApp()&&a.GlobalProxy.unsubscribeAll(this.__id)},onUnload:function(e){return this.emitter.on("unload",e),this},fromElement:function(e,t){return s.logJsError("shared/modal","fromElement only supported in mobile."),this.__fromServerCall&&s.logJsError("shared/modal","Used both fromElement and fromServerCall."),this.__fromElement=!0,this.__element=e,this.__kwargs=t,this},fromServerCall:function(e,t){return this.__fromElement&&s.logJsError("shared/modal","Used both fromElement and fromServerCall."),this.__fromServerCall=!0,this.__hmac=e,this.__method=t,this},kwargs:function(e){return this.__kwargs=e,this},webOnlyOptions:function(e){return this.__webOnlyOptions=e,this},appOnlyOptions:function(e){return this.__appOnlyOptions=e,this},onSubmit:function(e){return this.emitter.on("submit",e),this},onClose:function(e){return this.emitter.on("close",e),this},handleClose:function(){this.emitter.trigger("close"),this.unload()},handleSubmit:function(e){this.emitter.trigger("submit",[e])}})},"./shared/oauth.js":function(e,t,i){var n=i("./shared/google_.js"),o=i("./shared/facebook.js"),s=i("./settings.js"),a=(i("./shared/window_manager.js"),!1);t.googleOnLoad=function(e,t,i){},t.googleConnect=function(e,t,i,o){a=!1;var r=function(e){if(!a){if(e.success!==undefined&&(a=!0),e&&e.error===undefined&&(e.code!=undefined||"AUTO"===e.status.method&&1===e.num_sessions||"PROMPT"===e.status.method))return void t(e);e.error&&"immediate_failed"!==e.error&&i()}},d={callback:r,clientid:s.googleClientId,cookiepolicy:s.googleCookiePolicy,scope:e.web_data.scope};e.web_data.prompt_ota_install&&(d.apppackagename=s.androidAppPackageName),n.onInit(function(){var t=window.gapi.auth2.init({client_id:s.googleClientId}),i={scope:e.web_data.scope};o&&(i.prompt="select_account"),t.grantOfflineAccess(i).then(r)})},t.facebookOnLoad=function(e,t,i){},t.facebookConnect=function(e,t,i){var n=function(e){e&&"connected"==e.status?t(e.authResponse):i()};o.onInit(function(){FB.login(n,{scope:e.perms})})},t.twitterOnLoad=function(e,t,i){},t.twitterConnect=function(e,t,i){}},"./shared/perf.js":function(e,t,i){var n={},o=5e3,s=3e4,a=function(e){delete e.id,i("./shared/log_sender.js").log("perf/post_e2e",e)},r=function(e){if(!e)throw new Error("This method expects an object describing the action.");var t=e.method;if(t.startsWith("log_")||t.startsWith("record_")||t.startsWith("track_"))return null;if(e.startTime=Date.now(),!e.id){var i=1e3*e.startTime+Math.floor(1e3*Math.random());e.id=i.toString(36)}return n[e.id]=e,e},d=function(e){var t=n[e];t&&(t.duration=Date.now()-t.startTime,delete t.startTime,delete n[e],a(t))};t.startPOST=function(e){return e.type="web",r(e)},t.startUserPerceived=function(e){return e.type="user_perceived",r(e)},t.finishAction=function(e){e&&e.id&&d(e.id)},t.cancelAction=function(e){e&&e.id&&delete n[e.id]};var l=function(){for(var e=Date.now(),t=Object.keys(n),i=0;i<t.length;i++){var o=n[t[i]];e-o.startTime>=s&&(o.timeout=!0,d(o.id))}};setInterval(l,o)},"./shared/pixel.js":function(e,t,i){var n=i("./shared/util.js"),o=i("./shared/onload.js"),s=i("./shared/loadjs.js").loadJS,a=i("./shared/log_sender.js"),r="https://www.googletagmanager.com/gtag/js?id=AW-963131518",d="https://www.dwin1.com/15748.js",l="//static.criteo.net/js/ld/ld.js",c=i("./shared/jquery.js");t.fireCriteoEvents=function(e,t,i,n,o){Array.isArray(e)&&e.length>0&&p(function(s,a){var r=[];e.forEach(function(e){"PageView"===e.name?!0===n?(s.push({event:"setAccount",account:54646},{event:"setSiteType",type:a},{event:"viewHome"},{event:"flushEvents"}),r.push(e)):!0===o&&(s.push({event:"setAccount",account:54646},{event:"setSiteType",type:a},{event:"viewItem",item:t},{event:"flushEvents"}),r.push(e)):"LogIn"==e.name?(s.push({event:"setAccount",account:54646},{event:"setSiteType",type:a},{event:"setData",ui_sub:"yes"},{event:"viewItem",item:"1"},{event:"flushEvents"}),r.push(e)):"CompleteRegistration"==e.name&&(s.push({event:"setAccount",account:54646},{event:"setSiteType",type:a},{event:"setEmail",email:"na"},{event:"trackTransaction",id:(new Date).getTime(),item:[{id:i,price:"0",quantity:1}]},{event:"flushEvents"}),r.push(e))}),v(r,"criteo")})},t.fireTaboolaEvents=function(e){Array.isArray(e)&&e.length>0&&g(function(t){var i=[];e.forEach(function(e){"CompleteRegistration"===e.name&&(t.push({notify:"event",name:"complete_registration"}),i.push(e))}),v(i,"taboola")})},t.fireKeyweeEvents=function(e){Array.isArray(e)&&e.length>0&&u(function(t){var i="324685851665859";t("init",i);var n=[];e.forEach(function(e){"CompleteRegistration"===e.name&&(t("trackSingle",i,"Lead"),n.push(e))}),v(n,"keywee")})},t.fireAwinEvents=function(e,t,i){Array.isArray(e)&&e.length>0&&f(function(){var n=[];e.forEach(function(e){if("CompleteRegistration"===e.name){var o={};o.Tracking={},o.Tracking.Sale={};var s="1",a="aw",r="Default:"+s,d="",l="",u="0",h=t,p=i;o.Tracking.Sale.amount=s,o.Tracking.Sale.orderRef=h,o.Tracking.Sale.parts=r,o.Tracking.Sale.voucher=d,o.Tracking.Sale.currency=l,o.Tracking.Sale.test=u,o.Tracking.Sale.channel=a,o.Tracking.Sale.cks=p;var f=c.param({tt:"ns",tv:"2",merchant:15748,amount:s,cr:l,ref:h,parts:r,vc:d,ch:a,testmode:u,cks:p});(new Image).src="https://www.awin1.com/sread.img?"+f,n.push(e)}}),v(n,"awin")})},t.fireGoogleEvents=function(e){Array.isArray(e)&&e.length>0&&h(function(t){var i=[];e.forEach(function(e){"CompleteRegistration"===e.name&&(t("event","conversion",{send_to:"AW-963131518/ofx2CNSC3H4Q_vCgywM"}),i.push(e))}),v(i,"google")})},t.fireTwitterEvents=function(e){Array.isArray(e)&&e.length>0&&_(function(t){var i=[];e.forEach(function(e){"CompleteRegistration"===e.name&&(t("track","CompleteRegistration"),i.push(e))}),v(i,"twitter")})},t.fireOutbrainEvents=function(e){Array.isArray(e)&&e.length>0&&m(function(t){var i=[];e.forEach(function(e){"CompleteRegistration"===e.name&&(t("track","TestReg"),i.push(e))}),v(i,"outbrain")})},t.fireFacebookEvents=function(e){Array.isArray(e)&&e.length>0&&u(function(t){var i="1675581722730896";t("init",i),e.forEach(function(e){e.isCustom?t("trackSingleCustom",i,e.name):t("trackSingle",i,e.name)}),v(e,"facebook")})};var u=function(e){o.execAfterLoadDelayed(function(){!function(e,t,i,n,o,s,a){e.fbq||(o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],s=t.createElement(i),s.async=!0,s.src=n,a=t.getElementsByTagName(i)[0],a.parentNode.insertBefore(s,a))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),e(fbq)})},h=n.once(function(e){o.execAfterLoadDelayed(function(){s(r,function(){function t(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],t("js",new Date),t("config","AW-963131518"),e(t)})})}),p=n.once(function(e){o.execAfterLoadDelayed(function(){s(l,function(){window.criteo_q=window.criteo_q||[];/iPad/.test(navigator.userAgent)||/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Silk/.test(navigator.userAgent);e(window.criteo_q)})})}),f=n.once(function(e){o.execAfterLoadDelayed(function(){s(d,function(){e()})})}),_=n.once(function(e){o.execAfterLoadDelayed(function(){!function(e,t,i,n,o,s){e.twq||(n=e.twq=function(){n.exe?n.exe.apply(n,arguments):n.queue.push(arguments)},n.version="1.1",n.queue=[],o=t.createElement(i),o.async=!0,o.src="//static.ads-twitter.com/uwt.js",s=t.getElementsByTagName(i)[0],s.parentNode.insertBefore(o,s))}(window,document,"script"),twq("init","o015y"),twq("track","PageView"),e(twq)})}),m=n.once(function(e){o.execAfterLoadDelayed(function(){!function(e,t){var i="00d500defde3678d5cb294c8721ea40b0d";if(e.obApi){var n=function(e){return"[object Array]"===Object.prototype.toString.call(e)?e:[e]};return void(e.obApi.marketerId=n(e.obApi.marketerId).concat(n(i)))}var o=e.obApi=function(){o.dispatch?o.dispatch.apply(o,arguments):o.queue.push(arguments)};o.version="1.1",o.loaded=!0,o.marketerId=i,o.queue=[];var s=t.createElement("script");s.async=!0,s.src="//amplify.outbrain.com/cp/obtp.js",s.type="text/javascript";var a=t.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)}(window,document),obApi("track","PAGE_VIEW"),e(obApi)})}),g=n.once(function(e){o.execAfterLoadDelayed(function(){window._tfa=window._tfa||[],window._tfa.push({notify:"event",name:"page_view"}),function(e,t,i,n){document.getElementById(n)||(e.async=1,e.src=i,e.id=n,t.parentNode.insertBefore(e,t))}(document.createElement("script"),document.getElementsByTagName("script")[0],"//cdn.taboola.com/libtrc/unip/1144892/tfa.js","tb_tfa_script"),e(window._tfa)})}),v=function(e,t){a.log("third_party_ad_platform_pixel",{events:e,platform:t})};t.fireAppNexusEvent=n.once(function(){o.execAfterLoadDelayed(function(){document.createElement("img").src="https://ib.adnxs.com/getuid?https://www.quora.com/ads/an_pixel?an_uid=$UID"})})},"./shared/prettyprint.js":function(e,t,i){i("./third_party/prettify.js"),t.prettyPrint=window.prettyPrint},"./shared/qlocal_storage.js":function(e,t,i){function n(){try{if(window.localStorage)return!0}catch(e){return!1}return!1}var o=i("./shared/client.js"),s=null;t.storageAvailable=function(){return!!n()||!(!s||!o.isNativeApp())},t.setItem=function(e,t){if(n())try{window.localStorage.setItem(e,t)}catch(e){if("NS_ERROR_FILE_CORRUPTED"===e.name)return;throw e}else s&&o.isNativeApp()&&s.setItem(e,t)},t.getItem=function(e,t){if(n()){var i=window.localStorage.getItem(e);t(i)}else s&&o.isNativeApp()&&s.getItem(e,function(e){e.success&&t(e.value)})},t.removeItem=function(e){n?window.localStorage.removeItem(e):s&&o.isNativeApp()&&s.removeItem(e)}},"./shared/qtext.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/mathify.js").renderMath,s=i("./shared/core/component.js"),a=i("./shared/twitter_oembed.js"),r=i("./unified_view/qtext_video/player.js"),d=i("./unified_view/qtext_video/uploader.js"),l=i("./shared/prettyprint.js").prettyPrint,c=function(e,t,i){var o=n(e);o.find(t).not(".qt-processed").each(function(e,t){i(t)}),o.find(t).addClass("qt-processed")},u=t.renderQText=function(){c(document,".render_latex",o),c(document,".twitter-tweet",a.loadEmbeds),c(document,"[data-qt-video]",r.setupPlayer),c(document,"[data-qt-video-client-uuid]",d.updateUploadProgress),l()};t.ignoreNode=function(e){var t=function(){};c(e,".twitter-tweet",t),c(e,"[data-qt-video]",t),n(e).find(".render_latex").addClass("ignore_latex").removeClass("render_latex")},t.unIgnoreNode=function(e){n(e).find(".qt-processed").removeClass("qt-processed"),n(e).find(".ignore_latex").addClass("render_latex").removeClass("ignore_latex")},t.init=function(){s.registerAfterOnLoadCallback(u)}},"./shared/question_answer_page_reading_time.js":function(e,t,i){var n=i("./shared/visibility_state.js"),o=i("./shared/log_sender.js").log,s=i("./settings.js"),a=null,r=null;t.startLogging=function(e){a=e,d(),n.onChange(function(e){e?d():l()})};var d=function(){null==r&&(r=Date.now(),o("question_answer_page_reading_time",{action:"open",time:r,aid:a,windowId:s.windowId}))},l=function(){c()},c=function(){if(null!=r){var e=Date.now();o("question_answer_page_reading_time",{action:"close",time:e,reading_time:e-r,aid:a,windowId:s.windowId}),r=null}}},"./shared/question_page_reading_time.js":function(e,t,i){var n=i("./shared/viewport.js"),o=i("./shared/jquery.js"),s=i("./shared/debounce.js").debounce,a=i("./shared/visibility_state.js"),r=i("./shared/log_sender.js").log,d=i("./settings.js"),l=!1,c=null,u=null,h=null,p=[],f=!1;t.registerAnswerComponent=function(e,t){e&&(p.push([e,t]),f||(o(document).on("scroll",s(m,50)),f=!0,_(),a.isVisible()&&setTimeout(m,200)))};var _=function(){a.onChange(function(e){e?m():v()})},m=function(){for(var e=c,t=u,i=p.length;--i>=0;){var o=p[i],s=o[0],a=o[1],r=s.$id("@answer_content").get(0);if(r){if(!n.isElementDefinitelyOutOfViewport(r))if(null==e)e=r,t=a;else if(t==a)e=r;else{var d=window.innerHeight,l=d/2,h=e.getBoundingClientRect(),f=h.top<=l&&h.bottom>=l;if(f)break;var _=r.getBoundingClientRect(),m=_.top<=l&&_.bottom>=l;if(m){e=r,t=a;break}var w=Math.min(Math.abs(h.top-l),Math.abs(h.bottom-l)),b=Math.min(Math.abs(_.top-l),Math.abs(_.bottom-l));b<w&&(e=r,t=a)}else if(a==t){e=null,t=null;continue}}}t!=u&&(null!=u&&v(),null!=e&&g(e,t)),c=e},g=function(e,t){l&&(e.style.backgroundColor="rgb(255,230,230)"),c=e,u=t,h=Date.now(),r("question_page_reading_time",{action:"open",time:h,aid:u,windowId:d.windowId})},v=function(){if(null!=u){l&&(c.style.backgroundColor=null);var e=Date.now();r("question_page_reading_time",{action:"close",time:e,reading_time:e-h,aid:u,windowId:d.windowId}),c=null,u=null,h=null}}},"./shared/reading_time.js":function(e,t,i){var n,o=i("./shared/client_log.js"),s=i("./shared/debounce.js").debounce,a=i("./shared/jquery.js"),r=i("./shared/viewport.js"),d=i("./shared/visibility_state.js"),l=i("./shared/log_sender.js").log,c=0,u=function(e,t){t=t||0,l("web_expand_reading_time",{action:e,time:Date.now(),object_type:n.object_type,object_id:n.object_id,page_type:n.page_type,time_spent_off_page:t})},h=t.logReadingTimeClose=function(){if(n){var e=Date.now()-n.open_time;c<e&&(e-=c),u("close",c),c=0,e<1508531909060?o.logEvent("ReadingTime",n.wrapper,{duration:e}):""!=n.object_type&&l("reading_time_errors",{reading_time:e,open_time:n.open_time,css_truncation:n.story.css_truncation,time:Date.now(),object_type:n.object_type,object_id:n.object_id,page_type:n.page_type}),a(window).off("scroll."+n.story.cid),n=null}};t.logReadingTimeOpen=function(e,t,i,o,d){if(n){if(o==n.object_id&&i==n.object_type)return;h()}n={story:e,object_type:i,wrapper:t,object_id:o,page_type:d,open_time:Date.now()},u("open");var l=s(function(){t&&r.isElementDefinitelyOutOfViewport(t)&&h()},100,{trailing:!0,maxWait:500});a(window).on("scroll."+n.story.cid,l)};var p=0;d.onChange(function(e){n&&(e?(0!=p&&(c+=Date.now()-p),p=0):p=Date.now())})},"./shared/recaptcha.js":function(e,t,i){var n=i("./settings.js"),o=i("./shared/util.js"),s=i("./shared/loadjs.js").loadJS,a=i("./shared/onload.js"),r=!1,d=[],l=o.once(function(){var e=["https://www.google.com/recaptcha/api.js?","hl="+n.interfaceLanguage,"&onload=onCaptchaLoadedCallback","&render=explicit"].join("");window.onCaptchaLoadedCallback=function(){for(r=!0;d.length;)d.pop().call()},s(e)});t.onInit=function(e){r?e():(d.push(e),a.execAfterLoadDelayed(l))}},"./shared/rpc_manager.js":function(e,t,i){var n=i("./shared/core/rpc.js"),o=i("./interface/settings.js"),s=i("./shared/errors.js"),a=i("./shared/debounce.js").debounce,r=i("./shared/Class.js").Class.extend({__init__:function(){this._urlToBatchedUrl={},this._pendingRequests={},this._makeBatchRequests={},this._debounceWait=10,this._registerUrlToBatchedUrl(o.serverCallUrl,o.batchedServerCallUrl),this._registerUrlToBatchedUrl("/api/rerender_component_POST","/api/batched_rerender_component_POST")},_registerUrlToBatchedUrl:function(e,t){this._urlToBatchedUrl[e]=t,this._pendingRequests[e]=[],this._makeBatchRequests[e]=this._getBatchRequestFunction(e)},_shouldBatchRequest:function(e){return e._url()in this._urlToBatchedUrl},enqueue:function(e){if(!this._shouldBatchRequest(e))return e.send();this._pendingRequests[e._url()].push({request:e,data:this._getDataObject(e),success:this._getSuccessCallback(e),error:this._getErrorCallback(e)}),this._makeBatchRequests[e._url()]()},_getDataObject:function(e){var t=e._data();return delete t.formkey,delete t.window_id,delete t.referring_controller,delete t.referring_action,t},_getSuccessCallback:function(e){return function(t){e._successHandler({value:t}),e._completeHandler()}},_getErrorCallback:function(e){return function(){e._beforeErrorHandler.apply(e,arguments),e._error()(),e._completeHandler()}},_getBatchRequestFunction:function(e){var t=this;return a(function(){var i=t._pendingRequests[e];if(t._pendingRequests[e]=[],1===i.length)return void i[0].request.send();var o=i.map(function(e){return e.data}),a=function(e){i.forEach(function(t){t.error(e)})},r=function(e){i.forEach(function(t,i){try{t.success(e[i])}catch(e){s.report(e)}})};n.rpc(t._urlToBatchedUrl[e]).kwargs({requestsData:o}).success(r).error(a).send()},t._debounceWait)}}),d=new r;t.enqueueRequest=function(e){d.enqueue(e)}},"./shared/scroll_animation_handler.js":function(e,t){t.add=function(e,t){var i,n=!1,o=function(){i=e.scrollY,i===undefined&&(i=e.scrollTop),n||requestAnimationFrame(function(){n=!1,t(i)}),n=!0};return e.addEventListener("scroll",o),o(),o}},"./shared/sharing.js":function(e,t,i){var n=i("./shared/twitter.js"),o=i("./shared/facebook.js"),s=i("./shared/client_log.js");t.Twitter={onLoad:function(){var e=this;n.onInit(function(){window.twttr.events.bind("tweet",function(t){e.isTweeted(t)&&(s.logEvent("ShareTwitter",t.target),e.serverCall("record_tweet").send())})})},isTweeted:function(e){var t=String(e.target.id),i=String(this.cid);return t.indexOf(i)>-1},onClick:function(e){e.preventDefault();var t="500",i="400",n="True",o="width="+t+",height="+i+",resizable="+n;window.open(this.share_url,"_BLANK",o)}},t.Facebook={onLoad:function(){o.load()},onClick:function(e){var t=this;return t.is_debugging_mode&&(console.log(t.share_url),console.log(t.target)),window.FB.ui({method:"feed",display:"popup",link:t.share_url},function(i){i&&i.post_id&&(s.logEvent("ShareFacebook",e.target),t.serverCall("record_facebook_share").send())}),!1}}},"./shared/siteuri.js":function(e,t,i){function n(e){this.message=this.errorType+": "+e}function o(e){return"http:"==e.substring(0,5)?"https:"+e.substring(5):e}function s(e){var t=e.match(l);if(!t)return!1;var i=t[1],n=t[2],o=r();if("www."+n!=o){if("www"!=i&&i&&"www."+i+"."+n==o){var s=e.replace("://","://www.").match(l);if(s)return s}return!1}return t}var a=i("./settings.js");n.prototype=new Error,n.prototype.errorType="SiteURIError",n.prototype.constructor="SiteURIError",t.SiteURIError=n,t.getQuoraSubdomain=function(e){return e?e.substring(0,e.lastIndexOf("quora.com")-1):""};var r=function(e,t){var i;return i=t?"quora.com":a.subdomain_suffix||"quora.com",e?e+"."+i:"www."+i};t.netlocForSubdomainName=r;var d=function(e,t){return"http://"+r(e,t)+"/"};t.baseUrlForSubdomainName=d;var l=/https?:\/\/(?:([^.\/]+)\.)?((?:[^.\/]+\.)*quora\.com(?::[0-9]*)?)(\/.*)?/,c=function(e){return!1!==s(e)};t.isSiteAbsoluteUrl=c;var u=function(e){return e.startsWith("/")&&!e.startsWith("//")};t.isSiteRelativeUrl=u;var h=function(e){return c(e)||u(e)};t.isSiteUrl=h;var p=function(e,t){return new f(e,t)};t.URI=p;var f=i("./shared/Class.js").Class.extend({__init__:function(e,t){e instanceof f&&(e=e.unicode());var i,o=s(e),r=t&&t.subdomainName||null,d=t&&t.secure||!1;if(o){if(r)throw new n("subdomain context should not be set for absolute url, url = "+e+", subdomain = "+r);r=o[1],"www"==r&&(r=null),i=o[3]||"",""===i&&(i="/"),"https"==e.substring(0,5)&&(d=!0)}else i=e,"https:"==window.location.protocol&&(d=!0);if("/"!=i[0])throw new n("invalid site uri input "+e);return this.relativeUrl=i,this.subdomainName=r,this.subdomainName||(this.subdomainName=a.subdomain_of_network),this.isSecure=d,this},unicode:function(e){if(a.force_use_absolute_links)return this.absolute(e);var t=this.relativeUrl;return(this.subdomainName||a.subdomain_name)&&(t=d(this.subdomainName,e)+t.substring(1),"/"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1))),this.isSecure&&(t=o(t)),t},absolute:function(e){var t=d(this.subdomainName,e),i=t+this.relativeUrl.substring(1);return this.isSecure&&(i=o(i)),i},secure:function(e){return o(this.absolute(e))}});t.SiteURI=f},"./shared/stripeLoader.js":function(e,t,i){var n=i("./settings.js"),o=i("./shared/util.js"),s=i("./shared/loadjs.js").loadJS;t.load=o.once(function(){s("https://js.stripe.com/v2/",function(){Stripe.setPublishableKey(n.stripePublishableKey)})})},"./shared/toast.js":function(e,t,i){var n,o=i("./shared/Class.js").Class,s=i("./settings.js"),a=i("./shared/client.js"),r=s.interface_strings,d=i("./shared/jquery.js"),l=null,c=t.Toast={show:function(){if(a.isNativeApp()&&this.message_data)return void n.send("showPMsg",this.message_data);null!==l&&l.close(),l=this,this.closeTimeout=setTimeout(this.close.bind(this),this.duration||4e3)},close:function(){clearTimeout(this.closeTimeout),l=null,0!==this.$container.length&&(this.$container.addClass("animate_out"),this.$container.css("paddingBottom",""),setTimeout(this.cleanup.bind(this),1e3))},cleanup:function(){var e=this.$container.get(0);e.parentNode&&e.parentNode.removeChild(e)}},u=o.extend(c).extend({__init__:function(e,t){this.additionalClasses=t||[],this.message=e,this.$container=d(this.render())},render:function(){var e=document.getElementById("pmsg_container");e||(e=document.createElement("div"),e.id="pmsg_container",document.body.appendChild(e)),e.className="PMsgContainer";var t=document.createElement("div");t.className=["PMsg"].concat(this.additionalClasses).join(" "),e.appendChild(t);var i=document.createElement("div");return i.className="contents",d(i).text(this.message),t.appendChild(i),t}});t.show=function(e){if(a.isNativeApp())n.send("showPMsg",{message:e});else{new u(e).show()}};var h=t.showError=function(e){if(a.isNativeApp())n.send("showPMsg",{message:e,style:"error"});else{new u(e,["PMsgError"]).show()}};t.showPleaseTryAgainError=function(){h(r.please_try_again)}},"./shared/twitter.js":function(e,t,i){var n=i("./shared/onload.js"),o=i("./shared/util.js"),s=i("./shared/loadjs.js").loadJS,a=!1,r=[],d=o.once(function(){var e=window.twttr={_events:[],ready:function(t){e._events.push(t)}};s("//platform.twitter.com/widgets.js",function(){window.twttr.ready(function(e){for(a=!0;r.length;)r.pop().call()})})});t.onInit=function(e){a?e():(r.push(e),n.execAfterLoadDelayed(d))}},"./shared/twitter_oembed.js":function(e,t,i){function n(e,t,i){var n=a(e);n?t(n,!1):o(e,function(n){if(n){var o=document.createElement("iframe");o.className="tweet-content",o.srcdoc=n.html,t(o,!0),s(e,o)}else i(null)},i)}function o(e,t,i){r.rpc("/twitter/get_twitter_oembed_json_POST").kwargs({url:e}).success(function(e){"error"in e?i(e):t(e)}).error(i).send()}function s(e,t){var i=h[e];i?i.push(t):h[e]=[t]}function a(e){for(var t=h[e]||[],i=0;i<t.length;i++){var n=t[i],o=n.getElementsByTagName("twitterwidget");if(!n.isConnected&&o.length>0)return n}return null}var r=i("./shared/core/rpc.js"),d=i("./shared/twitter.js"),l=i("./shared/client.js"),c=i("./settings.js"),u=i("./shared/errors.js"),h={};t.getTweetData=n;var p=t.loadEmbeds=function(e){_()&&d.onInit(function(){window.twttr&&window.twttr.widgets?window.twttr.widgets.load(e):u.logJsError("Twitter","Error: Twitter JS initialized but widgets not available")})},f=function(e){d.onInit(function(){window.twttr&&window.twttr.events?window.twttr.events.bind("loaded",e):u.logJsError("Twitter","Error: Twitter JS initialized but events not available")})};t.renderTweetIFrame=function(e){e.onload=function(){var t=e.contentDocument||e.contentWindow.document;f(function(){e.style.height=t.body.scrollHeight+"px"}),p(t.body)}};var _=t.tweetsEnabled=function(){return!(l.isIOSApp()&&c.buildNumber<742)}},"./shared/upload.js":function(e,t,i){var n=i("./shared/beforeunload.js"),o=i("./third_party/resumable.js"),s=i("./settings.js"),a=i("./shared/util.js"),r=i("./shared/siteuri.js"),d=i("./shared/jquery.js"),l=function(e){return"quora.com"!=s.subdomain_suffix?e:c(e)},c=function(e){return[window.location.protocol,"//",r.netlocForSubdomainName("upload"),e].join("")};t.uploadData=function(e,t,i,n){var o=new window.FormData;o.append("formkey",s.formkey);for(var a=Object.keys(e),r=0;r<a.length;r++)o.append(a[r],e[a[r]]);for(var c=0;c<t.length;c++)o.append("file",t[c]);o.append("nid",s.nid);var u=s.serverCallUrl.split("server_call_POST?");u&&u[1]&&o.append("post_url_suffix",u[1]),d.ajax({method:"POST",processData:!1,contentType:!1,url:l("/_/imgupload/upload_POST"),data:o,xhrFields:{withCredentials:!0},success:function(e){e.success?i(e):n(e)},error:n})},t.uploadBlob=function(e,t,i){var n=new window.FormData;n.append("formkey",s.formkey),n.append("blob",e),d.ajax({method:"POST",processData:!1,contentType:!1,url:l("/_/avupload/upload_POST"),data:n,xhrFields:{withCredentials:!0},success:function(e){e.success?t(e):i(e)},error:i})},t.uploadAudience=function(e,t,i,n){var o=new window.FormData;o.append("formkey",s.formkey),o.append("job_id",e),o.append("blob",t),d.ajax({method:"POST",processData:!1,contentType:!1,url:l("/_/ad/upload_audience_POST"),data:o,xhrFields:{withCredentials:!0},success:function(e){e.success?i(e):n(e)},error:n})};var u={},h=new o({target:l("/_/avupload/chunk_resumablejs_POST"),testChunks:!1,withCredentials:!0,chunkSize:6291456,query:{formkey:s.formkey}});t.uploadVideoMetadata=function(e,t,i){d.ajax({method:"POST",dataType:"json",url:l("/_/avupload/metadata_POST"),data:{formkey:s.formkey,json:JSON.stringify({kwargs:e})},xhrFields:{withCredentials:!0},success:t,error:i})},t.uploadClipChunk=function(e,t,i,n,o){var a=new window.FormData;a.append("formkey",s.formkey),a.append("chunk",e),a.append("clip_id",t),a.append("file",i),d.ajax({method:"POST",dataType:"json",processData:!1,contentType:!1,url:l("/_/avupload/chunk_POST"),data:a,xhrFields:{withCredentials:!0},success:n,error:o})},t.uploadResumableVideo=function(e,t,i,n){var o=u[e];a.extend(o,{successCallback:t,failureCallback:i,progressCallback:n}),h.upload()},t.enqueueResumableVideo=function(e,t){u[e]={chunkingCompleteCallback:t},h.addFile(e)},t.pauseVideoUploads=function(){h.pause()},t.resumeVideoUploads=function(){h.upload()},t.retryFailedVideoUpload=function(e){e.retry()};var p=function(){return!!Object.keys(u).length};t.isVideoUploadInProgress=p,h.support&&(h.on("chunkingComplete",function(e){var t=e.file;u[t].chunkingCompleteCallback(t.uniqueIdentifier,e.chunks.length)}),h.on("fileSuccess",function(e,t){u[e.file].successCallback(t),h.removeFile(e.file),delete u[e.file]}),h.on("fileError",function(e,t){u[e.file].failureCallback(e,t)}),h.on("fileProgress",function(e,t){u[e.file].progressCallback(e.progress())}),n.registerHandler(function(){if(p())return s.qtextData.unsavedVideosMsg}))},"./shared/util.js":function(e,t,i){var n=i("./shared/errors.js");t.extend=function(e,t){e=e||{};for(var i=1;i<arguments.length;i++)if(arguments[i])for(var n in arguments[i])arguments[i].hasOwnProperty(n)&&(e[n]=arguments[i][n]);return e},t.documentFragmentFromString=function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=document.createDocumentFragment(),n=t.firstChild,o=null;n;)o=n.nextSibling,i.appendChild(n),n=o;return i};var o=t.isPlainObject=function(e){if("[object Object]"!=Object.prototype.toString.call(e))return!1;var t=e.constructor;if("function"!=typeof t)return!1;var i=t.prototype;return"[object Object]"==Object.prototype.toString.call(i)&&!1!==i.hasOwnProperty("isPrototypeOf")},s=t.cloneObject=function(e){if(!Array.isArray(e)&&!o(e))return e;for(var t=e.constructor(),i=Object.keys(e),n=0;n<i.length;n++){var a=i[n];t[a]=s(e[a])}return t};t.firstScrollingParent=function(e){var t=null;for(e&&(t=e.parentNode);t&&t!==document.body;){var i=window.getComputedStyle(t);if(i){var n=i.getPropertyValue("overflow-y");if("scroll"==n||"auto"==n)return t}t=t.parentNode}return document.body},t.makeEnum=function(e){var t={},i=Array.isArray(e);for(var n in e)e.hasOwnProperty(n)&&(n=i?e[n]:n,t[n]=n);return t},t.once=function(e){var t,i;return function(){return i||(i=!0,t=e.apply(this,arguments)),t}};var a=0;t.randomId=function(e){return e=e||"",[e,a++,Math.floor(4294967296*Math.random())].join("-")},t.uuid4=function(){var e=Date.now();return"undefined"!=typeof window.performance&&"function"==typeof window.performance.now&&(e+=window.performance.now()),"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)})},t.escapeHTML=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;")},t.iterItems=function(e,t){if(!o(e))return void n.logJsError("util.iterItems expects a plain object. got "+e);for(var i=Object.keys(e),s=0;s<i.length;s++)t.call(null,i[s],e[i[s]])},t.getLocation=function(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}};var r=t.jsonEqual=function(e,t){var i,n;if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t)return e===t;if(null===e||e===undefined||null===t||t===undefined)return!1;if(typeof e!=typeof t)return!1;if(e instanceof Array){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!r(e[o],t[o]))return!1;return!0}return i=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t),i.length==n.length&&i.every(function(i){return r(e[i],t[i])})};t.formatBytes=function(e,t){if(0==e)return"0 Bytes";var i=1024,n=t<=0?0:t||2,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(i));return parseFloat((e/Math.pow(i,s)).toFixed(n))+" "+o[s]}},"./shared/viewport.js":function(e,t,i){var n=i("./shared/dom.js"),o=i("./shared/jquery.js"),s=i("./shared/window_manager.js"),a=function(e){var t=e.getBoundingClientRect();return 0==t.bottom&&0==t.right&&0==t.top&&0==t.left};t.percentInViewport=function(e){if(a(e))return 0;var t=Math.round(o(e).offset().top),i=window.innerHeight,n=Math.max(0,window.pageYOffset-t),s=Math.max(0,t+e.offsetHeight-(window.pageYOffset+i));return n>e.offsetHeight||s>e.offsetHeight?0:1-(n+s)/e.offsetHeight},t.percentScrolledPastViewport=function(e){if(!e)return 0;var t=Math.round(o(e).offset().top);return Math.max(0,window.pageYOffset-t)/e.getBoundingClientRect().height};var r=function(e){if(a(e))return!1;var t=e.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,o=function(e,t){return document.elementFromPoint(e,t)};if(t.right<0||t.bottom<0||t.left>i||t.top>n)return!1;var s=5;return e.contains(o(t.left+s,t.top+s))||e.contains(o(t.right-s,t.top+s))||e.contains(o(t.right-s,t.bottom-s))||e.contains(o(t.left+s,t.bottom-s))};t.isElementInViewport=function(e){return!!e&&r(e)};var d=null;t.siteHeaderHeight=function(){return null===d&&(d=o(".SiteHeader").height()),d},t.setPageScroll=function(e){var t=o("body"),i=o(".SiteHeader"),s=n.getScrollbarWidth();e?(t.removeClass("modal_prevent_scroll"),t.css("padding-right",0),i.css("padding-right",0)):(t.addClass("modal_prevent_scroll"),t.css("padding-right",s+"px"),i.css("padding-right",s+"px"))},t.isElementDefinitelyOutOfViewport=function(e){var t=e.getBoundingClientRect();return t.right<0||t.bottom<0||t.left>o(window).width()||t.top>o(window).height()},t.scrollToElem=function(e){e.jquery||(e=o(e)),e.length>1&&(e=e.get(0));var t=e.offset().top;t-=s.headerOffset+20,window.scroll(0,t)},t.scrolledToBottom=function(){return o(document).height()<=o(window).height()+o(window).scrollTop()+1}},"./shared/visibility_state.js":function(e,t,i){var n,o=(i("./shared/client.js"),i("./shared/beforeunload.js")),s=i("./shared/eventemitter.js"),a=new s.EventEmitter,r=t.isVisible=function(){return!(n||u())};t.onChange=function(e){a.on("change",e)};var d,l;"undefined"!=typeof document.hidden?(d="hidden",l="visibilitychange"):"undefined"!=typeof document.msHidden?(d="msHidden",l="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(d="webkitHidden",l="webkitvisibilitychange");var c=function(e){n!==e&&(n=e,a.trigger("change",[r()]))},u=function(){return document[d]};document.addEventListener(l,function(){a.trigger("change",[r()])},!1),o.registerHandler(function(){c(!0)}),window.addEventListener("pagehide",function(){c(!0)}),window.addEventListener("pageshow",function(){c(!1)}),window.addEventListener("blur",function(){c(!0)}),window.addEventListener("focus",function(){c(!1)})},"./shared/w2.context.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./shared/errors.js"),s=n.extend({__init__:function(e){this.value=e,this.handlers={}},bind:function(e,t){this.handlers.hasOwnProperty(t)||(this.handlers[t]=[]),this.handlers[t].push(e)},unbind:function(e){delete this.handlers[e]},trigger:function(){var e=Array.prototype.slice.call(arguments);for(var t in this.handlers)if(this.handlers.hasOwnProperty(t))for(var i=this.handlers[t],n=0;n<i.length;n++)i[n].apply(this,e)},set:function(e){var t=this.value;this.value=e,this.trigger(t,e)},get:function(){return this.value}}),a=t.Context=n.extend({__init__:function(){var e=this.initialProperties();if(!e){var t=["Override initialProperties() in your subclasses to define a list ","of properties that this Context should listen to."].join("");return void o.logJsError("w2.context",t)}this.properties={};for(var i in e)this.properties[i]=new s(e[i])},initialProperties:function(){},on:function(e,t,i){this.assertPropertyName(e),this.properties[e].bind(t,i)},off:function(e){for(var t in this.properties)this.properties[t].unbind(e)},set:function(e,t){this.assertPropertyName(e),this.properties[e].set(t)},get:function(e){return this.assertPropertyName(e),this.properties[e].get()},assertPropertyName:function(e){if(!this.properties.hasOwnProperty(e)){var t=["Hey, you are trying to access a context property with an invalid ","property name. You can only retrieve property names that are defined ","in the Context initialProperties definition."].join("");o.logJsError("w2.context",t)}}}),r=n.extend({__init__:function(e,t){this._context=e,this._cid=t},on:function(e,t){this._context.on(e,t,this._cid)},off:function(){this._context.off(this._cid)},get:function(e){return this._context.get(e)},set:function(e,t){this._context.set(e,t)}}),d=n.extend({__init__:function(e){this.component=e;var t=this.component.contextConstructor();this._context=t?new t(this.component):null,this._contextProxies=[]},get:function(e){for(var t=0;t<this._contextProxies.length;t++)if(this._contextProxies[t]._context instanceof e)return this._contextProxies[t];for(var i=null,n=this.component;n&&"*ROOT*"!=n.cid;){var o=n.contextManager._context;if(o instanceof e){i=o;break}var s=n.parent();if(n===s)throw new Error(n+"is its own parent()");n=s}if(!i)return null;var a=new r(i,this.component.cid);return this._contextProxies.push(a),a},unload:function(){for(var e=0;e<this._contextProxies.length;e++)this._contextProxies[e].off()}});t.initComponent=function(e){var t=new d(e);e.contextManager=t,e.getContext=t.get.bind(t)},t.unloadComponent=function(e){e.contextManager&&e.contextManager.unload()},t.ActionBar=a.extend({initialProperties:function(){return{commentsElem:null,loadComments:!1,showComments:!1,updateSticky:!1,toggleRAD:!1}}}),t.CaptchaInput=a.extend({initialProperties:function(){return{present:!1,sync:null,isCaptchaFilled:!0,captchaResponse:""}}}),t.HoverMenu=a.extend({initialProperties:function(){return{isShown:!1,hidden:!0}}})},"./shared/window_manager.js":function(e,t,i){var n,o=i("./shared/jquery.js"),s=i("./gating.js"),a=i("./shared/util.js"),r=i("./shared/client.js"),d=i("./shared/errors.js");t.catchRedirectCallback=null;var l=function(e){return/https?:\/\/[a-z.0-9_\.\-]*quora\.com/i.test(e)},c=t.getDomain=function(){return window.location.protocol+"//"+window.location.host+"/"};t.getPathName=function(){return decodeURI(window.location.pathname)};var u=t.getURL=function(){return decodeURI(window.location.href)},h=t.getHash=function(){return window.location.hash},p=t.replaceURL=function(e){window.history&&window.history.replaceState&&window.history.replaceState(window.history.state,null,e)};t.isInHash=function(e){var t=h();if("#"==t.substr(0,1)){t=t.replace("%23","-");for(var i=t.substring(1).split("-"),n=0;n<i.length;n++)if(i[n]==e)return!0}return!1};var f=function(e){for(var t={},i=e.split("&"),n=0;n<i.length;n++){var o=i[n],s=o.split("=");t[s[0]]=decodeURIComponent(s[1])}return t};t.parseURLParamsMulti=function(e){e||(e=window.location.search.substring(1));for(var t={},i=e.split("&"),n=0;n<i.length;n++){var o=i[n],s=o.split("=");s[0].length>0&&(s[0]in t||(t[s[0]]=[]),t[s[0]].push(decodeURIComponent(s[1])))}return t};var _=t.parseURLParams=function(e){return e||(e=window.location.search.substring(1)),0===e.length?{}:f(e)};t.parseParams=function(e){var t={};if(e){var i=e.split("?");2==i.length&&(t=f(i[1]))}return t},t.isParamInURL=function(e,t){return e in _(t)},t.addParamToURL=function(e,t,i){var n=encodeURIComponent(t)+"="+encodeURIComponent(i);n=-1==e.indexOf("?")?"?"+n:"&"+n;var o=e.indexOf("#");return-1==o?e+n:e.substring(0,o)+n+e.substring(o)},t.getURLParam=function(e){return _()[e]};var m=function(e,t,i,n,s){var a=[];if(i)for(var r in i)if(i.hasOwnProperty(r)&&null!==i[r])if(!0===s&&o.isArray(i[r]))for(var d=0;d<i[r].length;d++)a.push(r+"="+encodeURIComponent(i[r][d]));else a.push(r+"="+encodeURIComponent(i[r]));var l=a.join("&"),c=e+t;return l.length>0&&(c+="?"+l),c+=n},g=t.makeURL=function(e,t,i,n){return m(e,t,i,n,!1)},v=t.makeURLMultiParams=function(e,t,i,n){return m(e,t,i,n,!0)},w=t.makeUpdatedURL=function(e){return g(window.location.origin,window.location.pathname,a.extend(_(),e),window.location.hash)};t.updateURLParams=function(e){var t=w(e);return p(t),t},t.replaceURLParamsMulti=function(e){var t=v(window.location.origin,window.location.pathname,e,window.location.hash);return p(t),t},t.replaceURLPath=function(e){var t=v(window.location.origin,e,_(),window.location.hash);return p(t),t},t.addURLParam=function(e,i){var n=_();return n[e]=i,t.updateURLParams(n)},t.removeURLParam=function(e){var i=_();return i[e]=null,t.updateURLParams(i)},t.getTitle=function(){return document.title},t.setTitle=function(e){document.title=e},t.reload=function(){window.location.reload()};var b=!1;t.isPendingNavigation=function(){return b};var y=function(e){return-1!==e.indexOf("quora://")};t.sameDomainURL=function(e){return e&&("/"==e.charAt(0)||new RegExp("^https?://"+window.location.hostname+"/","i").test(c(e)))};var C=function(e){var t=document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href},k=t.isQuoraURL=function(e){return y(e)||l(e)};t.navigateTo=function(e,t){""!==e&&"#"!==e&&e!=u()+"#"&&(e=C(e),k(e)?x(e,t):E(e,t))};var S=t.navigateToWeb=function(e,i){if(e=C(e),i)return void window.open(e);var n=!0;t.catchRedirectCallback&&(n=t.catchRedirectCallback(e)),n&&(b=!0,s.async_navigate_to_js?setTimeout(function(){window.location=e},0):window.location=e)},E=function(e,t){if(t=t||"system_browser",r.isNativeApp()){var i={url:e};"system_browser"==t?i.target="external":"app_browser"==t?i.target="browser":(d.logJsError("windowManager","invalid nav_style for external URL: "+t),i.target="external"),n.send("openURL",i)}else if(r.isMobileWeb()){var o={url:e};"system_browser"==t?o.target="external":"app_browser"==t?o.target="current":(d.logJsError("windowManager","invalid nav_style for external URL: "+t),o.target="external"),n.send("openURL",o)}else"system_browser"==t?S(e,!0):"app_browser"==t?S(e,!0):(d.logJsError("windowManager","invalid nav_style for external URL: "+t),S(e,!0))},x=function(e,t){if(t=t||"push",r.isNativeApp()){var i={url:e};"push"==t?i.target="current":"present"==t?i.target="discardable_modal":"replace"==t?i.target="reload":"modal_push"==t?i.target="modal":"modal_present"==t?i.target="modal":"system_browser"==t?i.target="external":"app_browser"==t?i.target="browser":(d.logJsError("windowManager","invalid nav_style for Quora URL: "+t),i.target="external"),n.send("openURL",i)}else if(r.isMobileWeb()){var o={url:e};"push"==t?o.target="current":"present"==t?o.target="external":"replace"==t?o.target="current":"modal_push"==t?o.target="current":"modal_present"==t?o.target="external":"system_browser"==t?o.target="external":"app_browser"==t?o.target="browser":(d.logJsError("windowManager","invalid nav_style for Quora URL: "+t),o.target="external"),n.send("openURL",o)}else"push"==t?S(e,!1):"present"==t?S(e,!0):"replace"==t?S(e,!1):"modal_push"==t?S(e,!1):"modal_present"==t?S(e,!0):"system_browser"==t?S(e,!0):"app_browser"==t?S(e,!0):(d.logJsError("windowManager","invalid nav_style for Quora URL: "+t),S(e,!0))};t.headerOffset=45,t.actionBarHeight=52,t.scrollContext=60,t.scrollAndFocus=function(e,i){e-=t.headerOffset,e=Math.max(0,Math.min(o(document).height()-o(window).height(),e));var n=Math.min(500,.5*Math.abs(e-o(document).scrollTop())),s=!1;o("html,body").animate({scrollTop:e},n,"swing",function(){if(!s&&o(i).length){var e=window.scrollX,t=window.scrollY;o(i).focus(),window.scrollTo(e,t),s=!0}})},t.scrollIntoView=function(e,i){i=i||o(e).offset().top;var n=i-o(document).scrollTop();(n<t.headerOffset||n>o(window).height())&&t.scrollAndFocus(i)}},"./shared/window_performance.js":function(e,t){var i=window&&(window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance),n=["name","initiatorType","connectStart","connectEnd","domainLookupStart","domainLookupEnd","duration","fetchStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","startTime","workerStart","transferSize","encodedBodySize","decodedBodySize","entryType"];t.getResourceTimingInfo=function(){var e=[];if(i&&i.getEntriesByType)for(var t=i.getEntriesByType("resource"),o=0;o<t.length;o++){for(var s=t[o],a={},r=0;r<n.length;r++){var d=n[r];d in s&&(a[d]=s[d])}e.push(a)}return e},t.getNavigationTiming=function(){var e={};if(i&&i.timing)for(var t in i.timing){var n=i.timing[t];!isNaN(parseFloat(n))&&isFinite(n)&&(e[t]=parseFloat(n))}return e}},"./shared/youtube.js":function(e,t,i){var n=i("./shared/loadjs.js").loadJS,o=i("./shared/util.js"),s=i("./shared/onload.js"),a=[],r=!1,d=o.once(function(){n("//www.youtube.com/player_api",function(){for(r=!0;a.length;)a.pop().call()})});t.onInit=function(e){r?e():(s.execAfterLoadDelayed(d),a.push(e))}},"./simscroll.js":function(e,t){function i(e,t,i,n,o){return[e,!!t,!!i,!!n,!!o].join(" ")}function n(e){var t=e.keyCode||e.charCode,n=Math.round(a.clientHeight-100);switch(i(t,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)){case r:window.scrollBy(0,-s);break;case d:window.scrollBy(0,s);break;case l:case c:window.scrollBy(0,-n);break;case u:case h:window.scrollBy(0,n);break;default:return!1}return o=!0,!0}var o,s=50,a=document.documentElement,r=i(38),d=i(40),l=i(33),c=i(32,!0),u=i(32),h=i(34);document.addEventListener&&document.addEventListener("keypress",function(e){var t=e.originalTarget||e.target;o||t!==a&&t!==document.body||!n(e)||(e.preventDefault(),e.stopPropagation()),o=!1},!1),t.maybeSimulateScroll=n,t.cancelSimulatedScroll=function(){o=!0}},"./sticky.js":function(e,t,i){var n=i("./shared/debounce.js").debounce,o=i("./shared/jquery.js"),s="sticky",a=[],r=!1;t.add=function(e){if(e.elem&&e.container){var t=o(e.elem),i=o(e.container),n=o.extend({top:0,bottom:0},e.offsets),d=t.css("position");if(i.length){t.addClass(s);var c=t.outerHeight(!0);t.removeClass(s);var u=o("<div>").css({height:0,margin:0,padding:0,clear:"both",display:"block"});t.before(u),a.push({elem:t,sentinelElem:u,container:i,origPadding:parseInt(i.css("padding-bottom")),origPos:d,curPos:d,offsets:n,height:c}),r||(r=!0,l())}}},t.remove=function(e){for(var t=0;t<a.length;++t){var i=a[t];if(i.elem[0]===o(e)[0]){a.splice(t,1),d(i,i.origPos);break}}};var d=function(e,t){if(t!=e.curPos){e.curPos=t,e.elem.css("position",t);var i=e.elem.outerHeight(!0);"fixed"==t?(e.sentinelElem.css("height",i),e.elem.addClass(s)):(e.sentinelElem.css("height",0),e.elem.removeClass(s),e.height=i)}},l=n(function(){for(var e=o(window),t=e.scrollTop()+e.height(),i=0;i<a.length;++i){var n=a[i];if(n.elem.is(":visible")){var s=n.container.offset().top+n.height+n.offsets.top,r=n.sentinelElem.offset().top+n.height-n.offsets.bottom;t>=s&&t<=r?d(n,"fixed"):d(n,n.origPos)}}window.requestAnimationFrame(l)},100)},"./tchannel_up.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./w2.livenode.js"),s=i("./shared/onload.js"),a=i("./shared/util.js"),r=i("./shared/beforeunload.js"),d=i("./shared/Class.js").Class,l=null,c=function(e,t,i,n){var o=window.location.protocol;return n&&(o="https:"===o?"wss:":"ws:"),e?o+"//"+e:[o,"//tch",Math.floor(1e6*Math.random())+1,".tch.",t,"/up/",i,"/updates?"].join("")},u=function(e){new Function(e).call(window)},h=d.extend({__init__:function(e,t,i,n,o,s,a){this.minSeq=e,this.channel=t,this.channelHash=i,this.boxName=n,this.baseHost=o,this.enableWebsocket=a,this.socket=null,this.targetUrl=c(s,this.baseHost,this.boxName,this.enableWebsocket),this.isConnected=!0,this.isActive=!0,this.maxBackOffTime=3e4,this.updateBackOffTime(!0),this.numActiveXhr=0,this.pendingMessages=[]},makeJsonpRequest:function(e){if(0===this.numActiveXhr){this.numActiveXhr+=1;var t={min_seq:this.minSeq,channel:this.channel,hash:this.channelHash};e&&(t.timeout=e),n.ajax({url:this.targetUrl,jsonpCallback:function(){return"jsonp"+a.uuid4()},dataType:"jsonp",method:"GET",data:t,success:this._onSuccess.bind(this),error:this._onError.bind(this),complete:this._onPollComplete.bind(this)})}},makeWebsocketRequest:function(){if(null===this.socket){var e=this.targetUrl+n.param({min_seq:this.minSeq,channel:this.channel,hash:this.channelHash});try{this.socket=new window.WebSocket(e)}catch(e){return void this._onError()}this.socket.onerror=this._onWebsocketError.bind(this),this.socket.onmessage=this._onWebsocketSuccess.bind(this),this.socket.onclose=this._onWebsocketClose.bind(this)}},closeWebsocket:function(){null!==this.socket&&(this.socket.close(),this.socket=null)},setIsConnected:function(e){this.isConnected!=e&&(e?o.reportPageRegainedConnection():o.reportPageLostConnection()),this.isConnected=e},updateBackOffTime:function(e){e&&(this.backOffTime=500),this.backOffTime=Math.min(2*this.backOffTime,this.maxBackOffTime)},_onError:function(){var e=this;setTimeout(function(){e.isActive&&!r.isUnloading()&&(e.updateBackOffTime(),e.setIsConnected(!1),e.poll())},0)},_onWebsocketError:function(e){this.closeWebsocket(),this._onError()},_onPollError:function(e,t){this._onError()},_onSuccess:function(e){if(this.isActive&&!r.isUnloading()){this.updateBackOffTime(!0),this.setIsConnected(!0);try{if(e.error)throw e.error;this.minSeq=e.min_seq;for(var t=0;t<e.messages.length;t++)u(e.messages[t])}catch(e){return void o.reportPageNeedsReload("tchannel_error")}this.poll()}},_onWebsocketSuccess:function(e){this._onSuccess(JSON.parse(e.data))},_onPollSuccess:function(e){this._onSuccess(e)},_onWebsocketClose:function(){this.closeWebsocket()},_onPollComplete:function(){this.numActiveXhr-=1},poll:function(e){this.enableWebsocket?setTimeout(this.makeWebsocketRequest.bind(this),this.backOffTime):setTimeout(this.makeJsonpRequest.bind(this,e),this.backOffTime)},start:function(){this.poll(2e3)},stop:function(){this.isActive=!1}});t.start=function(e){"WebSocket"in window||(e.enableWebsocket=!1),l=new h(e.minSeq,e.channel,e.channelHash,e.boxName,e.baseHost,e.targetUrl,e.enableWebsocket),s.execAfterLoadDelayed(function(){l.start()})},t.stop=function(){l&&l.stop()}},"./third_party/autosize.js":function(e,t){!function(i,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if(void 0!==t&&void 0!==e)n(t,e);else{var o={exports:{}};n(o.exports,o),i.autosize=o.exports}}(this,function(e,t){"use strict";function i(e){function t(){var t=window.getComputedStyle(e,null);h=t.overflowY,"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),u="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(u)&&(u=0),o()}function i(t){var i=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=i,h=t,c&&(e.style.overflowY=t),n()}function n(){var t=window.pageYOffset,i=document.body.scrollTop,n=e.style.height;e.style.height="auto";var o=e.scrollHeight+u;if(0===e.scrollHeight)return void(e.style.height=n);e.style.height=o+"px",p=e.clientWidth,document.documentElement.scrollTop=t,document.body.scrollTop=i}function o(){var t=e.style.height;if(n(),window.getComputedStyle(e,null).height!==e.style.height||"hidden"!==h&&i("hidden"),t!==e.style.height){var o=document.createEvent("Event");o.initEvent("autosize:resized",!0,!1),e.dispatchEvent(o)}}var a=arguments[1]===undefined?{}:arguments[1],r=a.setOverflowX,d=r===undefined||r,l=a.setOverflowY,c=l===undefined||l;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!s.has(e)){var u=null,h=null,p=e.clientWidth,f=function(){e.clientWidth!==p&&o()},_=function(t){window.removeEventListener("resize",f),e.removeEventListener("input",o),e.removeEventListener("keyup",o),e.removeEventListener("autosize:destroy",_),s["delete"](e),Object.keys(t).forEach(function(i){e.style[i]=t[i]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",_),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",o),window.addEventListener("resize",f),e.addEventListener("input",o),e.addEventListener("autosize:update",o),s.add(e),d&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),t()}}function n(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:destroy",!0,!1),e.dispatchEvent(t)}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:update",!0,!1),e.dispatchEvent(t)}}var s="function"==typeof Set?new Set:function(){var e=[];return{has:function(t){return Boolean(e.indexOf(t)>-1)},add:function(t){e.push(t)},"delete":function(t){e.splice(e.indexOf(t),1)}}}(),a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(e){return e},a.destroy=function(e){return e},a.update=function(e){return e}):(a=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return i(e,t)}),e},a.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],n),e},a.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),t.exports=a})},"./third_party/blockadblock.js":function(e,t){!function(e){var t=function(t){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},t!==undefined&&this.setOption(t);var i=this,n=function(){setTimeout(function(){!0===i._options.checkOnLoad&&(!0===i._options.debug&&i._log("onload->eventCallback","A check loading is launched"),null===i._var.bait&&i._creatBait(),setTimeout(function(){i.check()},1))},1)};e.addEventListener!==undefined?e.addEventListener("load",n,!1):e.attachEvent("onload",n)};t.prototype._options=null,t.prototype._var=null,t.prototype._bait=null,t.prototype._log=function(e,t){console.log("[BlockAdBlock]["+e+"] "+t)},t.prototype.setOption=function(e,t){if(t!==undefined){var i=e;e={},e[i]=t}for(var n in e)this._options[n]=e[n],!0===this._options.debug&&this._log("setOption",'The option "'+n+'" he was assigned to "'+e[n]+'"');return this},t.prototype._creatBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(t),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,!0===this._options.debug&&this._log("_creatBait","Bait has been created")},t.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null,!0===this._options.debug&&this._log("_destroyBait","Bait has been removed")},t.prototype.check=function(e){if(e===undefined&&(e=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===e?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var t=this;return this._var.loopNumber=0,!0===e&&(this._var.loop=setInterval(function(){t._checkBait(e)},this._options.loopCheckTime)),setTimeout(function(){t._checkBait(e)},1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},t.prototype._checkBait=function(t){var i=!1;if(null===this._var.bait&&this._creatBait(),null===e.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(i=!0),e.getComputedStyle!==undefined){var n=e.getComputedStyle(this._var.bait,null);!n||"none"!=n.getPropertyValue("display")&&"hidden"!=n.getPropertyValue("visibility")||(i=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===i?"positive":"negative")),!0===t&&++this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop(),!0===i?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===t&&(this._var.checking=!1)):null!==this._var.loop&&!1!==t||(this._destroyBait(),this.emitEvent(!1),!0===t&&(this._var.checking=!1))},t.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,!0===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},t.prototype.emitEvent=function(e){!0===this._options.debug&&this._log("emitEvent","An event with a "+(!0===e?"positive":"negative")+" detection was called");var t=this._var.event[!0===e?"detected":"notDetected"];for(var i in t)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(i)+1)+"/"+t.length),t.hasOwnProperty(i)&&t[i]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},t.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},t.prototype.on=function(e,t){return this._var.event[!0===e?"detected":"notDetected"].push(t),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===e?"detected":"notDetected")+'" was added'),this},t.prototype.onDetected=function(e){return this.on(!0,e)},t.prototype.onNotDetected=function(e){return this.on(!1,e)},e.BlockAdBlock=t,e.blockAdBlock===undefined&&(e.blockAdBlock=new t({checkOnLoad:!0,resetOnEnd:!0}))}(window)},"./third_party/browser.js":function(e,t){/*!
  * This utility helps to detect browser type & version.
  * Modified from:
  * https://github.com/ded/bowser
  * MIT License | (c) Dustin Diaz 2015
  */
!function(t,i){void 0!==e&&e.exports?e.exports=i():"function"==typeof define&&define.amd?define(t,i):this[t]=i()}("bowser",function(){function e(e){function t(t){var i=e.match(t);return i&&i.length>1&&i[1]||""}function i(t){var i=e.match(t);return i&&i.length>1&&i[2]||""}var n,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(e),r=!s&&/android/i.test(e),d=/nexus\s*[0-6]\s*/i.test(e),l=!d&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),u=/silk/i.test(e),h=/sailfish/i.test(e),p=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),_=/windows phone/i.test(e),m=(/SamsungBrowser/i.test(e),!_&&/windows/i.test(e)),g=!o&&!u&&/macintosh/i.test(e),v=!r&&!h&&!p&&!f&&/linux/i.test(e),w=t(/edge\/(\d+(\.\d+)?)/i),b=t(/version\/(\d+(\.\d+)?)/i),y=/tablet/i.test(e),C=!y&&/[^-]mobi/i.test(e),k=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:a,version:b||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?n={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:a,version:b||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:a,version:b||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:a,version:b||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:_?(n={name:"Windows Phone",windowsphone:a},w?(n.msedge=a,n.version=w):(n.msie=a,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?n={name:"Chrome",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?n={name:"Microsoft Edge",msedge:a,version:w}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||b}:h?n={name:"Sailfish",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=a)):u?n={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:a,version:b||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(n={name:"WebOS",webos:a,version:b||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=a)):/bada/i.test(e)?n={name:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?n={name:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?n={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?n={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:a},b&&(n.version=b)):o?(n={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},b&&(n.version=b)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||b}:{name:t(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=a):(n.name=n.name||"Webkit",n.webkit=a),!n.version&&b&&(n.version=b)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=a,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.msedge||!r&&!n.silk?o?(n[o]=a,n.ios=a):g?n.mac=a:k?n.xbox=a:m?n.windows=a:v&&(n.linux=a):n.android=a;var S="";n.windowsphone?S=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o?(S=t(/os (\d+([_\s]\d+)*) like mac os x/i),S=S.replace(/[_\s]/g,".")):r?S=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?S=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?S=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?S=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(S=t(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(n.osversion=S);var E=S.split(".")[0];return y||l||"ipad"==o||r&&(3==E||E>=4&&!C)||n.silk?n.tablet=a:(C||"iphone"==o||"ipod"==o||r||d||n.blackberry||n.webos||n.bada)&&(n.mobile=a),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=a:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=a:n.x=a,n}function t(e){return e.split(".").length}function i(e,t){var i,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i++)n.push(t(e[i]));return n}function n(e){for(var n=Math.max(t(e[0]),t(e[1])),o=i(e,function(e){var o=n-t(e);return e+=new Array(o+1).join(".0"),i(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--n>=0;){if(o[0][n]>o[1][n])return 1;if(o[0][n]!==o[1][n])return-1;if(0===n)return 0}}function o(t,i,o){var s=r;"string"==typeof i&&(o=i,i=void 0),void 0===i&&(i=!1),o&&(s=e(o));var a=""+s.version;for(var d in t)if(t.hasOwnProperty(d)&&s[d])return n([a,t[d]])<0;return i}function s(e,t,i){return!o(e,t,i)}var a=!0,r=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return r.test=function(e){for(var t=0;t<e.length;++t){var i=e[t];if("string"==typeof i&&i in r)return!0}return!1},r.isUnsupportedBrowser=o,r.compareVersions=n,r.check=s,r._detect=e,r})},"./third_party/insertion_query.js":function(e,t){t.insertionQ=function(){"use strict";function e(e,t){var n,o="insQ_"+a++,s=function(e){e.animationName!==o&&e[d]!==o||i(e.target)||t(e.target)};n=document.createElement("style"),n.innerHTML="@"+l+"keyframes "+o+" {  from {  outline: 1px solid transparent  } to {  outline: 0px solid transparent }  }\n"+e+" { animation-duration: 0.001s; animation-name: "+o+"; "+l+"animation-duration: 0.001s; "+l+"animation-name: "+o+";  } ",document.head.appendChild(n);var r=setTimeout(function(){document.addEventListener("animationstart",s,!1),document.addEventListener("MSAnimationStart",s,!1),document.addEventListener("webkitAnimationStart",s,!1)},p.timeout);return{destroy:function(){clearTimeout(r),n&&(document.head.removeChild(n),n=null),document.removeEventListener("animationstart",s),document.removeEventListener("MSAnimationStart",s),document.removeEventListener("webkitAnimationStart",s)}}}function t(e){e.QinsQ=!0}function i(e){return p.strictlyNew&&!0===e.QinsQ}function n(e){return i(e.parentNode)?e:n(e.parentNode)}function o(e){for(t(e),e=e.firstChild;e;e=e.nextSibling)e!==undefined&&1===e.nodeType&&o(e)}function s(s,a){var r=[],d=function(){var e;return function(){clearTimeout(e),e=setTimeout(function(){r.forEach(o),a(r),r=[]},10)}}();return e(s,function(e){if(!i(e)){t(e);var o=n(e);r.indexOf(o)<0&&r.push(o),d()}})}var a=100,r=!1,d="animationName",l="",c="Webkit Moz O ms Khtml".split(" "),u="",h=document.createElement("div"),p={strictlyNew:!0,timeout:20};if(h.style.animationName&&(r=!0),!1===r)for(var f=0;f<c.length;f++)if(h.style[c[f]+"AnimationName"]!==undefined){u=c[f],d=u+"AnimationName",l="-"+u.toLowerCase()+"-",r=!0;break}var _=function(t){return!(!r||!t.match(/[^{}]/))&&(p.strictlyNew&&o(document.body),{every:function(i){return e(t,i)},summary:function(e){return s(t,e)}})};return _.config=function(e){for(var t in e)e.hasOwnProperty(t)&&(p[t]=e[t])},_}()},"./third_party/intersection-observer.js":function(e,t){!function(e,i){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||u(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,n=this.intersectionRect,o=n.width*n.height;this.intersectionRatio=i?o/i:0}function o(e,t){var i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=a(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function s(){return e.performance&&performance.now&&performance.now()}function a(e,t){var i=null;return function(){i||(i=setTimeout(function(){e(),i=null},t))}}function r(e,t,i,n){"function"==typeof e.addEventListener?e.addEventListener(t,i,n||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function d(e,t,i,n){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,n||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i)}function l(e,t){var i=Math.max(e.top,t.top),n=Math.min(e.bottom,t.bottom),o=Math.max(e.left,t.left),s=Math.min(e.right,t.right),a=s-o,r=n-i;return a>=0&&r>=0&&{top:i,bottom:n,left:o,right:s,width:a,height:r}}function c(e){var t=e.getBoundingClientRect();if(t)return t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t}function u(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}var h=i.documentElement,p=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]})},o.prototype._parseRootMargin=function(e){var t=e||"0px",i=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return i[1]=i[1]||i[0],i[2]=i[2]||i[0],i[3]=i[3]||i[1],i},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(e,"resize",this._checkForIntersections,!0),r(i,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(i,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,d(e,"resize",this._checkForIntersections,!0),d(i,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():u();this._observationTargets.forEach(function(i){var o=i.element,a=c(o),r=this._rootContainsTarget(o),d=i.entry,l=e&&r&&this._computeTargetAndRootIntersection(o,t),u=i.entry=new n({time:s(),target:o,boundingClientRect:a,rootBounds:t,intersectionRect:l});e&&r?this._hasCrossedThreshold(d,u)&&this._queuedEntries.push(u):d&&d.isIntersecting&&this._queuedEntries.push(u)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(t,i){if("none"!=e.getComputedStyle(t).display){return l(i,c(t))}},o.prototype._getRootRect=function(){var e;if(this.root)e=c(this.root);else{var t=i.documentElement,n=i.body;e={top:0,left:0,right:t.clientWidth||n.clientWidth,width:t.clientWidth||n.clientWidth,bottom:t.clientHeight||n.clientHeight,height:t.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,i){return"px"==t.unit?t.value:t.value*(i%2?e.width:e.height)/100}),i={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},o.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,n=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==n)for(var o=0;o<this.thresholds.length;o++){var s=this.thresholds[o];if(s==i||s==n||s<i!=s<n)return!0}},o.prototype._rootIsInDom=function(){return!this.root||h.contains(this.root)},o.prototype._rootContainsTarget=function(e){return(this.root||h).contains(e)},o.prototype._registerInstance=function(){p.indexOf(this)<0&&p.push(this)},o.prototype._unregisterInstance=function(){var e=p.indexOf(this);-1!=e&&p.splice(e,1)},"IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype||(e.IntersectionObserver=o,e.IntersectionObserverEntry=n),t.IntersectionObserver=o}(window,document)},"./third_party/jquery3.js":function(e,t){/*!
 * jQuery JavaScript Library v3.0.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2016-06-09T18:02Z
 */
!function(t,i){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e,t){t=t||Z;var i=t.createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}function n(e){var t=!!e&&"length"in e&&e.length,i=he.type(e);return"function"!==i&&!he.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function o(e,t,i){if(he.isFunction(t))return he.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return he.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(Ce.test(t))return he.filter(t,e,i);t=he.filter(t,e)}return he.grep(e,function(e){return oe.call(t,e)>-1!==i&&1===e.nodeType})}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t={};return he.each(e.match(Te)||[],function(e,i){t[i]=!0}),t}function r(e){return e}function d(e){throw e}function l(e,t,i){var n;try{e&&he.isFunction(n=e.promise)?n.call(e).done(t).fail(i):e&&he.isFunction(n=e.then)?n.call(e,t,i):t.call(undefined,e)}catch(e){i.call(undefined,e)}}function c(){Z.removeEventListener("DOMContentLoaded",c),e.removeEventListener("load",c),he.ready()}function u(){this.expando=he.expando+u.uid++}function h(e,t,i){var n;if(i===undefined&&1===e.nodeType)if(n="data-"+t.replace(Oe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:Me.test(i)?JSON.parse(i):i)}catch(e){}Ie.set(e,t,i)}else i=undefined;return i}function p(e,t,i,n){var o,s=1,a=20,r=n?function(){return n.cur()}:function(){return he.css(e,t,"")},d=r(),l=i&&i[3]||(he.cssNumber[t]?"":"px"),c=(he.cssNumber[t]||"px"!==l&&+d)&&Pe.exec(he.css(e,t));if(c&&c[3]!==l){l=l||c[3],i=i||[],c=+d||1;do{s=s||".5",c/=s,he.style(e,t,c+l)}while(s!==(s=r()/d)&&1!==s&&--a)}return i&&(c=+c||+d||0,o=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=c,n.end=o)),o}function f(e){var t,i=e.ownerDocument,n=e.nodeName,o=qe[n];return o||(t=i.body.appendChild(i.createElement(n)),o=he.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),qe[n]=o,o)}function _(e,t){for(var i,n,o=[],s=0,a=e.length;s<a;s++)n=e[s],n.style&&(i=n.style.display,t?("none"===i&&(o[s]=je.get(n,"display")||null,o[s]||(n.style.display="")),""===n.style.display&&Be(n)&&(o[s]=f(n))):"none"!==i&&(o[s]="none",je.set(n,"display",i)));for(s=0;s<a;s++)null!=o[s]&&(e[s].style.display=o[s]);return e}function m(e,t){var i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&he.nodeName(e,t)?he.merge([e],i):i}function g(e,t){for(var i=0,n=e.length;i<n;i++)je.set(e[i],"globalEval",!t||je.get(t[i],"globalEval"))}function v(e,t,i,n,o){for(var s,a,r,d,l,c,u=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((s=e[p])||0===s)if("object"===he.type(s))he.merge(h,s.nodeType?[s]:s);else if(Ge.test(s)){for(a=a||u.appendChild(t.createElement("div")),r=(He.exec(s)||["",""])[1].toLowerCase(),d=Ve[r]||Ve._default,a.innerHTML=d[1]+he.htmlPrefilter(s)+d[2],c=d[0];c--;)a=a.lastChild;he.merge(h,a.childNodes),a=u.firstChild,a.textContent=""}else h.push(t.createTextNode(s));for(u.textContent="",p=0;s=h[p++];)if(n&&he.inArray(s,n)>-1)o&&o.push(s);else if(l=he.contains(s.ownerDocument,s),a=m(u.appendChild(s),"script"),l&&g(a),i)for(c=0;s=a[c++];)We.test(s.type||"")&&i.push(s);return u}function w(){return!0}function b(){return!1}function y(){try{return Z.activeElement}catch(e){}}function C(e,t,i,n,o,s){var a,r;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=undefined);for(r in t)C(e,r,i,n,t[r],s);return e}if(null==n&&null==o?(o=i,n=i=undefined):null==o&&("string"==typeof i?(o=n,n=undefined):(o=n,n=i,i=undefined)),!1===o)o=b;else if(!o)return e;return 1===s&&(a=o,o=function(e){return he().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=he.guid++)),e.each(function(){he.event.add(this,t,o,n,i)})}function k(e,t){return he.nodeName(e,"table")&&he.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function S(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function E(e){var t=et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function x(e,t){var i,n,o,s,a,r,d,l;if(1===t.nodeType){if(je.hasData(e)&&(s=je.access(e),a=je.set(t,s),l=s.events)){delete a.handle,a.events={};for(o in l)for(i=0,n=l[o].length;i<n;i++)he.event.add(t,o,l[o][i])}Ie.hasData(e)&&(r=Ie.access(e),d=he.extend({},r),Ie.set(t,d))}}function T(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Ue.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function A(e,t,n,o){t=ie.apply([],t);var s,a,r,d,l,c,u=0,h=e.length,p=h-1,f=t[0],_=he.isFunction(f);if(_||h>1&&"string"==typeof f&&!ce.checkClone&&Ze.test(f))return e.each(function(i){var s=e.eq(i);_&&(t[0]=f.call(this,i,s.html())),A(s,t,n,o)});if(h&&(s=v(t,e[0].ownerDocument,!1,e,o),a=s.firstChild,1===s.childNodes.length&&(s=a),a||o)){for(r=he.map(m(s,"script"),S),d=r.length;u<h;u++)l=s,u!==p&&(l=he.clone(l,!0,!0),d&&he.merge(r,m(l,"script"))),n.call(e[u],l,u);if(d)for(c=r[r.length-1].ownerDocument,he.map(r,E),u=0;u<d;u++)l=r[u],We.test(l.type||"")&&!je.access(l,"globalEval")&&he.contains(c,l)&&(l.src?he._evalUrl&&he._evalUrl(l.src):i(l.textContent.replace(tt,""),c))}return e}function L(e,t,i){for(var n,o=t?he.filter(t,e):e,s=0;null!=(n=o[s]);s++)i||1!==n.nodeType||he.cleanData(m(n)),n.parentNode&&(i&&he.contains(n.ownerDocument,n)&&g(m(n,"script")),n.parentNode.removeChild(n));return e}function $(e,t,i){var n,o,s,a,r=e.style;return i=i||ot(e),i&&(a=i.getPropertyValue(t)||i[t],""!==a||he.contains(e.ownerDocument,e)||(a=he.style(e,t)),!ce.pixelMarginRight()&&nt.test(a)&&it.test(t)&&(n=r.width,o=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=a,a=i.width,r.width=n,r.minWidth=o,r.maxWidth=s)),a!==undefined?a+"":a}function D(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function j(e){if(e in lt)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=dt.length;i--;)if((e=dt[i]+t)in lt)return e}function I(e,t,i){var n=Pe.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function M(e,t,i,n,o){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,a=0;s<4;s+=2)"margin"===i&&(a+=he.css(e,i+Re[s],!0,o)),n?("content"===i&&(a-=he.css(e,"padding"+Re[s],!0,o)),"margin"!==i&&(a-=he.css(e,"border"+Re[s]+"Width",!0,o))):(a+=he.css(e,"padding"+Re[s],!0,o),"padding"!==i&&(a+=he.css(e,"border"+Re[s]+"Width",!0,o)));return a}function O(e,t,i){var n,o=!0,s=ot(e),a="border-box"===he.css(e,"boxSizing",!1,s);if(e.getClientRects().length&&(n=e.getBoundingClientRect()[t]),n<=0||null==n){if(n=$(e,t,s),(n<0||null==n)&&(n=e.style[t]),nt.test(n))return n;o=a&&(ce.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+M(e,t,i||(a?"border":"content"),o,s)+"px"}function N(e,t,i,n,o){return new N.prototype.init(e,t,i,n,o)}function P(){ut&&(e.requestAnimationFrame(P),he.fx.tick())}function R(){return e.setTimeout(function(){ct=undefined}),ct=he.now()}function B(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)i=Re[n],o["margin"+i]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function F(e,t,i){for(var n,o=(H.tweeners[t]||[]).concat(H.tweeners["*"]),s=0,a=o.length;s<a;s++)if(n=o[s].call(i,t,e))return n}function q(e,t,i){var n,o,s,a,r,d,l,c,u="width"in t||"height"in t,h=this,p={},f=e.style,m=e.nodeType&&Be(e),g=je.get(e,"fxshow");i.queue||(a=he._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,r=a.empty.fire,a.empty.fire=function(){a.unqueued||r()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,he.queue(e,"fx").length||a.empty.fire()})}));for(n in t)if(o=t[n],ht.test(o)){if(delete t[n],s=s||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||g[n]===undefined)continue;m=!0}p[n]=g&&g[n]||he.style(e,n)}if((d=!he.isEmptyObject(t))||!he.isEmptyObject(p)){u&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],l=g&&g.display,null==l&&(l=je.get(e,"display")),c=he.css(e,"display"),"none"===c&&(l?c=l:(_([e],!0),l=e.style.display||l,c=he.css(e,"display"),_([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===he.css(e,"float")&&(d||(h.done(function(){f.display=l}),null==l&&(c=f.display,l="none"===c?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),d=!1;for(n in p)d||(g?"hidden"in g&&(m=g.hidden):g=je.access(e,"fxshow",{display:l}),s&&(g.hidden=!m),m&&_([e],!0),h.done(function(){m||_([e]),je.remove(e,"fxshow");for(n in p)he.style(e,n,p[n])})),d=F(m?g[n]:0,n,h),n in g||(g[n]=d.start,m&&(d.end=d.start,d.start=0))}}function U(e,t){var i,n,o,s,a;for(i in e)if(n=he.camelCase(i),o=t[n],s=e[i],he.isArray(s)&&(o=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),(a=he.cssHooks[n])&&"expand"in a){s=a.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=o)}else t[n]=o}function H(e,t,i){var n,o,s=0,a=H.prefilters.length,r=he.Deferred().always(function(){delete d.elem}),d=function(){if(o)return!1;for(var t=ct||R(),i=Math.max(0,l.startTime+l.duration-t),n=i/l.duration||0,s=1-n,a=0,d=l.tweens.length;a<d;a++)l.tweens[a].run(s);return r.notifyWith(e,[l,s,i]),s<1&&d?i:(r.resolveWith(e,[l]),!1)},l=r.promise({elem:e,props:he.extend({},t),opts:he.extend(!0,{specialEasing:{},easing:he.easing._default},i),originalProperties:t,originalOptions:i,startTime:ct||R(),duration:i.duration,tweens:[],createTween:function(t,i){var n=he.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var i=0,n=t?l.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)l.tweens[i].run(1);return t?(r.notifyWith(e,[l,1,0]),r.resolveWith(e,[l,t])):r.rejectWith(e,[l,t]),this}}),c=l.props;for(U(c,l.opts.specialEasing);s<a;s++)if(n=H.prefilters[s].call(l,e,c,l.opts))return he.isFunction(n.stop)&&(he._queueHooks(l.elem,l.opts.queue).stop=he.proxy(n.stop,n)),n;return he.map(c,F,l),he.isFunction(l.opts.start)&&l.opts.start.call(e,l),he.fx.timer(he.extend(d,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function W(e){return e.getAttribute&&e.getAttribute("class")||""}function V(e,t,i,n){var o;if(he.isArray(t))he.each(t,function(t,o){i||Et.test(e)?n(e,o):V(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,i,n)});else if(i||"object"!==he.type(t))n(e,t);else for(o in t)V(e+"["+o+"]",t[o],i,n)}function G(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,s=t.toLowerCase().match(Te)||[];if(he.isFunction(i))for(;n=s[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Q(e,t,i,n){function o(r){var d;return s[r]=!0,he.each(e[r]||[],function(e,r){var l=r(t,i,n);return"string"!=typeof l||a||s[l]?a?!(d=l):void 0:(t.dataTypes.unshift(l),o(l),!1)}),d}var s={},a=e===Pt;return o(t.dataTypes[0])||!s["*"]&&o("*")}function z(e,t){var i,n,o=he.ajaxSettings.flatOptions||{};for(i in t)t[i]!==undefined&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&he.extend(!0,e,n),e}function K(e,t,i){for(var n,o,s,a,r=e.contents,d=e.dataTypes;"*"===d[0];)d.shift(),n===undefined&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in r)if(r[o]&&r[o].test(n)){d.unshift(o);break}if(d[0]in i)s=d[0];else{for(o in i){if(!d[0]||e.converters[o+" "+d[0]]){s=o;break}a||(a=o)}s=s||a}if(s)return s!==d[0]&&d.unshift(s),i[s]}function J(e,t,i,n){var o,s,a,r,d,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(s=c.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!d&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),d=s,s=c.shift())if("*"===s)s=d;else if("*"!==d&&d!==s){if(!(a=l[d+" "+s]||l["* "+s]))for(o in l)if(r=o.split(" "),r[1]===s&&(a=l[d+" "+r[0]]||l["* "+r[0]])){!0===a?a=l[o]:!0!==l[o]&&(s=r[0],c.unshift(r[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+d+" to "+s}}}return{state:"success",data:t}}function X(e){return he.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],Z=e.document,ee=Object.getPrototypeOf,te=Y.slice,ie=Y.concat,ne=Y.push,oe=Y.indexOf,se={},ae=se.toString,re=se.hasOwnProperty,de=re.toString,le=de.call(Object),ce={},ue="3.0.0",he=function(e,t){return new he.fn.init(e,t)},pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,fe=/^-ms-/,_e=/-([a-z])/g,me=function(e,t){return t.toUpperCase()};he.fn=he.prototype={jquery:ue,constructor:he,length:0,toArray:function(){return te.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:te.call(this)},pushStack:function(e){var t=he.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return he.each(this,e)},map:function(e){return this.pushStack(he.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ne,sort:Y.sort,splice:Y.splice},he.extend=he.fn.extend=function(){var e,t,i,n,o,s,a=arguments[0]||{},r=1,d=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[r]||{},r++),"object"==typeof a||he.isFunction(a)||(a={}),r===d&&(a=this,r--);r<d;r++)if(null!=(e=arguments[r]))for(t in e)i=a[t],n=e[t],a!==n&&(l&&n&&(he.isPlainObject(n)||(o=he.isArray(n)))?(o?(o=!1,s=i&&he.isArray(i)?i:[]):s=i&&he.isPlainObject(i)?i:{},a[t]=he.extend(l,s,n)):n!==undefined&&(a[t]=n));return a},he.extend({expando:"jQuery"+(ue+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===he.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=he.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==ae.call(e))&&(!(t=ee(e))||"function"==typeof(i=re.call(t,"constructor")&&t.constructor)&&de.call(i)===le)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?se[ae.call(e)]||"object":typeof e},globalEval:function(e){i(e)},camelCase:function(e){return e.replace(fe,"ms-").replace(_e,me)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,o=0;if(n(e))for(i=e.length;o<i&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(pe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?he.merge(i,"string"==typeof e?[e]:e):ne.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:oe.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,s=e.length,a=!i;o<s;o++)!t(e[o],o)!==a&&n.push(e[o]);return n},map:function(e,t,i){var o,s,a=0,r=[];if(n(e))for(o=e.length;a<o;a++)null!=(s=t(e[a],a,i))&&r.push(s);else for(a in e)null!=(s=t(e[a],a,i))&&r.push(s);return ie.apply([],r)},guid:1,proxy:function(e,t){var i,n,o;return"string"==typeof t&&(i=e[t],t=e,e=i),he.isFunction(e)?(n=te.call(arguments,2),o=function(){return e.apply(t||this,n.concat(te.call(arguments)))},o.guid=e.guid=e.guid||he.guid++,o):undefined},now:Date.now,support:ce}),"function"==typeof Symbol&&(he.fn[Symbol.iterator]=Y[Symbol.iterator]),he.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){se["[object "+t+"]"]=t.toLowerCase()});var ge=/*!
 * Sizzle CSS Selector Engine v2.3.0
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-01-04
 */
function(e){function t(e,t,i,n){var o,s,a,r,d,l,c,h=t&&t.ownerDocument,f=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return i;if(!n&&((t?t.ownerDocument||t:q)!==I&&j(t),t=t||I,O)){if(11!==f&&(d=ge.exec(e)))if(o=d[1]){if(9===f){if(!(a=t.getElementById(o)))return i;if(a.id===o)return i.push(a),i}else if(h&&(a=h.getElementById(o))&&B(t,a)&&a.id===o)return i.push(a),i}else{if(d[2])return Y.apply(i,t.getElementsByTagName(e)),i;if((o=d[3])&&C.getElementsByClassName&&t.getElementsByClassName)return Y.apply(i,t.getElementsByClassName(o)),i}if(C.qsa&&!G[e+" "]&&(!N||!N.test(e))){if(1!==f)h=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((r=t.getAttribute("id"))?r=r.replace(ye,Ce):t.setAttribute("id",r=F),l=x(e),s=l.length;s--;)l[s]="#"+r+" "+p(l[s]);c=l.join(","),h=ve.test(e)&&u(t.parentNode)||t}if(c)try{return Y.apply(i,h.querySelectorAll(c)),i}catch(e){}finally{r===F&&t.removeAttribute("id")}}}return A(e.replace(re,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>k.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[F]=!0,e}function o(e){var t=I.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),n=i.length;n--;)k.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function r(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function d(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function l(e){return function(t){return"label"in t&&t.disabled===e||"form"in t&&t.disabled===e||"form"in t&&!1===t.disabled&&(t.isDisabled===e||t.isDisabled!==!e&&("label"in t||!Se(t))!==e)}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var o,s=e([],i.length,t),a=s.length;a--;)i[o=s[a]]&&(i[o]=!(n[o]=i[o]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function p(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function f(e,t,i){var n=t.dir,o=t.next,s=o||n,a=i&&"parentNode"===s,r=H++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,o)}:function(t,i,d){var l,c,u,h=[U,r];if(d){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,d))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(u=t[F]||(t[F]={}),c=u[t.uniqueID]||(u[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((l=c[s])&&l[0]===U&&l[1]===r)return h[2]=l[2];if(c[s]=h,h[2]=e(t,i,d))return!0}}}function _(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function m(e,i,n){for(var o=0,s=i.length;o<s;o++)t(e,i[o],n);return n}function g(e,t,i,n,o){for(var s,a=[],r=0,d=e.length,l=null!=t;r<d;r++)(s=e[r])&&(i&&!i(s,n,o)||(a.push(s),l&&t.push(r)));return a}function v(e,t,i,o,s,a){return o&&!o[F]&&(o=v(o)),s&&!s[F]&&(s=v(s,a)),n(function(n,a,r,d){var l,c,u,h=[],p=[],f=a.length,_=n||m(t||"*",r.nodeType?[r]:r,[]),v=!e||!n&&t?_:g(_,h,e,r,d),w=i?s||(n?e:f||o)?[]:a:v;if(i&&i(v,w,r,d),o)for(l=g(w,p),o(l,[],r,d),c=l.length;c--;)(u=l[c])&&(w[p[c]]=!(v[p[c]]=u));if(n){if(s||e){if(s){for(l=[],c=w.length;c--;)(u=w[c])&&l.push(v[c]=u);s(null,w=[],l,d)}for(c=w.length;c--;)(u=w[c])&&(l=s?ee(n,u):h[c])>-1&&(n[l]=!(a[l]=u))}}else w=g(w===a?w.splice(f,w.length):w),s?s(null,a,w,d):Y.apply(a,w)})}function w(e){for(var t,i,n,o=e.length,s=k.relative[e[0].type],a=s||k.relative[" "],r=s?1:0,d=f(function(e){return e===t},a,!0),l=f(function(e){return ee(t,e)>-1},a,!0),c=[function(e,i,n){var o=!s&&(n||i!==L)||((t=i).nodeType?d(e,i,n):l(e,i,n));return t=null,o}];r<o;r++)if(i=k.relative[e[r].type])c=[f(_(c),i)];else{if(i=k.filter[e[r].type].apply(null,e[r].matches),i[F]){for(n=++r;n<o&&!k.relative[e[n].type];n++);return v(r>1&&_(c),r>1&&p(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(re,"$1"),i,r<n&&w(e.slice(r,n)),n<o&&w(e=e.slice(n)),n<o&&p(e))}c.push(i)}return _(c)}function b(e,i){var o=i.length>0,s=e.length>0,a=function(n,a,r,d,l){var c,u,h,p=0,f="0",_=n&&[],m=[],v=L,w=n||s&&k.find.TAG("*",l),b=U+=null==v?1:Math.random()||.1,y=w.length;for(l&&(L=a===I||a||l);f!==y&&null!=(c=w[f]);f++){if(s&&c){for(u=0,a||c.ownerDocument===I||(j(c),r=!O);h=e[u++];)if(h(c,a||I,r)){d.push(c);break}l&&(U=b)}o&&((c=!h&&c)&&p--,n&&_.push(c))}if(p+=f,o&&f!==p){for(u=0;h=i[u++];)h(_,m,a,r);if(n){if(p>0)for(;f--;)_[f]||m[f]||(m[f]=J.call(d));m=g(m)}Y.apply(d,m),l&&!n&&m.length>0&&p+i.length>1&&t.uniqueSort(d)}return l&&(U=b,L=v),_};return o?n(a):a}var y,C,k,S,E,x,T,A,L,$,D,j,I,M,O,N,P,R,B,F="sizzle"+1*new Date,q=e.document,U=0,H=0,W=i(),V=i(),G=i(),Q=function(e,t){return e===t&&(D=!0),0},z={}.hasOwnProperty,K=[],J=K.pop,X=K.push,Y=K.push,Z=K.slice,ee=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",oe="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ie+"*\\]",se=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ie+"+","g"),re=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),de=new RegExp("^"+ie+"*,"+ie+"*"),le=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ce=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),ue=new RegExp(se),he=new RegExp("^"+ne+"$"),pe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,_e=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),be=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ye=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,Ce=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ke=function(){j()},Se=f(function(e){return!0===e.disabled},{dir:"parentNode",next:"legend"});try{Y.apply(K=Z.call(q.childNodes),q.childNodes),K[q.childNodes.length].nodeType}catch(e){Y={apply:K.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}C=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},j=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:q;return n!==I&&9===n.nodeType&&n.documentElement?(I=n,M=I.documentElement,O=!E(I),q!==I&&(i=I.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ke,!1):i.attachEvent&&i.attachEvent("onunload",ke)),C.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=o(function(e){return e.appendChild(I.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=me.test(I.getElementsByClassName),C.getById=o(function(e){return M.appendChild(e).id=F,!I.getElementsByName||!I.getElementsByName(F).length}),C.getById?(k.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var i=t.getElementById(e);return i?[i]:[]}},k.filter.ID=function(e){var t=e.replace(we,be);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(we,be);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),k.find.TAG=C.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):C.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},k.find.CLASS=C.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&O)return t.getElementsByClassName(e)},P=[],N=[],(C.qsa=me.test(I.querySelectorAll))&&(o(function(e){M.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+F+"-]").length||N.push("~="),e.querySelectorAll(":checked").length||N.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||N.push(".#.+[+~]")}),o(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=I.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+ie+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&N.push(":enabled",":disabled"),M.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(C.matchesSelector=me.test(R=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&o(function(e){C.disconnectedMatch=R.call(e,"*"),R.call(e,"[s!='']:x"),P.push("!=",se)}),N=N.length&&new RegExp(N.join("|")),P=P.length&&new RegExp(P.join("|")),t=me.test(M.compareDocumentPosition),B=t||me.test(M.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Q=t?function(e,t){if(e===t)return D=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!C.sortDetached&&t.compareDocumentPosition(e)===i?e===I||e.ownerDocument===q&&B(q,e)?-1:t===I||t.ownerDocument===q&&B(q,t)?1:$?ee($,e)-ee($,t):0:4&i?-1:1)}:function(e,t){if(e===t)return D=!0,0;var i,n=0,o=e.parentNode,s=t.parentNode,r=[e],d=[t];if(!o||!s)return e===I?-1:t===I?1:o?-1:s?1:$?ee($,e)-ee($,t):0;if(o===s)return a(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)d.unshift(i);for(;r[n]===d[n];)n++;return n?a(r[n],d[n]):r[n]===q?-1:d[n]===q?1:0},I):I},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==I&&j(e),i=i.replace(ce,"='$1']"),C.matchesSelector&&O&&!G[i+" "]&&(!P||!P.test(i))&&(!N||!N.test(i)))try{var n=R.call(e,i);if(n||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(i,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&j(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&j(e);var i=k.attrHandle[t.toLowerCase()],n=i&&z.call(k.attrHandle,t.toLowerCase())?i(e,t,!O):undefined;return n!==undefined?n:C.attributes||!O?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(ye,Ce)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,o=0;if(D=!C.detectDuplicates,$=!C.sortStable&&e.slice(0),e.sort(Q),D){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return $=null,e},S=t.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=S(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=S(t);return i},k=t.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,be),e[3]=(e[3]||e[4]||e[5]||"").replace(we,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ue.test(i)&&(t=x(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(o){var s=t.attr(o,e);return null==s?"!="===i:!i||(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(ae," ")+" ").indexOf(n)>-1:"|="===i&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,o){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),r="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,d){var l,c,u,h,p,f,_=s!==a?"nextSibling":"previousSibling",m=t.parentNode,g=r&&t.nodeName.toLowerCase(),v=!d&&!r,w=!1;if(m){if(s){for(;_;){for(h=t;h=h[_];)if(r?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;f=_="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&v){for(h=m,u=h[F]||(h[F]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),l=c[e]||[],p=l[0]===U&&l[1],w=p&&l[2],h=p&&m.childNodes[p];h=++p&&h&&h[_]||(w=p=0)||f.pop();)if(1===h.nodeType&&++w&&h===t){c[e]=[U,p,w];break}}else if(v&&(h=t,u=h[F]||(h[F]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),l=c[e]||[],p=l[0]===U&&l[1],w=p),!1===w)for(;(h=++p&&h&&h[_]||(w=p=0)||f.pop())&&((r?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++w||(v&&(u=h[F]||(h[F]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),c[e]=[U,w]),h!==t)););return(w-=o)===n||w%n==0&&w/n>=0}}},PSEUDO:function(e,i){var o,s=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[F]?s(i):s.length>1?(o=[e,e,"",i],k.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,o=s(e,i),a=o.length;a--;)n=ee(e,o[a]),e[n]=!(t[n]=o[a])}):function(e){return s(e,0,o)}):s}},pseudos:{not:n(function(e){var t=[],i=[],o=T(e.replace(re,"$1"));return o[F]?n(function(e,t,i,n){for(var s,a=o(e,null,n,[]),r=e.length;r--;)(s=a[r])&&(e[r]=!(t[r]=s))}):function(e,n,s){return t[0]=e,o(t,null,s,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(we,be),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:n(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,be).toLowerCase(),function(t){var i;do{if(i=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return _e.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[i<0?i+t:i]}),even:c(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},k.pseudos.nth=k.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[y]=r(y);for(y in{submit:!0,reset:!0})k.pseudos[y]=d(y);return h.prototype=k.filters=k.pseudos,k.setFilters=new h,x=t.tokenize=function(e,i){var n,o,s,a,r,d,l,c=V[e+" "];if(c)return i?0:c.slice(0);for(r=e,d=[],l=k.preFilter;r;){n&&!(o=de.exec(r))||(o&&(r=r.slice(o[0].length)||r),d.push(s=[])),n=!1,(o=le.exec(r))&&(n=o.shift(),s.push({value:n,type:o[0].replace(re," ")}),r=r.slice(n.length));for(a in k.filter)!(o=pe[a].exec(r))||l[a]&&!(o=l[a](o))||(n=o.shift(),s.push({value:n,type:a,matches:o}),r=r.slice(n.length));if(!n)break}return i?r.length:r?t.error(e):V(e,d).slice(0)},T=t.compile=function(e,t){var i,n=[],o=[],s=G[e+" "];if(!s){for(t||(t=x(e)),i=t.length;i--;)s=w(t[i]),s[F]?n.push(s):o.push(s);s=G(e,b(o,n)),s.selector=e}return s},A=t.select=function(e,t,i,n){var o,s,a,r,d,l="function"==typeof e&&e,c=!n&&x(e=l.selector||e);if(i=i||[],1===c.length){if(s=c[0]=c[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&C.getById&&9===t.nodeType&&O&&k.relative[s[1].type]){if(!(t=(k.find.ID(a.matches[0].replace(we,be),t)||[])[0]))return i;l&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(o=pe.needsContext.test(e)?0:s.length;o--&&(a=s[o],!k.relative[r=a.type]);)if((d=k.find[r])&&(n=d(a.matches[0].replace(we,be),ve.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(o,1),!(e=n.length&&p(s)))return Y.apply(i,n),i;break}}return(l||T(e,c))(n,t,!O,i,!t||ve.test(e)&&u(t.parentNode)||t),i},C.sortStable=F.split("").sort(Q).join("")===F,C.detectDuplicates=!!D,j(),C.sortDetached=o(function(e){return 1&e.compareDocumentPosition(I.createElement("fieldset"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);he.find=ge,he.expr=ge.selectors,he.expr[":"]=he.expr.pseudos,he.uniqueSort=he.unique=ge.uniqueSort,he.text=ge.getText,he.isXMLDoc=ge.isXML,he.contains=ge.contains,he.escapeSelector=ge.escape;var ve=function(e,t,i){for(var n=[],o=i!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&he(e).is(i))break;n.push(e)}return n},we=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},be=he.expr.match.needsContext,ye=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Ce=/^.[^:#\[\.,]*$/;he.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?he.find.matchesSelector(n,e)?[n]:[]:he.find.matches(e,he.grep(t,function(e){return 1===e.nodeType}))},he.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(he(e).filter(function(){for(t=0;t<n;t++)if(he.contains(o[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)he.find(e,o[t],i);return n>1?he.uniqueSort(i):i},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&be.test(e)?he(e):e||[],!1).length}});var ke,Se=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(he.fn.init=function(e,t,i){var n,o;if(!e)return this;if(i=i||ke,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Se.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof he?t[0]:t,he.merge(this,he.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Z,!0)),ye.test(n[1])&&he.isPlainObject(t))for(n in t)he.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return o=Z.getElementById(n[2]),o&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):he.isFunction(e)?i.ready!==undefined?i.ready(e):e(he):he.makeArray(e,this)}).prototype=he.fn,ke=he(Z);var Ee=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};he.fn.extend({has:function(e){var t=he(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(he.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,o=this.length,s=[],a="string"!=typeof e&&he(e);if(!be.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&he.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?he.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?oe.call(he(e),this[0]):oe.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(he.uniqueSort(he.merge(this.get(),he(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),he.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ve(e,"parentNode")},parentsUntil:function(e,t,i){return ve(e,"parentNode",i)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return ve(e,"nextSibling")},prevAll:function(e){return ve(e,"previousSibling")},nextUntil:function(e,t,i){return ve(e,"nextSibling",i)},prevUntil:function(e,t,i){return ve(e,"previousSibling",i)},siblings:function(e){return we((e.parentNode||{}).firstChild,e)},children:function(e){return we(e.firstChild)},contents:function(e){return e.contentDocument||he.merge([],e.childNodes)}},function(e,t){he.fn[e]=function(i,n){var o=he.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=he.filter(n,o)),this.length>1&&(xe[e]||he.uniqueSort(o),Ee.test(e)&&o.reverse()),this.pushStack(o)}});var Te=/\S+/g;he.Callbacks=function(e){e="string"==typeof e?a(e):he.extend({},e);var t,i,n,o,s=[],r=[],d=-1,l=function(){for(o=e.once,n=t=!0;r.length;d=-1)for(i=r.shift();++d<s.length;)!1===s[d].apply(i[0],i[1])&&e.stopOnFalse&&(d=s.length,i=!1);e.memory||(i=!1),t=!1,o&&(s=i?[]:"")},c={add:function(){return s&&(i&&!t&&(d=s.length-1,r.push(i)),function t(i){he.each(i,function(i,n){he.isFunction(n)?e.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==he.type(n)&&t(n)})}(arguments),i&&!t&&l()),this},remove:function(){return he.each(arguments,function(e,t){for(var i;(i=he.inArray(t,s,i))>-1;)s.splice(i,1),i<=d&&d--}),this},has:function(e){return e?he.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=r=[],s=i="",this},disabled:function(){return!s},lock:function(){return o=r=[],i||t||(s=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=i||[],i=[e,i.slice?i.slice():i],r.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},he.extend({Deferred:function(t){var i=[["notify","progress",he.Callbacks("memory"),he.Callbacks("memory"),2],["resolve","done",he.Callbacks("once memory"),he.Callbacks("once memory"),0,"resolved"],["reject","fail",he.Callbacks("once memory"),he.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return o.then(null,e)},pipe:function(){var e=arguments;return he.Deferred(function(t){he.each(i,function(i,n){var o=he.isFunction(e[n[4]])&&e[n[4]];s[n[1]](function(){var e=o&&o.apply(this,arguments);e&&he.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,n,o){function s(t,i,n,o){return function(){var l=this,c=arguments,u=function(){var e,u;if(!(t<a)){if((e=n.apply(l,c))===i.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,he.isFunction(u)?o?u.call(e,s(a,i,r,o),s(a,i,d,o)):(a++,u.call(e,s(a,i,r,o),s(a,i,d,o),s(a,i,r,i.notifyWith))):(n!==r&&(l=undefined,c=[e]),(o||i.resolveWith)(l,c))}},h=o?u:function(){try{u()}catch(e){he.Deferred.exceptionHook&&he.Deferred.exceptionHook(e,h.stackTrace),t+1>=a&&(n!==d&&(l=undefined,c=[e]),i.rejectWith(l,c))}};t?h():(he.Deferred.getStackHook&&(h.stackTrace=he.Deferred.getStackHook()),e.setTimeout(h))}}var a=0;return he.Deferred(function(e){i[0][3].add(s(0,e,he.isFunction(o)?o:r,e.notifyWith)),i[1][3].add(s(0,e,he.isFunction(t)?t:r)),i[2][3].add(s(0,e,he.isFunction(n)?n:d))}).promise()},promise:function(e){return null!=e?he.extend(e,o):o}},s={};return he.each(i,function(e,t){var a=t[2],r=t[5];o[t[1]]=a.add,r&&a.add(function(){n=r},i[3-e][2].disable,i[0][2].lock),a.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?undefined:this,arguments),this},s[t[0]+"With"]=a.fireWith}),o.promise(s),t&&t.call(s,s),s},when:function(e){var t=arguments.length,i=t,n=Array(i),o=te.call(arguments),s=he.Deferred(),a=function(e){return function(i){n[e]=this,o[e]=arguments.length>1?te.call(arguments):i,--t||s.resolveWith(n,o)}};if(t<=1&&(l(e,s.done(a(i)).resolve,s.reject),"pending"===s.state()||he.isFunction(o[i]&&o[i].then)))return s.then();for(;i--;)l(o[i],a(i),s.reject);return s.promise()}});var Ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;he.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&Ae.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)};var Le=he.Deferred();he.fn.ready=function(e){return Le.then(e),this},he.extend({isReady:!1,readyWait:1,holdReady:function(e){e?he.readyWait++:he.ready(!0)},ready:function(e){(!0===e?--he.readyWait:he.isReady)||(he.isReady=!0,!0!==e&&--he.readyWait>0||Le.resolveWith(Z,[he]))}}),he.ready.then=Le.then,"complete"===Z.readyState||"loading"!==Z.readyState&&!Z.documentElement.doScroll?e.setTimeout(he.ready):(Z.addEventListener("DOMContentLoaded",c),e.addEventListener("load",c));var $e=function(e,t,i,n,o,s,a){var r=0,d=e.length,l=null==i;if("object"===he.type(i)){o=!0;for(r in i)$e(e,t,r,i[r],!0,s,a)}else if(n!==undefined&&(o=!0,he.isFunction(n)||(a=!0),l&&(a?(t.call(e,n),t=null):(l=t,t=function(e,t,i){return l.call(he(e),i)})),t))for(;r<d;r++)t(e[r],i,a?n:n.call(e[r],r,t(e[r],i)));return o?e:l?t.call(e):d?t(e[0],i):s},De=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};u.uid=1,u.prototype={cache:function(e){var t=e[this.expando];return t||(t={},De(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[he.camelCase(t)]=i;else for(n in t)o[he.camelCase(n)]=t[n];return o},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][he.camelCase(t)]},access:function(e,t,i){return t===undefined||t&&"string"==typeof t&&i===undefined?this.get(e,t):(this.set(e,t,i),i!==undefined?i:t)},remove:function(e,t){var i,n=e[this.expando];if(n!==undefined){if(t!==undefined){he.isArray(t)?t=t.map(he.camelCase):(t=he.camelCase(t),t=t in n?[t]:t.match(Te)||[]),i=t.length;for(;i--;)delete n[t[i]]}(t===undefined||he.isEmptyObject(n))&&(e.nodeType?e[this.expando]=undefined:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!he.isEmptyObject(t)}};var je=new u,Ie=new u,Me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/[A-Z]/g;he.extend({hasData:function(e){return Ie.hasData(e)||je.hasData(e)},data:function(e,t,i){return Ie.access(e,t,i)},removeData:function(e,t){Ie.remove(e,t)},_data:function(e,t,i){return je.access(e,t,i)},_removeData:function(e,t){je.remove(e,t)}}),he.fn.extend({data:function(e,t){var i,n,o,s=this[0],a=s&&s.attributes;if(e===undefined){if(this.length&&(o=Ie.get(s),1===s.nodeType&&!je.get(s,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=he.camelCase(n.slice(5)),h(s,n,o[n])));je.set(s,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){Ie.set(this,e)}):$e(this,function(t){var i;if(s&&t===undefined){if((i=Ie.get(s,e))!==undefined)return i;if((i=h(s,e))!==undefined)return i}else this.each(function(){Ie.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ie.remove(this,e)})}}),he.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=je.get(e,t),i&&(!n||he.isArray(i)?n=je.access(e,t,he.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=he.queue(e,t),n=i.length,o=i.shift(),s=he._queueHooks(e,t),a=function(){he.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete s.stop,o.call(e,a,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return je.get(e,i)||je.access(e,i,{empty:he.Callbacks("once memory").add(function(){je.remove(e,[t+"queue",i])})})}}),he.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?he.queue(this[0],e):t===undefined?this:this.each(function(){var i=he.queue(this,e,t);he._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&he.dequeue(this,e)})},dequeue:function(e){return this.each(function(){he.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=he.Deferred(),s=this,a=this.length,r=function(){--n||o.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";a--;)(i=je.get(s[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),o.promise(t)}});var Ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pe=new RegExp("^(?:([+-])=|)("+Ne+")([a-z%]*)$","i"),Re=["Top","Right","Bottom","Left"],Be=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&he.contains(e.ownerDocument,e)&&"none"===he.css(e,"display")},Fe=function(e,t,i,n){var o,s,a={};for(s in t)a[s]=e.style[s],e.style[s]=t[s];o=i.apply(e,n||[]);for(s in t)e.style[s]=a[s];return o},qe={};he.fn.extend({show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Be(this)?he(this).show():he(this).hide()})}});var Ue=/^(?:checkbox|radio)$/i,He=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,We=/^$|\/(?:java|ecma)script/i,Ve={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ve.optgroup=Ve.option,Ve.tbody=Ve.tfoot=Ve.colgroup=Ve.caption=Ve.thead,Ve.th=Ve.td;var Ge=/<|&#?\w+;/;!function(){var e=Z.createDocumentFragment(),t=e.appendChild(Z.createElement("div")),i=Z.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),ce.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ce.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Qe=Z.documentElement,ze=/^key/,Ke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Je=/^([^.]*)(?:\.(.+)|)/;he.event={global:{},add:function(e,t,i,n,o){var s,a,r,d,l,c,u,h,p,f,_,m=je.get(e);if(m)for(i.handler&&(s=i,i=s.handler,o=s.selector),o&&he.find.matchesSelector(Qe,o),i.guid||(i.guid=he.guid++),(d=m.events)||(d=m.events={}),(a=m.handle)||(a=m.handle=function(t){return void 0!==he&&he.event.triggered!==t.type?he.event.dispatch.apply(e,arguments):undefined}),t=(t||"").match(Te)||[""],l=t.length;l--;)r=Je.exec(t[l])||[],p=_=r[1],f=(r[2]||"").split(".").sort(),p&&(u=he.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=he.event.special[p]||{},c=he.extend({type:p,origType:_,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&he.expr.match.needsContext.test(o),namespace:f.join(".")},s),(h=d[p])||(h=d[p]=[],h.delegateCount=0,u.setup&&!1!==u.setup.call(e,n,f,a)||e.addEventListener&&e.addEventListener(p,a)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),o?h.splice(h.delegateCount++,0,c):h.push(c),he.event.global[p]=!0)},remove:function(e,t,i,n,o){var s,a,r,d,l,c,u,h,p,f,_,m=je.hasData(e)&&je.get(e);if(m&&(d=m.events)){for(t=(t||"").match(Te)||[""],l=t.length;l--;)if(r=Je.exec(t[l])||[],p=_=r[1],f=(r[2]||"").split(".").sort(),p){for(u=he.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,h=d[p]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;s--;)c=h[s],!o&&_!==c.origType||i&&i.guid!==c.guid||r&&!r.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(h.splice(s,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(e,c));a&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,f,m.handle)||he.removeEvent(e,p,m.handle),delete d[p])}else for(p in d)he.event.remove(e,p+t[l],i,n,!0);he.isEmptyObject(d)&&je.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,s,a,r=he.event.fix(e),d=new Array(arguments.length),l=(je.get(this,"events")||{})[r.type]||[],c=he.event.special[r.type]||{};for(d[0]=r,t=1;t<arguments.length;t++)d[t]=arguments[t];if(r.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,r)){for(a=he.event.handlers.call(this,r,l),t=0;(o=a[t++])&&!r.isPropagationStopped();)for(r.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!r.isImmediatePropagationStopped();)r.rnamespace&&!r.rnamespace.test(s.namespace)||(r.handleObj=s,r.data=s.data,(n=((he.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,d))!==undefined&&!1===(r.result=n)&&(r.preventDefault(),r.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,r),r.result}},handlers:function(e,t){var i,n,o,s,a=[],r=t.delegateCount,d=e.target;if(r&&d.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&(!0!==d.disabled||"click"!==e.type)){for(n=[],i=0;i<r;i++)s=t[i],o=s.selector+" ",n[o]===undefined&&(n[o]=s.needsContext?he(o,this).index(d)>-1:he.find(o,this,null,[d]).length),n[o]&&n.push(s);n.length&&a.push({elem:d,handlers:n})}return r<t.length&&a.push({elem:this,handlers:t.slice(r)}),a},addProp:function(e,t){Object.defineProperty(he.Event.prototype,e,{enumerable:!0,configurable:!0,get:he.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[he.expando]?e:new he.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==y()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===y()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&he.nodeName(this,"input"))return this.click(),!1},_default:function(e){return he.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},he.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},he.Event=function(e,t){if(!(this instanceof he.Event))return new he.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?w:b,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&he.extend(this,t),this.timeStamp=e&&e.timeStamp||he.now(),this[he.expando]=!0},he.Event.prototype={constructor:he.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=w,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=w,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=w,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},he.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ze.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&t!==undefined&&Ke.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},he.event.addProp),he.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){he.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,s=e.handleObj;return o&&(o===n||he.contains(n,o))||(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),he.fn.extend({on:function(e,t,i,n){return C(this,e,t,i,n)},one:function(e,t,i,n){return C(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,he(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=undefined),!1===i&&(i=b),this.each(function(){he.event.remove(this,e,i,t)})}});var Xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ye=/<script|<style|<link/i,Ze=/checked\s*(?:[^=]|=\s*.checked.)/i,et=/^true\/(.*)/,tt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;he.extend({htmlPrefilter:function(e){return e.replace(Xe,"<$1></$2>")},clone:function(e,t,i){var n,o,s,a,r=e.cloneNode(!0),d=he.contains(e.ownerDocument,e);if(!(ce.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||he.isXMLDoc(e)))for(a=m(r),s=m(e),n=0,o=s.length;n<o;n++)T(s[n],a[n]);if(t)if(i)for(s=s||m(e),a=a||m(r),n=0,o=s.length;n<o;n++)x(s[n],a[n]);else x(e,r);return a=m(r,"script"),a.length>0&&g(a,!d&&m(e,"script")),r},cleanData:function(e){for(var t,i,n,o=he.event.special,s=0;(i=e[s])!==undefined;s++)if(De(i)){if(t=i[je.expando]){if(t.events)for(n in t.events)o[n]?he.event.remove(i,n):he.removeEvent(i,n,t.handle);i[je.expando]=undefined}i[Ie.expando]&&(i[Ie.expando]=undefined)}}}),he.fn.extend({detach:function(e){return L(this,e,!0)},remove:function(e){return L(this,e)},text:function(e){return $e(this,function(e){return e===undefined?he.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){k(this,e).appendChild(e)}})},prepend:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(he.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return he.clone(this,e,t)})},html:function(e){return $e(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ye.test(e)&&!Ve[(He.exec(e)||["",""])[1].toLowerCase()]){e=he.htmlPrefilter(e);try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(he.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,function(t){var i=this.parentNode;he.inArray(this,e)<0&&(he.cleanData(m(this)),i&&i.replaceChild(t,this))},e)}}),he.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){he.fn[e]=function(e){for(var i,n=[],o=he(e),s=o.length-1,a=0;a<=s;a++)i=a===s?this:this.clone(!0),he(o[a])[t](i),ne.apply(n,i.get());return this.pushStack(n)}});var it=/^margin/,nt=new RegExp("^("+Ne+")(?!px)[a-z%]+$","i"),ot=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)};!function(){function t(){if(r){r.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",r.innerHTML="",Qe.appendChild(a);var t=e.getComputedStyle(r);i="1%"!==t.top,s="2px"===t.marginLeft,n="4px"===t.width,r.style.marginRight="50%",o="4px"===t.marginRight,Qe.removeChild(a),r=null}}var i,n,o,s,a=Z.createElement("div"),r=Z.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",ce.clearCloneStyle="content-box"===r.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(r),he.extend(ce,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return t(),n},pixelMarginRight:function(){return t(),o},reliableMarginLeft:function(){return t(),s}}))}();var st=/^(none|table(?!-c[ea]).+)/,at={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:"0",fontWeight:"400"},dt=["Webkit","Moz","ms"],lt=Z.createElement("div").style;he.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=$(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,r=he.camelCase(t),d=e.style;if(t=he.cssProps[r]||(he.cssProps[r]=j(r)||r),a=he.cssHooks[t]||he.cssHooks[r],i===undefined)return a&&"get"in a&&(o=a.get(e,!1,n))!==undefined?o:d[t];s=typeof i,"string"===s&&(o=Pe.exec(i))&&o[1]&&(i=p(e,t,o),s="number"),null!=i&&i===i&&("number"===s&&(i+=o&&o[3]||(he.cssNumber[r]?"":"px")),ce.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),a&&"set"in a&&(i=a.set(e,i,n))===undefined||(d[t]=i))}},css:function(e,t,i,n){var o,s,a,r=he.camelCase(t);return t=he.cssProps[r]||(he.cssProps[r]=j(r)||r),a=he.cssHooks[t]||he.cssHooks[r],a&&"get"in a&&(o=a.get(e,!0,i)),o===undefined&&(o=$(e,t,n)),"normal"===o&&t in rt&&(o=rt[t]),""===i||i?(s=parseFloat(o),!0===i||isFinite(s)?s||0:o):o}}),he.each(["height","width"],function(e,t){he.cssHooks[t]={get:function(e,i,n){if(i)return!st.test(he.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?O(e,t,n):Fe(e,at,function(){return O(e,t,n)})},set:function(e,i,n){var o,s=n&&ot(e),a=n&&M(e,t,n,"border-box"===he.css(e,"boxSizing",!1,s),s);return a&&(o=Pe.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=he.css(e,t)),I(e,i,a)}}}),he.cssHooks.marginLeft=D(ce.reliableMarginLeft,function(e,t){if(t)return(parseFloat($(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),he.each({margin:"",padding:"",border:"Width"},function(e,t){he.cssHooks[e+t]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+Re[n]+t]=s[n]||s[n-2]||s[0];return o}},it.test(e)||(he.cssHooks[e+t].set=I)}),he.fn.extend({css:function(e,t){return $e(this,function(e,t,i){var n,o,s={},a=0;if(he.isArray(t)){for(n=ot(e),o=t.length;a<o;a++)s[t[a]]=he.css(e,t[a],!1,n);return s}return i!==undefined?he.style(e,t,i):he.css(e,t)},e,t,arguments.length>1)}}),he.Tween=N,N.prototype={constructor:N,init:function(e,t,i,n,o,s){this.elem=e,this.prop=i,this.easing=o||he.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(he.cssNumber[i]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,i=N.propHooks[this.prop];return this.options.duration?this.pos=t=he.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=he.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){he.fx.step[e.prop]?he.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[he.cssProps[e.prop]]&&!he.cssHooks[e.prop]?e.elem[e.prop]=e.now:he.style(e.elem,e.prop,e.now+e.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},he.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},he.fx=N.prototype.init,he.fx.step={};var ct,ut,ht=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;he.Animation=he.extend(H,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return p(i.elem,e,Pe.exec(t),i),i}]},tweener:function(e,t){he.isFunction(e)?(t=e,e=["*"]):e=e.match(Te);for(var i,n=0,o=e.length;n<o;n++)i=e[n],H.tweeners[i]=H.tweeners[i]||[],H.tweeners[i].unshift(t)},prefilters:[q],prefilter:function(e,t){t?H.prefilters.unshift(e):H.prefilters.push(e)}}),he.speed=function(e,t,i){var n=e&&"object"==typeof e?he.extend({},e):{complete:i||!i&&t||he.isFunction(e)&&e,duration:e,easing:i&&t||t&&!he.isFunction(t)&&t};return he.fx.off||Z.hidden?n.duration=0:n.duration="number"==typeof n.duration?n.duration:n.duration in he.fx.speeds?he.fx.speeds[n.duration]:he.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){he.isFunction(n.old)&&n.old.call(this),n.queue&&he.dequeue(this,n.queue)},n},he.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Be).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=he.isEmptyObject(e),s=he.speed(t,i,n),a=function(){var t=H(this,he.extend({},e),s);(o||je.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===s.queue?this.each(a):this.queue(s.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=undefined),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",s=he.timers,a=je.get(this);if(o)a[o]&&a[o].stop&&n(a[o]);else for(o in a)a[o]&&a[o].stop&&pt.test(o)&&n(a[o]);for(o=s.length;o--;)s[o].elem!==this||null!=e&&s[o].queue!==e||(s[o].anim.stop(i),t=!1,s.splice(o,1));!t&&i||he.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=je.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],s=he.timers,a=n?n.length:0;for(i.finish=!0,he.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),he.each(["toggle","show","hide"],function(e,t){var i=he.fn[t];he.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(B(t,!0),e,n,o)}}),he.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){he.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),he.timers=[],he.fx.tick=function(){var e,t=0,i=he.timers;for(ct=he.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||he.fx.stop(),ct=undefined},he.fx.timer=function(e){he.timers.push(e),e()?he.fx.start():he.timers.pop()},he.fx.interval=13,he.fx.start=function(){ut||(ut=e.requestAnimationFrame?e.requestAnimationFrame(P):e.setInterval(he.fx.tick,he.fx.interval))},he.fx.stop=function(){e.cancelAnimationFrame?e.cancelAnimationFrame(ut):e.clearInterval(ut),ut=null},he.fx.speeds={slow:600,fast:200,_default:400},he.fn.delay=function(t,i){return t=he.fx?he.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var o=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(o)}})},function(){var e=Z.createElement("input"),t=Z.createElement("select"),i=t.appendChild(Z.createElement("option"));e.type="checkbox",ce.checkOn=""!==e.value,ce.optSelected=i.selected,e=Z.createElement("input"),e.value="t",e.type="radio",ce.radioValue="t"===e.value}();var ft,_t=he.expr.attrHandle;he.fn.extend({attr:function(e,t){return $e(this,he.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){he.removeAttr(this,e)})}}),he.extend({attr:function(e,t,i){var n,o,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return"undefined"==typeof e.getAttribute?he.prop(e,t,i):(1===s&&he.isXMLDoc(e)||(o=he.attrHooks[t.toLowerCase()]||(he.expr.match.bool.test(t)?ft:undefined)),i!==undefined?null===i?void he.removeAttr(e,t):o&&"set"in o&&(n=o.set(e,i,t))!==undefined?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:(n=he.find.attr(e,t),null==n?undefined:n))},attrHooks:{type:{set:function(e,t){if(!ce.radioValue&&"radio"===t&&he.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(Te);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),ft={set:function(e,t,i){return!1===t?he.removeAttr(e,i):e.setAttribute(i,i),i}},he.each(he.expr.match.bool.source.match(/\w+/g),function(e,t){var i=_t[t]||he.find.attr;_t[t]=function(e,t,n){var o,s,a=t.toLowerCase();return n||(s=_t[a],_t[a]=o,o=null!=i(e,t,n)?a:null,_t[a]=s),o}});var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;he.fn.extend({prop:function(e,t){return $e(this,he.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[he.propFix[e]||e]})}}),he.extend({prop:function(e,t,i){var n,o,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&he.isXMLDoc(e)||(t=he.propFix[t]||t,o=he.propHooks[t]),i!==undefined?o&&"set"in o&&(n=o.set(e,i,t))!==undefined?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=he.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ce.optSelected||(he.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),he.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){he.propFix[this.toLowerCase()]=this});var vt=/[\t\r\n\f]/g;he.fn.extend({addClass:function(e){var t,i,n,o,s,a,r,d=0;if(he.isFunction(e))return this.each(function(t){he(this).addClass(e.call(this,t,W(this)))});if("string"==typeof e&&e)for(t=e.match(Te)||[];i=this[d++];)if(o=W(i),n=1===i.nodeType&&(" "+o+" ").replace(vt," ")){for(a=0;s=t[a++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r=he.trim(n),o!==r&&i.setAttribute("class",r)}return this},removeClass:function(e){var t,i,n,o,s,a,r,d=0;if(he.isFunction(e))return this.each(function(t){he(this).removeClass(e.call(this,t,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Te)||[];i=this[d++];)if(o=W(i),n=1===i.nodeType&&(" "+o+" ").replace(vt," ")){for(a=0;s=t[a++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");r=he.trim(n),o!==r&&i.setAttribute("class",r)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):he.isFunction(e)?this.each(function(i){he(this).toggleClass(e.call(this,i,W(this),t),t)}):this.each(function(){var t,n,o,s;if("string"===i)for(n=0,o=he(this),s=e.match(Te)||[];t=s[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else e!==undefined&&"boolean"!==i||(t=W(this),t&&je.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":je.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+W(i)+" ").replace(vt," ").indexOf(t)>-1)return!0;return!1}});var wt=/\r/g,bt=/[\x20\t\r\n\f]+/g;he.fn.extend({val:function(e){var t,i,n,o=this[0];{if(arguments.length)return n=he.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=n?e.call(this,i,he(this).val()):e,null==o?o="":"number"==typeof o?o+="":he.isArray(o)&&(o=he.map(o,function(e){return null==e?"":e+""})),(t=he.valHooks[this.type]||he.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&t.set(this,o,"value")!==undefined||(this.value=o))});if(o)return(t=he.valHooks[o.type]||he.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&(i=t.get(o,"value"))!==undefined?i:(i=o.value,"string"==typeof i?i.replace(wt,""):null==i?"":i)}}}),he.extend({valHooks:{option:{get:function(e){var t=he.find.attr(e,"value");return null!=t?t:he.trim(he.text(e)).replace(bt," ")}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],r=s?o+1:n.length,d=o<0?r:s?o:0;d<r;d++)if(i=n[d],(i.selected||d===o)&&!i.disabled&&(!i.parentNode.disabled||!he.nodeName(i.parentNode,"optgroup"))){if(t=he(i).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var i,n,o=e.options,s=he.makeArray(t),a=o.length;a--;)n=o[a],(n.selected=he.inArray(he.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),he.each(["radio","checkbox"],function(){he.valHooks[this]={set:function(e,t){if(he.isArray(t))return e.checked=he.inArray(he(e).val(),t)>-1}},ce.checkOn||(he.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var yt=/^(?:focusinfocus|focusoutblur)$/;he.extend(he.event,{trigger:function(t,i,n,o){var s,a,r,d,l,c,u,h=[n||Z],p=re.call(t,"type")?t.type:t,f=re.call(t,"namespace")?t.namespace.split("."):[];if(a=r=n=n||Z,3!==n.nodeType&&8!==n.nodeType&&!yt.test(p+he.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,t=t[he.expando]?t:new he.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=n),i=null==i?[t]:he.makeArray(i,[t]),u=he.event.special[p]||{},o||!u.trigger||!1!==u.trigger.apply(n,i))){if(!o&&!u.noBubble&&!he.isWindow(n)){for(d=u.delegateType||p,yt.test(d+p)||(a=a.parentNode);a;a=a.parentNode)h.push(a),r=a;r===(n.ownerDocument||Z)&&h.push(r.defaultView||r.parentWindow||e)}for(s=0;(a=h[s++])&&!t.isPropagationStopped();)t.type=s>1?d:u.bindType||p,c=(je.get(a,"events")||{})[t.type]&&je.get(a,"handle"),c&&c.apply(a,i),(c=l&&a[l])&&c.apply&&De(a)&&(t.result=c.apply(a,i),!1===t.result&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),i)||!De(n)||l&&he.isFunction(n[p])&&!he.isWindow(n)&&(r=n[l],r&&(n[l]=null),he.event.triggered=p,n[p](),he.event.triggered=undefined,r&&(n[l]=r)),t.result}},simulate:function(e,t,i){var n=he.extend(new he.Event,i,{type:e,isSimulated:!0});he.event.trigger(n,null,t)}}),he.fn.extend({trigger:function(e,t){return this.each(function(){he.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return he.event.trigger(e,t,i,!0)}}),he.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){he.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),he.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ce.focusin="onfocusin"in e,ce.focusin||he.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){he.event.simulate(t,e.target,he.event.fix(e))};he.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=je.access(n,t);o||n.addEventListener(e,i,!0),je.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=je.access(n,t)-1;o?je.access(n,t,o):(n.removeEventListener(e,i,!0),je.remove(n,t))}}});var Ct=e.location,kt=he.now(),St=/\?/;he.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=undefined}return i&&!i.getElementsByTagName("parsererror").length||he.error("Invalid XML: "+t),i};var Et=/\[\]$/,xt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;he.param=function(e,t){var i,n=[],o=function(e,t){var i=he.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(he.isArray(e)||e.jquery&&!he.isPlainObject(e))he.each(e,function(){o(this.name,this.value)});else for(i in e)V(i,e[i],t,o);return n.join("&")},he.fn.extend({serialize:function(){return he.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=he.prop(this,"elements");return e?he.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!he(this).is(":disabled")&&At.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!Ue.test(e))}).map(function(e,t){var i=he(this).val();return null==i?null:he.isArray(i)?he.map(i,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:i.replace(xt,"\r\n")}}).get()}});var Lt=/%20/g,$t=/#.*$/,Dt=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,It=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Ot=/^\/\//,Nt={},Pt={},Rt="*/".concat("*"),Bt=Z.createElement("a");Bt.href=Ct.href,he.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:It.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":he.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,he.ajaxSettings),t):z(he.ajaxSettings,e)},ajaxPrefilter:G(Nt),ajaxTransport:G(Pt),ajax:function(t,i){function n(t,i,n,r){var l,h,p,b,y,C=i;c||(c=!0,d&&e.clearTimeout(d),o=undefined,a=r||"",k.readyState=t>0?4:0,l=t>=200&&t<300||304===t,n&&(b=K(f,k,n)),b=J(f,b,k,l),l?(f.ifModified&&(y=k.getResponseHeader("Last-Modified"),y&&(he.lastModified[s]=y),(y=k.getResponseHeader("etag"))&&(he.etag[s]=y)),204===t||"HEAD"===f.type?C="nocontent":304===t?C="notmodified":(C=b.state,h=b.data,p=b.error,l=!p)):(p=C,!t&&C||(C="error",t<0&&(t=0))),k.status=t,k.statusText=(i||C)+"",l?g.resolveWith(_,[h,C,k]):g.rejectWith(_,[k,C,p]),k.statusCode(w),w=undefined,u&&m.trigger(l?"ajaxSuccess":"ajaxError",[k,f,l?h:p]),v.fireWith(_,[k,C]),u&&(m.trigger("ajaxComplete",[k,f]),--he.active||he.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=undefined),i=i||{};var o,s,a,r,d,l,c,u,h,p,f=he.ajaxSetup({},i),_=f.context||f,m=f.context&&(_.nodeType||_.jquery)?he(_):he.event,g=he.Deferred(),v=he.Callbacks("once memory"),w=f.statusCode||{},b={},y={},C="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!r)for(r={};t=jt.exec(a);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=y[e.toLowerCase()]=y[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||C;return o&&o.abort(t),n(0,t),this}};if(g.promise(k),f.url=((t||f.url||Ct.href)+"").replace(Ot,Ct.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Te)||[""],null==f.crossDomain){l=Z.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=he.param(f.data,f.traditional)),Q(Nt,f,i,k),c)return k;u=he.event&&f.global,u&&0==he.active++&&he.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Mt.test(f.type),s=f.url.replace($t,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Lt,"+")):(p=f.url.slice(s.length),f.data&&(s+=(St.test(s)?"&":"?")+f.data,delete f.data),!1===f.cache&&(s=s.replace(Dt,""),p=(St.test(s)?"&":"?")+"_="+kt+++p),f.url=s+p),f.ifModified&&(he.lastModified[s]&&k.setRequestHeader("If-Modified-Since",he.lastModified[s]),he.etag[s]&&k.setRequestHeader("If-None-Match",he.etag[s])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Rt+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)k.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(_,k,f)||c))return k.abort();if(C="abort",v.add(f.complete),k.done(f.success),k.fail(f.error),o=Q(Pt,f,i,k)){if(k.readyState=1,u&&m.trigger("ajaxSend",[k,f]),c)return k;f.async&&f.timeout>0&&(d=e.setTimeout(function(){k.abort("timeout")},f.timeout));try{c=!1,o.send(b,n)}catch(e){if(c)throw e;n(-1,e)}}else n(-1,"No Transport");return k},getJSON:function(e,t,i){return he.get(e,t,i,"json")},getScript:function(e,t){return he.get(e,undefined,t,"script")}}),he.each(["get","post"],function(e,t){he[t]=function(e,i,n,o){return he.isFunction(i)&&(o=o||n,n=i,i=undefined),he.ajax(he.extend({url:e,type:t,dataType:o,data:i,success:n},he.isPlainObject(e)&&e))}}),he._evalUrl=function(e){return he.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},he.fn.extend({wrapAll:function(e){var t;return this[0]&&(he.isFunction(e)&&(e=e.call(this[0])),t=he(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return he.isFunction(e)?this.each(function(t){he(this).wrapInner(e.call(this,t))}):this.each(function(){var t=he(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=he.isFunction(e);return this.each(function(i){he(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){he(this).replaceWith(this.childNodes)}),this}}),he.expr.pseudos.hidden=function(e){return!he.expr.pseudos.visible(e)},he.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},he.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ft={0:200,1223:204},qt=he.ajaxSettings.xhr();ce.cors=!!qt&&"withCredentials"in qt,ce.ajax=qt=!!qt,he.ajaxTransport(function(t){var i,n;if(ce.cors||qt&&!t.crossDomain)return{send:function(o,s){var a,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)r[a]=t.xhrFields[a];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(a in o)r.setRequestHeader(a,o[a]);i=function(e){return function(){i&&(i=n=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?s(0,"error"):s(r.status,r.statusText):s(Ft[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),n=r.onerror=i("error"),r.onabort!==undefined?r.onabort=n:r.onreadystatechange=function(){4===r.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{r.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),he.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),he.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return he.globalEval(e),e}}}),he.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),he.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,o){t=he("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),Z.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Ut=[],Ht=/(=)\?(?=&|$)|\?\?/;he.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ut.pop()||he.expando+"_"+kt++;return this[e]=!0,e}}),he.ajaxPrefilter("json jsonp",function(t,i,n){var o,s,a,r=!1!==t.jsonp&&(Ht.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ht.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=he.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(Ht,"$1"+o):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||he.error(o+" was not called"),a[0]},t.dataTypes[0]="json",s=e[o],e[o]=function(){a=arguments},n.always(function(){s===undefined?he(e).removeProp(o):e[o]=s,t[o]&&(t.jsonpCallback=i.jsonpCallback,Ut.push(o)),a&&he.isFunction(s)&&s(a[0]),a=s=undefined}),"script"}),ce.createHTMLDocument=function(){var e=Z.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),he.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var n,o,s;return t||(ce.createHTMLDocument?(t=Z.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=Z.location.href,t.head.appendChild(n)):t=Z),o=ye.exec(e),s=!i&&[],o?[t.createElement(o[1])]:(o=v([e],t,s),s&&s.length&&he(s).remove(),he.merge([],o.childNodes))},he.fn.load=function(e,t,i){var n,o,s,a=this,r=e.indexOf(" ");return r>-1&&(n=he.trim(e.slice(r)),e=e.slice(0,r)),he.isFunction(t)?(i=t,t=undefined):t&&"object"==typeof t&&(o="POST"),a.length>0&&he.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){s=arguments,a.html(n?he("<div>").append(he.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,s||[e.responseText,t,e])})}),this},he.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){he.fn[t]=function(e){return this.on(t,e)}}),he.expr.pseudos.animated=function(e){return he.grep(he.timers,function(t){return e===t.elem}).length},he.offset={setOffset:function(e,t,i){var n,o,s,a,r,d,l,c=he.css(e,"position"),u=he(e),h={};"static"===c&&(e.style.position="relative"),r=u.offset(),s=he.css(e,"top"),d=he.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(s+d).indexOf("auto")>-1,l?(n=u.position(),a=n.top,o=n.left):(a=parseFloat(s)||0,o=parseFloat(d)||0),he.isFunction(t)&&(t=t.call(e,i,he.extend({},r))),null!=t.top&&(h.top=t.top-r.top+a),null!=t.left&&(h.left=t.left-r.left+o),"using"in t?t.using.call(e,h):u.css(h)}},he.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){he.offset.setOffset(this,e,t)});var t,i,n,o,s=this[0];if(s)return s.getClientRects().length?(n=s.getBoundingClientRect(),n.width||n.height?(o=s.ownerDocument,i=X(o),t=o.documentElement,{top:n.top+i.pageYOffset-t.clientTop,left:n.left+i.pageXOffset-t.clientLeft}):n):{top:0,left:0}},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===he.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),he.nodeName(e[0],"html")||(n=e.offset()),n={top:n.top+he.css(e[0],"borderTopWidth",!0),left:n.left+he.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-he.css(i,"marginTop",!0),left:t.left-n.left-he.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===he.css(e,"position");)e=e.offsetParent;return e||Qe})}}),he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;he.fn[e]=function(n){return $e(this,function(e,n,o){var s=X(e);if(o===undefined)return s?s[t]:e[n];s?s.scrollTo(i?s.pageXOffset:o,i?o:s.pageYOffset):e[n]=o},e,n,arguments.length)}}),he.each(["top","left"],function(e,t){he.cssHooks[t]=D(ce.pixelPosition,function(e,i){if(i)return i=$(e,t),nt.test(i)?he(e).position()[t]+"px":i})}),he.each({Height:"height",Width:"width"},function(e,t){he.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){he.fn[n]=function(o,s){var a=arguments.length&&(i||"boolean"!=typeof o),r=i||(!0===o||!0===s?"margin":"border");return $e(this,function(t,i,o){var s;return he.isWindow(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):o===undefined?he.css(t,i,r):he.style(t,i,o,r)},t,a?o:undefined,a)}})}),he.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),he.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return he});var Wt=e.jQuery,Vt=e.$;return he.noConflict=function(t){return e.$===he&&(e.$=Vt),t&&e.jQuery===he&&(e.jQuery=Wt),he},t||(e.jQuery=e.$=he),he})},"./third_party/json2.js":function(module,exports){"object"!=typeof JSON&&(window.JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,o,s,a,r=gap,d=t[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof rep&&(d=rep.call(t,e,d)),typeof d){case"string":return quote(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(d)){for(s=d.length,i=0;i<s;i+=1)a[i]=str(i,d)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+r+"]":"["+a.join(",")+"]",gap=r,o}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;i<s;i+=1)"string"==typeof rep[i]&&(n=rep[i],(o=str(n,d))&&a.push(quote(n)+(gap?": ":":")+o));else for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(o=str(n,d))&&a.push(quote(n)+(gap?": ":":")+o);return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+r+"}":"{"+a.join(",")+"}",gap=r,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),n!==undefined?o[i]=n:delete o[i]);return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},"./third_party/prettify.js":function(e,t){!function(){var e=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function t(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var i=e.charAt(1);return(t=u[i])?t:"0"<=i&&i<="7"?parseInt(e.substring(1),8):"u"===i||"x"===i?parseInt(e.substring(2),16):e.charCodeAt(1)}function i(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):(e=String.fromCharCode(e),"\\"===e||"-"===e||"]"===e||"^"===e?"\\"+e:e)}function n(e){var n=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],o="^"===n[0],s=["["];o&&s.push("^");for(var o=o?1:0,a=n.length;o<a;++o){var r=n[o];if(/\\[bdsw]/i.test(r))s.push(r);else{var d,r=t(r);o+2<a&&"-"===n[o+1]?(d=t(n[o+2]),o+=2):d=r,e.push([r,d]),d<65||r>122||(d<65||r>90||e.push([32|Math.max(65,r),32|Math.min(d,90)]),d<97||r>122||e.push([-33&Math.max(97,r),-33&Math.min(d,122)]))}}for(e.sort(function(e,t){return e[0]-t[0]||t[1]-e[1]}),n=[],a=[],o=0;o<e.length;++o)r=e[o],r[0]<=a[1]+1?a[1]=Math.max(a[1],r[1]):n.push(a=r);for(o=0;o<n.length;++o)r=n[o],s.push(i(r[0])),r[1]>r[0]&&(r[1]+1>r[0]&&s.push("-"),s.push(i(r[1])));return s.push("]"),s.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),o=t.length,r=[],d=0,l=0;d<o;++d){var c=t[d];"("===c?++l:"\\"===c.charAt(0)&&(c=+c.substring(1))&&(c<=l?r[c]=-1:t[d]=i(c))}for(d=1;d<r.length;++d)-1===r[d]&&(r[d]=++s);for(l=d=0;d<o;++d)c=t[d],"("===c?(++l,r[l]||(t[d]="(?:")):"\\"===c.charAt(0)&&(c=+c.substring(1))&&c<=l&&(t[d]="\\"+r[c]);for(d=0;d<o;++d)"^"===t[d]&&"^"!==t[d+1]&&(t[d]="");if(e.ignoreCase&&a)for(d=0;d<o;++d)c=t[d],e=c.charAt(0),c.length>=2&&"["===e?t[d]=n(c):"\\"!==e&&(t[d]=c.replace(/[A-Za-z]/g,function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"}));return t.join("")}for(var s=0,a=!1,r=!1,d=0,l=e.length;d<l;++d){var c=e[d];if(c.ignoreCase)r=!0;else if(/[a-z]/i.test(c.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){a=!0,r=!1;break}}for(var u={b:8,t:9,n:10,v:11,f:12,r:13},h=[],d=0,l=e.length;d<l;++d){if(c=e[d],c.global||c.multiline)throw Error(""+c);h.push("(?:"+o(c)+")")}return RegExp(h.join("|"),r?"gi":"g")}function i(e,t){function i(e){var d=e.nodeType;if(1==d){if(!n.test(e.className)){for(d=e.firstChild;d;d=d.nextSibling)i(d);d=e.nodeName.toLowerCase(),"br"!==d&&"li"!==d||(o[r]="\n",a[r<<1]=s++,a[r++<<1|1]=e)}}else 3!=d&&4!=d||(d=e.nodeValue,d.length&&(d=t?d.replace(/\r\n?/g,"\n"):d.replace(/[\t\n\r ]+/g," "),o[r]=d,a[r<<1]=s,s+=d.length,a[r++<<1|1]=e))}var n=/(?:^|\s)nocode(?:\s|$)/,o=[],s=0,a=[],r=0;return i(e),{a:o.join("").replace(/\n$/,""),d:a}}function n(e,t,i,n){t&&(e={a:t,e:e},i(e),n.push.apply(n,e.g))}function o(e){for(var t=void 0,i=e.firstChild;i;i=i.nextSibling)var n=i.nodeType,t=1===n?t?e:i:3===n&&y.test(i.nodeValue)?e:t;return t===e?void 0:t}function s(i,o){function s(e){for(var t=e.e,i=[t,"pln"],c=0,u=e.a.match(a)||[],h={},p=0,f=u.length;p<f;++p){var _,m=u[p],g=h[m],v=void 0;if("string"==typeof g)_=!1;else{var w=r[m.charAt(0)];if(w)v=m.match(w[1]),g=w[0];else{for(_=0;_<d;++_)if(w=o[_],v=m.match(w[1])){g=w[0];break}v||(g="pln")}!(_=g.length>=5&&"lang-"===g.substring(0,5))||v&&"string"==typeof v[1]||(_=!1,g="src"),_||(h[m]=g)}if(w=c,c+=m.length,_){_=v[1];var b=m.indexOf(_),y=b+_.length;v[2]&&(y=m.length-v[2].length,b=y-_.length),g=g.substring(5),n(t+w,m.substring(0,b),s,i),n(t+w+b,_,l(g,_),i),n(t+w+y,m.substring(y),s,i)}else i.push(t+w,g)}e.g=i}var a,r={};!function(){for(var n=i.concat(o),s=[],d={},l=0,c=n.length;l<c;++l){var u=n[l],h=u[3];if(h)for(var p=h.length;--p>=0;)r[h.charAt(p)]=u;u=u[1],h=""+u,d.hasOwnProperty(h)||(s.push(u),d[h]=e)}s.push(/[\S\s]/),a=t(s)}();var d=o.length;return s}function a(t){var i=[],n=[];t.tripleQuotedStrings?i.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,e,"'\""]):t.multiLineStrings?i.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,e,"'\"`"]):i.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,e,"\"'"]),t.verbatimStrings&&n.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,e]);var o=t.hashComments;if(o&&(t.cStyleComments?(o>1?i.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,e,"#"]):i.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,e,"#"]),n.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,e])):i.push(["com",/^#[^\n\r]*/,e,"#"])),t.cStyleComments&&(n.push(["com",/^\/\/[^\n\r]*/,e]),n.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,e])),o=t.regexLiterals){var a=(o=o>1?"":"\n\r")?".":"[\\S\\s]";n.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*(/(?=[^/*"+o+"])(?:[^/\\x5B\\x5C"+o+"]|\\x5C"+a+"|\\x5B(?:[^\\x5C\\x5D"+o+"]|\\x5C"+a+")*(?:\\x5D|$))+/)")])}return(o=t.types)&&n.push(["typ",o]),o=(""+t.keywords).replace(/^ | $/g,""),o.length&&n.push(["kwd",RegExp("^(?:"+o.replace(/[\s,]+/g,"|")+")\\b"),e]),i.push(["pln",/^\s+/,e," \r\n\t "]),o="^.[^\\s\\w.$@'\"`/\\\\]*",t.regexLiterals&&(o+="(?!s*/)"),n.push(["lit",/^@[$_a-z][\w$@]*/i,e],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,e],["pln",/^[$_a-z][\w$@]*/i,e],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,e,"0123456789"],["pln",/^\\[\S\s]?/,e],["pun",RegExp(o),e]),s(i,n)}function r(e,t,i){function n(e){var t=e.nodeType;if(1!=t||s.test(e.className)){if((3==t||4==t)&&i){var d=e.nodeValue,l=d.match(a);l&&(t=d.substring(0,l.index),e.nodeValue=t,(d=d.substring(l.index+l[0].length))&&e.parentNode.insertBefore(r.createTextNode(d),e.nextSibling),o(e),t||e.parentNode.removeChild(e))}}else if("br"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)n(e)}function o(e){function t(e,i){var n=i?e.cloneNode(!1):e,o=e.parentNode;if(o){var o=t(o,1),s=e.nextSibling;o.appendChild(n);for(var a=s;a;a=s)s=a.nextSibling,o.appendChild(a)}return n}for(;!e.nextSibling;)if(!(e=e.parentNode))return;for(var i,e=t(e.nextSibling,0);(i=e.parentNode)&&1===i.nodeType;)e=i;l.push(e)}for(var s=/(?:^|\s)nocode(?:\s|$)/,a=/\r\n?|\n/,r=e.ownerDocument,d=r.createElement("li");e.firstChild;)d.appendChild(e.firstChild);for(var l=[d],c=0;c<l.length;++c)n(l[c]);t===(0|t)&&l[0].setAttribute("value",t);var u=r.createElement("ol");u.className="linenums";for(var t=Math.max(0,t-1|0)||0,c=0,h=l.length;c<h;++c)d=l[c],d.className="L"+(c+t)%10,d.firstChild||d.appendChild(r.createTextNode(" ")),u.appendChild(d);e.appendChild(u)}function d(e,t){for(var i=t.length;--i>=0;){var n=t[i];k.hasOwnProperty(n)?u.console&&console.warn("cannot override language handler %s",n):k[n]=e}}function l(e,t){return e&&k.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),k[e]}function c(e){var t=e.h;try{var n=i(e.c,e.i),o=n.a;e.a=o,e.d=n.d,e.e=0,l(t,o)(e);var s=/\bMSIE\s(\d+)/.exec(navigator.userAgent),s=s&&+s[1]<=8,t=/\n/g,a=e.a,r=a.length,n=0,d=e.d,c=d.length,o=0,h=e.g,p=h.length,f=0;h[p]=r;var _,m;for(m=_=0;m<p;)h[m]!==h[m+2]?(h[_++]=h[m++],h[_++]=h[m++]):m+=2;for(p=_,m=_=0;m<p;){for(var g=h[m],v=h[m+1],w=m+2;w+2<=p&&h[w+1]===v;)w+=2;h[_++]=g,h[_++]=v,m=w}h.length=_;var b,y=e.c;y&&(b=y.style.display,y.style.display="none");try{for(;o<c;){var C,k=d[o+2]||r,S=h[f+2]||r,w=Math.min(k,S),E=d[o+1];if(1!==E.nodeType&&(C=a.substring(n,w))){s&&(C=C.replace(t,"\r")),E.nodeValue=C;var x=E.ownerDocument,T=x.createElement("span");T.className=h[f+1];var A=E.parentNode;A.replaceChild(T,E),T.appendChild(E),n<k&&(d[o+1]=E=x.createTextNode(a.substring(w,k)),A.insertBefore(E,T.nextSibling))}n=w,n>=k&&(o+=2),n>=S&&(f+=2)}}finally{y&&(y.style.display=b)}}catch(e){u.console&&console.log(e&&e.stack||e)}}var u=window,h=["break,continue,do,else,for,if,return,while"],p=[[h,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],f=[p,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],_=[p,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],m=[p,"abstract,as,base,bool,by,byte,checked,decimal,delegate,descending,dynamic,event,finally,fixed,foreach,from,group,implicit,in,interface,internal,into,is,let,lock,null,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],p=[p,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],g=[h,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],v=[h,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],w=[h,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],h=[h,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],b=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,y=/\S/,C=a({keywords:[f,m,p,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",g,v,h],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),k={};d(C,["default-code"]),d(s([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),d(s([["pln",/^\s+/,e," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,e,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'\/>]|\/(?=\s)))/],["pun",/^[\/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),d(s([],[["atv",/^[\S\s]+/]]),["uq.val"]),d(a({keywords:f,hashComments:!0,cStyleComments:!0,types:b}),["c","cc","cpp","cxx","cyc","m"]),d(a({keywords:"null,true,false"}),["json"]),d(a({keywords:m,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:b}),["cs"]),d(a({keywords:_,cStyleComments:!0}),["java"]),d(a({keywords:h,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]),d(a({keywords:g,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]),d(a({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]),d(a({keywords:v,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]),d(a({keywords:p,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]),d(a({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),d(a({keywords:w,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]),d(s([],[["str",/^[\S\s]+/]]),["regex"]);var S=u.PR={createSimpleLexer:s,registerLangHandler:d,sourceDecorator:a,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:u.prettyPrintOne=function(e,t,i){var n=document.createElement("div");return n.innerHTML="<pre>"+e+"</pre>",n=n.firstChild,i&&r(n,i,!0),c({h:t,j:i,c:n,i:1}),n.innerHTML},prettyPrint:u.prettyPrint=function(t,i){function n(){for(var i=u.PR_SHOULD_USE_CONTINUATION?f.now()+250:Infinity;m<d.length&&f.now()<i;m++){for(var s=d[m],l=k,h=s;h=h.previousSibling;){var p=h.nodeType,S=(7===p||8===p)&&h.nodeValue;if(S?!/^\??prettify\b/.test(S):3!==p||/\S/.test(h.nodeValue))break;if(S){l={},S.replace(/\b(\w+)=([\w%+\-.:]+)/g,function(e,t,i){l[t]=i});break}}if(h=s.className,(l!==k||v.test(h))&&!w.test(h)){for(p=!1,S=s.parentNode;S;S=S.parentNode)if(C.test(S.tagName)&&S.className&&v.test(S.className)){p=!0;break}if(!p){if(s.className+=" prettyprinted",!(p=l.lang)){var E,p=h.match(g);!p&&(E=o(s))&&y.test(E.tagName)&&(p=E.className.match(g)),p&&(p=p[1])}if(b.test(s.tagName))S=1;else var S=s.currentStyle,x=a.defaultView,S=(S=S?S.whiteSpace:x&&x.getComputedStyle?x.getComputedStyle(s,e).getPropertyValue("white-space"):0)&&"pre"===S.substring(0,3);x=l.linenums,(x="true"===x||+x)||(x=!!(x=h.match(/\blinenums\b(?::(\d+))?/))&&(!x[1]||!x[1].length||+x[1])),x&&r(s,x,S),_={h:p,c:s,j:x,i:S},c(_)}}}m<d.length?setTimeout(n,250):"function"==typeof t&&t()}for(var s=i||document.body,a=s.ownerDocument||document,s=[s.getElementsByTagName("pre"),s.getElementsByTagName("code"),s.getElementsByTagName("xmp")],d=[],l=0;l<s.length;++l)for(var h=0,p=s[l].length;h<p;++h)d.push(s[l][h]);var s=e,f=Date;f.now||(f={now:function(){return+new Date}});var _,m=0,g=/\blang(?:uage)?-([\w.]+)(?!\S)/,v=/\bprettyprint\b/,w=/\bprettyprinted\b/,b=/pre|xmp/i,y=/^code$/i,C=/^(?:pre|code|xmp)$/i,k={};n()}};"function"==typeof define&&define.amd&&define("google-code-prettify",[],function(){return S})}()}()},"./third_party/qualtrics.js":function(e,t){var i=require("shared/util");require("shared/onload");t.load=i.once(function(e,t){var i=function(e,t,i,n){this.get=function(e){for(var e=e+"=",t=document.cookie.split(";"),i=0,n=t.length;i<n;i++){for(var o=t[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return null},this.set=function(e,t){var i="",i=new Date;i.setTime(i.getTime()+6048e5),i="; expires="+i.toGMTString(),document.cookie=e+"="+t+i+"; path=/; "},this.check=function(){var n=this.get(i);if(n)n=n.split(":");else{if(100==e)return!0;"v"==t&&(e=Math.random()>=e/100?0:100),n=[t,e,0],this.set(i,n.join(":"))}var o=n[1];if(100==o)return!0;switch(n[0]){case"v":return!1;case"r":return o=n[2]%Math.floor(100/o),n[2]++,this.set(i,n.join(":")),!o}return!0},this.go=function(){if(this.check()){var e=document.createElement("script");e.type="text/javascript",e.src=n+"&t="+(new Date).getTime(),document.body&&document.body.appendChild(e)}},this.start=function(){var e=this;window.addEventListener?window.addEventListener("load",function(){e.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){e.go()})}},n=e.toLowerCase(),o=t?"Q_VERSION=0&":"",s="https://zn"+n+"-quora.siteintercept.qualtrics.com/WRSiteInterceptEngine";try{new i(100,"r",e,s+"/?Q_ZID=ZN_"+e+"&"+o+"Q_LOC="+encodeURIComponent(window.location.href)).start()}catch(e){}})},"./third_party/resumable.js":function(e,t){!function(){"use strict";var t=function(e){function i(e,t,i,n){var s;return e.isFile?e.file(function(e){e.relativePath=t+e.name,i.push(e),n()}):(e.isDirectory?s=e:e instanceof File&&i.push(e),"function"==typeof e.webkitGetAsEntry&&(s=e.webkitGetAsEntry()),s&&s.isDirectory?o(s,t+s.name+"/",i,n):("function"==typeof e.getAsFile&&(e=e.getAsFile())instanceof File&&(e.relativePath=t+e.name,i.push(e)),void n()))}function n(e,t){if(!e||0===e.length)return t();e[0](function(){n(e.slice(1),t)})}function o(e,t,o,s){function a(){r.readEntries(function(e){if(e.length)return d=d.concat(e),a();n(d.map(function(e){return i.bind(null,e,t,o)}),s)})}var r=e.createReader(),d=[];a()}function s(e,t){if(e.length){d.fire("beforeAdd");var o=[];n(Array.prototype.map.call(e,function(e){var t=e;return"function"==typeof e.webkitGetAsEntry&&(t=e.webkitGetAsEntry()),i.bind(null,t,"",o)}),function(){o.length&&p(o,t)})}}function a(e,t,i){var n=this;n.opts={},n.getOpt=e.getOpt,n._prevProgress=0,n.resumableObj=e,n.file=t,n.fileName=t.fileName||t.name,n.size=t.size,n.relativePath=t.relativePath||t.webkitRelativePath||n.fileName,n.uniqueIdentifier=i,n._pause=!1,n.container="",n.preprocessState=0;var o=i!==undefined,s=function(e,t){switch(e){case"progress":n.resumableObj.fire("fileProgress",n,t);break;case"error":n.abort(),o=!0,n.chunks=[],n.resumableObj.fire("fileError",n,t);break;case"success":if(o)return;n.resumableObj.fire("fileProgress",n,t),n.isComplete()&&n.resumableObj.fire("fileSuccess",n,t);break;case"retry":n.resumableObj.fire("fileRetry",n)}};return n.chunks=[],n.abort=function(){var e=0;l.each(n.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&n.resumableObj.fire("fileProgress",n)},n.cancel=function(){var e=n.chunks;n.chunks=[],l.each(e,function(e){"uploading"==e.status()&&(e.abort(),n.resumableObj.uploadNextChunk())}),n.resumableObj.removeFile(n),n.resumableObj.fire("fileProgress",n)},n.retry=function(){n.bootstrap();var e=!1;n.resumableObj.on("chunkingComplete",function(){e||n.resumableObj.upload(),e=!0})},n.bootstrap=function(){n.abort(),o=!1,n.chunks=[],n._prevProgress=0;for(var e=n.getOpt("forceChunkSize")?Math.ceil:Math.floor,t=Math.max(e(n.file.size/n.getOpt("chunkSize")),1),i=0;i<t;i++)!function(e){window.setTimeout(function(){n.chunks.push(new r(n.resumableObj,n,e,s)),n.resumableObj.fire("chunkingProgress",n,e/t)},0)}(i);window.setTimeout(function(){n.resumableObj.fire("chunkingComplete",n)},0)},n.progress=function(){if(o)return 1;var e=0,t=!1;return l.each(n.chunks,function(i){"error"==i.status()&&(t=!0),e+=i.progress(!0)}),e=t?1:e>.99999?1:e,e=Math.max(n._prevProgress,e),n._prevProgress=e,e},n.isUploading=function(){var e=!1;return l.each(n.chunks,function(t){if("uploading"==t.status())return e=!0,!1}),e},n.isComplete=function(){var e=!1;return 1!==n.preprocessState&&(l.each(n.chunks,function(t){var i=t.status();if("pending"==i||"uploading"==i||1===t.preprocessState)return e=!0,!1}),!e)},n.pause=function(e){n._pause=void 0===e?!n._pause:e},n.isPaused=function(){return n._pause},n.preprocessFinished=function(){n.preprocessState=2,n.upload()},n.upload=function(){var e=!1;if(!1===n.isPaused()){var t=n.getOpt("preprocessFile");if("function"==typeof t)switch(n.preprocessState){case 0:return n.preprocessState=1,t(n),!0;case 1:return!0}l.each(n.chunks,function(t){if("pending"==t.status()&&1!==t.preprocessState)return t.send(),e=!0,!1})}return e},n.markChunksCompleted=function(e){if(n.chunks&&!(n.chunks.length<=e))for(var t=0;t<e;t++)n.chunks[t].markComplete=!0},n.resumableObj.fire("chunkingStart",n),n.bootstrap(),this}function r(e,t,i,n){var o=this;o.opts={},o.getOpt=e.getOpt,o.resumableObj=e,o.fileObj=t,o.fileObjSize=t.size,o.fileObjType=t.file.type,o.offset=i,o.callback=n,o.lastProgressCallback=new Date,o.tested=!1,o.retries=0,o.pendingRetry=!1,o.preprocessState=0,o.markComplete=!1;var s=o.getOpt("chunkSize");return o.loaded=0,o.startByte=o.offset*s,o.endByte=Math.min(o.fileObjSize,(o.offset+1)*s),o.fileObjSize-o.endByte<s&&!o.getOpt("forceChunkSize")&&(o.endByte=o.fileObjSize),o.xhr=null,o.test=function(){o.xhr=new XMLHttpRequest;var e=function(e){o.tested=!0;var t=o.status();"success"==t?(o.callback(t,o.message()),o.resumableObj.uploadNextChunk()):o.send()};o.xhr.addEventListener("load",e,!1),o.xhr.addEventListener("error",e,!1),o.xhr.addEventListener("timeout",e,!1);var t=[],i=o.getOpt("parameterNamespace"),n=o.getOpt("query");"function"==typeof n&&(n=n(o.fileObj,o)),l.each(n,function(e,n){t.push([encodeURIComponent(i+e),encodeURIComponent(n)].join("="))}),t=t.concat([["chunkNumberParameterName",o.offset+1],["chunkSizeParameterName",o.getOpt("chunkSize")],["currentChunkSizeParameterName",o.endByte-o.startByte],["totalSizeParameterName",o.fileObjSize],["typeParameterName",o.fileObjType],["identifierParameterName",o.fileObj.uniqueIdentifier],["fileNameParameterName",o.fileObj.fileName],["relativePathParameterName",o.fileObj.relativePath],["totalChunksParameterName",o.fileObj.chunks.length]].filter(function(e){return o.getOpt(e[0])}).map(function(e){return[i+o.getOpt(e[0]),encodeURIComponent(e[1])].join("=")})),o.xhr.open(o.getOpt("testMethod"),l.getTarget("test",t)),o.xhr.timeout=o.getOpt("xhrTimeout"),o.xhr.withCredentials=o.getOpt("withCredentials");var s=o.getOpt("headers");"function"==typeof s&&(s=s(o.fileObj,o)),l.each(s,function(e,t){o.xhr.setRequestHeader(e,t)}),o.xhr.send(null)},o.preprocessFinished=function(){o.preprocessState=2,o.send()},o.send=function(){var e=o.getOpt("preprocess");if("function"==typeof e)switch(o.preprocessState){case 0:return o.preprocessState=1,void e(o);case 1:return}if(o.getOpt("testChunks")&&!o.tested)return void o.test();o.xhr=new XMLHttpRequest,o.xhr.upload.addEventListener("progress",function(e){new Date-o.lastProgressCallback>1e3*o.getOpt("throttleProgressCallbacks")&&(o.callback("progress"),o.lastProgressCallback=new Date),o.loaded=e.loaded||0},!1),o.loaded=0,o.pendingRetry=!1,o.callback("progress");var t=function(e){var t=o.status();if("success"==t||"error"==t)o.callback(t,o.message()),o.resumableObj.uploadNextChunk();else{o.callback("retry",o.message()),o.abort(),o.retries++;var i=o.getOpt("chunkRetryInterval");i!==undefined?(o.pendingRetry=!0,setTimeout(o.send,i)):o.send()}};o.xhr.addEventListener("load",t,!1),o.xhr.addEventListener("error",t,!1),o.xhr.addEventListener("timeout",t,!1);var i=[["chunkNumberParameterName",o.offset+1],["chunkSizeParameterName",o.getOpt("chunkSize")],["currentChunkSizeParameterName",o.endByte-o.startByte],["totalSizeParameterName",o.fileObjSize],["typeParameterName",o.fileObjType],["identifierParameterName",o.fileObj.uniqueIdentifier],["fileNameParameterName",o.fileObj.fileName],["relativePathParameterName",o.fileObj.relativePath],["totalChunksParameterName",o.fileObj.chunks.length]].filter(function(e){return o.getOpt(e[0])}).reduce(function(e,t){return e[o.getOpt(t[0])]=t[1],e},{}),n=o.getOpt("query");"function"==typeof n&&(n=n(o.fileObj,o)),l.each(n,function(e,t){i[e]=t});var s=o.fileObj.file.slice?"slice":o.fileObj.file.mozSlice?"mozSlice":o.fileObj.file.webkitSlice?"webkitSlice":"slice",a=o.fileObj.file[s](o.startByte,o.endByte,o.getOpt("setChunkTypeFromFile")?o.fileObj.file.type:""),r=null,d=[],c=o.getOpt("parameterNamespace");if("octet"===o.getOpt("method"))r=a,l.each(i,function(e,t){d.push([encodeURIComponent(c+e),encodeURIComponent(t)].join("="))});else if(r=new FormData,l.each(i,function(e,t){r.append(c+e,t),d.push([encodeURIComponent(c+e),encodeURIComponent(t)].join("="))}),"blob"==o.getOpt("chunkFormat"))r.append(c+o.getOpt("fileParameterName"),a,o.fileObj.fileName);else if("base64"==o.getOpt("chunkFormat")){var u=new FileReader;u.onload=function(e){r.append(c+o.getOpt("fileParameterName"),u.result),o.xhr.send(r)},u.readAsDataURL(a)}var h=l.getTarget("upload",d),p=o.getOpt("uploadMethod");o.xhr.open(p,h),"octet"===o.getOpt("method")&&o.xhr.setRequestHeader("Content-Type","application/octet-stream"),o.xhr.timeout=o.getOpt("xhrTimeout"),o.xhr.withCredentials=o.getOpt("withCredentials");var f=o.getOpt("headers");"function"==typeof f&&(f=f(o.fileObj,o)),l.each(f,function(e,t){o.xhr.setRequestHeader(e,t)}),"blob"==o.getOpt("chunkFormat")&&o.xhr.send(r)},o.abort=function(){o.xhr&&o.xhr.abort(),o.xhr=null},o.status=function(){return o.pendingRetry?"uploading":o.markComplete?"success":o.xhr?o.xhr.readyState<4?"uploading":200==o.xhr.status||201==o.xhr.status?"success":l.contains(o.getOpt("permanentErrors"),o.xhr.status)||o.retries>=o.getOpt("maxChunkRetries")?"error":(o.abort(),"pending"):"pending"},o.message=function(){return o.xhr?o.xhr.responseText:""},o.progress=function(e){void 0===e&&(e=!1);var t=e?(o.endByte-o.startByte)/o.fileObjSize:1;if(o.pendingRetry)return 0;switch(o.xhr&&o.xhr.status||o.markComplete||(t*=.95),o.status()){case"success":case"error":return 1*t;case"pending":return 0*t;default:return o.loaded/(o.endByte-o.startByte)*t}},this}if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var d=this;d.files=[],d.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",chunkNumberParameterName:"resumableChunkNumber",chunkSizeParameterName:"resumableChunkSize",currentChunkSizeParameterName:"resumableCurrentChunkSize",totalSizeParameterName:"resumableTotalSize",typeParameterName:"resumableType",identifierParameterName:"resumableIdentifier",fileNameParameterName:"resumableFilename",relativePathParameterName:"resumableRelativePath",totalChunksParameterName:"resumableTotalChunks",dragOverClass:"dragover",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,preprocessFile:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",testTarget:null,parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:100,chunkRetryInterval:undefined,permanentErrors:[400,401,403,404,409,415,500,501],maxFiles:undefined,withCredentials:!1,xhrTimeout:0,clearInput:!0,chunkFormat:"blob",setChunkTypeFromFile:!1,maxFilesErrorCallback:function(e,t){var i=d.getOpt("maxFiles");alert("Please upload no more than "+i+" file"+(1===i?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+l.formatSize(d.getOpt("minFileSize"))+".")},maxFileSize:undefined,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+l.formatSize(d.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+d.getOpt("fileType")+".")}},d.opts=e||{},d.getOpt=function(e){var i=this;if(e instanceof Array){var n={};return l.each(e,function(e){n[e]=i.getOpt(e)}),n}if(i instanceof r){if("undefined"!=typeof i.opts[e])return i.opts[e];i=i.fileObj}if(i instanceof a){if("undefined"!=typeof i.opts[e])return i.opts[e];i=i.resumableObj}if(i instanceof t)return"undefined"!=typeof i.opts[e]?i.opts[e]:i.defaults[e]},d.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},d.events=[],d.on=function(e,t){d.events.push(e.toLowerCase(),t)},d.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var i=e[0].toLowerCase(),t=0;t<=d.events.length;t+=2)d.events[t]==i&&d.events[t+1].apply(d,e.slice(1)),"catchall"==d.events[t]&&d.events[t+1].apply(null,e);"fileerror"==i&&d.fire("error",e[2],e[1]),"fileprogress"==i&&d.fire("progress")};var l={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if("undefined"!=typeof e.length){for(var i=0;i<e.length;i++)if(!1===t(e[i]))return}else for(i in e)if(!1===t(i,e[i]))return},generateUniqueIdentifier:function(e,t){var i=d.getOpt("generateUniqueIdentifier");if("function"==typeof i)return i(e,t);var n=e.webkitRelativePath||e.relativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var i=!1;return l.each(e,function(e){return e!=t||(i=!0,!1)}),i},formatSize:function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e,t){var i=d.getOpt("target");if("test"===e&&d.getOpt("testTarget")&&(i="/"===d.getOpt("testTarget")?d.getOpt("target"):d.getOpt("testTarget")),"function"==typeof i)return i(t);var n=i.indexOf("?")<0?"?":"&",o=t.join("&");return o&&(i=i+n+o),i}},c=function(e){e.currentTarget.classList.remove(d.getOpt("dragOverClass")),l.stopEvent(e),e.dataTransfer&&e.dataTransfer.items?s(e.dataTransfer.items,event):e.dataTransfer&&e.dataTransfer.files&&s(e.dataTransfer.files,event)},u=function(e){e.currentTarget.classList.remove(d.getOpt("dragOverClass"))},h=function(e){e.preventDefault();var t=e.dataTransfer;d.indexOf(t.types,"Files")>=0?(e.stopPropagation(),t.dropEffect="copy",t.effectAllowed="copy",e.currentTarget.classList.add(d.getOpt("dragOverClass"))):(t.dropEffect="none",t.effectAllowed="none")},p=function(e,t){var i=0,n=d.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if("undefined"!=typeof n.maxFiles&&n.maxFiles<e.length+d.files.length){if(1!==n.maxFiles||1!==d.files.length||1!==e.length)return n.maxFilesErrorCallback(e,i++),!1;d.removeFile(d.files[0])}var o=[],s=[],r=e.length,c=function(){if(!--r){if(!o.length&&!s.length)return;window.setTimeout(function(){d.fire("filesAdded",o,s)},0)}};l.each(e,function(e){function r(i){d.getFromUniqueIdentifier(i)?s.push(e):function(){e.uniqueIdentifier=i;var n=new a(d,e,i);d.files.push(n),o.push(n),n.container=void 0!==t?t.srcElement:null,window.setTimeout(function(){d.fire("fileAdded",n,t)},0)}(),c()}var u=e.name,h=e.type;if(n.fileType.length>0){var p=!1;for(var f in n.fileType){n.fileType[f]=n.fileType[f].replace(/\s/g,"").toLowerCase();var _=(n.fileType[f].match(/^[^.][^\/]+$/)?".":"")+n.fileType[f];if(u.substr(-1*_.length).toLowerCase()===_||-1!==_.indexOf("/")&&(-1!==_.indexOf("*")&&h.substr(0,_.indexOf("*"))===_.substr(0,_.indexOf("*"))||h===_)){p=!0;break}}if(!p)return n.fileTypeErrorCallback(e,i++),!0}if("undefined"!=typeof n.minFileSize&&e.size<n.minFileSize)return n.minFileSizeErrorCallback(e,i++),!0;if("undefined"!=typeof n.maxFileSize&&e.size>n.maxFileSize)return n.maxFileSizeErrorCallback(e,i++),!0;var m=l.generateUniqueIdentifier(e,t);m&&"function"==typeof m.then?m.then(function(e){r(e)},function(){c()}):r(m)})};return d.uploadNextChunk=function(){var e=!1;if(d.getOpt("prioritizeFirstAndLastChunk")&&(l.each(d.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(l.each(d.files,function(t){if(e=t.upload())return!1}),e)return!0;var t=!1;return l.each(d.files,function(e){if(!e.isComplete())return t=!0,!1}),t||d.fire("complete"),!1},d.assignBrowse=function(e,t){"undefined"==typeof e.length&&(e=[e]),l.each(e,function(e){var i;"INPUT"===e.tagName&&"file"===e.type?i=e:(i=document.createElement("input"),i.setAttribute("type","file"),i.style.display="none",e.addEventListener("click",function(){i.style.opacity=0,i.style.display="block",i.focus(),i.click(),i.style.display="none"},!1),e.appendChild(i));var n=d.getOpt("maxFiles");void 0===n||1!=n?i.setAttribute("multiple","multiple"):i.removeAttribute("multiple"),t?i.setAttribute("webkitdirectory","webkitdirectory"):i.removeAttribute("webkitdirectory");var o=d.getOpt("fileType");void 0!==o&&o.length>=1?i.setAttribute("accept",o.map(function(e){return e=e.replace(/\s/g,"").toLowerCase(),e.match(/^[^.][^\/]+$/)&&(e="."+e),e}).join(",")):i.removeAttribute("accept"),i.addEventListener("change",function(e){p(e.target.files,e),d.getOpt("clearInput")&&(e.target.value="")},!1)})},d.assignDrop=function(e){"undefined"==typeof e.length&&(e=[e]),l.each(e,function(e){e.addEventListener("dragover",h,!1),e.addEventListener("dragenter",h,!1),e.addEventListener("dragleave",u,!1),e.addEventListener("drop",c,!1)})},d.unAssignDrop=function(e){"undefined"==typeof e.length&&(e=[e]),l.each(e,function(e){e.removeEventListener("dragover",h),e.removeEventListener("dragenter",h),e.removeEventListener("dragleave",u),e.removeEventListener("drop",c)})},d.isUploading=function(){var e=!1;return l.each(d.files,function(t){if(t.isUploading())return e=!0,!1}),e},d.upload=function(){if(!d.isUploading()){d.fire("uploadStart");for(var e=1;e<=d.getOpt("simultaneousUploads");e++)d.uploadNextChunk()}},d.pause=function(){l.each(d.files,function(e){e.abort()}),d.fire("pause")},d.cancel=function(){d.fire("beforeCancel");for(var e=d.files.length-1;e>=0;e--)d.files[e].cancel();d.fire("cancel")},d.progress=function(){var e=0,t=0;return l.each(d.files,function(i){e+=i.progress()*i.size,t+=i.size}),t>0?e/t:0},d.addFile=function(e,t){p([e],t)},d.addFiles=function(e,t){p(e,t)},d.removeFile=function(e){for(var t=d.files.length-1;t>=0;t--)d.files[t]===e&&d.files.splice(t,1)},d.getFromUniqueIdentifier=function(e){var t=!1;return l.each(d.files,function(i){i.uniqueIdentifier==e&&(t=i)}),t},d.getSize=function(){var e=0;return l.each(d.files,function(t){e+=t.size}),e},d.handleDropEvent=function(e){c(e)},d.handleChangeEvent=function(e){p(e.target.files,e),e.target.value=""},d.updateQuery=function(e){d.opts.query=e},this};void 0!==e?(e.exports=t,e.exports.Resumable=t):"function"==typeof define&&define.amd?define(function(){return t}):window.Resumable=t}()},"./third_party/rum-speedindex.js":function(e,t){var i=t.getFirstPaint=function(){var e,t,i=window,n=i.document;try{t=i.performance.timing.navigationStart;for(var o=i.performance.getEntriesByType("paint"),s=0;s<o.length;s++)if("first-paint"==o[s].name){t=i.performance.getEntriesByType("navigation")[0].startTime,e=o[s].startTime-t;break}if(e===undefined&&"msFirstPaint"in i.performance.timing&&(e=i.performance.timing.msFirstPaint-t),e===undefined&&"chrome"in i&&"loadTimes"in i.chrome){var a=i.chrome.loadTimes();if("firstPaintTime"in a&&a.firstPaintTime>0){var r=a.startLoadTime;"requestTime"in a&&(r=a.requestTime),a.firstPaintTime>=r&&(e=1e3*(a.firstPaintTime-r))}}if(e===undefined||e<0||e>12e4){e=i.performance.timing.responseStart-t;for(var d={},l=n.getElementsByTagName("head")[0].children,s=0;s<l.length;s++){var c=l[s];"SCRIPT"==c.tagName&&c.src&&!c.async&&(d[c.src]=!0),"LINK"==c.tagName&&"stylesheet"==c.rel&&c.href&&(d[c.href]=!0)}for(var u=i.performance.getEntriesByType("resource"),h=!1,p=0;p<u.length;p++)if(h||!d[u[p].name]||"script"!=u[p].initiatorType&&"link"!=u[p].initiatorType)h=!0;else{var f=u[p].responseEnd;(e===undefined||f>e)&&(e=f)}}}catch(e){}return e=Math.max(e,0)};t.getSpeedIndex=function(){var e,t,n=window,o=n.document,s=function(e){var t=!1;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t={top:Math.max(i.top,0),left:Math.max(i.left,0),bottom:Math.min(i.bottom,n.innerHeight||o.documentElement.clientHeight),right:Math.min(i.right,n.innerWidth||o.documentElement.clientWidth)},t.bottom<=t.top||t.right<=t.left?t=!1:t.area=(t.bottom-t.top)*(t.right-t.left)}return t},a=function(e,t){if(t){var i=s(e);i&&u.push({url:t,area:i.area,rect:i})}},r=function(){for(var e=o.getElementsByTagName("*"),t=/url\(.*(http.*)\)/gi,i=0;i<e.length;i++){var r=e[i],d=n.getComputedStyle(r);if("IMG"==r.tagName&&a(r,r.src),d["background-image"]){t.lastIndex=0;var l=t.exec(d["background-image"]);l&&l.length>1&&a(r,l[1].replace('"',""))}if("IFRAME"==r.tagName)try{var c=s(r);if(c){var h=RUMSpeedIndex(r.contentWindow);h&&u.push({tm:h,area:c.area,rect:c})}}catch(e){}}},d=function(){for(var e={},t=n.performance.getEntriesByType("resource"),i=0;i<t.length;i++)e[t[i].name]=t[i].responseEnd;for(var o=0;o<u.length;o++)"tm"in u[o]||(u[o].tm=e[u[o].url]!==undefined?e[u[o].url]:0)},l=function(){for(var t={0:0},i=0,s=0;s<u.length;s++){var a=e;"tm"in u[s]&&u[s].tm>e&&(a=u[s].tm),t[a]===undefined&&(t[a]=0),t[a]+=u[s].area,i+=u[s].area}var r=Math.max(o.documentElement.clientWidth,n.innerWidth||0)*Math.max(o.documentElement.clientHeight,n.innerHeight||0);if(r>0&&(r=Math.max(r-i,0)*p,t[e]===undefined&&(t[e]=0),t[e]+=r,i+=r),i){for(var d in t)t.hasOwnProperty(d)&&h.push({tm:d,area:t[d]});h.sort(function(e,t){return e.tm-t.tm});for(var l=0,c=0;c<h.length;c++)l+=h[c].area,h[c].progress=l/i}},c=function(){if(h.length){t=0;for(var i=0,n=0,o=0;o<h.length;o++){var s=h[o].tm-i;s>0&&n<1&&(t+=(1-n)*s),i=h[o].tm,n=h[o].progress}}else t=e},u=[],h=[],p=.1;try{n.performance.timing.navigationStart;r(),d(),e=i(),l(),c()}catch(e){}return t}},"./third_party/truncate.js":function(e,t){function i(e,t){if(e.innerText)e.innerText=t;else if(e.nodeValue)e.nodeValue=t;else{if(!e.textContent)return!1;e.textContent=t}}function n(e,t,n,s){var a,r=e.parent();e.remove();var d=n?n.length:0;if(r.contents().length>d)return a=r.contents().eq(-1-d),o(a,t,n,s);var l=r.prev();return a=l.contents().eq(-1),!!a.length&&(i(a[0],a.text()+s.ellipsis),r.remove(),n.length&&l.append(n),!0)}function o(e,t,o,s){for(var a,d,l=e[0],c=e.text(),u="",h=0,p=c.length;h<=p;)a=h+(p-h>>1),d=r.trim(c.substr(0,a+1))+s.ellipsis,i(l,d),t.height()>s.maxHeight?p=a-1:(h=a+1,u=u.length>d.length?u:d);return u.length>0?(i(l,u),!0):n(e,t,o,s)}function s(e,t,i,n){var a,l,c=e[0],u=e.contents(),h=0,p=u.length,f=!1;for(e.empty();h<p&&!f;h++)a=u.eq(h),l=a[0],8!==l.nodeType&&(c.appendChild(l),i.length&&(r.inArray(c.tagName.toLowerCase(),d)>=0?e.after(i):e.append(i)),t.height()>n.maxHeight&&(f=3===l.nodeType?o(a,t,i,n):s(a,t,i,n)),!f&&i.length&&i.remove());return f}function a(e,t){this.element=e,this.$element=r(e),this._name="truncate",this._defaults={lineHeight:parseInt(this.$element.css("line-height")),lines:1,ellipsis:"…",showMore:"",showLess:""},this.options=r.extend({},this._defaults,t),this.options.maxHeight===undefined&&(this.options.maxHeight=parseInt(this.options.lines,10)*parseInt(this.options.lineHeight,10)),this.$clipNode=r(r(this.options.showMore),this.$element),this.original=this.cached=e.innerHTML,this.isTruncated=!1,this.isCollapsed=!0,this.update()}var r=require("shared/jquery"),d=["table","thead","tbody","tfoot","tr","col","colgroup","object","embed","param","ol","ul","dl","blockquote","select","optgroup","option","textarea","script","style"];a.prototype={update:function(e){var t=!this.isCollapsed;e?this.original=this.element.innerHTML=e:this.isCollapsed&&this.element.innerHTML===this.cached&&(this.element.innerHTML=this.original);var i=this.$element.wrapInner("<div/>").children();i.css({border:"none",margin:0,padding:0,width:"auto",height:"auto"}),this.isTruncated=!1,i.height()>this.options.maxHeight?this.isTruncated=s(i,i,this.$clipNode,this.options):this.isCollapsed=!1,i.replaceWith(i.contents()),this.cached=this.element.innerHTML,t&&(this.element.innerHTML=this.original)},expand:function(){this.isCollapsed&&(this.isCollapsed=!1,this.element.innerHTML=this.isTruncated?this.original+this.options.showLess:this.original)},collapse:function(e){this.isCollapsed||(this.isCollapsed=!0,e=e||!1,e?this.update():this.element.innerHTML=this.cached)}},t.Truncate=a},"./tooltip.js":function(e,t,i){var n=i("./shared/Class.js").Class,o=i("./shared/util.js"),s=i("./shared/jquery.js");t.attach=function(e,t,i){return new a(e,t,i).bindHover()};var a=n.extend({__init__:function(e,t,i){this.$elem=s(e),this.text=t,this.options=o.extend({delay:75,direction:"top",align:"center",container_class:"document",vertical_offset:0,attach_to_body:!1,custom_class:!1},i)},updateText:function(e){return this.text=e,this},closeAll:function(){return clearTimeout(this.timer),this.timer=null,this.$tooltip=null,s(".tooltip_parent").removeClass("tooltip_parent"),s(".tooltip").remove(),this},render:function(){this.closeAll(),this._renderTooltipElem(),this._positionTooltip();var e=this;return this.timer=setTimeout(function(){e.$tooltip.show()},this.options.delay),this},bindHover:function(){return this.$elem.on("mouseenter",this.render.bind(this)),this.$elem.on("mouseleave",this.closeAll.bind(this)),this},_shouldRenderTooltipBelow:function(){var e=this.$elem.offset(),t=50;if("document"==this.options.container_class)return e.top<t||"bottom"==this.options.direction;var i=s("."+this.options.container_class).offset();return e.top-i.top<t||"bottom"==this.options.direction},_renderTooltipElem:function(){var e=s("<span>").text(this.text),t=s("<div>").addClass("tooltip_contents"),i=s("<div>").addClass("tooltip");this.options.custom_class&&i.addClass(this.options.custom_class),t.addClass(this._shouldRenderTooltipBelow()?"nub_top":"nub_bottom"),t.addClass("nub_"+this.options.align),t.append(e),i.append(t),this.$tooltip=i},_positionTooltip:function(){this.$tooltip.appendTo(this.options.attach_to_body?s("body"):this.$elem),this.$elem.addClass("tooltip_parent"),this.$tooltip.css("display","block");var e=this.$tooltip.find(".tooltip_contents").outerWidth();this.$tooltip.css("display","none");var t=this.$tooltip.height()+5,i=this.$elem.offset(),n=this.$elem.height(),o=this.$elem.outerWidth(),a=this._shouldRenderTooltipBelow(),r=parseInt(this.$elem.css("line-height"),10),d=this.$elem.is("a")&&this.$elem.text()&&n-5>r;this.options.attach_to_body&&a?this.$tooltip.css("top",i.top+t+"px"):this.options.attach_to_body?this.$tooltip.css("top",i.top-t+"px"):a?this.$tooltip.css("top",n+5-this.options.vertical_offset+"px"):this.$tooltip.css("top",-1*t-this.options.vertical_offset+"px");var l=d?"right":this.options.align;if(this.options.attach_to_body)if("center"==l){var c=i.left+(o-e)/2;this.$tooltip.css("left",c+"px")}else"right"==l?this.$tooltip.css("left",i.left+o-e+"px"):this.$tooltip.css("left",i.left+"px");else"center"==l?this.$tooltip.css("left",(o-e)/2+"px"):"right"==l?this.$tooltip.css("right","0"):this.$tooltip.css("left","-16px")}})},"./truncate.js":function(e,t,i){var n=i("./third_party/truncate.js").Truncate,o=i("./shared/errors.js");t.truncate=function(e,t){if(e&&e!=undefined)return new n(e,t);o.logJsError("truncate","elem does not exist")}},"./ui/actions.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.LinkTarget=n.extend({onLoad:function(){var e=this;this.$id("@target").on("click",function(){e.$id("@link").get(0).click()})}})},"./ui/buttons.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.Button=n.extend({onLoad:function(){if(!this.disabled){var e=this;e.$id("@button").on("click",function(t){e.should_prevent_default&&t.preventDefault(),e.onClick(t)})}},onClick:function(e){this.pressed&&this.is_toggle?this._fnOnUnPressed&&this._fnOnUnPressed(e):this._fnOnPressed&&this._fnOnPressed(e),this.switchState(!this.pressed)},setDisabled:function(e){this.$id("@button").toggleClass("disabled",e),this.disabled=e},switchState:function(e){if(this.is_toggle&&this.toggle_condition_met&&this.pressed!=e){var t=this.$id("@button");if(null!=this.optimistic_label){var i=this.$id("@label"),n=i.text();i.text(this.optimistic_label),this.optimistic_label=n}null!=this.count&&this.should_toggle_count_visibility&&this.$id("@count_wrapper").toggleClass("hidden",this.pressed),this.$id("@count").toggleClass("count_pressed",!this.pressed),this.pressed?t.removeClass("pressed"):t.addClass("pressed"),this.should_animate_on_press&&this.$id("@icon").toggleClass("js_animate--bouncy",!this.pressed),this.pressed=e}},onPressed:function(e){e&&"function"==typeof e&&(this._fnOnPressed=e)},onUnpressed:function(e){e&&"function"==typeof e&&(this._fnOnUnPressed=e)},updateToggleConditionMet:function(e){this.toggle_condition_met=e,this.toggle_condition_met&&this.switchState(!this.pressed)}})},"./ui/carousel.js":function(e,t,i){var n=i("./shared/core/component.js").Component;i("./shared/client.js");t.SimpleCarousel=n.extend({onLoad:function(){var e=this;e.carousel=e.$id("@carousel")}})},"./ui/empty_state.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.EmptyState=n.extend({onLoad:function(){var e=this,t=this.child(this.button_name);t&&t.onPressed(function(){e.buttonCallback&&e.buttonCallback()})},registerButtonCallback:function(e){e&&"function"==typeof e&&(this.buttonCallback=e)}})},"./ui/header_image.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/log_sender.js");t.HeaderImageLayout=n.extend({onLoad:function(){this.groupUuid&&this.checkAndLogImageLoadTiming()},checkAndLogImageLoadTiming:function(){if(window.performance&&window.performance.getEntriesByType){for(var e=this,t=window.performance.getEntriesByType("resource"),i=0;i<t.length;i++){var n=t[i];if(n.name==e.imageUrl){var o=n.responseEnd-n.fetchStart;return void e.log(o)}}setTimeout(function(){e.checkAndLogImageLoadTiming()},2e3)}},log:function(e){var t={uuid:this.groupUuid,time_taken_ms:e,image_url:this.imageUrl};o.log("answer_header_image_samples_load_time",t)}})},"./ui/link.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/client.js"),s=i("./shared/window_manager.js");t.OverlayWithAppDiscardableModal=n.extend({onLoad:function(){var e=this;o.isNativeApp()&&e.$id("@overlay").click("on",function(t){t.stopPropagation(),t.preventDefault(),s.navigateTo(e.url,"present")})}}),t.OverlayWithMobileModal=n.extend({onLoad:function(){}}),t.OverlayModalLink=n.extend({onLoad:function(){var e=this;e.$id("@overlay").click("on",function(t){t.stopPropagation(),t.preventDefault(),e.createModal("load_modal").kwargs({serialized_component:e.serialized_component}).show()})}})},"./ui/main.js":function(e,t,i){},"./ui/popovers/base.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./view/hover_menu.js");t.PopOverMenuItem=o.extend({onLoad:function(){this.isSelected=this.is_selected,this.desktopOnLoad()},desktopOnLoad:function(){this.$id("@pop_over_menu_item").on("click",this.selectItem.bind(this))},onSelectAction:function(){var e=this;e.beforeServerCall(),e.serverCall("selected").success(e.onSuccess.bind(e)).error(e.onError.bind(e)).send()},selectItem:function(){return this.onSelectAction(),this.close_on_click},beforeServerCall:function(){},onSuccess:function(e){},onError:function(e){},registerCallback:function(e){this._callback=e},getActionSheetItemData:function(){var e=this.translated_label;return this.isSelected&&this.mobile_unicode_icon&&(e=this.mobile_unicode_icon+"  "+e),{index:this.index,label:e}}}),t.PopOverMenu=o.extend({onLoad:function(){var e=this;e.showMenuDesktop()},getLinkElem:function(){return this.$id("@pop_over_link")},getMenuElem:function(){return this.$id("@pop_over_menu")},showMenuDesktop:function(){this.overflowMenu=new s.ToggleableMenu({$linkElem:this.getLinkElem(),$menuElem:this.getMenuElem(),loadFunction:this.loadOverflowMenu.bind(this),onHideShowFunction:this.onHideShowFunction.bind(this),alignment:"right",clickOpen:!0,shouldAttachToBody:!1})},showMenuMobile:function(){for(var e=[],t=this.getActionSheetItemsData(),i=0;i<t.length;i++){var o=t[i];e[o.index]=o.label}n.showActionSheet({title:this.translated_mobile_title,buttonTitles:e,destructiveButtonIndex:-1,callback:this.onSelectItemMobile.bind(this)})},onSelectItemMobile:function(e){if(!(e<0))for(var t=this.children(),i=0;i<t.length;i++){var n=t[i];if(n.getActionSheetItemData){var o=n.getActionSheetItemData();if(o.index==e)return n.selectItem(e)}}},getActionSheetItemsData:function(){for(var e=this.children(),t=[],i=0;i<e.length;i++){var n=e[i];n.getActionSheetItemData&&t.push(n.getActionSheetItemData())}return t},loadOverflowMenu:function(){},onHideShowFunction:function(e){}}),t.PopOverMenuToggleable=t.PopOverMenuItem.extend({desktopOnLoad:function(){var e=this;this._super.apply(this,arguments),e.is_checkable&&e.child("toggle_button").$id("@checkbox").on("click",function(t){t.stopPropagation(),e.selectItem()})},_update:function(e){this.isSelected=e,this.is_checkable?this.child("toggle_button").$id("@checkbox")[0].checked=e:this.$id("@contents").toggleClass(this.selected_css,e)},onToggledOff:function(){this.one_way||(this._update(!1),this.with_server_call&&this.makeServerCall("on_toggled_off",!1))},onToggledOn:function(){this._update(!0),this.with_server_call&&this.makeServerCall("on_toggled_on",!0)},makeServerCall:function(e,t){var i=this;i.serverCall(e).liveMutate({optimisticUpdate:!0}).success(i.onSuccess.bind(i)).error(i.onError.bind(i)).send()},onSelectAction:function(){this.isSelected?this.onToggledOff():this.onToggledOn(),this._callback&&this._callback()}})},"./ui/popovers/core.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/dom.js");t.PopupBase=n.extend({onLoad:function(){this.$anchor=this.$id("@popup_anchor"),this.$content=this.$id("@popup_content"),this.showDelayMs=this.showDelayMs||350,this.hideDelayMs=this.hideDelayMs||350,this.shown=!1,this.cancelHover=!1,this.hideTimeout=null,this.showTimeout=null,this.shouldAttachToBody=!1,this.registerEventHandlers()},registerEventHandlers:function(){var e=this;this.$anchor.click(function(t){t.preventDefault(),e.toggleContentDesktop()}),s.onDocClick(this.maybeHide.bind(this)),"hover"==this.open_on&&(this.$anchor.hover(this.showSlow.bind(this),function(){this.hideSlow(),this.cancelHover=!1,this.$anchor.removeClass("hover")}.bind(this)),this.$content.hover(this.showSlow.bind(this),this.hideSlow.bind(this)))},maybeHide:function(e){var t=this.$anchor.get(0);e==t||t&&o.contains(t,e)||this.hide()},toggleContentDesktop:function(){this.shown?(this.cancelHover=!0,this.hide()):(this.cancelHover=!1,this.showContentDesktop())},showContentDesktop:function(){this.shown||this.cancelHover||(this.shown=!0,this.$content.removeClass("hidden"),this.setPosition())},showSlow:function(){clearTimeout(this.hideTimeout),this.showTimeout=setTimeout(this.showContentDesktop.bind(this),this.showDelayMs),this.$content.removeClass("animate_out"),this.$anchor.addClass("hover")},showContentMobile:function(){},hide:function(){var e=this;this.shown&&(this.shown=!1,this.$anchor.removeClass("hover"),this.$content.addClass("animate_out"),setTimeout(function(){e.shown||(e.$content.removeClass("animate_out"),e.$content.addClass("hidden"))},150))},hideSlow:function(){clearTimeout(this.showTimeout),this.hideTimeout=setTimeout(this.hide.bind(this),this.hideDelayMs)},setPosition:function(){var e=o(window),t=this.$anchor.outerHeight(),i=this.$anchor.offset(),n=e.height(),s=this.$content.outerHeight(),a=i.top-e.scrollTop(),r=n-a<s,d=this.$content.outerWidth(),l=this.$anchor.outerWidth();if(this.$content.removeAttr("style"),r?(this.shouldAttachToBody?this.$content.css("top",i.top-t-s+"px"):this.$content.css("bottom",t+"px"),this.$content.addClass("ui_popup--above")):(this.shouldAttachToBody?this.$content.css("top",i.top+t+1+"px"):this.$content.css("top",t+"px"),this.$content.removeClass("ui_popup--above")),this.shouldAttachToBody){var c=e.width(),u=d+i.left,h=i.left;if(c<u){var p=u-c;"left"==this.alignment&&(h-=p+10)}"right"==this.alignment?this.$content.css("left",h-d+l+"px"):"center"==this.alignment?this.$content.css("left",h-d/2+l/2+"px"):this.$content.css("left",h+"px")}else"right"==this.alignment?this.$content.css("right",0):"center"==this.alignment?this.$content.css("left",l/2-d/2+"px"):this.$content.css("left",0)}})},"./ui/qtext.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.Truncated=n.extend({onLoad:function(){this.$id("@more").click(function(e){if(!e.metaKey){var t=e.currentTarget;"A"===t.tagName&&(t.href="#"),e.preventDefault()}})},enterLoadingState:function(){this.$id("@loading").removeClass("hidden"),this.$id("@more").addClass("hidden")},exitLoadingState:function(){this.$id("@more").removeClass("hidden"),this.$id("@loading").addClass("hidden")}})},"./unified_view/a2a.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/client_log.js"),s=i("./unified_view/paged_list.js").PagedList,a=i("./shared/events/index.js"),r=i("./unified_view/multimodal.js").Step,d=i("./unified_view/modal.js").ModalNavItem,l=i("./unified_view/multimodal.js").Manager,c=i("./shared/jquery.js");t.openA2aModal=function(e,t){e.manager=new l(e,function(e,t,i){"edit_topics"==t?e.pushStep("a2a",i):"a2a"==t&&i.openTopicsStep?(i.noBack=!0,e.pushStep("edit_topics",i)):e.dismiss()}),e.manager.pushStep("a2a",t)},t.A2AHeader=n.extend({onLoad:function(){if(this.scroll_to_self){var e=this.$id("@header_other").prop("offsetTop");e&&window.scrollTo(0,e-90)}}}),t.A2aModalStep=r.extend({onShow:function(){var e=this;e.outstanding_requests_link=e.child("outstanding_requests_link"),e.outstanding_requests_link?e.child("outstanding_requests_link").setParentModalToDismiss(e):(e.tooltipButton=e.child("tooltip"),e.tooltipButton.onPressed(function(t){e.toggleMessage()}),e.tooltipButton.onUnpressed(function(t){e.toggleMessage()}),e.handleEvent(a.Types.A2A_TOGGLE_LIMIT_MESSAGE,function(t){t.payload.should_unpress&&e.tooltipButton.switchState(!1)}),e.handleEvent(a.Types.A2A_MODAL_TAB_SWITCH,function(t){e.switchTab(t.payload.ty)})),e.showSelectorIfMobile()},toggleMessage:function(){this.emitEvent({type:a.Types.A2A_TOGGLE_LIMIT_MESSAGE,payload:{should_unpress:!1}}),this.$id("@modal_actions").toggleClass("open")},switchTab:function(e){var t=this;t.$id("@content").addClass("working"),t.serverCall("switch_tab").kwargs({ty:e}).contentFor(t.$id("@content")).success(function(){t.$id("@content").removeClass("working")}).send()},dismiss:function(){var e=this;e.hideSelectorIfMobile(),e.serverCall("log_close").kwargs({qid:e.qid}).send(),e._super.apply(e,arguments)},back:function(){var e=this;e._super.apply(e,arguments),e.hideSelectorIfMobile()},submit:function(){var e=this;e.hideSelectorIfMobile(),e._super.apply(e),e.openTopicsStep||e.serverCall("log_submit").kwargs({qid:e.qid}).send()},hideSelectorIfMobile:function(e){},showSelectorIfMobile:function(){},getSubmitData:function(){return this.data.openTopicsStep=this.openTopicsStep,this.data}}),t.A2ARequestLimitMessage=n.extend({onLoad:function(){var e=this;e.closeButton=this.child("close"),e.$message=this.$id("@limit_message"),e.is_open=e.$message.hasClass("open"),e.closeButton.onPressed(function(t){e.emitEvent({type:a.Types.A2A_TOGGLE_LIMIT_MESSAGE,payload:{should_unpress:!0}})}),e.handleEvent(a.Types.A2A_TOGGLE_LIMIT_MESSAGE,function(t){e.toggleMessage()}),e.handleEvent(a.Types.A2A_SEND_REQUEST,function(t){e.count=e.count+t.payload.update_count,e.count>=e.limit&&!e.is_open&&e.toggleMessage()})},toggleMessage:function(){var e=this;e.is_open?(e.is_open=!1,e.$message.toggleClass("open"),setTimeout(function(){e.$message.toggleClass("hidden")},300)):(e.is_open=!0,e.$message.toggleClass("hidden"),setTimeout(function(){e.$message.toggleClass("open")},50))}}),t.A2AModalNavItem=d.extend({triggerSwitchTab:function(){var e=this;a.DocumentProxy.dispatch({type:a.Types.A2A_MODAL_TAB_SWITCH,payload:{ty:e.ty}})},handleSwitchTab:function(){var e=this;this.handleEvent(a.Types.A2A_MODAL_TAB_SWITCH,function(t){t.payload.ty==e.ty?e.$tab.addClass("selected"):e.$tab.removeClass("selected")})}}),t.AdditionalA2ASearchResultsModalLink=n.extend({onLoad:function(){var e=this;this.$id("@load_more_results").on("click",function(t){t.preventDefault(),e.parent().parent().toggleResultsCount()})}}),t.A2ASelectorResultsMixin={onLoad:function(){this._super.apply(this,arguments),this.ignore_uid_select={},this.results_count=this.metadata.initial_result_count},showResults:function(e){this._super.apply(this,arguments),a.DocumentProxy.dispatch({type:a.Types.A2A_SELECTOR_TOGGLE,payload:{show:e}})},resultWasSelected:function(e,t,i){var n=e.data.uid;if(!this.ignore_uid_select[n]){this.ignore_uid_select[n]=!0,this.updateResultItem(i),o.logEvent("AskToAnswer",c(i).get(0),{qid:this.qid});var s=function(){delete this.ignore_uid_select[n],this.revertSelectedRow(i)}.bind(this);this.serverCall("ask_to_answer").liveMutate().kwargs({to_uid:n}).success(this.getCallback(s)).error(s).send()}},getCallback:function(e){return function(t){"failed"===t.result&&e()}},resultsDidChange:function(){this.ignore_uid_select={}},queryDidChange:function(){this.results_count=this.metadata.initial_result_count},toggleResultsCount:function(){this.results_count=this.metadata.extended_result_count,this._busy=!1,this.updateResults()},updateResultItem:function(e){this.emitEvent({type:a.Types.A2A_SEND_REQUEST,payload:{update_count:1}});var t=e.find(".ask_icon"),i=e.find(".checkmark_icon");c(t).addClass("pop_out"),c(t).addClass("hidden"),c(i).removeClass("hidden")},revertSelectedRow:function(e){this.emitEvent({type:a.Types.A2A_SEND_REQUEST,payload:{update_count:-1}});var t=e.find(".ask_icon"),i=e.find(".checkmark_icon");c(i).addClass("pop_out"),c(i).addClass("hidden"),c(t).removeClass("hidden").addClass("pop_in")},getExtraKwargs:function(){return{num_results:this.results_count}}},t.A2AWantedAnswerTopicFilters=n.extend({onLoad:function(){var e=this;this.$id("@filter_container").on("click",".a2a_topic_filter",function(t){t.preventDefault(),c(this).siblings().removeClass("selected"),c(this).addClass("selected"),e.emitEvent({type:a.Types.A2A_UPDATE_TOPIC,payload:{tid:this.getAttribute("value")}})})}}),t.WantedAnswersSuggestionsPagedList=s.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.handleEvent(a.Types.A2A_UPDATE_TOPIC,function(){e.forceResync(0)})}})},"./unified_view/action_bar/_action_bar.js":function(e,t,i){var n=i("./unified_view/action_bar/base.js"),o=i("./shared/events/index.js"),s=i("./sticky.js");t.Question=n.ActionBarWeb.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.handleEvent(o.Types.QUESTION_EDITING_STATE,function(t){t.payload.qid==e.oid&&("edit"==t.payload.state?e.$actionBarElem.addClass("hidden"):"cancel"==t.payload.state?e.$actionBarElem.removeClass("hidden"):"request"==t.payload.state&&e.$actionBarElem.removeClass("hidden"))})}}),t.QuoraShareSticky=n.ActionBarWeb.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.maybeEnableSticky()},maybeEnableSticky:function(){var e=this.$actionBarElem.parents(".feed_item");e.length||(e=this.$actionBarElem.parent().parent()),s.add({elem:this.$actionBarElem,container:e,offsets:this.sticky_offsets})}}),t.QuoraShareStickyMobile=n.ActionBarWeb.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.maybeEnableSticky()},maybeEnableSticky:function(){var e=this.$actionBarElem.parents(".feed_item");s.add({elem:this.$actionBarElem,container:e,offsets:this.sticky_offsets})}}),t.Answer=n.ActionBarWeb.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.is_sticky&&e.maybeEnableSticky()},maybeEnableSticky:function(){var e=this.$actionBarElem.parents(".feed_item");e.length||(e=this.$actionBarElem.parents(".Answer")),s.add({elem:this.$actionBarElem,container:e,offsets:this.sticky_offsets})}}),t.Post=n.ActionBarWeb.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.is_sticky&&e.maybeEnableSticky()},maybeEnableSticky:function(){var e=this.$actionBarElem.parents(".feed_item");s.add({elem:this.$actionBarElem,container:e,offsets:this.sticky_offsets})}}),t.Comment=n.ActionBarWeb.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.handleEvent(o.Types.COMMENT_REPLY_FOCUS,function(t){t.payload.comment_id==e.oid[1]&&t.payload.comment_type==e.oid[0]&&e.$id("@overflow_link").toggleClass("hidden")})}})},"./unified_view/action_bar/base.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./shared/w2.context.js"),r=(i("./shared/client.js"),i("./shared/perf.js")),d=i("./unified_view/util.js"),l=i("./view/hover_menu.js"),c=i("./sticky.js"),u=i("./shared/window_manager.js");t.ActionBarWeb=s.extend({contextConstructor:function(){return a.ActionBar},onLoad:function(){this.overflowMenuShown=!1,this.overflowMenuMovedToBody=!1,this.overflowMenuLoaded=!this.lazy_loaded,this.$overflowLinkElem=this.$id("@overflow_link"),this.$overflowMenuElem=this.$id("@overflow_menu"),this.$actionBarElem=this.$id("@action_bar"),this.$overflowMenuContentsElem=this.$id("@overflow_menu_contents"),this.actionBarContext=this.getContext(a.ActionBar),this.overflowMenu=new l.ToggleableMenu({$linkElem:this.$overflowLinkElem,$menuElem:this.$overflowMenuElem,loadFunction:this.loadOverflowMenu.bind(this),alignment:"right",clickOpen:!0,shouldAttachToBody:!1}),this.is_sticky&&(this.actionBarContext.on("commentsElem",this.maybeEnableSticky.bind(this)),this.actionBarContext.on("updateSticky",this.updateSticky.bind(this))),this.userPerceivedAction=null},loadOverflowMenu:function(){var e=this;this.overflowMenuLoaded||(this.userPerceivedAction=r.startUserPerceived({hmac:this.getHmac(),method:"load_menu"}),this.overflowMenuLoaded=!0,this.serverCall("load_menu").disableDefaultUserPerceivedLogging().contentFor(this.$overflowMenuContentsElem.get(0)).success(function(){!0===e.overflowMenu.shown&&e.userPerceivedAction&&(r.finishAction(e.userPerceivedAction),e.userPerceivedAction=null)}).send())},maybeEnableSticky:function(){if(this.is_sticky){var e=this.actionBarContext.get("commentsElem"),t=this.actionBarContext.get("showComments");e&&!t?c.add({elem:this.$actionBarElem,container:this.$actionBarElem.parent().parent(),offsets:this.sticky_offsets}):c.remove(this.$actionBarElem)}},updateSticky:function(){this.is_sticky&&(this.maybeEnableSticky(),u.scrollIntoView(this.$actionBarElem))}}),t.ActionBarMobile=s.extend({contextConstructor:function(){return a.ActionBar},onLoad:function(){this.overflowMenuLoaded=!this.lazy_loaded,this.overflowMenuLoading=!1,this.overflowMenuShown=!1,this.overflowMenuShownPending=!1,this.$overflowMenuContentsElem=this.$id("@overflow_menu_contents"),this.$overflowLinkElem=this.$id("@overflow_link"),this.$overflowLinkElem.on("click",this.showMenu.bind(this)),this.lazy_loaded&&this.loadOverflowMenu(),this.userPerceivedAction=null},loadOverflowMenu:function(){this.overflowMenuLoading||this.overflowMenuLoaded||this.$overflowMenuContentsElem.get(0)&&(this.overflowMenuLoading=!0,this.serverCall("load_menu").disableDefaultUserPerceivedLogging().contentFor(this.$overflowMenuContentsElem.get(0)).success(this.maybeShowMenu.bind(this)).send({batched:!0}))},enterLoadingState:function(){o.send("showLoadingView")},exitLoadingState:function(){o.send("hideLoadingView")},maybeShowMenu:function(){this.overflowMenuLoaded=!0,this.overflowMenuLoading=!1,this.overflowMenuShownPending&&(this.overflowMenuShownPending=!1,this.exitLoadingState(),this.showMenu())},showMenu:function(){if(this.userPerceivedAction||(this.userPerceivedAction=r.startUserPerceived({hmac:this.getHmac(),method:"load_menu"})),!this.overflowMenuLoaded)return this.overflowMenuShownPending=!0,this.enterLoadingState(),void this.loadOverflowMenu();if(!this.overflowMenuShown){this.overflowMenuShown=!0;for(var e=[],t=-1,i=this.getActionSheetItemsData(),s=0;s<i.length;s++){var a=i[s];e[a.index]=a.label,a.is_destructive&&(t=a.index)}n.supportsDestructiveActionSheetButtons()||(t=-1);var l={title:this.title,buttonTitles:e,destructiveButtonIndex:t,position:d.positionForElement(this.$overflowLinkElem.get(0))};o.send("showActionSheet",l,function(e){this.overflowMenuShown=!1;var t=parseInt(e.buttonIndex,10);t<0||setTimeout(this.selectOverflowItem.bind(this,t),100)}.bind(this)),this.userPerceivedAction&&(r.finishAction(this.userPerceivedAction),this.userPerceivedAction=null)}},getActionSheetItemsData:function(){for(var e=this.children(),t=[],i=0;i<e.length;i++){var n=e[i];n.getActionSheetItemData&&t.push(n.getActionSheetItemData()),n.getActionSheetItemsData&&Array.prototype.push.apply(t,n.getActionSheetItemsData())}return t},selectOverflowItem:function(e){for(var t=this.children(),i=0;i<t.length;i++){var n=t[i];if(n.getActionSheetItemData){if(n.getActionSheetItemData().index==e)return n.selectItem()}else if(n.selectOverflowItem)return n.selectOverflowItem(e)}}}),t.ActionButton=s.extend({onLoad:function(){var e=this;this.actionButton=this.child("action_button"),this._userPerceivedAction=null,this.actionButton&&"function"==typeof this.actionButton.onPressed&&this.actionButton.onPressed(function(t){e.onPressed(t)}),this.actionButton&&"function"==typeof this.actionButton.onUnpressed&&this.actionButton.onUnpressed(function(t){e.onUnpressed(t)})},setDisabled:function(e){this.actionButton.setDisabled(e)},setUserPerceivedAction:function(e){this._userPerceivedAction||(this._userPerceivedAction=r.startUserPerceived({hmac:this.getHmac(),method:e}))},endUserPerceivedAction:function(){this._userPerceivedAction&&(r.finishAction(this._userPerceivedAction),this._userPerceivedAction=null)},dirtyURL:function(){},onPressed:function(e){var t=this;this.setUserPerceivedAction("press"),this.serverCall("press").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).except("question_follow_rate_limiting",function(){t.actionButton.switchState(!1)}).error(function(){t.actionButton.switchState(!1)}).success(this.onPressedSuccess.bind(this)).send(),this.endUserPerceivedAction()},onUnpressed:function(e){var t=this;this.setUserPerceivedAction("unpress"),this.serverCall("unpress").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).error(function(){t.actionButton.switchState(!0)}).success(this.onUnpressedSuccess.bind(this)).send(),this.endUserPerceivedAction()},onPressedSuccess:function(){},onUnpressedSuccess:function(){}})},"./unified_view/action_bar/comment.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.CommentItemComponent=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.COMMENT_REPLY_FOCUS,function(t){t.payload.comment_id==e.comment_id&&t.payload.comment_type==e.comment_type&&e.$id("@wrapper").toggleClass("hidden")})}})},"./unified_view/action_bar/meta_bar/answer.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.AnswerMetabarPrependItem=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.ANSWER_VOTE_STATE,function(t){if(t.payload.aid==e.aid){var i="upvoted"==t.payload.state;e.$id("@wrapper").toggleClass("is_active",i),e.$id("@post_upvote_text").toggleClass("hidden",!i),e.$id("@pre_upvote_text").toggleClass("hidden",i),e.is_horizontally_scrollable&&(e.$id("@post_upvote_text").toggleClass("metabar_slide_in",i),i&&e.$id("@scroll").scrollLeft(0))}})}})},"./unified_view/action_bar/meta_bar/board_item.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.BoardItemMetabarPrependItem=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.POST_VOTE_STATE,function(t){if(t.payload.pid==e.oid){var i="upvoted"==t.payload.state;e.$id("@wrapper").toggleClass("is_active",i),e.$id("@post_upvote_text").toggleClass("hidden",!i),e.$id("@pre_upvote_text").toggleClass("hidden",i),e.is_horizontally_scrollable&&i&&e.$id("@scroll").scrollLeft(0)}})}})},"./unified_view/action_bar/meta_bar/post.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.PostMetabarPrependItem=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.POST_VOTE_STATE,function(t){if(t.payload.pid==e.oid){var i="upvoted"==t.payload.state;e.$id("@wrapper").toggleClass("is_active",i),e.$id("@post_upvote_text").toggleClass("hidden",!i),e.$id("@pre_upvote_text").toggleClass("hidden",i),e.is_horizontally_scrollable&&i&&e.$id("@scroll").scrollLeft(0)}})}})},"./unified_view/action_bar/meta_bar/quora_share.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.QuoraShareMetabarPrependItem=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.QUORASHARE_VOTE_STATE,function(t){if(t.payload.share_id==e.share_id){var i="upvoted"==t.payload.state;e.$id("@wrapper").toggleClass("is_active",i),e.$id("@post_upvote_text").toggleClass("hidden",!i),e.$id("@pre_upvote_text").toggleClass("hidden",i),e.is_horizontally_scrollable&&(e.$id("@post_upvote_text").toggleClass("metabar_slide_in",i),i&&e.$id("@scroll").scrollLeft(0))}}),this.handleEvent(o.Types.QUORA_SHARE_ANSWER_EXPANDED,function(t){t.payload.share_id==e.share_id&&e.serverCall("should_show_metabar_profile").success(function(t){t.show_metabar_profile&&(e.$id("@metabar_profile").removeClass("hidden"),e.$id("@metabar_profile").addClass("u-margin-bottom--sm"))}).send()})}})},"./unified_view/action_bar/overflow_menu/ad.js":function(e,t,i){var n=i("./unified_view/modal.js").ModalBase,o=(i("./shared/jquery.js"),i("./unified_view/action_bar/overflow_menu/base.js")),s=i("./shared/events/index.js"),a=s.scope;t.HideAd=o.Item.extend({onSelectAction:function(){this.emitEvent({type:s.Types.AD_REPORTED,payload:{adId:this.adId},scope:a.GLOBAL}),this.serverCall("submit_feedback").kwargs({ad_id:this.adId,report_reason:"",impression_hash:this.impressionHash}).send(),this.createModal("load_feedback_modal").kwargs({ad_id:this.adId,impression_hash:this.impressionHash}).show()}}),t.AdFeedbackModal=n.extend({onLoad:function(){this._super();var e=this;this.reason="",this.$id("@feedback_list").on("change","input[type=radio]",function(){e.reason=this.value,e.$id("@submit").removeClass("disabled")})},submitFeedback:function(){var e=this;this.serverCall("submit_feedback").kwargs({ad_id:e.adId,report_reason:e.reason,impression_hash:e.impressionHash}).send(),e.close()},onSubmit:function(){this.submitFeedback()}})},"./unified_view/action_bar/overflow_menu/answer.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./shared/client_log.js"),s=i("./shared/core/component.js"),a=i("./unified_view/action_bar/overflow_menu/base.js");t.ChooseCredential=a.WithServerCall.extend({onSelectAction:function(){this.createModal("selected").kwargs({aid:this.aid}).show()}}),t.ThumbnailControl=a.WithModal.extend({_logModalClose:function(e){this.serverCall("log_modal_close").kwargs({aid:this.aid,user_action:e}).send()},onSelectAction:function(e){var t=!1,i=this;this.createModal("load_modal").kwargs({aid:this.aid}).onSubmit(function(){t=!0,i._logModalClose("submit")}).onClose(function(){t||i._logModalClose("close")}).show()}}),t.RemoveA2AAttribution=a.WithServerCall.extend({onSelectAction:function(){this.serverCall("selected").liveMutate().send()}}),t.SeedQuestionToOtherSiloBase=a.WithServerCall.extend({onSelectAction:function(){this.serverCall("selected").liveMutate().send()}}),t.Downvote=a.Toggleable.extend({onToggledOn:function(){this.emitEvent(n.helpers.addAnswerDownvote(this.aid)),this._super.apply(this,arguments),o.logEvent("AnswerDownvote",s.getAnyElement(this),{aid:this.aid})},onToggledOff:function(){this.emitEvent(n.helpers.removeAnswerDownvote(this.aid)),this._super.apply(this,arguments)}}),t.Delete=a.ToggleableWithConfirmation.extend({makeServerCall:function(e){this.serverCall(e).liveMutate().success(function(){}).send()}})},"./unified_view/action_bar/overflow_menu/base.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./shared/events/index.js"),a=i("./shared/window_manager.js");t.Item=o.extend({onLoad:function(){this.desktopOnLoad()},desktopOnLoad:function(){this.$id("@overflow_menu_item").on("click",this.selectItem.bind(this))},selectItem:function(){return this.onSelectAction(),this.close_on_click},onSelectAction:function(){},getActionSheetItemData:function(){return{index:this.index,label:this.label,is_destructive:this.is_destructive}}}),t.WithServerCall=t.Item.extend({onSelectAction:function(){var e=this;e.serverCall("selected").success(function(e){e.url&&a.navigateTo(e.url)}).send()},onSuccessMobile:function(e){e&&e.url&&a.navigateTo(e.url)}}),t.WithLink=t.Item.extend({desktopOnLoad:function(){var e=this;this.$id("@overflow_menu_item").on("click",function(t){e.onSelectAction(t)})},onSelectAction:function(){a.navigateTo(this.url)}}),t.WithModal=t.WithLink.extend({onSelectAction:function(e){e.preventDefault(),this.createModal("load_modal").show()}}),t.Toggleable=t.Item.extend({onToggledOff:function(){this.one_way||this.with_server_call&&this.makeServerCall("on_toggled_off")},onToggledOn:function(){this.with_server_call&&this.makeServerCall("on_toggled_on")},makeServerCall:function(e){var t=this;t.serverCall(e).liveMutate().success(function(){}).send()},onSelectAction:function(){this.is_on?this.onToggledOff():this.onToggledOn()}}),t.ToggleableWithConfirmation=t.Toggleable.extend({onToggledOn:function(){var e=this,t=e._super,i=function(){t.apply(e),e.onConfirmToggleOn()};this.should_show_on_toggled_on?this.createModal("load_modal").onSubmit(i).kwargs(this.modal_kwargs).show():i()},onToggledOff:function(){var e=this,t=e._super,i=function(){t.apply(e),e.onConfirmToggleOff()};this.should_show_on_toggled_off?this.createModal("load_modal").onSubmit(i).kwargs(this.modal_kwargs).show():i()},onConfirmToggleOn:function(){},onConfirmToggleOff:function(){}}),t.RemoveFromTribe=t.ToggleableWithConfirmation.extend({onConfirmToggleOn:function(){var e=this;e.emitEvent({type:s.Types.TRIBE_ITEM_REMOVE,payload:{oid:e.oid,object_type:e.feed_object_type}})}})},"./unified_view/action_bar/overflow_menu/blog.js":function(e,t,i){var n=i("./unified_view/action_bar/overflow_menu/base.js"),o=i("./shared/events/index.js");t.MuteBlog=n.Toggleable.extend({onToggledOn:function(){this._super(),this.story_oid&&this.emitEvent({type:o.Types.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:this.story_oid,message:this.message,state:"show_message",action:"blog_mute",action_id:this.bid}})}}),t.BlogFollowers=n.Item.extend({onSelectAction:function(){this.createModal("load_blog_followers_modal").kwargs({bid:this.bid}).show()}})},"./unified_view/action_bar/overflow_menu/board_item.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./unified_view/action_bar/overflow_menu/base.js");t.Downvote=o.Toggleable.extend({onToggledOn:function(){this.emitEvent(n.helpers.addPostDownvote(this.pid)),this._super.apply(this,arguments)},onToggledOff:function(){this.emitEvent(n.helpers.removePostDownvote(this.pid)),this._super.apply(this,arguments)}})},"./unified_view/action_bar/overflow_menu/comment.js":function(e,t,i){var n,o=i("./unified_view/action_bar/overflow_menu/base.js");t.CopyLink=o.WithServerCall.extend({onSelectAction:function(){n.send("shareCopyURL",{url:this.share_url}),this._super.apply(this,arguments)}})},"./unified_view/action_bar/overflow_menu/hyperlink.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./unified_view/action_bar/overflow_menu/base.js");t.Downvote=o.Toggleable.extend({onToggledOn:function(){this.emitEvent(n.helpers.addHyperLinkDownvote(this.link_id)),this._super.apply(this,arguments)},onToggledOff:function(){this.emitEvent(n.helpers.removeHyperLinkDownvote(this.link_id)),this._super.apply(this,arguments)}})},"./unified_view/action_bar/overflow_menu/message.js":function(e,t,i){var n=i("./unified_view/action_bar/overflow_menu/base.js");t.MuteConversation=n.Item.extend({onSelectAction:function(){this.createModal("load_mute_modal").kwargs({thread_id:this.threadId}).show()}}),t.Report=n.Item.extend({onSelectAction:function(){this.createModal("load_report_modal").kwargs({thread_id:this.threadId}).show()}}),t.MarkConversationUnread=n.Item.extend({onSelectAction:function(){this.createModal("load_mark_unread_modal").kwargs({thread_id:this.threadId}).show()}})},"./unified_view/action_bar/overflow_menu/post.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./unified_view/action_bar/overflow_menu/base.js");t.Downvote=o.Toggleable.extend({onToggledOn:function(){this.emitEvent(n.helpers.addPostDownvote(this.pid)),this._super.apply(this,arguments)},onToggledOff:function(){this.emitEvent(n.helpers.removePostDownvote(this.pid)),this._super.apply(this,arguments)}}),t.ChooseCredential=o.WithServerCall.extend({onSelectAction:function(){this.createModal("selected").kwargs({pid:this.pid}).show()}})},"./unified_view/action_bar/overflow_menu/profile.js":function(e,t,i){var n,o,s=i("./unified_view/action_bar/overflow_menu/base.js"),a=i("./shared/browser.js"),r=i("./settings.js").interface_strings,d=i("./shared/events/index.js");t.BlockUser=s.Toggleable.extend({onToggledOff:function(){this.createModal("load_unblock_modal").kwargs({target_uid:this.target_uid}).show()},onToggledOn:function(){this.createModal("load_block_modal").kwargs({target_uid:this.target_uid}).show()}}),t.Logout=s.Item.extend({onSelectAction:function(){var e=this;a.ios&&a.chrome?e.logout():o.showAlert({title:e.dialog_title,message:e.dialog_message,callback:function(t){0===t.buttonIndex&&e.logout()},cancelButtonTitle:e.dialog_title,otherButtonTitles:[r.cancel]})},logout:function(){var e=this;this.serverCall("logout").success(function(){n.send("disableAutoSignIn"),n.send("loginStateChanged",{isLoggedIn:!1})}).error(function(){o.showAlert({title:e.dialog_title,message:e.dialog_error_message,cancelButtonTitle:r.ok})}).send()}}),t.SendMessage=s.Item.extend({onSelectAction:function(){this.createModal("load_message_modal").kwargs({target_uid:this.target_uid}).show()}}),t.ViewModalMessage=s.Item.extend({onSelectAction:function(){this.createModal("load_message_modal").kwargs({target_uid:this.target_uid,thread_id:this.thread_id}).show()}}),t.UserFollow=s.Toggleable.extend({onToggledOff:function(){this._super(),this.story_oid&&this.emitEvent({type:d.Types.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:this.story_oid,message:this.message,state:"show_message",action:"user_unfollow",action_id:this.target_uid}})}}),t.MuteUser=s.ToggleableWithConfirmation.extend({onToggledOn:function(){this._super(),this.story_oid&&this.emitEvent({type:d.Types.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:this.story_oid,message:this.message,state:"show_message",action:"user_mute",action_id:this.target_uid}})}})},"./unified_view/action_bar/overflow_menu/question.js":function(e,t,i){var n,o,s=i("./unified_view/action_bar/overflow_menu/base.js"),a=i("./shared/core/component.js"),r=i("./shared/events/index.js"),d=i("./shared/toast.js"),l=i("./shared/client.js"),c=i("./shared/client_log.js"),u=i("./unified_view/multimodal.js").openSingleModalStep;t.AddAnonAnswer=s.WithServerCall.extend({onSuccessMobile:function(e){e.draft_id&&this.child("prompter").set_oid(e.draft_id),e.url&&o.showFromUrl(e.url)}}),t.Downvote=s.Toggleable.extend({onToggledOn:function(){this.emitEvent(r.helpers.addQuestionDownvote(this.qid)),this._super.apply(this,arguments)}}),t.AnswerLater=s.Toggleable.extend({onToggledOn:function(){var e=a.getAnyElement(this);c.logEvent("QuestionAnswerLater",e,{qid:this.qid}),this._super.apply(this,arguments)}}),t.EditMenu=s.Item.extend({onSelectAction:function(){this.child("menu").showMenu()}}),t.ToggleEditQuestionItem=s.Item.extend({onSelectAction:function(){this.emitEvent({type:r.Types.QUESTION_EDITING_STATE,payload:{qid:this.qid,state:"edit"}})}}),t.DisclaimerQuestion=s.Toggleable.extend({onToggledOn:function(){this.emitEvent(r.helpers.inlineEditorDisclaimer("answer",this.qid))}}),t.CantAnswer=s.Toggleable.extend({onToggledOn:function(){var e=a.getAnyElement(this);c.logEvent("QuesitonPass",e,{qid:this.qid}),this._super.apply(this,arguments),this.emitEvent(r.helpers.addQuestionCantAnswer(this.qid))}}),t.ModalEditQuestionItem=s.WithServerCall.extend({onSelectAction:function(){this.createModal("load_modal").kwargs({qid:this.qid}).show()}}),t.WithModalMerge=s.WithModal.extend({onSelectAction:function(e){l.isNativeApp()&&n.registerOneTimeMessageHandler("dismissQuestionMerge",function(e){e.text&&(e.is_error?d.showError(e.text):d.show(e.text))}),this._super.apply(this,arguments)}}),t.EditTopics=s.Item.extend({onSelectAction:function(e){u(this,{qid:this.qid})}})},"./unified_view/action_bar/overflow_menu/quora_share.js":function(e,t,i){var n=i("./unified_view/action_bar/overflow_menu/base.js");t.ChooseCredential=n.WithServerCall.extend({onSelectAction:function(){this.createModal("selected").kwargs({share_id:this.share_id}).show()}}),t.EditItem=n.WithServerCall.extend({onSelectAction:function(){this.createModal("load_editor_modal").kwargs({share_id:this.share_id}).show()}}),t.CopyLinkItem=n.WithServerCall.extend({onSelectAction:function(){}})},"./unified_view/action_bar/overflow_menu/shared.js":function(e,t,i){var n,o,s,a=i("./shared/events/index.js"),r=i("./shared/core/component.js"),d=i("./shared/client_log.js"),l=i("./unified_view/action_bar/overflow_menu/base.js"),c=i("./shared/window_manager.js");t.AddModerationFlagWrapper=l.Item.extend({desktopOnLoad:function(){},onSelectAction:function(){this.one_click_report?this.serverCall("one_click_report").liveMutate().send():s.send("openURL",{target:"modal",url:this.url})}}),t.Share=l.WithLink.extend({onSelectAction:function(){this._super.apply(this,arguments);var e=r.getAnyElement(this);d.logEvent("Clickthrough",e,{route:["__clog","ShareClickthrough"]})}}),t.NativeShare=l.Item.extend({onSelectAction:function(){var e=r.getAnyElement(this);d.logEvent("Clickthrough",e,{route:["__clog","ShareClickthrough"]});var t=this,i=function(e,i){switch(i){case 0:s.send("openURL",e.quora_message_data);break;case 1:s.send("shareCopyURL",e.copy_data),t.serverCall("share_log_copy_link").kwargs({data:e}).send();break;case 2:s.send("openURL",e.share_to_blog_data);break;case 3:s.send("openURL",e.share_to_tribe_data)}},a=o.isAndroidApp()?i:function(){};n.showNativeShareSheet(this.share_data,a)}}),t.EditItemMobile=l.Item.extend({onSelectAction:function(){var e=this;e.createModal("load_editor_modal").kwargs({oid:e.oid}).onSubmit(e.onSubmit.bind(e)).show()},onSubmit:function(e){e.next_url&&c.navigateTo(e.next_url)}}),t.EditItemWeb=l.Item.extend({onLoad:function(){this._super(),this.$labelElem=this.$id("@contents"),this.bindEditorEvents()},bindEditorEvents:function(){var e=this;this.handleEvent(a.Types.INLINE_EDITOR_STATE,function(t){t.payload.contentType==e.content_type&&t.payload.oid==e.oid&&("cancel"==t.payload.state?e.setToggled(!1):"submit"==t.payload.state?e.setToggled(!1):"submitted"==t.payload.state?e.setToggled(!1):"edit"==t.payload.state&&e.setToggled(!0))})},onSelectAction:function(){this.toggled?this.emitEvent(a.helpers.inlineEditorCancel(this.content_type,this.oid)):this.emitEvent(a.helpers.inlineEditorEdit(this.content_type,this.oid))},setToggled:function(e){this.toggled=e,this.updateLabel()},toggle:function(){this.setToggled(!this.toggled)},updateLabel:function(){var e=this.toggled?this.alternate_label:this.label;this.$labelElem.text(e)}}),t.SuggestionsPendingItemWeb=t.EditItemWeb.extend({bindEditorEvents:function(){var e=this;this.handleEvent(a.Types.INLINE_EDITOR_STATE,function(t){t.payload.contentType==e.content_type&&t.payload.oid==e.oid&&("submit"==t.payload.state?e.toggle():"toggle"==t.payload.state?e.toggle():"cancel"==t.payload.state?e.setToggled(!1):"edit"==t.payload.state&&e.setToggled(!0))})},onSelectAction:function(){this.emitEvent(a.helpers.inlineEditorToggle(this.content_type,this.oid))}}),t.AddComment=l.Item.extend({onSelectAction:function(){this.createModal("load_editor_modal").kwargs({oid:this.oid,comment_type:this.comment_type}).onSubmit(function(e){e.next_url&&c.navigateTo(e.next_url)}).show()}}),t.ToggleReadingListItem=l.Toggleable.extend({onToggledOn:function(){this._super.apply(this,arguments),this.maybeReloadBookmarksPage()},onToggledOff:function(){this._super.apply(this,arguments),this.maybeReloadBookmarksPage()},maybeReloadBookmarksPage:function(){},isBookmarksPage:function(){return window.location.href&&window.location.href.endsWith("/pinned_topics")}}),t.HideItem=l.Item.extend({onSelectAction:function(){this.emitEvent({type:a.Types.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:this.story_oid,message:this.message,state:"show_message",action:"story_hide",action_id:""}})}})},"./unified_view/action_bar/overflow_menu/topic.js":function(e,t,i){var n=i("./unified_view/action_bar/overflow_menu/base.js"),o=i("./shared/client_log.js"),s=i("./shared/core/component.js"),a=i("./shared/events/index.js");t.TopicFollow=n.Toggleable.extend({onToggledOff:function(){this._super(),o.logEvent("TopicUnfollow",s.getAnyElement(this),{tid:this.tid}),this.story_oid&&this.emitEvent({type:a.Types.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:this.story_oid,message:this.message,state:"show_message",action:"topic_unfollow",action_id:this.tid}})}}),t.MuteTopic=n.Toggleable.extend({onToggledOn:function(){this._super(),this.story_oid&&this.emitEvent({type:a.Types.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:this.story_oid,message:this.message,state:"show_message",action:"topic_mute",action_id:this.tid}})}})},"./unified_view/action_bar/overflow_menu/tribe.js":function(e,t,i){var n=i("./unified_view/action_bar/overflow_menu/base.js"),o=i("./unified_view/action_bar/overflow_menu/shared.js"),s=i("./shared/events/index.js");t.ChangeRoleButton=n.WithServerCall.extend({onSelectAction:function(){this.serverCall("selected").liveMutate().send()}}),t.EditItem=o.EditItemWeb.extend({bindEditorEvents:function(){var e=this;this.handleEvent(s.Types.INLINE_EDITOR_STATE,function(t){t.payload.contentType==e.content_type&&t.payload.oid==e.oid&&"tribe"!=e.page_type&&("cancel"==t.payload.state?e.setToggled(!1):"submit"==t.payload.state?e.setToggled(!1):"submitted"==t.payload.state?e.setToggled(!1):"edit"==t.payload.state&&e.setToggled(!0))})},onSelectAction:function(){var e=this;this.toggled?this.emitEvent(s.helpers.inlineEditorCancel(this.content_type,this.oid)):("tribe"==e.page_type&&e.emitEvent({type:s.Types.TRIBE_ITEM_MODAL_SHOW,payload:{tribe_item_id:e.tribe_item_id}}),e.emitEvent(s.helpers.inlineEditorEdit(this.content_type,this.oid)))}})},"./unified_view/action_bar/question.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./shared/events/index.js"),a=i("./shared/action_log.js"),r=i("./unified_view/modal.js").ModalBase,d=i("./shared/window_manager.js");t.AddAnswerEditorWrapper=o.extend({onLoad:function(){var e=this;e.editorLoaded=!e.lazy_loaded,e.$editorWrapper=e.$id("@add_answer_editor_wrapper"),e.handleEvent(s.Types.ANSWER_TOGGLE_EDITOR,function(t){t.payload.bundle==e.getDvar("__writeMultiFeedBundle")&&t.payload.qid==e.qid&&e.toggleEditor(t.payload.showVideoEditor)})},toggleEditor:function(e){this.editorLoaded?this.$editorWrapper.hasClass("hidden")?this.$editorWrapper.removeClass("hidden"):this.$editorWrapper.addClass("hidden"):this.loadEditor(e)},loadEditor:function(e){this.loadEditorDesktop()},loadEditorMobile:function(e){var t=this;t.trackQuestionState(),this.createModal("load_editor_modal").appOnlyOptions({showVideoEditor:e}).kwargs({qid:t.qid,tribe_id:t.tribe_id}).onSubmit(function(e){a.logPrimaryAction("MobileEditorAddAnswer",t.getDvar("impression_target")),a.logSecondaryAction("MobileEditorAddAnswer",null),d.navigateTo(e.next_url)}).show()},loadEditorDesktop:function(){var e=this;e.$editorWrapper.removeClass("hidden"),e.serverCall("load_add_answer_editor").contentFor(e.$editorWrapper.get(0)).success(function(){e.editorLoaded=!0}).send()},trackQuestionState:function(){this.serverCall("track_question_state").kwargs({qid:this.qid}).send()}}),t.EditQuestionModal=r.extend({onSubmit:function(){var e=this;e.serverCall("submit").kwargs({qid:e.qid,title:e.child("title").serialize(),source:e.child("sources").toJSON(),anon_content_key:e.anon_content_key}).success(function(t){t&&e.close()}).liveMutate().send()}})},"./unified_view/action_bar/shared.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/w2.context.js"),s=i("./shared/viewport.js");t.CommentsActionItem=n.extend({onLoad:function(){this.actionBarContext=this.getContext(o.ActionBar),this.$linkElem=this.$id(this.link_id),this.$linkElem.on("mouseenter",this.loadComments.bind(this)),this.$linkElem.on("click",this.toggleComments.bind(this))},loadComments:function(){this.actionBarContext.set("loadComments",!0)},toggleComments:function(e){e.preventDefault();var t=this.actionBarContext.get("showComments");this.actionBarContext.set("showComments",!t)}}),t.CommentsExtraItem=n.extend({onLoad:function(){this.actionBarContext=this.getContext(o.ActionBar),this.$defaultCommentsElem=this.$id(this.wrapper_id),this.$currentWrapperElem=this.$defaultCommentsElem,this.fetched=!1,this.isFirstToggle=!0,this.actionBarContext.set("commentsElem",this.$currentWrapperElem),this.actionBarContext.on("loadComments",this.loadComments.bind(this)),this.actionBarContext.on("showComments",this.toggleComments.bind(this))},loadComments:function(){this.fetched||(this.fetched=!0,this.fetchComments())},fetchComments:function(){this.serverCall("fetch_comments").contentFor(this.$defaultCommentsElem.get(0),{parentCid:this.parent().cid}).send()},toggleComments:function(e,t){this.$currentWrapperElem.toggleClass("hidden",!t),this.actionBarContext.set("updateSticky",!0),1==t&&(s.isElementInViewport(this.$currentWrapperElem.get(0))||s.scrollToElem(this.$currentWrapperElem.get(0)))}})},"./unified_view/action_bar/user.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/window_manager.js");t.SendMessageActionItem=n.extend({onLoad:function(){var e=this;e.$id("@message_link").on("click",function(t){t.preventDefault(),e.createModal("load_editor_modal").kwargs({to_uid:e.to_uid}).onSubmit(function(e){e.next_url&&o.navigateTo(e.next_url)}).show()})}})},"./unified_view/activation.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.FollowPrompt=n.extend({onLoad:function(){var e=this;e.$question_follow=e.$id("@question_follow"),e.$prompt=e.$id("@prompt"),e.$question_follow.click(function(){e.$prompt.hasClass("fixed_prompt")&&setTimeout(function(){e.$prompt.addClass("slideOutDown")},500)})}}),t.PromptFromSearch=n.extend({onLoad:function(){var e=this;e.$prompt=e.$id("@prompt"),e.$dismiss=e.$id("@dismiss_button"),e.$dismiss.click(function(){e.$prompt.hasClass("inline_prompt")?(e.$prompt.addClass("fadeOut"),setTimeout(function(){e.$prompt.addClass("hidden")},500)):(e.$prompt.removeClass("showBottomBanner"),e.$prompt.addClass("slideOutDown"))})}}),t.MobileQuestionPageCard=n.extend({onLoad:function(){var e=this;e.$prompt=e.$id("@prompt"),e.$background=e.$id("@background"),e.$dismiss=e.$id("@dismiss_button"),setTimeout(function(){e.$prompt.removeClass("hidden"),e.$prompt.addClass("showBottomBanner"),e.$background.removeClass("hidden"),e.$background.addClass("fadeIn")},7e3),e.$dismiss.click(function(){e.$background.removeClass("fadeIn"),e.$background.addClass("fadeOut"),e.$prompt.removeClass("showBottomBanner"),e.$prompt.addClass("slideOutDown")})}}),t.FacebookLoginFooter=n.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.$id("@dismiss").on("click",function(){e.$id("@signup_container").addClass("slideOutDown"),e.$id("@footer_gradient").addClass("hidden")})}})},"./unified_view/ad_blocker.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/blockadblock.js").BlockAdBlock,s=i("./shared/onload.js"),a=i("./shared/log_sender.js");t.AdBlockerCheckerMain=n.extend({onLoad:function(){s.execAfterLoadDelayed(function(){var e=new o({checkOnLoad:!1});e.onDetected(function(){a.log("ad_blocker_log",{})}),e.check()})}})},"./unified_view/ads.js":function(e,t,i){var n,o=i("./shared/events/index.js"),s=i("./shared/core/component.js").Component,a=i("./unified_view/toggle.js"),r=i("./shared/ads_impression_logging.js"),d=i("./shared/window_manager.js"),l=i("./shared/client_log.js"),c=o.scope;t.FeedInlineExpandAdToggle=a.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(o.Types.FEED_ANSWER_INLINE_EXPAND,function(t){t.payload.aid==e.aid&&e.triggerSwitch()})}}),t.FeedInlineExpandSharedAnswerToggle=a.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(o.Types.QUORA_SHARE_ANSWER_EXPANDED,function(t){t.payload.aid==e.aid&&e.triggerSwitch()})}}),t.AdNegativeLink=s.extend({onLoad:function(){var e=this;e.$id("@close").on("click",function(t){t.preventDefault(),e.emitEvent({type:o.Types.AD_REPORTED,payload:{adId:e.adId},scope:c.GLOBAL}),e.serverCall("submit_feedback").kwargs({ad_id:e.adId,report_reason:"",impression_hash:e.impressionHash}).send(),e.createModal("load_feedback_modal").kwargs({ad_id:e.adId,impression_hash:e.impressionHash}).show()})}}),t.AdInteriorBase=s.extend({onLoad:function(){var e=this;e.contentBox=e.$id("@"+e.contentBoxString),e.dismissedMsg=e.$id("@"+e.dismissedMsgString),e.undoLink=e.$id("@"+e.undoString),this.handleEvent(o.Types.AD_REPORTED,function(t){t.payload.adId==e.adId&&(e.contentBox.addClass("hidden"),e.dismissedMsg.removeClass("hidden"))}),e.undoLink.on("click",function(t){t.preventDefault(),e.serverCall("remove_feedback").kwargs({ad_id:e.adId,impression_hash:e.impressionHash}).send(),e.unHideAd()})},unHideAd:function(){this.contentBox.removeClass("hidden"),this.dismissedMsg.addClass("hidden")}}),t.DigestAdRedirect=s.extend({onLoad:function(){var e=this;e.serverCall("log_click").kwargs({impression_hash:e.impressionHash}).send(),setTimeout(function(){n&&n.isNativeApp()?d.navigateTo(e.targetURL):window.location.replace(e.targetURL)},200)}}),t.PromotedAnswerAd=s.extend({onLoad:function(){var e=this.$id("@"+this.wrapperString).get(0);r.observe(e,this.impression_target)}}),t.TextAd=s.extend({onLoad:function(){var e=this.$id("@"+this.wrapperString).get(0);r.observe(e,this.impression_target)}}),t.MobileExpandModalPromotedAnswerAdInterior=s.extend({onLoad:function(){this.$id("@answer_link_overlay").on("click",this.handleLinkOpen.bind(this))},handleLinkOpen:function(e){l.logEvent("AnswerExpand",e.target,{aid:this.aid})}}),t.QuestionPagePromotedAnswerAdInterior=s.extend({onLoad:function(){this.$id("@answer_link_overlay").on("click",this.handleLinkOpen.bind(this))},handleLinkOpen:function(e){l.logEvent("AnswerExpand",e.target,{aid:this.aid})}})},"./unified_view/ama_self_serve.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/modal.js").ModalBase,s=i("./shared/events/index.js"),a=i("./unified_view/button/abstract.js").TwoStateButton,r=i("./settings.js"),d=i("./shared/onload.js"),l=i("./unified_view/question/ask_multi_modal.js").AskMultiModal,c=i("./shared/window_manager.js");t.AskQuestionSelfServe=n.extend({onLoad:function(){var e=this;this.$id("@add_question_button").on("click",this.openSessionModal.bind(this)),this.shouldOpenModal&&d.execAfterLoad(function(){e.openSessionModal()}),l.load(this,"ask_user",this.getModalData())},getModalData:function(){return{host_uid:this.host_uid}},openSessionModal:function(){r.isLoggedIn,l.open(this,"ask_user",this.getModalData())}}),t.StartSessionModal=o.extend({onLoad:function(){this._super.apply(this,arguments),this.input=this.$id("@input"),this.counter=this.child("counter");var e=this;e.input.keydown(function(e){if(13==e.keyCode&&!e.shiftKey)return e.preventDefault(),!1}),e.input.keyup(function(t){if(e.updateNotifPreview(),e.counter){var i=e.input.val().length;e.counter.updateCounter(i)}})},updateNotifPreview:function(){var e=this.input.val();this.$id("@description").text(e)},onSubmit:function(e){var t=this.input.val(),i=this;t&&i.serverCall("update_session").kwargs({description:t}).success(function(e){i.close(),c.navigateTo(e.redirect_url)}).error(function(){i.close()}).liveMutate().sendOnlyOnce()}}),t.AmaSelfServeStopSessionLink=n.extend({onLoad:function(){var e=this,t=e.$id("@link");t&&t.on("click",function(){e.createModal("close_session_modal").show()})}}),t.StopSessionModal=o.extend({onLoad:function(){this._super.apply(this,arguments)},onSubmit:function(e){var t=this;t.serverCall("stop_session").success(function(){t.close()}).error(function(){t.close()}).liveMutate().send()}}),t.AmaSelfServeStartAma=n.extend({onLoad:function(){var e=this;e.actionButton=e.child("ama_start_button"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(t){e.createModal("open_session_modal").show()}),e.actionButton&&e.should_open_modal&&e.createModal("open_session_modal").show()}}),t.EditSelfServeAma=n.extend({onLoad:function(){var e=this,t=e.$id("@edit");t&&t.on("click",function(t){t.stopPropagation(),e.createModal("open_edit_session_modal").show()})}}),t.RequestedQuestionsInAskModal=n.extend({onLoad:function(){var e=this;e.handleEvent(s.Types.ASK_QUESTION_MODAL_QUERY_CHANGE,function(t){""==t.payload.query||"?"==t.payload.query?e.$id("@answer_list").show():e.$id("@answer_list").hide()})}}),t.SelfServeAmaButton=a.extend({switchState:function(e){var t=this;this.pressed||t._super.apply(t,arguments)},onUnpressed:function(){}})},"./unified_view/anon.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./unified_view/modal.js").ModalBase,r=i("./shared/window_manager.js"),d=i("./shared/beforeunload.js"),l=i("./shared/errors.js"),c=i("./shared/events/index.js"),u=i("./shared/client.js"),h=i("./unified_view/util.js"),p=function(){r.removeURLParam("show_alert")};t.AnonQuestionInfoModalLink=s.extend({onLoad:function(){var e=this;e.$id("@create_modal_link").on("click",function(t){t.preventDefault(),e.createInfoModal()}),d.registerHandler(this.beforeUnload.bind(this))},beforeUnload:function(){if(r.isParamInURL("show_alert"))return!0},createInfoModal:function(){p();var e=this;e.createModal("load_inner").kwargs({anon_user_content_key:e.anon_user_content_key,target:e.target}).show()}}),t.AnonEmailModalLink=s.extend({onLoad:function(){var e=this;e.$id("@create_modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({anon_user_content_key:e.anon_user_content_key,target:e.target}).show()})}}),t.AnonEmailModal=a.extend({onSubmit:function(){var e=this;e.serverCall("email_link").kwargs({anon_user_content_key:e.anon_user_content_key,target:e.target,to_address:e.$id("@email").val()}).success(function(t){t&&!t.success||(e.onAnonLinkSaved(),e.onClose())}).send()},onAnonLinkSaved:function(){p(),this.emitEvent(c.helpers.anonLinkSaved())}}),t.AnonDestroyModalLink=s.extend({onLoad:function(){var e=this;e.$id("@create_modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({anon_user_content_key:e.anon_user_content_key,target:e.target}).show()})}}),t.AnonDestroyModal=a.extend({onSubmit:function(){var e=this;e.serverCall("destroy_link").kwargs({anon_user_content_key:e.anon_user_content_key,target:e.target}).success(function(t){t&&t.url&&(e.onAnonLinkSaved(),u.isNativeApp()?t.is_question?o.send("openURL",{url:t.url,target:"main"}):o.send("dismissModal"):r.navigateTo(t.url))}).send()},onAnonLinkSaved:function(){p(),this.emitEvent(c.helpers.anonLinkSaved())}}),t.AnonLinkGroup=s.extend({onLoad:function(){var e=this,t=e.$id("@link_input"),i=e.$id("@copy_link");i.on("click",function(n){n.preventDefault();try{u.isIOSApp()?o.send("setClipboard",{text:t.get(0).value}):(t.select(),document.execCommand("copy")),i.text(e.translated_copied),e.onAnonLinkSaved()}catch(t){l.report(t),alert(e.translated_copy_error)}}),t.on("click",function(){u.isIOSApp()&&n.buildNumber>=744?(t.get(0).setSelectionRange(0,t.get(0).value.length),setTimeout(function(){o.send("showContextMenu",{position:h.positionForElement(t.get(0))})},300)):t.select(),p()})},onAnonLinkSaved:function(){p(),this.emitEvent(c.helpers.anonLinkSaved())}}),t.DeleteAnonContentModalLink=s.extend({onLoad:function(){var e=this;e.$id("@create_modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({anon_user_content_key:e.anon_user_content_key,target:e.target}).show()})}}),t.DeleteAnonContentModal=a.extend({onSubmit:function(){var e=this;e.serverCall("delete_anon_content").kwargs({target:e.target,anon_content_key:e.anon_content_key}).success(function(e){e&&e.url&&(u.isNativeApp()?o.send("openURL",{url:e.url,target:"main"}):r.navigateTo(e.url))}).send()}})},"./unified_view/answer/anon.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/debounce.js").debounce,s=i("./shared/window_manager.js");t.AnonAnswerDraftEditor=n.extend({onLoad:function(){var e=this;e.editor=e.child("editor"),e.$id("@anon_answer_editor_submit").on("click",function(t){t.preventDefault(),e.onSubmit()}),e.$id("@anon_answer_editor_save_draft").on("click",function(t){t.preventDefault(),e.saveDraft()});var t=o(function(){e.saveDraft()},750,{maxWait:1e4,leading:!0});e.editor.setMeaningfulChangeCallback(function(){t()})},onSubmit:function(){var e=this;s.isParamInURL("show_alert")?(s.removeURLParam("show_alert"),e.createModal("load_modal").kwargs({anon_content_key:e.anon_content_key,oid:e.oid}).onClose(function(){e.submit()}).show()):e.submit()},getContent:function(){return this.editor.serialize()},submit:function(){this.serverCall("submit").kwargs({oid:this.oid,anon_content_key:this.anon_content_key,content:this.getContent()}).success(function(e){s.navigateTo(e.ans_url)}).liveMutate().sendOnlyOnce()},saveDraft:function(){this.serverCall("save_draft").kwargs({oid:this.oid,content:this.getContent()}).send()}}),t.AnonAnswerEditor=t.AnonAnswerDraftEditor.extend({saveDraft:function(){}}),t.AnonAnswerLink=n.extend({onLoad:function(){var e=this;e.$id("@anon_answer_link").on("click",function(){e.createAnonLink()})},createAnonLink:function(){this.serverCall("create_anon_link").kwargs({qid:this.qid}).success(function(e){s.navigateTo(e.anon_url)}).liveMutate().send()}})},"./unified_view/answer/answer_survey.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./shared/debounce.js").debounce,a=i("./shared/viewport.js"),r=i("./shared/jquery.js"),d=t.ComponentSurvey=o.extend({onLoad:function(){this.$id("@positive_action").click(function(e){e.preventDefault()}),this.$id("@negative_action").click(function(e){e.preventDefault()}),r(document).on("scroll",s(this.surveyScrollTrigger.bind(this),50))},surveyScrollTrigger:function(){this.surveyShown||this.surveyInView()&&(this.logImpression(),this.surveyShown=!0)},surveyInView:function(){var e=n.getLiveDomElement(this.cid);return a.isElementInViewport(e)&&r(window).scrollTop()>0},clickHandler:function(e){var t=this,i=t.$id("@survey_inner").outerHeight();t.actionResponse(e),setTimeout(function(){t.$id("@survey_inner").addClass("hidden"),t.$id("@survey_success").removeClass("hidden").height(i),setTimeout(function(){t.$id("@survey").show().slideUp()},700)},5)}}),l=t.AnswerSurvey=d.extend({logImpression:function(){this.serverCall("log_impression_after_shown").kwargs({aid:this.aid,page_context:this.pageContext,variant:this.variant,from_quora:this.fromQuora,answer_position_on_question_page:this.answerPositionOnQuestionPage}).send()},actionResponse:function(e){this.serverCall("action_response_server_call").kwargs({action_response:e,aid:this.aid,page_context:this.pageContext,variant:this.variant,from_quora:this.fromQuora,answer_position_on_question_page:this.answerPositionOnQuestionPage}).send()}});t.OutOfDateAnswerSurvey=l.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@positive_action").on("click",this.clickHandler.bind(this,"current")),this.$id("@negative_action").on("click",this.clickHandler.bind(this,"old"))}}),t.AnswerSatisfactionSurvey=l.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@positive_action").on("click",this.clickHandler.bind(this,"good")),this.$id("@negative_action").on("click",this.clickHandler.bind(this,"bad"))}}),t.AskerSatisfactionSurvey=l.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@positive_action").on("click",this.clickHandler.bind(this,!0)),this.$id("@negative_action").on("click",this.clickHandler.bind(this,!1))}});var c=t.QuestionSurvey=d.extend({logImpression:function(){this.serverCall("log_impression_after_shown").kwargs({qid:this.qid,page_context:this.pageContext,variant:this.variant,from_quora:this.fromQuora}).send()},actionResponse:function(e){this.serverCall("action_response_server_call").kwargs({action_response:e,qid:this.qid,page_context:this.pageContext,variant:this.variant,from_quora:this.fromQuora}).send()}});t.QuestionFeedSatisfactionSurvey=c.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@positive_action").on("click",this.clickHandler.bind(this,"good")),this.$id("@negative_action").on("click",this.clickHandler.bind(this,"bad"))}})},"./unified_view/answer/header_image.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./gating.js");t.Attribution=n.extend({onLoad:function(){this.url&&(s.send_unsplash_tracking_in_js?o.ajax({url:this.url}):this.serverCall("send_unsplash_tracking").kwargs({url:this.url}).send())}})},"./unified_view/answer/thumbnail.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./shared/client.js"),r=i("./shared/jquery.js"),d=i("./unified_view/qtext2/photo_search/_photo_search.js"),l=i("./shared/window_manager.js");t.AnswerThumbnailOptions=s.extend(d.UploadHelper).extend({onLoad:function(){var e=this;e.$id("@buttons").on("click",".js-thumbnail_suggestion",function(t){var i=r(this);if(i.hasClass("js-thumbnail_suggestion")&&(i=i.closest(".js-thumbnail_suggestion")),i.hasClass("selected"))t.preventDefault(),e.serverCall("clear_thumbnail").liveMutate().success(function(){e.clearButtonSelectedState()}).send();else{var n=i.data("image-suggestion");e.serverCall("update_thumbnail").kwargs({image_data:n,update_suggestions:!1,source:"main_picker"}).liveMutate().success(function(){e.clearButtonSelectedState(),i.addClass("selected")}).send()}}),e.$id("@show_image_picker").on("click",function(t){t.preventDefault(),e.showImagePicker()}),a.isNativeApp()&&n.registerMessageHandler("imagePickerDone",function(t){e.photoSelected(t)}),e.setupUploader(),e.$id("@upload").on("click",function(t){t.preventDefault(),e._useImagePickerWithCameraRollFirst()?o.send("showImagePicker",e.showImagePickerWithCameraRollFirstMessageParams):e.$fileInput&&e.$fileInput.click()})},_useImagePickerWithCameraRollFirst:function(){var e=a.isIOSApp()&&n.buildNumber>=1084;return a.isAndroidApp()||e},clearButtonSelectedState:function(){this.$id("@buttons").find(".thumbnail_suggestion_wrapper").removeClass("selected")},showImagePicker:function(){var e=this;a.isNativeApp()?e.showNativeImagePicker():setTimeout(function(){e.showModal()},200)},showNativeImagePicker:function(){o.send("showImagePicker",this.showImagePickerMessageParams)},showModal:function(){var e=this,t=!1;e.createModal("load_modal").kwargs({qid:e.qid}).onSubmit(function(i){t=!0,e.photoSelected(i)}).onClose(function(){t||e._showCurrentAnswerThumbnailOptionsModal()}).webOnlyOptions({closeOnBackgroundClick:!1}).show()},photoSelected:function(e){var t=this;this.serverCall("update_thumbnail").kwargs({image_data:e,update_suggestions:!0,source:"photo_search"}).liveMutate().success(function(){t._showCurrentAnswerThumbnailOptionsModal()}).send()},_shouldShowCurrentModal:function(){return!this.inFeed},_logModalClose:function(e){this.serverCall("log_modal_close").kwargs({aid:this.aid,user_action:e}).send()},_showCurrentAnswerThumbnailOptionsModal:function(){var e=this;e._shouldShowCurrentModal()&&c(function(){var t=!1;e.createModal("reload_current_answer_thumbnail_options_modal").kwargs({aid:e.aid}).onSubmit(function(){t=!0,e._logModalClose("submit")}).onClose(function(){t||e._logModalClose("close")}).webOnlyOptions({closeOnBackgroundClick:!1}).show()})},_handleImageData:function(e){this._showPreviewModal(e)},_showPreviewModal:function(e){var t=this,i=!1;t.createModal("load_preview_modal").kwargs({image_data:e,dismiss_modal:t._useImagePickerWithCameraRollFirst()}).onSubmit(function(){i=!0,t.serverCall("update_thumbnail").kwargs({image_data:e,update_suggestions:!0}).liveMutate().success(function(){c(function(){t._showCurrentAnswerThumbnailOptionsModal()})}).send()}).onClose(function(){i||t._showCurrentAnswerThumbnailOptionsModal()}).webOnlyOptions({closeOnBackgroundClick:!1}).show()}}),t.AnswerThumbnailControlModalLink=s.extend({_logModalClose:function(e){this.serverCall("log_modal_close").kwargs({aid:this.aid,user_action:e}).send()},onLoad:function(){var e=!1,t=this;t.should_show&&t.$id(t.link_id).on("click",function(i){i.preventDefault(),t.createModal("load_modal").kwargs({aid:t.aid}).onSubmit(function(){e=!0,t._logModalClose("submit")}).onClose(function(){e||t._logModalClose("close")}).show()})}}),t.AnswerThumbnailPromptUrlClearer=s.extend({onLoad:function(){l.replaceURL(this.originalUrl),a.isNativeApp()&&o.send("setCanonicalURL",{url:this.originalUrl})}});var c=function(e){setTimeout(function(){e()},200)};t.ThumbnailPhotoSearchModal=d.WebPhotoSearchModal.extend({_handleImageData:function(e){this._showPreviewModal(e)},_showPreviewModal:function(e){var t=this,i=!1;t.createModal("load_preview_modal").kwargs({image_data:e,translated_title:t.translatedTitle}).onSubmit(function(){i=!0,c(function(){t.reloadThumbnailOptionsModal?t._showCurrentAnswerThumbnailOptionsModal(e):t.submit(e)})}).onClose(function(){i||c(function(){t._showCurrentModal()})}).webOnlyOptions({closeOnBackgroundClick:!1}).show()},_logModalClose:function(e){this.serverCall("log_modal_close").kwargs({aid:this.aid,user_action:e}).send()},_showCurrentAnswerThumbnailOptionsModal:function(e){var t=this;t.reloadThumbnailOptionsModal&&(e&&t._updateThumbnail(e),c(function(){var e=!1;t.createModal("reload_current_answer_thumbnail_options_modal").kwargs({aid:t.aid}).onSubmit(function(){e=!0,t._logModalClose("submit")}).onClose(function(){e||t._logModalClose("close")}).webOnlyOptions({closeOnBackgroundClick:!1}).show()}))},_showCurrentModal:function(){var e=this;c(function(){e.createModal("reload_current_modal").onSubmit(function(t){t&&e._updateThumbnail(t)}).onClose(function(){e._showCurrentAnswerThumbnailOptionsModal()}).webOnlyOptions({closeOnBackgroundClick:!1}).show()})},_updateThumbnail:function(e){var t=this;this.serverCall("update_thumbnail").kwargs({image_data:e,update_suggestions:!0}).liveMutate().success(function(){t._showCurrentAnswerThumbnailOptionsModal()}).send()}})},"./unified_view/button/abstract.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./interface/settings.js"),s=i("./shared/perf.js");t.Button=n.extend({onLoad:function(){if(this._userPerceivedAction=null,!this.disabled){var e=this;e.$id("@button").on("click",function(t){t.preventDefault(),e.onClick(t)})}},onClick:function(e){this.onPressed(e)},setUserPerceivedAction:function(e){this._userPerceivedAction||(this._userPerceivedAction=s.startUserPerceived({hmac:this.getHmac(),method:e}))},onPressedSuccess:function(){},onPressed:function(e){var t=this;this.setUserPerceivedAction("press"),this.serverCall("press").disableDefaultUserPerceivedLogging().liveMutate().success(t.onPressedSuccess.bind(t)).error(function(){t.switchState(!1)}).send()}}),t.TwoStateButton=t.Button.extend({onClick:function(e){this.dirtyURL();var t=this.pressed;t?this.onUnpressed(e):this.onPressed(e),this.switchState(!t)},dirtyURL:function(){},switchState:function(e){if(this._userPerceivedAction&&(s.finishAction(this._userPerceivedAction),this._userPerceivedAction=null),this.pressed!=e&&o.isLoggedIn){var t=this.$id("@button");if(this.should_change_text_on_press){var i=this.$id("@text"),n=i.text();i.text(this.optimistic_text),this.optimistic_text=n}if(this.optimistic_count){var a=this.$id("@count_wrapper"),r=this.$id("@count");"0"===this.optimistic_count?a.addClass("hidden"):a.removeClass("hidden");var d=r.text();r.text(this.optimistic_count),this.optimistic_count=d}this.pressed?t.removeClass("pressed"):t.addClass("pressed"),this.pressed=e}},onPressedKwargs:function(){return{}},onPressed:function(e){var t=this;this.setUserPerceivedAction("press");var i=this.onPressedKwargs();this.serverCall("press").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).kwargs(i).except("question_follow_rate_limiting",function(){t.switchState(!1)}).error(function(){t.switchState(!1)}).send()},onUnpressedKwargs:function(){return{}},onUnpressed:function(e){var t=this;this.setUserPerceivedAction("unpress");var i=this.onUnpressedKwargs();this.serverCall("unpress").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).kwargs(i).error(function(){t.switchState(!0)}).send()}})},"./unified_view/button/add_post.js":function(e,t,i){var n=i("./unified_view/button/base.js").ButtonBase,o=i("./shared/window_manager.js");t.AddPostActionBase=n.extend({onPressed:function(){this.createModal("load_editor_modal").kwargs({bid:this.bid}).onSubmit(function(e){e.next_url&&o.navigateTo(e.next_url)}).show()}})},"./unified_view/button/base.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=(i("./shared/client.js"),i("./shared/perf.js"));t.ButtonBase=n.extend({onLoad:function(){var e=this;this.actionButton=this.child("action_button"),this._userPerceivedAction=null,this.actionButton&&"function"==typeof this.actionButton.onPressed&&this.actionButton.onPressed(function(t){e.onPressed(t)}),this.actionButton&&"function"==typeof this.actionButton.onUnpressed&&this.actionButton.onUnpressed(function(t){e.onUnpressed(t)})},setDisabled:function(e){this.actionButton.setDisabled(e)},setUserPerceivedAction:function(e){this._userPerceivedAction||(this._userPerceivedAction=o.startUserPerceived({hmac:this.getHmac(),method:e}))},endUserPerceivedAction:function(){this._userPerceivedAction&&(o.finishAction(this._userPerceivedAction),this._userPerceivedAction=null)},dirtyURL:function(){},onPressedKwargs:function(){return{}},onPressed:function(e){var t=this;this.setUserPerceivedAction("press");var i=this.onPressedKwargs();this.use_default_servercall&&this.serverCall("press").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).kwargs(i).except("question_follow_rate_limiting",function(){t.actionButton.switchState(!1)}).error(function(){t.actionButton.switchState(!1)}).success(this.onPressedSuccess.bind(this)).send(),this.endUserPerceivedAction()},onUnpressed:function(e){var t=this;this.setUserPerceivedAction("unpress"),this.use_default_servercall&&this.serverCall("unpress").disableDefaultUserPerceivedLogging().liveMutate({optimisticUpdate:!0}).error(function(){t.actionButton.switchState(!0)}).success(this.onUnpressedSuccess.bind(this)).send(),this.endUserPerceivedAction()},onPressedSuccess:function(){},onUnpressedSuccess:function(){}})},"./unified_view/button/bookmark.js":function(e,t,i){var n=i("./unified_view/button/abstract.js").TwoStateButton,o=i("./unified_view/button/base.js").ButtonBase;t.BookmarkAction=o.extend({onUnpressed:function(){this._super.apply(this,arguments),this.maybeReloadBookmarksPage()},onPressed:function(){this._super.apply(this,arguments),this.maybeReloadBookmarksPage()},maybeReloadBookmarksPage:function(){},isBookmarksPage:function(){return window.location.href&&window.location.href.endsWith("/pinned_topics")}}),t.Bookmark=n.extend({onUnpressed:function(){this._super.apply(this,arguments),this.maybeReloadBookmarksPage()},onPressed:function(){this._super.apply(this,arguments),this.maybeReloadBookmarksPage()},maybeReloadBookmarksPage:function(){},isBookmarksPage:function(){return window.location.href&&window.location.href.endsWith("/pinned_topics")}})},"./unified_view/button/cant_answer.js":function(e,t,i){var n=i("./unified_view/button/base.js").ButtonBase,o=i("./shared/events/index.js"),s=i("./shared/client_log.js");t.CantAnswerAction=n.extend({onPressed:function(e){s.logEvent("QuestionPass",e.target,{qid:this.oid}),this.emitEvent(o.helpers.addQuestionCantAnswer(this.oid)),this._super.apply(this,arguments)}})},"./unified_view/button/comment.js":function(e,t,i){var n=i("./unified_view/button/base.js").ButtonBase,o=i("./shared/log_sender.js"),s=i("./shared/events/index.js");i("./shared/window_manager.js");t.TribeItemCommentAction=n.extend({onPressed:function(e){e.preventDefault(),e.stopPropagation();e.currentTarget.href;this.emitEvent({type:s.Types.TRIBE_ITEM_MODAL_SHOW,payload:{tribe_item_id:this.oid}}),this._super.apply(this,arguments)}}),t.CommentAction=n.extend({onPressed:function(){var e=this;o.log("comments_toggled",{comment_type:e.comment_type,object_id:e.oid})}})},"./unified_view/button/downvote.js":function(e,t,i){var n=i("./unified_view/button/abstract.js").TwoStateButton,o=i("./unified_view/button/base.js").ButtonBase,s=i("./shared/client_log.js"),a=i("./shared/events/index.js");t.Answer=n.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(a.Types.ANSWER_VOTE_STATE,function(t){if(t.payload.aid==e.aid){var i="downvoted"==t.payload.state;e.switchState(i)}})},onUnpressed:function(){this.emitEvent(a.helpers.removeAnswerDownvote(this.aid)),this._super.apply(this,arguments)},onPressed:function(e){s.logEvent("AnswerDownvote",e.target,{aid:this.aid}),this.emitEvent(a.helpers.addAnswerDownvote(this.aid)),this._super.apply(this,arguments)}}),t.AnswerAction=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(a.Types.ANSWER_VOTE_STATE,function(t){if(t.payload.aid==e.oid&&e.actionButton){var i="downvoted"==t.payload.state;e.actionButton.switchState(i)}})},onPressed:function(e){s.logEvent("AnswerDownvote",e.target,{aid:this.oid}),this._super.apply(this,arguments)},onPressedSuccess:function(){this.emitEvent(a.helpers.addAnswerDownvote(this.oid))},onUnpressedSuccess:function(){this.emitEvent(a.helpers.removeAnswerDownvote(this.oid))}}),t.BlogPost=n.extend({onPressed:function(e){s.logEvent("BoardItemDownvote",e.target,{board_item_id:this.biid}),this._super.apply(this,arguments)}}),t.BlogPostAction=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.handleEvent(a.Types.POST_VOTE_STATE,function(t){if(t.payload.pid===e.oid&&e.actionButton){var i="downvoted"===t.payload.state;e.actionButton.switchState(i)}})},onPressedSuccess:function(){this.emitEvent(a.helpers.addPostDownvote(this.oid))},onUnpressedSuccess:function(){this.emitEvent(a.helpers.removePostDownvote(this.oid))},onPressed:function(e){s.logEvent("BoardItemDownvote",e.target,{board_item_id:this.oid}),this._super.apply(this,arguments)}}),t.Question=n.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(a.Types.QUESTION_VOTE_STATE,function(t){if(t.payload.qid==e.qid){var i="downvoted"==t.payload.state;e.switchState(i)}})},onPressed:function(e){s.logEvent("QuestionDownvote",e.target,{qid:this.qid}),this.emitEvent(a.helpers.addQuestionDownvote(this.qid)),this._super.apply(this,arguments)},onUnpressed:function(){this.emitEvent(a.helpers.removeQuestionDownvote(this.qid)),this._super.apply(this,arguments)}}),t.QuestionAction=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(a.Types.QUESTION_VOTE_STATE,function(t){if(t.payload.qid==e.qid&&e.actionButton){var i="downvoted"==t.payload.state;e.actionButton.switchState(i)}})},onPressedSuccess:function(){this.emitEvent(a.helpers.addQuestionDownvote(this.qid))},onUnpressedSuccess:function(){this.emitEvent(a.helpers.removeQuestionDownvote(this.qid))},getClientLogMetadata:function(){return{qid:this.oid}},onPressed:function(e){s.logEvent("QuestionDownvote",e.target,{qid:this.oid}),this._super.apply(this,arguments)}}),t.HyperlinkAction=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(a.Types.HYPERLINK_VOTE_STATE,function(t){if(t.payload.link_id==e.oid&&e.actionButton){var i="downvoted"==t.payload.state;e.actionButton.switchState(i)}})},onPressedSuccess:function(){this.emitEvent(a.helpers.addHyperLinkDownvote(this.oid))},onUnpressedSuccess:function(e){this.emitEvent(a.helpers.removeHyperLinkDownvote(this.oid))},onPressed:function(e){s.logEvent("HyperLinkDownvote",e.target,{link_id:this.oid}),this._super.apply(this,arguments)}}),t.QuoraShareAction=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(a.Types.QUORASHARE_VOTE_STATE,function(t){if(t.payload.share_id==e.oid){var i="downvoted"==t.payload.state;e.actionButton.switchState(i)}})},onUnpressedSuccess:function(){this.emitEvent(a.helpers.removeQuoraShareDownvote(this.oid))},onPressedSuccess:function(){this.emitEvent(a.helpers.addQuoraShareDownvote(this.oid))},onPressed:function(e){s.logEvent("QuoraShareDownvote",e.target,{share_id:this.oid}),this._super.apply(this,arguments)}}),t.Post=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(a.Types.POST_VOTE_STATE,function(t){if(t.payload.pid==e.oid){var i="downvoted"==t.payload.state;e.actionButton.switchState(i)}})},onUnpressedSuccess:function(){this.emitEvent(a.helpers.removePostDownvote(this.oid))},onPressedSuccess:function(){this.emitEvent(a.helpers.addPostDownvote(this.oid))},onPressed:function(e){s.logEvent("TribePostDownvote",e.target,{pid:this.oid}),this._super.apply(this,arguments)}})},"./unified_view/button/draft.js":function(e,t,i){var n,o,s=i("./unified_view/button/base.js").ButtonBase;i("./shared/window_manager.js");t.ClearDraft=s.extend({onPressed:function(){this.createModal("delete_draft_modal").show()},showClearDraftConfirmationDialog:function(){var e=this;n.showAlert({title:this.clear_draft_title,message:this.clear_draft_message,cancelButtonTitle:o.cancel,otherButtonTitles:this.clear_draft_confirm,callback:function(t){1==t.buttonIndex&&e.serverCall("clear_draft").success(function(){}).send()}})}}),t.EditBoardDraft=s.extend({onPressed:function(){}})},"./unified_view/button/follow.js":function(e,t,i){var n=i("./unified_view/button/base.js").ButtonBase,o=i("./shared/client_log.js"),s=i("./shared/w2.context.js").ActionBar,a=i("./shared/events/index.js");t.Topic=n.extend({onPressed:function(e){o.logEvent("TopicFollow",e.target,{tid:this.tid}),this._super.apply(this,arguments)},onUnpressed:function(e){o.logEvent("TopicUnfollow",e.target,{tid:this.tid}),this._super.apply(this,arguments)}}),t.QuestionAction=n.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.actionBarContext=this.getContext(s),this.actionBarContext&&(this.actionBarContext.get("toggleRAD")&&this.$id("@nub").addClass("is_active"),this.actionBarContext.on("toggleRAD",function(t,i){!0===i?e.$id("@nub").addClass("is_active"):setTimeout(function(){e.$id("@nub").removeClass("is_active")},160)}))},onPressed:function(e){o.logEvent("QuestionFollow",e.target,{qid:this.oid}),this.actionBarContext&&this.actionBarContext.set("toggleRAD",!0),this.$id("@nub").addClass("is_active"),this._super.apply(this,arguments)},onUnpressed:function(e){o.logEvent("QuestionUnfollow",e.target,{qid:this.oid}),this.actionBarContext&&this.actionBarContext.set("toggleRAD",!1),this.$id("@nub").removeClass("is_active"),this._super.apply(this,arguments)}}),t.User=n.extend({onPressed:function(e){this.emitEvent(a.helpers.addUserFollow(this.target_uid)),o.logEvent("UserFollow",e.target,{uid:this.target_uid}),this._super.apply(this,arguments)},onPressedKwargs:function(){return{from_hovercard:this.getDvar("hovermenu_parent")}},onUnpressed:function(e){this.emitEvent(a.helpers.removeUserFollow(this.target_uid)),o.logEvent("UserUnfollow",e.target,{uid:this.target_uid}),this._super.apply(this,arguments)},onUnpressedKwargs:function(){return{from_hovercard:this.getDvar("hovermenu_parent")}}}),t.Blog=n.extend({onPressed:function(e){o.logEvent("BoardFollow",e.target,{bid:this.bid}),this._super.apply(this,arguments)}}),t.Tribe=n.extend({onPressed:function(e){o.logEvent("TribeFollow",e.target,{tribe_id:this.tribe_id}),this._super.apply(this,arguments),this.emitEvent({type:a.Types.TRIBE_FOLLOW_BUTTON_CLICK,payload:{tribe_id:this.tribe_id}})},onUnpressed:function(){var e=this;this.can_contribute?this.createModal("unfollow_confirmation_modal").kwargs({tribe_id:e.tribe_id}).onClose(function(){e.actionButton&&e.actionButton.switchState(!0)}).show():this._super.apply(this,arguments)}})},"./unified_view/button/multi_state_button.js":function(e,t,i){var n=i("./ui/popovers/base.js").PopOverMenu,o=i("./ui/popovers/base.js").PopOverMenuItem,s=i("./unified_view/modal.js").ModalBase,a=i("./shared/events/index.js");t.MultiStateMenuItem=o.extend({onLoad:function(){this._super.apply(this,arguments),this.isSelected=this.is_selected},_update:function(e){this.index==e?(this.isSelected=!0,this.$id("@contents").addClass(this.selected_css)):(this.isSelected=!1,this.$id("@contents").removeClass(this.selected_css))},onSelectAction:function(e){var t=this;this._update(e),this._callback&&setTimeout(function(){t._callback(e)},100)},getActionSheetItemData:function(){var e=this.translated_label;return this.isSelected&&this.mobile_unicode_icon&&(e=this.mobile_unicode_icon+"  "+e),{index:this.index,label:e}}}),t.MultiStateMenu=n.extend({onLoad:function(){this._super.apply(this,arguments),this.currentIndex=this.selected_index;for(var e=0;e<this.states.length;e++)this.child("menu_item_"+e).registerCallback(this.onSelect.bind(this,e))},onSelect:function(e){var t=this,i=t.currentIndex;e>=t.states.length||(t._update(e),t.serverCall("on_select").kwargs({selected_state:t.states[e]}).success(function(){t._onSelectCallback&&t._onSelectCallback(e)}).error(function(){t._update(i)}).send())},_update:function(e){this.currentIndex=e;for(var t=this.children(),i=0;i<t.length;i++){var n=t[i];n._update&&n._update(e)}this.$id("@button_"+e).removeClass("hidden").siblings().addClass("hidden")},registerOnSelectCallback:function(e){this._onSelectCallback=e}}),t.MultiSelectMenu=n.extend({onLoad:function(){this._super.apply(this,arguments);for(var e=0;e<this.states.length;e++)this.child("menu_item_"+e).registerCallback(this.onSelect.bind(this,e))},onSelect:function(e){},showMenuMobile:function(){var e=this;e.handleEvent(a.Types.MULTI_SELECT_MODAL_SUBMIT,function(t){for(var i=t.payload.selectedStates,n=e.children(),o=0;o<n.length;o++){var s=n[o];s._update&&(s.isSelected=i.indexOf(s.state)>=0)}e.close(i)}),e.createModal("load_inner").kwargs({state_tuples:e.state_tuples,selected_states:e.getSelectedStates(),translated_mobile_title:e.translated_mobile_title,selection_needed_for_submit:e.selection_needed_for_submit}).show()},onHideShowFunction:function(e){e||this.onHide()},getSelectedStates:function(){for(var e=[],t=this.children(),i=0;i<t.length;i++){var n=t[i];!0===n.isSelected&&e.push(this.states[n.index])}return e},getSelectedIndexes:function(){for(var e=[],t=this.children(),i=0;i<t.length;i++){var n=t[i];!0===n.isSelected&&e.push(n.index)}return e},onHide:function(){this.close(this.getSelectedStates())},close:function(e){this.serverCall("on_close").liveMutate().kwargs({selected_states:e}).send()}}),t.MultiSelectModal=s.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.selectionSection=e.child("selection_section"),e.selection_needed_for_submit&&e.selectionSection.onToggleCell(function(t){for(var i=e.children(),n=0;n<i.length;n++){var o=i[n];o._update&&o.index===t&&o._update(!o.isSelected)}e.getSelectedStates().length>0?e.setMobileDoneButtonDisabled(!1):e.setMobileDoneButtonDisabled(!0)})},getSelectedStates:function(){for(var e=[],t=this.children(),i=0;i<t.length;i++){var n=t[i];!0===n.isSelected&&e.push(this.states[n.index])}return e},getSelectedIndexes:function(){for(var e=[],t=this.children(),i=0;i<t.length;i++){var n=t[i];!0===n.isSelected&&e.push(n.index)}return e},onSubmit:function(e){var t=this;t.emitEvent({type:a.Types.MULTI_SELECT_MODAL_SUBMIT,payload:{selectedStates:t.getSelectedStates()},scope:a.scope.GLOBAL}),t.close()}})},"./unified_view/button/network.js":function(e,t,i){var n=i("./unified_view/button/base.js").ButtonBase,o=i("./shared/window_manager.js");t.ActivationButton=n.extend({onPressedSuccess:function(e){var t=this;o.navigateTo(t.url_to_redirect)},onPressedError:function(e){window.location.reload()}}),t.RequestInviteButton=n.extend({onPressedSuccess:function(e){window.location.reload()}})},"./unified_view/button/notif.js":function(e,t,i){var n,o,s=i("./unified_view/button/abstract.js").Button,a=i("./shared/window_manager.js");t.Next=s.extend({onLoad:function(e){this._super.apply(this,arguments)},onLoadMobile:function(e){var t=this;e&&t.serverCall("update_seen").liveMutate().send(),t.nextId&&t.nextUrl&&o.send("setPageAction",{rightTextButton:{title:t.text,callback:function(){o.send("setPageAction",{noRightButtons:!0}),n.broadcastMessageToWebViews("notifRead"),t.logPress(),o.send("setCanonicalURL",{url:t.nextUrl}),o.send("reload")}}})},onClick:function(){this.nextUrl&&(a.navigateTo(this.nextUrl),this.logPress())},logPress:function(){this.serverCall("log_press").send()}})},"./unified_view/button/pause_ad.js":function(e,t,i){var n=i("./unified_view/button/abstract.js").TwoStateButton;t.Campaign=n.extend({onClick:function(){this.dirtyURL();var e=this.pressed;e?this.onUnpressed():(this.onPressed(),this.switchState(!e))},onUnpressed:function(){this.createModal("load_enable_campaign_workflow_modal").kwargs({campaign_id:this.campaign_id}).show()}})},"./unified_view/button/pin.js":function(e,t,i){var n=i("./shared/client_log.js"),o=i("./unified_view/button/base.js").ButtonBase;t.PinPrimary=o.extend({onPressed:function(e){n.logEvent("PinFollow",e.target,{oid:this.oid}),this._super.apply(this,arguments)},onUnpressed:function(e){n.logEvent("PinUnfollow",e.target,{oid:this.oid}),this._super.apply(this,arguments)}})},"./unified_view/button/quora_share.js":function(e,t,i){var n=i("./unified_view/button/base.js").ButtonBase,o=i("./shared/core/component.js"),s=i("./shared/client_log.js"),a=i("./shared/events/index.js"),r=i("./qtext2/section.js").Section;t.QuoraShareAction=n.extend({onLoad:function(){var e=this;e.commentText=null,this._super.apply(this,arguments),e.should_show_tooltip&&(this.handleEvent(a.Types.ANSWER_VOTE_STATE,function(t){t.payload.aid==e.oid&&"upvoted"==t.payload.state&&e._showTooltip()}),this.handleEvent(a.Types.HYPERLINK_VOTE_STATE,function(t){t.payload.link_id==e.oid&&"upvoted"==t.payload.state&&e._showTooltip()}),e.handleEvent(a.Types.COMMENT_ADD,function(t){t.payload.object_id==e.oid&&t.payload.comment_input&&e._showTooltip(t.payload.comment_input)})),e.handleEvent(a.Types.ANSWER_TEXT_SELECTED,function(t){t.payload.aid==e.oid&&t.payload.text&&e._setCommentText(t.payload.text,!0)})},onPressed:function(){this._super.apply(this,arguments),s.logEvent("AddQuoraShareModalOpen",o.getAnyElement(this)),this.loadModal()},loadModal:function(){var e={oid:this.oid,content_type:this.content_type,comment_text:this.commentText};this.createModal("open_quora_share_modal").kwargs(e).show()},_setCommentText:function(e,t){t&&(e='"'+e+'"'),this.commentText=e},_showTooltip:function(e){var t=this;t._setCommentText(t._transformToText(e),!1),e&&t.serverCall("maybe_show_quora_share_tooltip").kwargs({oid:t.oid,content_type:t.content_type,comment_input:e}).contentFor(t.$id("@quora_share_tooltip"),{useLoadingSpinner:!1}).send()},_transformToText:function(e){return e&&e.sections?r.fromJSON(e.sections[0]).getText():null}})},"./unified_view/button/reshare.js":function(e,t,i){var n,o,s=i("./unified_view/button/base.js").ButtonBase,a=i("./shared/client.js"),r=i("./shared/events/index.js"),d=i("./shared/core/component.js"),l=i("./shared/client_log.js");t.ReshareAction=s.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(r.Types.RESHARE_OPEN_TRIBE_CREATION,function(t){n.send("dismiss"),e.createModal("load_tribe_create_modal").show()}),e.handleEvent(r.Types.RESHARE_ADDED,function(t){e.oid==t.payload.share_id&&e.actionButton.updateToggleConditionMet(!0)}),e.handleEvent(r.Types.RESHARE_DELETED,function(t){e.reshare_id==t.payload.reshare_id&&e.actionButton.updateToggleConditionMet(!0)})},onPressed:function(){l.logEvent("AddReshareModalOpen",d.getAnyElement(this)),this._super.apply(this,arguments),this.loadModal()},onUnpressed:function(){this._super.apply(this,arguments),this.showDeleteReshareModal()},loadModal:function(){var e=this;a.isNativeApp()?n.send("showActionView",{url:e.url,title:e.title,height:120}):e.createModal("open_reshare_modal").kwargs({oid:e.oid}).show()},showDeleteReshareModal:function(){var e=this;a.isNativeApp()||a.isMobileWeb()?o.showActionSheet({title:e.title,buttonTitles:[e.reshare_delete_text,e.cancel_text],destructiveButtonIndex:1,callback:function(t){0===t&&e.deleteReshare()}}):e.createModal("open_delete_reshare_modal").kwargs({reshare_id:e.reshare_id}).show()},deleteReshare:function(){var e=this;e.actionButton.updateToggleConditionMet(!0),e.serverCall("delete_reshare").kwargs({reshare_id:e.reshare_id}).send()}})},"./unified_view/button/share.js":function(e,t,i){var n,o,s=i("./unified_view/button/base.js").ButtonBase,a=i("./shared/client.js"),r=i("./shared/sharing.js");t.ShareButton=s.extend({onPressed:function(e){var t=this;if(a.isNativeApp()){var i=a.isIOSApp()?function(){}:function(e,i){0===i?o.send("openURL",e.quora_message_data):1===i?(o.send("shareCopyURL",e.copy_data),t.serverCall("share_log_copy_link").kwargs({data:e}).send()):2===i?o.send("openURL",e.share_to_blog_data):3===i&&o.send("openURL",e.share_to_tribe_data)};n.showNativeShareSheet(t.share_data,i)}else window.location=t.url}}),t.WhatsappShareButton=s.extend({onPressed:function(e){this._super.apply(this,arguments),n.shareToTarget(this.url,"whatsapp")}}),t.FacebookShareAction=s.extend({onLoad:function(){r.Facebook.onLoad.call(this),this._super.apply(this,arguments)},onPressed:function(e){r.Facebook.onClick.call(this,e)}}),t.TwitterShareAction=s.extend({onLoad:function(){r.Twitter.onLoad.call(this),this._super.apply(this,arguments)},isTweeted:function(e){r.Twitter.isTweeted.call(this,e)},onPressed:function(e){r.Twitter.onClick.call(this,e)}}),t.LineShareButton=s.extend({onPressed:function(e){window.open(this.share_url,"Share on LINE","height=450,width=500"),this._super.apply(this,arguments)}})},"./unified_view/button/subscribe.js":function(e,t,i){var n=i("./unified_view/button/abstract.js").TwoStateButton;t.Subscribe=n.extend({onPressedKwargs:function(){return{from_hovercard:this.getDvar("hovermenu_parent")}},onUnpressedKwargs:function(){return{from_hovercard:this.getDvar("hovermenu_parent")}}})},"./unified_view/button/tribe.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./unified_view/button/abstract.js").Button,s=i("./unified_view/button/abstract.js").TwoStateButton,a=i("./unified_view/button/multi_state_button.js").MultiStateMenu,r=i("./unified_view/button/base.js").ButtonBase;t.TribeAddPostButton=o.extend({onClick:function(){this.loadModal()},loadModal:function(){var e=this,t={tribe_id:e.tribe_id};e.createModal("tribe_add_post_modal").kwargs(t).show()}}),t.CandidateSuggestButton=s.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.handleEvent(n.Types.TRIBE_CANDIDATE_RECOMMEND_STATE,function(t){t.payload.tribe_candidate_item_id==e.tribe_candidate_item_id&&(e.is_recommend?"reject"==t.payload.state&&e.switchState(!1):"recommend"==t.payload.state&&e.switchState(!1))})},onPressed:function(){var e;e=this.is_recommend?"recommend":"reject",this.emitEvent({type:n.Types.TRIBE_CANDIDATE_RECOMMEND_STATE,payload:{tribe_candidate_item_id:this.tribe_candidate_item_id,state:e}}),this._super.apply(this,arguments)}}),t.Invite=o.extend({onClick:function(){this.loadModal()},loadModal:function(){var e=this;e.createModal("show_modal").kwargs({tribe_id:e.tribe_id,permission:e.permission}).show()}}),t.InviteButton=r.extend({onPressed:function(){this.loadModal()},loadModal:function(){var e=this;e.createModal("show_modal").kwargs({tribe_id:e.tribe_id,permission:e.permission}).show()}}),t.TribeInviteMultiStateButton=a.extend({onSelect:function(e){var t=this;if(!(e>=t.states.length)){var i=e+1;t.showPermissionModal(i)}},showPermissionModal:function(e){var t=this;t.createModal("show_modal").kwargs({tribe_id:t.tribe_id,permission:e}).show()}}),t.SettingsSaveButton=r.extend({onPressed:function(e){var t=this;t.emitEvent({type:n.Types.TRIBE_SETTINGS_SAVE,payload:{tribe_id:t.oid,save_type:"text"}}),t._super.apply(t,arguments)}}),t.SubmissionButton=r.extend({onPressed:function(e){var t=this;t.setDisabled(!0),t._super.apply(this,arguments)}}),t.ApproveSubmission=t.SubmissionButton,t.DeclineSubmission=t.SubmissionButton},"./unified_view/button/upvote.js":function(e,t,i){var n=i("./unified_view/button/abstract.js").TwoStateButton,o=i("./unified_view/button/base.js").ButtonBase,s=i("./shared/events/index.js"),a=i("./shared/client_log.js"),r=i("./settings.js");t.Answer=n.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.handleEvent(s.Types.ANSWER_VOTE_STATE,function(t){if(t.payload.aid==e.aid){var i="upvoted"==t.payload.state;e.switchState(i),"upvoted"==t.payload.state?e.is_upvoted=!0:"upvoted"!=t.payload.state&&(e.is_upvoted=!1)}})},onPressedKwargs:function(){var e=null,t=this.getDvar("feed_story_hash");return t?e=t:r.trail&&(e=JSON.parse(r.trail).args[0]),{feed_story_hash:e}},onUnpressed:function(){this.emitEvent(s.helpers.removeAnswerUpvote(this.aid)),this._super.apply(this,arguments)},onPressed:function(e){this.emitEvent(s.helpers.addAnswerUpvote(this.aid)),a.logEvent("AnswerUpvote",e.target,{aid:this.aid}),this._super.apply(this,arguments)}}),t.AnswerAction=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.handleEvent(s.Types.ANSWER_VOTE_STATE,function(t){if(t.payload.aid===e.oid&&e.actionButton){var i="upvoted"===t.payload.state;e.actionButton.switchState(i)}})},onPressedKwargs:function(){var e=null,t=this.getDvar("feed_story_hash");return t?e=t:r.trail&&(e=JSON.parse(r.trail).args[0]),{feed_story_hash:e}},onPressedSuccess:function(){this.emitEvent(s.helpers.addAnswerUpvote(this.oid))},onUnpressedSuccess:function(){this.emitEvent(s.helpers.removeAnswerUpvote(this.oid))},onPressed:function(e){a.logEvent("AnswerUpvote",e.target,{aid:this.oid}),this._super.apply(this,arguments)}}),t.BlogPost=n.extend({onPressed:function(e){a.logEvent("BoardItemUpvote",e.target,{board_item_id:this.biid}),this.emitEvent(s.helpers.addPostUpvote(this.biid)),this._super.apply(this,arguments)},onUnpressed:function(){this.emitEvent(s.helpers.removePostUpvote(this.biid)),this._super.apply(this,arguments)}}),t.BlogPostAction=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.handleEvent(s.Types.POST_VOTE_STATE,function(t){if(t.payload.pid===e.oid&&e.actionButton){var i="upvoted"===t.payload.state;e.actionButton.switchState(i)}})},onPressedSuccess:function(){this.emitEvent(s.helpers.addPostUpvote(this.oid))},onUnpressedSuccess:function(){this.emitEvent(s.helpers.removePostUpvote(this.oid))},onPressed:function(e){a.logEvent("BoardItemUpvote",e.target,{board_item_id:this.oid}),this._super.apply(this,arguments)}}),t.HyperLinkUpvote=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(s.Types.HYPERLINK_VOTE_STATE,function(t){if(t.payload.link_id==e.oid){var i="upvoted"!=t.payload.state;e.actionButton.switchState(i)}})},onPressedKwargs:function(){var e=null,t=this.getDvar("feed_story_hash");return t?e=t:r.trail&&(e=JSON.parse(r.trail).args[0]),{feed_story_hash:e}},onUnpressed:function(){this.emitEvent(s.helpers.removeHyperLinkUpvote(this.oid)),this._super.apply(this,arguments)},onPressed:function(e){a.logEvent("HyperLinkUpvote",e.target,{link_id:this.oid}),this.emitEvent(s.helpers.addHyperLinkUpvote(this.oid)),this._super.apply(this,arguments)}}),t.QuoraShareUpvote=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(s.Types.QUORASHARE_VOTE_STATE,function(t){if(t.payload.share_id==e.oid){var i="upvoted"==t.payload.state;e.actionButton.switchState(i)}})},onPressed:function(e){a.logEvent("QuoraShareUpvote",e.target,{share_id:this.oid}),this._super.apply(this,arguments)},onPressedSuccess:function(e){this.emitEvent(s.helpers.addQuoraShareUpvote(this.oid))},onUnpressedSuccess:function(){this.emitEvent(s.helpers.removeQuoraShareUpvote(this.oid))}}),t.Post=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.handleEvent(s.Types.POST_VOTE_STATE,function(t){if(t.payload.pid==e.oid){var i="upvoted"==t.payload.state;e.actionButton.switchState(i)}})},onPressed:function(e){a.logEvent("TribePostUpvote",e.target,{pid:this.oid}),this._super.apply(this,arguments)},onPressedSuccess:function(e){this.emitEvent(s.helpers.addPostUpvote(this.oid))},onUnpressedSuccess:function(){this.emitEvent(s.helpers.removePostUpvote(this.oid))},getClientLogMetadata:function(){return{pid:this.oid}}})},"./unified_view/button/write_answer.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./unified_view/button/base.js").ButtonBase,s=i("./unified_view/button/abstract.js").Button;t.WriteAnswer=s.extend({onClick:function(){if(!this.logged_in)return void this.serverCall("force_login").send();this.$id("@button").addClass("disabled"),this.emitEvent({type:n.Types.ANSWER_TOGGLE_EDITOR,payload:{qid:this.qid,bundle:this.getDvar("__writeMultiFeedBundle")}})}});var a=o.extend({onPressed:function(){if(!this.logged_in)return void this.serverCall("force_login").send();this.setDisabled(!0),this.emitAnswerToggleEvent(this.oid)},emitAnswerToggleEvent:function(e,t){var i=this;this.emitEvent({type:n.Types.ANSWER_TOGGLE_EDITOR,payload:{qid:e,link_id:t,is_pressed:i.is_pressed,bundle:this.getDvar("__writeMultiFeedBundle")}})}});t.WriteAnswerAction=a,t.RecordAnswer=s.extend({onClick:function(){this.emitEvent({type:n.Types.ANSWER_TOGGLE_EDITOR,payload:{qid:this.qid,bundle:this.getDvar("__writeMultiFeedBundle"),showVideoEditor:!0}})}}),t.RecordAnswerAction=o.extend({onPressed:function(){this.emitEvent({type:n.Types.ANSWER_TOGGLE_EDITOR,payload:{qid:this.oid,bundle:this.getDvar("__writeMultiFeedBundle"),showVideoEditor:!0}})}})},"./unified_view/button/writing_list.js":function(e,t,i){var n=i("./unified_view/button/abstract.js").TwoStateButton,o=i("./unified_view/button/abstract.js").Button,s=i("./unified_view/button/base.js").ButtonBase,a=i("./shared/client_log.js");t.WritingList=n.extend({onPressed:function(e){a.logEvent("QuestionAnswerLater",e.target,{oid:this.oid}),this._super.apply(this,arguments)},onUnpressed:function(e){a.logEvent("UnmarkQuestionAnswerLater",e.target,{oid:this.oid}),this._super.apply(this,arguments)}}),t.RemoveFromWritingList=o.extend({onClick:function(e){a.logEvent("UnmarkQuestionAnswerLater",e.target,{oid:this.oid}),this.serverCall("press").liveMutate().send()}}),t.RemoveAction=s.extend({onPressed:function(e){a.logEvent("UnmarkQuestionAnswerLater",e.target,{oid:this.oid}),this._super.apply(this,arguments)}})},"./unified_view/captcha.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/recaptcha.js"),s=i("./shared/w2.context.js").CaptchaInput,a=t.AllCaptchaInstances=[];t.CaptchaInput=n.extend({onLoad:function(){var e=this;a.push(e),e._isGrecaptchaReady=!1,e.captchaContext=e.getContext(s),e.captchaContext.set("present",!0),e.captchaContext.on("sync",function(t,i){var n=e.getCaptchaResponse();e.captchaContext.set("captchaResponse",n),e.captchaContext.set("isCaptchaFilled",""!==n),!0===i&&e.maybeAddValidationText()}),e.renderedId=null,e.tryToRender(),e.$id("@captcha_loading").removeClass("hidden")},onUnload:function(){var e=a.indexOf(this);-1!==e&&a.splice(e,1)},getCaptchaResponse:function(){return grecaptcha.getResponse(this.renderedId)},tryToRender:function(){var e=this;o.onInit(function(){e.$id("@captcha_loading").addClass("hidden");var t=function(){e.captchaContext.set("sync",!0)},i=e.$id("@captcha"),n=i.get()[0];e.renderedId=grecaptcha.render(n.id,{sitekey:e.recaptcha_key,theme:"light",callback:t,"expired-callback":t}),e.captchaContext.set("captchaResponse","")})},maybeAddValidationText:function(){var e=this;o.onInit(function(){""===e.getCaptchaResponse()?e.$id("@captcha_validation_text").text(e.missing_captcha_text):e.$id("@captcha_validation_text").text("")})}})},"./unified_view/carousel.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./shared/jquery.js"),a=t.Carousel=n.extend({onLoad:function(){var e=this;e.num_suggestions=e.suggestions.length,e.handleCheckDismissAll(),e.container=e.$id("@container"),e.carouselItems=e.container.find(".carousel_item"),e.carouselItemWidth=e.carouselItems.outerWidth(!0),e.distance=0,e.oldScrollLeft=0,e.newScrollLeft=0,e.toggleNav(0,e.getScrollAmount()),e.$id("@right_arrow").on("click",function(t){t.preventDefault(),s(this).hasClass("disabled")||e.scrollCarousel("right")}),e.$id("@left_arrow").on("click",function(t){t.preventDefault(),s(this).hasClass("disabled")||e.scrollCarousel("left")})},scrollCarousel:function(e){var t=this,i=t.getScrollAmount();"right"==e?t.distance+=i:(t.distance-=i,t.distance<0&&(t.distance=0)),t.toggleNav(t.distance,i),t.container.animate({scrollLeft:t.distance},300,function(){t.newScrollLeft=s(this).scrollLeft(),t.oldScrollLeft==t.newScrollLeft&&(t.distance=t.oldScrollLeft),t.oldScrollLeft=t.newScrollLeft})},getCarouselItemCount:function(){var e=0;return this.carouselItems.each(function(){e+=s(this).width()>0?1:0}),e},getCarouselItemWidth:function(){var e=0;return this.carouselItems.each(function(){if(s(this).width()>0)return e=s(this).width(),!1}),e},getScrollAmount:function(){var e=this.container.width(),t=this.getCarouselItemWidth();return Math.floor(e/t)*t},toggleNav:function(e,t){var i=this,n=i.$id("@left_arrow"),o=i.$id("@right_arrow"),s=i.getCarouselItemCount(),a=i.getCarouselItemWidth(),r=s*a,d=i.container.width();0==e?(n.addClass("disabled"),n.addClass("hidden")):(n.removeClass("disabled"),n.removeClass("hidden")),e+t>=r||d>=r?(o.addClass("disabled"),o.addClass("hidden")):(o.removeClass("disabled"),o.removeClass("hidden"))},handleCheckDismissAll:function(){var e=this;e.carouselWrapper=s(e.$id("@container").get(0)).parent(),e.bundle=e.$id("@bundle_body"),e.bundle.length>0&&(e.carouselWrapper=e.bundle.parent().parent()),e.handleEvent(o.Types.CAROUSEL_CHECK_DISMISS_ALL,function(t){t.payload.bundleCid==e.cid&&0==--e.num_suggestions&&e.carouselWrapper.fadeOut(300,function(){s(this).hide()})})}});t.CarouselItem=n.extend({onLoad:function(){var e=this;e.carouselItemWrapper=s(e.$id("@carousel_item").get(0)).parent(),e.$id("@dismiss").on("click",function(t){t.preventDefault(),e.dismissCarouselItem()})},dismissCarouselItem:function(){var e=this,t={opacity:0},i={marginLeft:"-="+this.carouselItemWrapper.width()},n=150,s=function(){e.carouselItemWrapper.addClass("hidden")};this.carouselItemWrapper.animate(t,n).animate(i,n,s),this.serverCall("dismiss").liveMutate().success(function(){e.emitEvent({type:o.Types.CAROUSEL_CHECK_DISMISS_ALL,payload:{bundleCid:e.parent().parent().cid}})}).send()}}),t.AnswerStoryTopicCarousel=a.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),setTimeout(function(){e.toggleNav(0,e.getScrollAmount())},500)}})},"./unified_view/character_counter.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.CharacterCounter=n.extend({updateCounter:function(e){var t=this,i=t.$id("@counter");t.left=parseInt(t.limit)-e,i.text(t.left),t.left<=t.warning_limit?(i.removeClass("early_warning"),i.addClass("warning")):t.early_warning&&t.left<=t.visible_on?(i.removeClass("warning"),i.addClass("early_warning")):(i.removeClass("warning"),i.removeClass("early_warning")),t.updateVisibility()},updateVisibility:function(){this.left<this.visible_on?this.show():this.hide()},show:function(){this.left<this.visible_on&&this.$id("@counter_wrapper").removeClass("fade_out")},hide:function(){this.left>=0&&this.$id("@counter_wrapper").addClass("fade_out")}})},"./unified_view/components.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./interface/settings.js"),a=i("./shared/log_sender.js"),r=i("./shared/core/rpc.js"),d=(i("./shared/beforeunload.js"),i("./view/fixable2.js"));t.ExpandedAnswer=n.extend({onLoad:function(){var e=this;e.$id("@survey_wrapper").hasClass("sticky_survey")&&d.makeBottomFixable(e.$id("@survey_wrapper"),e.$id("@expanded"),{top:50,bottom:-8}),e.$id("@survey_wrapper").hasClass("sticky_survey_bottom")&&d.makeBottomFixable(e.$id("@survey_wrapper"),e.$id("@expanded"),{top:50,bottom:-8})}}),t.JSTest=n.extend({onLoad:function(){var e=this;setTimeout(function(){r.atLeastOneServerCallIsSent()||e.serverCall("noop").send()},2e3)},_timeOnSiteData:function(){return{start:this.loadTime,end:Date.now(),wid:s.windowId}},_trackingInterval:function(){return this._trackingCount=this._trackingCount?this._trackingCount+1:1,this._trackingCount<=2?1e3:this._trackingCount<=5?2e3:this._trackingCount<=10?3e3:this._trackingCount<=20?5e3:this._trackingCount<=30?1e4:6e4},trackTimeOnSite:function(){var e=this;setTimeout(function(){a.log("time_on_site",e._timeOnSiteData()),e.trackTimeOnSite()},this._trackingInterval())},onBeforeUnload:function(){var e=o.param(this._timeOnSiteData());if(window.navigator&&window.navigator.sendBeacon)window.navigator.sendBeacon("/api/time_on_site_3RD_PARTY_POST?"+e);else{(new Image).src="/api/time_on_site?"+e}}})},"./unified_view/composer/_composer.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./unified_view/multimodal.js").Manager,a=i("./unified_view/multimodal.js").redirectTo,r=i("./unified_view/composer/constants.js").MANAGER_ID,d=i("./unified_view/composer/constants.js").COMPOSER_STEPS,l=i("./unified_view/question/ask_multi_modal.js").AskMultiModal,c=function(e,t,i){if(i.action===d.SWITCH_TAB)e.replaceStep(i.nextStep);else switch(t){case d.ADD_LINK:case d.ADD_POST:e.dismiss(),a(i.redirectUrl);break;case d.ASK_QUESTION:default:l.transitionFunction(e,t,i)}},u=[d.ADD_LINK,d.ADD_POST,d.ASK_QUESTION];t.ContentComposer=o.extend({onLoad:function(){var e=new s(this,c,r);this.child("tribe_add_link_button").$id("@add").on("click",function(t){t.preventDefault(),e.pushStep(d.ADD_LINK)}),this.child("tribe_add_post_button").$id("@add").on("click",function(t){t.preventDefault(),e.pushStep(d.ADD_POST)}),this.child("tribe_ask_question_button")&&this.child("tribe_ask_question_button").$id("@add").on("click",function(t){t.preventDefault(),e.pushStep(d.ASK_QUESTION)}),this.prefetchSteps(e)},prefetchSteps:function(e){for(var t=0;t<u.length;t++)this._prefetchStep(e,u[t])},_prefetchStep:function(e,t){e.loadStep(t,{persistent:!0,tribe_id:this.tribe_id,page_context:this.page_context})}})},"./unified_view/composer/constants.js":function(e,t){t.MANAGER_ID="composer_manager",t.COMPOSER_STEPS={MANAGER_ID:"composer_manager",ADD_LINK:"add_link",ADD_POST:"add_post",ASK_QUESTION:"ask_question",SWITCH_TAB:"switch_tab"}},"./unified_view/composer/steps.js":function(e,t,i){var n,o=i("./unified_view/multimodal.js").Step,s=i("./unified_view/modal.js").ModalNavItem,a=i("./shared/events/index.js"),r=i("./shared/client.js"),d=i("./qtext2/util.js").Util,l=i("./unified_view/composer/constants.js").COMPOSER_STEPS,c=i("./unified_view/tribe/composer.js").TribeAskQuestionStep;t.ComposerNavItem=s.extend({triggerSwitchTab:function(){this.selected||a.GlobalProxy.dispatch({type:a.Types.MULTIMODAL_DONE,payload:{manager_id:this.manager_id,data:{action:l.SWITCH_TAB,nextStep:this.ty}}})}}),t.AddLinkStep=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),r.isAndroidApp()&&n.send("showKeyboard"),e.$id("@url_input").on("input",function(t){var i=e._parseUrlFromText(t.target.value);i&&(e.$id("@url_input").addClass("url_input_filled"),e.$id("@url_input_box").addClass("url_input_box_filled"),setTimeout(function(){e.$id("@fake_preview").removeClass("hidden")},500),e.serverCall("create_link_preview_and_check_duplicates").kwargs({url:i,tribe_id:e.tribe_id}).contentFor(e.$id("@link_preview")).send())}),this.$id("@close_preview").on("click",function(t){e.$id("@url_input").removeClass("url_input_filled"),e.$id("@url_input_box").removeClass("url_input_box_filled"),e.$id("@fake_preview").addClass("hidden"),e.$id("@share_link_url").focus(),e.$id("@share_link_url").val("")})},submit:function(){var e=this,t=e._super,i=e._parseUrlFromText(e.$id("@share_link_url").val()),n=e.child("quora_share_editor").$id("@share_comment").val();e.serverCall("add_link").kwargs({tribe_id:e.tribe_id,hyperlink_url:i,comment:n}).success(function(i){i&&i.success&&t.call(e,{redirectUrl:i.redirect_url})}).liveMutate().sendOnlyOnce()},_parseUrlFromText:function(e){var t=d.linkify(e);if(1==t.length){var i=t[0].href;if(i)return i}}}),t.AddPostStep=o.extend({submit:function(){var e=this,t=e._super,i=this.child("tribe_post_editor").child("editor").serialize(),n=this.child("tribe_post_title").serialize();this.serverCall("write_post_to_tribe").kwargs({tribe_id:e.tribe_id,post_content:i,post_title:n}).success(function(i){i&&i.success&&t.call(e,{redirectUrl:i.redirect_url})}).liveMutate().sendOnlyOnce()}}),t.AskQuestionStep=c.extend({})},"./unified_view/cookie_warning.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.CookieBanner=n.extend({onLoad:function(){var e=this;e.$id("@dismiss").on("click",function(){e.serverCall("dismiss").success(function(){e.onDismiss()}).send()})},onDismiss:function(){this.$id("@banner").addClass("hidden")}})},"./unified_view/credential.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./unified_view/modal.js").ModalBase,r=i("./unified_view/paged_list.js").PagedList,d=i("./unified_view/modal.js").FormModal,l=i("./unified_view/form.js").Form,c=i("./settings.js").interface_strings,u=i("./shared/events/index.js"),h=i("./view/hover_menu.js");t.CredentialsModal=a.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.handleEvent(u.Types.CREDENTIAL_ADD_FORM_VISIBILITY,function(){e.$id("@wrapper").toggleClass("hidden")})},_mobileOnSubmit:function(){this._mobileDisabled||(this.onSubmit(),this.is_zapdos_step_completed||this.serverCall("complete_step").success(function(e){n.markPageAsDirty("/"),n.reloadDirtyPages()}).send())}}),t.ChooseCredentialModal=t.CredentialsModal.extend({onSubmit:function(){this._super.apply(this,arguments)},toggleNavigationButton:function(e){var t=this,i=c.edit;e&&(i=t.choose_text),t.$id("@nav").text(i)}}),t.CredentialsListBase=r.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.handleEvent(u.Types.CREDENTIAL_ADDED,function(){e.forceResync()}),e.handleEvent(u.Types.CREDENTIAL_DELETED,function(){e.forceResync()})}}),t.CredentialsListItemBase=s.extend({onLoad:function(){this.onLoadDesktop()},onLoadMobile:function(){},onLoadDesktop:function(){var e=this;if(e.is_viewer){e.editWrapperLoaded=!1;var t=e.$id("@edit_wrapper_inner").get(0);t&&e.serverCall("get_edit_wrapper").contentFor(t).success(function(){e.child("form")&&e.child("form").registerOnSubmitSuccess(function(){e.toggleState()}),e.$id("@edit_wrapper .toggle_link").on("click",function(t){e.toggleState(),t.preventDefault()}),e.editWrapperLoaded=!0}).send({batched:!0}),e.$id("@view_wrapper .toggle_link").on("click",function(t){e.toggleState(),t.preventDefault(),t.stopPropagation()})}},toggleState:function(){this.$id("@view_wrapper").toggleClass("hidden"),this.$id("@edit_wrapper").toggleClass("hidden"),!0===this.editWrapperLoaded&&(this.$id("@edit_wrapper").hasClass("hidden")||this.child("form").autofocusField())}}),t.ChooseCredentialListItem=t.CredentialsListItemBase.extend({onLoadMobile:function(){var e=this;e.is_viewer&&!e.is_bad_credential&&(e.$id("@list_item").on("click",function(){e.$id("@list_item").hasClass("is_checked")||e.emitCredentialChosen()}),e.handleEvent(u.Types.CREDENTIAL_CHOSEN,function(t){t.payload.credential_id==e.credential_id?(e.$id("@list_item").addClass("is_checked"),e.setCredentialOnQuestion()):e.$id("@list_item").removeClass("is_checked")}))},onLoadDesktop:function(){var e=this;e._super.apply(e,arguments),e.$id("@view_wrapper").on("click",function(){e.$id("@list_item").hasClass("is_checked")||e.emitCredentialChosen()}),e.handleEvent(u.Types.CREDENTIAL_CHOSEN,function(t){var i=e.$id("@radio").get(0);t.payload.credential_id==e.credential_id?(e.setCredentialOnQuestion(),e.$id("@list_item").addClass("is_checked"),i!==undefined&&(i.checked=!0)):(e.$id("@list_item").removeClass("is_checked"),i!==undefined&&(i.checked=!1))})},emitCredentialChosen:function(){var e=this;e.emitEvent({type:u.Types.CREDENTIAL_CHOSEN,payload:{credential_id:e.credential_id}})},setCredentialOnQuestion:function(){var e=this;e.serverCall("set_credential_on_question").kwargs({oid:e.oid,content_type:e.content_type,credential_id:e.credential_id}).liveMutate().send()}}),t.EditCredentialListItem=t.CredentialsListItemBase.extend({onLoadMobile:function(){var e=this;e.is_viewer&&e.$id("@list_item").on("click",function(){e.createModal("load_modal").kwargs({category:e.category,credential_id:e.credential_id}).show()})}}),t.AddCredentialsModal=d.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.handleEvent(u.Types.CREDENTIAL_DELETED,function(t){t.payload.credential_id==e.credential_id&&(e.submit(),e.close())})},registerOnFormSubmitSuccessExtra:function(){this.emitEvent({type:u.Types.CREDENTIAL_ADDED,scope:u.scope.GLOBAL,payload:{}})}}),t.AddCredentialsForm=l.extend({validateFormExtra:function(e){var t,i,n=this;return this.children().forEach(function(e){if(e.getFieldId){var n=e.getFieldId();"start_year"==n?t=e.getValue():"end_year"==n&&(i=e.getValue())}}),t&&i&&t>i&&(e=!1,window.alert(n.dialog_title_message)&&n.deleteCredential()),e}}),t.AddCredentialsModalLink=s.extend({onLoad:function(){},onLoadMobile:function(){var e=this;e.$id("@create_modal_link").on("click",function(t){t.preventDefault(),n.showActionSheet({title:e.action_sheet_title,buttonTitles:e.action_sheet_options,destructiveButtonIndex:-1,callback:function(t){if(t!==e.category_enums.length){var i=e.category_enums[t];setTimeout(function(){e.loadModal(i)},100)}}})})},loadModal:function(e){this.createModal("load_modal").kwargs({category:e,aid:this.aid}).show()}}),t.LifeExperienceExamples=s.extend({onLoad:function(){var e=this,t=0;e.interval=setInterval(function(){e.$id("@example").get(0).textContent=e.examples[t],e.$id("@example").removeClass("animate_out"),e.$id("@example").addClass("animate_in"),setTimeout(function(){e.$id("@example").removeClass("animate_in"),e.$id("@example").addClass("animate_out")},2800),t==e.examples.length-1?t=0:t++},5e3)},onUnload:function(){clearInterval(this.interval)}}),t.AddCredentialDropdown=s.extend({onLoad:function(){var e=this;e.overflowMenu=new h.ToggleableMenu({$linkElem:this.$id("@add_link"),$menuElem:this.$id("@overflow_menu"),loadFunction:function(){},alignment:"left",clickOpen:!0,useCssPositioning:!0}),e.default_category?e.emitEvent({type:u.Types.CREDENTIAL_ADD_FORM_VISIBILITY,payload:{category:e.default_category}}):e.serverCall("get_add_forms").contentFor(e.$id("@add_forms").get(0)).send({batched:!0}),e.$id("@overflow_menu .js_category_link").on("click",function(){var t=this.getAttribute("data-category");e.emitEvent({type:u.Types.CREDENTIAL_ADD_FORM_VISIBILITY,payload:{category:t}}),e.serverCall("log_open_add_edit").kwargs({category:t}).send()}),e.handleEvent(u.Types.CREDENTIAL_ADD_FORM_VISIBILITY,function(){e.$id("@add_link").toggleClass("hidden")})}}),t.AddCredentialDropdownForms=s.extend({onLoad:function(){var e=this;e.handleEvent(u.Types.CREDENTIAL_ADD_FORM_VISIBILITY,function(t){var i=t.payload.category;e.$id("@wrapper_"+i).toggleClass("hidden"),e.child("form_"+i).autofocusField()}),e.categories.forEach(function(t){e.child("form_"+t).registerOnSubmitSuccess(function(){var i=e.child("form_"+t);i&&(i.clearForm(),e.emitCredentialAddFormVisibility(t),this.emitEvent({type:u.Types.CREDENTIAL_ADDED,scope:u.scope.GLOBAL,payload:{}}))}),e.$id("@wrapper_"+t+" .toggle_link").on("click",function(i){e.child("form_"+t).clearForm(),e.emitCredentialAddFormVisibility(t),i.preventDefault()})})},emitCredentialAddFormVisibility:function(e){this.emitEvent({type:u.Types.CREDENTIAL_ADD_FORM_VISIBILITY,payload:{category:e}})}}),t.CredentialModalLink=s.extend({onLoad:function(){var e=this;e.$id("@modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_modal").kwargs(e.getKwargs()).show()})},getKwargs:function(){return{}}}),t.EditCredentialsModalLink=t.CredentialModalLink.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.$id("@modal_link").on("click",function(t){e.emitEvent({type:u.Types.ZAPDOS_INLINE_DISMISS,payload:{cardType:e.card_type}})})},getKwargs:function(){return{target_uid:this.target_uid}}}),t.ChooseCredentialModalLink=t.CredentialModalLink.extend({getKwargs:function(){return{target_uid:this.target_uid,oid:this.oid,content_type:this.content_type}}}),t.EditCredentialModalLink=t.CredentialModalLink.extend({getKwargs:function(){return{target_uid:this.target_uid,category:this.category}}}),t.DeleteCredentialLink=s.extend({onLoad:function(){this.onLoadDesktop()},onLoadMobile:function(){var e=this;e.$id("@link").on("click",function(t){t.preventDefault(),o.showAlert({title:e.dialog_title,message:e.dialog_message,cancelButtonTitle:c.cancel,otherButtonTitles:[e.dialog_button_text],callback:function(t){1==t.buttonIndex&&e.deleteCredential()}})})},onLoadDesktop:function(){var e=this;e.$id("@link").on("click",function(t){t.preventDefault(),window.confirm(e.dialog_title_message)&&e.deleteCredential()})},deleteCredential:function(){var e=this;e.serverCall("delete_credential").kwargs({credential_id:e.credential_id}).sendOnlyOnce(),e.emitEvent({type:u.Types.CREDENTIAL_DELETED,scope:u.scope.GLOBAL,payload:{credential_id:e.credential_id}})}}),t.SetDefaultCredentialLink=s.extend({onLoad:function(){this.onLoadDesktop()},onLoadMobile:function(){var e=this;e.$id("@link").on("click",function(t){t.preventDefault(),o.showAlert({title:e.dialog_title,message:e.dialog_message,cancelButtonTitle:c.cancel,otherButtonTitles:[e.dialog_button_text],callback:function(t){1==t.buttonIndex&&e.setDefaultCredential()}})})},onLoadDesktop:function(){var e=this;e.$id("@link").on("click",function(t){t.preventDefault(),window.confirm(e.dialog_title_message)&&e.setDefaultCredential()})},setDefaultCredential:function(){var e=this;e.serverCall("set_default").kwargs({credential_id:e.credential_id}).send()}}),t.EditFreeformCredentialModal=a.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.handleEvent(u.Types.CREDENTIAL_DELETED,function(t){t.payload.credential_id==e.credential_id&&(e.submit(),e.close())}),e.child("form").registerOnSubmitSuccess(function(){e.submit(),e.close()}),e.$id("@list_item .toggle_link").on("click",function(t){t.preventDefault(),e.submit(),e.close()})}}),t.EditLanguageCredentialsModal=a.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.child("form").registerOnSubmitSuccess(function(){e.submit(),e.close()}),e.$id("@list_item .toggle_link").on("click",function(t){t.preventDefault(),e.submit(),e.close()})}})},"./unified_view/datetime_.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=null,s={},a=i("./shared/datetime.js");t.DateTimeComponent=n.extend({onLoad:function(){if(this.$timespanElem=this.$id("@datespan"),this.js_disp&&this.updateDisplayStr(),this.js_update_interval){var e=this.js_update_interval+Math.floor(Math.random()*this.js_update_interval*.1);setInterval(this.updateDisplayStr.bind(this),e)}},updateDisplayStr:function(){this.date_only?this.$timespanElem.html(a.dayStr(this.epoch_us)):this.$timespanElem.html(a.timestampStr(this.epoch_us,this.granularity))}}),t.CountdownClock=n.extend({onLoad:function(){var e=this,t=e.$id("@countdown");null===o&&(o=setInterval(function(){var e=!0;for(var t in s)s.hasOwnProperty(t)&&(e=!1,s[t]());e&&(clearInterval(o),o=null)},200)),s[e.cid]=function(){var i,n=Math.floor(Date.now()/1e3),o=e.getTimeDifference(n),a=Math.floor(o/60%60),r=Math.floor(o/3600),d=Math.floor(o%60);if(e.should_pad_zeroes){var l=function(e){var t=e.toString();return t.length>1?t:"0"+t};a=l(a),d=l(d)}i=e.template.replace("{hrs}",r).replace("{mins}",a).replace("{secs}",d),e.text!==i&&(e.text=i,t.text(i)),e.hasExpired(n)&&delete s[e.cid]}},onUnload:function(){delete s[this.cid]},getTimeDifference:function(e){return Math.max(this.expires_secs-e,0)},hasExpired:function(e){return e>this.expires_secs}}),t.TimeElapsedClock=t.CountdownClock.extend({getTimeDifference:function(e){return Math.max(e-this.expires_secs,0)},hasExpired:function(e){return!1}})},"./unified_view/download_csv.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.DownloadCSV=n.extend({onLoad:function(){var e=this;this.$id("@download_link").on("click",function(t){t.preventDefault(),e.downloadData()})},createCSV:function(){var e,t,i="";if(this.print_all_keys)for(e=0;e<this.data.length;e++)for(var n in this.data[e])-1==this.header.indexOf(n)&&this.header.push(n);for(e=0;e<this.data.length;e++){var o=[];for(t=0;t<this.header.length;t++){var s=this.data[e][this.header[t]];s!==undefined?(s=String(s),/[,"\n]/.test(s)?o.push('"'+s.replace(/"/g,'""')+'"'):o.push(s)):o.push(s)}i+=o.join(",")+"\n"}return i},downloadData:function(){var e=this.createCSV(),t=this.header.join(",")+"\n",i=document.createElement("a"),n=this.file_name===undefined?"data":this.file_name;i.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(t)+encodeURIComponent(e)),i.setAttribute("download",n+".csv"),i.click()}})},"./unified_view/draft.js":function(e,t,i){var n=i("./unified_view/modal.js").ModalBase,o=i("./shared/events/index.js");t.DeleteDraftModal=n.extend({onLoad:function(){this._super.apply(this,arguments)},onSubmit:function(){var e=this;this.serverCall("delete_draft").kwargs({qid:e.oid}).liveMutate().send(),"answer"==this.draft_type_str?o.GlobalProxy.dispatch({type:o.Types.ANSWER_DRAFT_DELETED,payload:{state:"deleted",qid:e.oid}}):"post"==this.draft_type_str&&o.GlobalProxy.dispatch({type:o.Types.BOARD_DRAFT_DELETED,payload:{draft_id:e.oid}}),this.close()}})},"./unified_view/empty_state.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=t.EmptyStateBase=n.extend({setButtonClick:function(e){var t=this.child("empty_state");t&&e&&"function"==typeof e&&t.registerButtonCallback(e)}});t.ReloadPageErrorEmptyState=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.setButtonClick(function(){e.onButtonClick()})},onButtonClick:function(){window.location.reload(!0)}})},"./unified_view/facebook.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/facebook.js"),s=i("./settings.js"),a=i("./shared/window_manager.js");t.TokenRefresher=n.extend({onLoad:function(){var e=this;o.onInit(function(){"https:"===window.location.protocol&&window.FB.getLoginStatus(function(t){if("connected"==t.status){if(!0===window.loginInProgress)return;window.loginInProgress=!0;var i=t.authResponse;e.serverCall("update_access_token").kwargs({fb_uid:i.userID,access_token:i.accessToken,expires:i.expiresIn}).success(e.onSuccess.bind(e)).error(function(){window.loginInProgress=!1}).except(function(){window.loginInProgress=!1}).send()}else t.status,e.serverCall("log_login_status_response").kwargs({auth_response:t.authResponse,status:t.status}).send()})})},onSuccess:function(e){window.loginInProgress=!1;e&&"post_reload"==s.pageMode&&a.reload()}})},"./unified_view/fb_modal.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./unified_view/modal.js").ModalBase;t.FacebookFriendsFollowModal=o.extend({onLoad:function(){this._super.apply(this,arguments),this.fuid_map={};for(var e=0;e<this.unchecked_fuids.length;++e)this.fuid_map[this.unchecked_fuids[e]]=!1;for(var t=0;t<this.checked_fuids.length;++t)this.fuid_map[this.checked_fuids[t]]=!0;var i=this;this.handleEvent(n.Types.NUX_DIALOG_FRIENDS_UPDATE,function(e){e.payload.addFriend?i.add(e.payload.addFriend):e.payload.removeFriend?i.remove(e.payload.removeFriend):e.payload.addAll?i.addAll():e.payload.removeAll&&i.removeAll()})},add:function(e){this.fuid_map[e]=!0},remove:function(e){this.fuid_map[e]=!1},addAll:function(){for(var e in this.fuid_map)this.add(e)},removeAll:function(){for(var e in this.fuid_map)this.remove(e)},onSubmit:function(){var e=this._super.bind(this);this.serverCall("button_clicked").kwargs({fuid_map:this.fuid_map,prechecked_fuids:this.checked_fuids}).success(function(){e()}).liveMutate().send()}})},"./unified_view/feed/answer.js":function(e,t,i){var n=i("./unified_view/toggle.js"),o=i("./shared/client_log.js"),s=i("./shared/reading_time.js"),a=i("./shared/events/index.js");t.AnswerCompact=n.ToggleBase.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.$id("@content").on("click",function(t){o.logEvent("AnswerExpand",t.target),e.emitEvent({type:a.Types.QUORA_SHARE_ANSWER_EXPANDED,payload:{share_id:e.share_id,aid:e.aid}}),e._logReadingTimeOpen()}),e.$id("@modal_content").on("click",function(e){o.logEvent("AnswerExpand",e.target)})},_logReadingTimeOpen:function(){var e=this.$switchShow.get(0);s.logReadingTimeOpen(this,e,"Answer",this.aid,this.page_type)}})},"./unified_view/feed/feedback.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./shared/client_log.js");t.UnfollowOrMuteTopic=n.extend({onLoad:function(){this.$id("@unfollow_topic").on("click",this.unfollow.bind(this)),this.$id("@mute_topic").on("click",this.mute.bind(this))},unfollow:function(e){e.preventDefault(),this.serverCall("unfollow_topic").liveMutate().send()},mute:function(e){e.preventDefault(),this.serverCall("mute_topic").liveMutate().send()}}),t.MuteUserModalLink=n.extend({onLoad:function(){var e=this,t=function(){e.serverCall("toggle_mute_for_user").liveMutate().send()};e.$id("@mute_user").on("click",function(i){i.preventDefault(),e.createModal("toggle_mute_user_modal").onSubmit(t).show()})}}),t.Feedback=n.extend({onLoad:function(){var e=this;e.can_undo&&e.$id("@undo").on("click",function(t){t.preventDefault(),e.undoDownvote(t),e.serverCall("undo").liveMutate().send()})},undoDownvote:function(){"question"==this.type?this.emitEvent(o.helpers.removeQuestionDownvote(this.oid)):"answer"==this.type?this.emitEvent(o.helpers.removeAnswerDownvote(this.oid)):"board_item"==this.type?this.emitEvent(o.helpers.removePostDownvote(this.oid)):"post"==this.type?this.emitEvent(o.helpers.removePostDownvote(this.oid)):"hyperlink"==this.type?this.emitEvent(o.helpers.removeHyperLinkDownvote(this.oid)):"quora_share"==this.type&&this.emitEvent(o.helpers.removeQuoraShareDownvote(this.oid))}}),t.NegativeFeedback=t.Feedback.extend({undoDownvote:function(e){this.emitEvent({type:o.Types.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:this.oid,state:"hide"}}),s.logEvent("Unhide",e.target)}}),t.NegativeFeedbackMessage=n.extend({onLoad:function(){var e=this;e.$id("@undo").on("click",function(t){t.preventDefault(),s.logEvent("Unhide",t.target),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid)),e.serverCall("undo").liveMutate().send()})}}),t.NegativeFeedbackReport=n.extend({onLoad:function(){var e=this,t=this.child("flag");e.$id("@trigger").on("click",function(e){e.preventDefault();t.$id("@show_flag_dialog").attr("href");t.$id("@show_flag_dialog").click()})}}),t.NegativeFeedbackDownvote=n.extend({onLoad:function(){var e=this,t=e.story_type,i="downvote_"+t;e.$id("@trigger").on("click",function(n){if("answer"==t)s.logEvent("AnswerDownvote",n.target,{aid:e.oid});else if("question"==t)s.logEvent("QuestionDownvote",n.target,{qid:e.oid});else if("hyperlink"==t)s.logEvent("HyperLinkDownvote",n.target,{link_id:e.oid});else if("post"==t)s.logEvent("BoardItemDownvote",n.target,{board_item_id:e.oid});else if("tribe_post"==t)s.logEvent("TribePostDownvote",n.target,{pid:e.oid});else{if("quora_share"!=t)throw new Error("Unknown story type :"+t);s.logEvent("QuoraShareDownvote",n.target,{share_id:e.oid})}n.preventDefault(),e.serverCall("downvote").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,i,t))})}}),t.NegativeFeedbackDontUnderstandLanguage=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){t.preventDefault(),e.serverCall("mark_dont_know_language").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"dont_know_language",e.to_uid))})}}),t.NegativeFeedbackUnfollowTopic=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){s.logEvent("TopicUnfollow",t.target,{tid:this.tid}),t.preventDefault(),e.serverCall("unfollow_topic").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"topic_unfollow",e.tid))})}}),t.NegativeFeedbackUnfollowUser=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){s.logEvent("UserUnfollow",t.target),t.preventDefault(),e.serverCall("unfollow_user").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"user_unfollow",e.to_uid))})}}),t.NegativeFeedbackUnfollowQuestion=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){s.logEvent("QuestionUnfollow",t.target),t.preventDefault(),e.serverCall("unfollow_question").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"question_unfollow",e.to_uid))})}}),t.NegativeFeedbackMuteTopic=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){s.logEvent("TopicMute",t.target),t.preventDefault(),e.serverCall("mute_topic").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"topic_mute",e.tid))})}}),t.NegativeFeedbackMuteUser=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){s.logEvent("UserMute",t.target),t.preventDefault(),e.serverCall("mute_user").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"user_mute",e.to_uid))})}}),t.NegativeFeedbackMuteBlog=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){s.logEvent("BoardMute",t.target),t.preventDefault(),e.serverCall("mute_blog").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"blog_mute",e.bid))})}}),t.NegativeFeedbackMuteDomain=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){t.preventDefault(),e.serverCall("mute_domain").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"domain_mute",e.bid))})}}),t.NegativeFeedbackSeeFewerLinks=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){t.preventDefault(),e.serverCall("see_fewer_links").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"see_fewer_links",e.bid))})}}),t.NegativeFeedbackMuteAuthorOfItem=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){s.logEvent("UserMute",t.target),t.preventDefault(),e.serverCall("mute_user").liveMutate().send(),e.emitEvent(o.helpers.feedNegativeFeedback(e.oid,e.message,"user_mute",e.to_uid))})}}),t.NegativeFeedbackEditTopics=n.extend({onLoad:function(){var e=this;e.$id("@trigger").on("click",function(t){t.preventDefault(),e.createModal("render_edit_topics").kwargs({link_id:e.oid}).show()})}})},"./unified_view/feed/modal.js":function(e,t,i){var n,o=i("./shared/util.js"),s=i("./shared/client_log.js"),a=i("./shared/client.js"),r=i("./ui/link.js");a.isNativeApp()&&(n=i(!function(){var e=new Error('Cannot find module "mobile_app2/messages"');throw e.code="MODULE_NOT_FOUND",e}())),t.OneClickOverlay=r.OverlayWithAppDiscardableModal.extend({onLoad:function(){this._super.apply(this,arguments);var e=this,t=e.$id("@overlay").get(0);t.addEventListener("click",function(){if(s.logEvent(e.qfeed_log_action,t),a.isNativeApp()&&e.reading_time_passed_data){var i=s.getElemMetadata(t);n.send("startReadingTimeLogging",{passedData:o.extend(e.reading_time_passed_data,{feed_story_hash:i.feed_story_hash,feed_page:i.feed_page_type,page_data:i.feed_page_data})})}},!0)}})},"./unified_view/feed/reasons.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/client_log.js"),s=i("./shared/events/index.js");t.FeedReasonNegativeLink=n.extend({onLoad:function(){var e=this;e.$id("@close").click(function(t){e.emitEvent({type:s.Types.FEED_NEGATIVE_FEEDBACK_STATE,payload:{oid:e.oid,to_uids:e.to_uids,tid:e.tid,story_object_type:e.story_object_type,matched_condition:e.matched_condition,state:"show_options"}}),o.logEvent("Hide",t.target),t.preventDefault(),e.serverCall("pass_if_question").liveMutate().send()})}})},"./unified_view/feed_switcher.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.SwitcherBase=n.extend({onLoad:function(){var e=this;setTimeout(function(){e.scrollToActiveItem()},0)},scrollToActiveItem:function(){var e=this.getList().getElementsByClassName("switcher_item is_active");if(e.length){var t=e[0];this.$id("@switcher_inner").scrollLeft(t.offsetLeft)}},getList:function(){return this.$id("@switcher_inner").get()[0]}})},"./unified_view/follow_suggestion.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.FollowSuggestionSection=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.USER_FOLLOW_STATE,function(t){if(t.payload.uid==e.primary_context_oid&&e.is_primary_context_type_user){"followed"==t.payload.state&&e.$id("@suggested_section").removeClass("hidden")}})}}),t.FollowSuggestionSectionFeed=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.USER_FOLLOW_STATE,function(t){t.payload.uid==e.primary_context_oid&&e.is_primary_context_type_user&&e.is_secondary_context_type_content&&e.is_eligible_to_show_for_page_type&&"followed"==t.payload.state&&e.serverCall("should_show_element").success(function(t){t.show_element&&e.serverCall("get_suggestions").contentFor(e.$id("@suggested_section"),{useLoadingSpinner:!1}).send()}).send()})}})},"./unified_view/form.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/client.js");t.Form=o.extend({onLoad:function(){var e=this;e.autofocusField(),e.should_render_submit_button&&e.$id("@submit").on("click",function(t){t.preventDefault(),e.submitForm()})},autofocusField:function(){var e=this,t=function(){e.children().forEach(function(t){t.getFieldId&&t.getFieldId()==e.field_id_to_autofocus&&t.whenOnLoaded(function(){t.focusField()})})};e.field_id_to_autofocus&&t()},getServerCallKwargsFromForm:function(){var e={};return this.children().forEach(function(t){if(t.getFieldId){var i=t.getFieldId();e[i]=t.getValue()}}),e},validateForm:function(){var e=!0;this.children().forEach(function(t){t.isSubmittable&&(t.isSubmittable()?t.removeRequiredIndicator():(t.addRequiredIndicator(),e=!1))});var t=this.validateFormExtra(e);return e&&t},validateFormExtra:function(e){return e},clearForm:function(){this.children().forEach(function(e){e.clearValue&&e.clearValue()})},submitForm:function(){this.validateForm()?this._submitForm():this.onSubmitFailure()},_submitForm:function(){var e=this;e.$id("@submit").addClass("disabled"),e.serverCall("submit").kwargs(e.getServerCallKwargsFromForm()).success(function(){e.onSubmitSuccess(),e.$id("@submit").removeClass("disabled")}).error(function(){e.onSubmitFailure(),e.$id("@submit").removeClass("disabled")}).except("incomplete_form",function(t){e.$id("@submit").removeClass("disabled")}).liveMutate().send()},registerOnSubmitSuccess:function(e){this._callbackSuccess=e},registerOnSubmitFailure:function(e){this._callbackFailure=e},onSubmitSuccess:function(){this._callbackSuccess&&this._callbackSuccess(),this.should_clear_form_after_submitting&&this.clearForm()},onSubmitFailure:function(){this._callbackFailure&&this._callbackFailure()}}),t.FormField=o.extend({onLoad:function(){var e=this;e.$field=e.$id("@"+e.field_id),e.$field.on("input",function(){e.onTextChange()}),e.$field.on("focusout",function(){e.onFocusOut()})},onFocusOut:function(){},onTextChange:function(){this.removeRequiredIndicator()},getFieldId:function(){return this.field_id},focusField:function(){this.$field.focus()},getValue:function(){return this.$field.get(0).value},setValue:function(e){this.$field.get(0).value=e},clearValue:function(){this.setValue("")},isValid:function(){return this.$field.get(0).value.length>0},addRequiredIndicator:function(){this.$field.addClass("required_indicator"),this.$id("@error_tooltip").removeClass("hidden")},removeRequiredIndicator:function(){this.$field.removeClass("required_indicator"),this.$id("@error_tooltip").addClass("hidden")},isSubmittable:function(){return!this.required||this.isValid()}}),t.FormFieldInput=t.FormField.extend({onTextChange:function(){if(this._super.apply(this,arguments),this.counter=this.child("counter"),this.counter){var e=this.$field.get(0).value.length;this.counter.updateCounter(e)}}}),t.FormFieldSelect=t.FormField.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),s.isIOSApp()&&e.$id("@"+e.field_id).on("click",function(){n.showActionSheet({buttonTitles:e.action_sheet_titles,callback:function(t){t>=e.action_sheet_titles.length||e.setValue(e.options[t])}})})},setValue:function(e){this.$field.get(0).value=e[0]},clearValue:function(){var e=this.options[this.default_selection];if(e)return this.setValue(e)}}),t.FormFieldButton=t.FormField.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.presetValueSaved&&(e.valueForPreset?e.$id("@wrapper").addClass("is_checked"):e.$id("@wrapper").removeClass("is_checked"),e.setValue(e.valueForPreset)),e.$id("@label").on("click",function(){e.$id("@wrapper").hasClass("is_checked")?e.setValue(!1):e.setValue(!0),e.$id("@wrapper").toggleClass("is_checked")})},getValue:function(){return this.$field.get(0).checked},setValue:function(e){e?this.$field.get(0).setAttribute("checked",!0):this.$field.get(0).removeAttribute("checked")},presetValue:function(e){this.presetValueSaved=!0,this.valueForPreset=e},clearValue:function(){this.setValue(!1)}}),t.FormFieldTopicSelector=t.FormField.extend({onLoad:function(){this._super.apply(this,arguments),this.$value=this.$id("@value");var e=this;this.child("selector").onTopicSelected(function(t,i){e.setInput(t),e.setValue(i)}),e.$id("@remove_topic").on("click",function(t){t.preventDefault(),e.clearInput()})},setInput:function(e){var t=this,i=document.createElement("span");i.className="TopicName",i.textContent=e,t.$field.get(0).appendChild(i),t.$field.removeClass("hidden"),t.$id("@remove_topic").removeClass("hidden"),t.$id("@selector").addClass("hidden")},clearInput:function(){var e=this;e.$field.addClass("hidden"),e.$id("@remove_topic").addClass("hidden"),e.$id("@selector").removeClass("hidden"),e.$field.get(0).innerHTML="",e.setValue("")},focusField:function(){this.child("selector").focus()},getValue:function(){return parseInt(this.$value.get(0).value)},setValue:function(e){this.$value.get(0).value=e},clearValue:function(){this.clearInput()},isValid:function(){var e=this.getValue();return e&&""!==e},addRequiredIndicator:function(){this.$id("@selector").addClass("required_indicator"),this.$id("@error_tooltip").removeClass("hidden")},removeRequiredIndicator:function(){this.$id("@selector").removeClass("required_indicator"),this.$id("@error_tooltip").addClass("hidden")}}),t.FormFieldQTextEditor=t.FormField.extend({focusField:function(){this.child("content").focus()},getValue:function(){return this.child("content").serialize()},clearValue:function(){this.child("content").clear()},isValid:function(){return!this.child("content").isEmpty()}}),t.FormFieldTypeAhead=t.FormField.extend({onLoad:function(){this._super.apply(this,arguments),this.$value=this.$id("@value");var e=this;this.child("selector").setAfterResultWasSelectedCallback(function(t){e.setInput(t.data.value_shown),e.setValue(t.data.value_stored)}),e.$id("@remove_item").on("click",function(t){t.preventDefault(),e.clearInput()})},setInput:function(e){var t=this,i=document.createElement("span");i.className="ItemName",i.textContent=e,t.$field.get(0).appendChild(i),t.$field.removeClass("hidden"),t.$id("@remove_item").removeClass("hidden"),t.$id("@selector").addClass("hidden")},setValue:function(e){this.$value.get(0).value=e},focusField:function(){this.child("selector").focus()},clearInput:function(){var e=this;e.$field.addClass("hidden"),e.$id("@remove_item").addClass("hidden"),e.$id("@selector").removeClass("hidden"),e.$field.get(0).innerHTML="",e.setValue("")},clearValue:function(){this.clearInput()},getValue:function(){return this.$value.get(0).value},isValid:function(){var e=this.getValue();return e&&""!==e},addRequiredIndicator:function(){this.$id("@selector").addClass("required_indicator"),this.$id("@error_tooltip").removeClass("hidden")},removeRequiredIndicator:function(){this.$id("@selector").removeClass("required_indicator"),this.$id("@error_tooltip").addClass("hidden")}})},"./unified_view/gif_player.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/dom.js");t.QTextGIFPlayer=n.extend({onLoad:function(e){e&&s.onDocClick(function(e){var t=o(e).parent("[gif-embedded]");if(t){var i=t.attr("gif-embedded"),n=t.attr("background-url");if("false"==t.attr("is-playing")){var s=new Image;s.onload=function(){t.children(".qtext_image, .ui_qtext_image").attr("src",i),t.children(".gif_embed_noclick").css("visibility","hidden"),t.attr("is-playing","true")},s.src=i}else t.children(".qtext_image, .ui_qtext_image").attr("src",n),t.children(".gif_embed_noclick").css("visibility","visible"),t.attr("is-playing","false")}})}})},"./unified_view/google_analytics.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/onload.js");t.GASnippet=n.extend({onLoad:function(){o.execAfterLoadDelayed(this.track.bind(this))},track:function(){!function(e,t,i,n,o,s,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,s=t.createElement(i),a=t.getElementsByTagName(i)[0],s.async=1,s.src=n,a.parentNode.insertBefore(s,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create",this.tracking_id,"auto",{sampleRate:this.tracking_rate}),window.ga("require","displayfeatures"),window.ga("send","pageview"),this.custom_dimensions.forEach(function(e){window.ga("set",e[0],e[1])})}})},"./unified_view/highlight.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./shared/events/index.js");t.HighlightMenu=o.extend({onLoad:function(){var e=this;e.isShowing=!1,e._registerShowListener(),e._registerHideListener()},_registerShowListener:function(){var e=this,t=e.$id("@highlight_menu"),i=t.parent().get(0);i.addEventListener("mouseup",function(n){var o=window.getSelection(),a=o.toString().trim();if(a.length>=10){e.emitEvent({type:s.Types.ANSWER_TEXT_SELECTED,payload:{aid:e.oid,text:a}});var r=i.getBoundingClientRect(),d=o.getRangeAt(0).getBoundingClientRect(),l=d.left-r.left,c=d.right-r.left,u=d.top-r.top,h=(l+c)/2,p=u-60;t.css({left:h,top:p,position:"absolute"}).removeClass("hidden"),e.isShowing=!0}},!0)},_registerHideListener:function(){var e=this,t=e.$id("@highlight_menu");document.addEventListener("mouseup",function(){e.isShowing&&(t.addClass("hidden"),e.isShowing=!1)},!0)}})},"./unified_view/hyperlink/_hyperlink.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./shared/log_sender.js").log,r=i("./shared/client.js"),d=i("./shared/client_log.js"),l=i("./shared/window_manager.js"),c=i("./shared/activity_metrics.js"),u=i("./shared/visibility_state.js"),h=i("./shared/events/index.js"),p=function(e,t,i,n){a("hyperlink_reading_time",{action:e,time:t,object_id:i,page_type:n})};t.HyperLinkPreviewBase=s.extend({onLoad:function(){r.isNativeApp()&&this.constructFooterURL(),this.$id("@link_overlay").on("click",this.onLinkClick.bind(this))},constructFooterURL:function(){var e=d.getElemMetadata(this.$id("@link_overlay").get(0));this.footer_url=l.addParamToURL(this.footer_url,"__clog",JSON.stringify(e))},onLinkClick:function(e){var t=this;if(t.direct_to_url?l.navigateTo(t.original_url):o.send("openURL",{url:t.original_url,target:"links",linkActionBar:{height:0,url:t.footer_url}}),r.isNativeApp()){var i=this.$id("@link_overlay").get(0);return d.logEvent("Clickthrough",i,{route:["hyperlink","redirect"]}),t.direct_to_url?l.navigateTo(t.original_url):o.send("openURL",{url:t.original_url,target:"links",linkActionBar:{height:0,url:t.footer_url}}),!1}e.shiftKey||e.ctrlKey||e.metaKey||t._logReadingTimeStartDesktop(),t.linkClickCallback()},_logReadingTimeStartDesktop:function(){var e=this;e.startTime=Date.now(),p("open",e.startTime,e.link_id,e.page_type),u.onChange(function(t){t&&e.startTime&&(e._logReadingTimeEnd(),e.startTime=null)})},_logReadingTimeEnd:function(){var e=Date.now(),t=e-this.startTime;p("close",e,this.link_id,this.page_type);var i=this.$id("@link_overlay").get(0);d.logEvent("ReadingTime",i,{duration:t})},linkClickCallback:function(){}}),t.HyperLinkPreviewLinkPage=t.HyperLinkPreviewBase.extend({onLoad:function(){this._super.apply(this,arguments),this.open_link_on_load&&r.isNativeApp()&&this.onLinkClick()}}),t.HyperLinkPreviewInFeedWithQuestions=t.HyperLinkPreviewBase.extend({onLoad:function(){this._super.apply(this,arguments),this.shouldMaybeGetQuestionList=this.should_maybe_get_question_list,this.$id("@show_questions_link").on("click",this.maybeGetQuestionList.bind(this))},linkClickCallback:function(){var e=this;e._super.apply(e,arguments),r.isNativeApp()&&e.shouldMaybeGetQuestionList&&e.maybeGetQuestionList()},maybeGetQuestionList:function(e){var t=this;e&&e.preventDefault(),0!=t.shouldMaybeGetQuestionList&&(t.$id("@show_questions_link").get(0).innerHTML=t.translated_loading_text,t.serverCall("get_questions_list").contentFor(t.$id("@questions_list"),{useLoadingSpinner:!1}).kwargs({link_id:t.link_id}).success(function(){t.$id("@show_questions_link").addClass("hidden"),t.shouldMaybeGetQuestionList=!1}).send())}}),t.HyperLinkMobileFooter=s.extend({onLoad:function(){var e,t,i=this,s=!1;i.initActivityLogging(),n.registerMessageHandler("linkPageUpdate",function(n){if("canReadStart"==n.event){e=n.timestamp,p("open",e,i.link_id,i.page_type),i.activityLoggingActive=!0;var a=0;s||(a=1e3,s=!0),setTimeout(function(){i.$id("@HyperLink").slideUp(),o.send("setPageProperties",{height:i.footer_height}),o.send("setPageProperties",{scrollable:!1})},a)}else if("canReadEnd"==n.event){t=n.timestamp,p("close",t,i.link_id,i.page_type);var r=i.$id("@mobile_footer_wrapper").get(0);d.logEvent("ReadingTime",r,{duration:t-e}),i.activityLoggingActive=!1,o.send("setPageProperties",{height:0})}})},initActivityLogging:function(){var e=this,t=function(){c.doLog("hyperlink_view"),1==e.activityLoggingActive&&setTimeout(t,c.RESOLUTION)};e.activityLoggingActive=!0,t()}}),t.QuoraShareHyperLinkMobileFooter=t.HyperLinkMobileFooter.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(h.Types.QUORASHARE_VOTE_STATE,function(t){t.payload.share_id==e.share_id&&"upvoted"==t.payload.state&&o.send("setPageProperties",{height:120})})}}),t.HyperLinkTopicList=s.extend({onLoad:function(){var e=this;e.$id("@modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({link_id:e.link_id}).show()})}})},"./unified_view/hyperlink/event.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.EventModalLink=n.extend({onLoad:function(){var e=this;e.$id("@modal_link").on("click",function(t){t.preventDefault(),e.createModal("load_modal").kwargs({link_id:e.link_id}).show()})}})},"./unified_view/inline_editor.js":function(e,t,i){var n=i("./unified_view/modal.js");t.ClearDraftConfirmationModal=n.ModalBase.extend({onSubmit:function(){this.serverCall("clear_draft").kwargs({draft_space:this.draft_space}).liveMutate().success(this._super.bind(this)).send()}})},"./unified_view/invisibleinfo.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/keystrokes.js"),s=i("./shared/jquery.js");t.InfoToggle=n.extend({onLoad:function(){this.setupKeyboardShortcut()},toggle:function(){s("body").toggleClass("show_debug_info")},setupKeyboardShortcut:function(){o.on([81,73,68,81,73,68],this.toggle.bind(this))}})},"./unified_view/lazy.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/core/rpc.js");t.LazyComponent=n.extend({onLoad:function(){var e=this,t=e.$id("@wrapper").get()[0];t&&o.rpc("/api/rerender_component_POST").contentFor(t,{parentCid:e.parent().cid}).kwargs({serialized_component:e.serialized_component,hmac:e.getHmac()}).send({batched:!0})}})},"./unified_view/live_paged_list.js":function(e,t,i){var n=i("./shared/util.js"),o=i("./shared/viewport.js"),s=i("./shared/core/component.js"),a=i("./shared/perf.js"),r=i("./shared/core/component.js").Component,d=i("./shared/jquery.js"),l=i("./shared/core/webnode.js"),c=i("./shared/loading.js");t.EMPTY_HASH="empty";var u=i("./shared/Class.js").Class.extend({__init__:function(e){this.map={},this.arr=e;for(var t=0;t<e.length;t++)this.map[e[t]]=!0},add_hash:function(e,t){if(this.map.hasOwnProperty(e)&&this.map[e])throw new Error("Something tried to insert the same hash multiple times");this.map[e]=!0,t?this.arr.unshift(e):this.arr.push(e)},append_multi:function(e){for(var t=0;t<e.length;t++)this.add_hash(e[t],!1)},prepend_multi:function(e){for(var t=e.length-1;t>=0;--t)this.add_hash(e[t],!0)}});t.PagedList=r.extend({onLoad:function(e){var t=this;if(t.hashes=new u(t.hashes),t.waitingForNewPage=!1,t.waitingForUpdates=!1,t.fetch_callback=null,t.preloadedData=null,t.preloadingFailed=!1,t.userPerceivedAction=null,t.initNewStoriesTimer(),t.more_button_last_check_time=0,t.more_button_rate_limiter_ms=250,t.tickCallback=function(){t.maybeHideSpinner(),t.shouldAutoPage()&&t.requestNewPage()},t.wrapper=s.getLiveDomElement(t.cid),t.has_more){if(t.bindMoreButton(),t.auto_paged){t.setAutoPageHeight();var i=function(){setTimeout(t.tickCallback.bind(t,!1),125)};this._mousemove_handler=i,this._keypress_handler=i,this._scroll_handler=i,document.addEventListener("mousemove",this._mousemove_handler),document.addEventListener("keypress",this._keypress_handler),document.addEventListener("scroll",this._scroll_handler),this.enable_mobile_hide_content&&t.mapOverNodesBelowWrapper(function(e){d(e).addClass("paged_list_hidden_footer")}),t.aggressively_load_2nd_page&&t.requestNewPage()}}else t.pagingDone(!1)},onUnload:function(){},bindMoreButton:function(){var e=this,t=e.child("more_button");e.moreButton=t&&t.$id("@paged_list_more_button")[0],e.moreButton&&!e.auto_paged&&(e.moreButtonOriginalText=e.moreButton.innerText,d(e.moreButton).on("click",function(){e.requestNewPage()}))},requestNewPage:function(){var e=this;if(!e.waitingForNewPage){if(e.waitingForUpdates)return void e.setFetchCallback(e.requestNewPage.bind(e));e.autoPageHeight=null,e.waitingForNewPage=!0,e.serverCall("update_list").disableDefaultUserPerceivedLogging().kwargs({paged_list_parent_cid:e.parent().cid,filter_hashes:e.hashes.arr,extra_data:e.extra_data,force_cid:e.cid,new_page:!0}).success(function(t){e.appendNewPage(t),e.finishUserPerceivedAction(e),e.waitingForNewPage=!1,e.execFetchCallback()}).error(function(t){e.pagingDone(!0),e.finishUserPerceivedAction(e),e.waitingForNewPage=!1,e.execFetchCallback()}).send()}},updateList:function(){var e=this;if(e.waitingForUpdates||e.waitingForNewPage)return void e.setFetchCallback(e.updateList.bind(e));e.waitingForUpdates=!0,e.serverCall("update_list").kwargs({paged_list_parent_cid:e.parent().cid,filter_hashes:e.hashes.arr,extra_data:e.extra_data,force_cid:e.cid,new_page:!1}).success(function(t){e.processListUpdates(t),e.waitingForUpdates=!1,e.execFetchCallback()}).error(function(t){e.waitingForUpdates=!1,e.execFetchCallback()}).send()},setFetchCallback:function(e){this.fetch_callback=e},execFetchCallback:function(){this.fetch_callback&&(this.fetch_callback(),this.fetch_callback=null)},startUserPerceivedAction:function(e){e.userPerceivedAction||(e.userPerceivedAction=a.startUserPerceived({hmac:e.getHmac(),method:"update_list"}))},finishUserPerceivedAction:function(e){e.startUserPerceivedAction(e),a.finishAction(e.userPerceivedAction),e.userPerceivedAction=null},initNewStoriesTimer:function(){},setAutoPageHeight:function(){var e=this.getDocumentHeight(),t=this.getBottomOfViewport(),i=.1*(e-t)+t,n=e-4e3;this.autoPageHeight=Math.max(i,n)},disableAutoPaging:function(){this.auto_paged=!1,this.autoPageHeight=null,this.pagingDone(!1)},isHidden:function(){return!o.isElementInViewport(this.wrapper)},maybeHideSpinner:function(){if(!this.isHidden()&&this.has_more)if(this.moreButton&&this.auto_paged&&!this.crawler){var e=this.child("more_button").$id("@loading");this.spinner||(this.spinner=c.createDots(),e.append(this.spinner)),e.show()}else this.moreButton&&this.moreButton.$id("@loading").show();else{var t=this.child("more_button");if(!t)return;t.$id("@loading").hide()}},shouldAutoPage:function(){var e=+new Date;if(!(e<this.more_button_last_check_time+this.more_button_rate_limiter_ms)){if(this.more_button_last_check_time=e,!this.auto_paged)return!1;var t=this.child("more_button");if(t){var i=t.$id("@sentinal");if(o.isElementInViewport(i.get(0)))return!0;return!(d(window).height()+d(window).scrollTop()<=d(i).offset().top-d(window).height())||void 0}}},getDocumentHeight:function(){var e=document.height;return e||(e=document.body.scrollHeight),e},getBottomOfViewport:function(){return window.innerHeight+window.pageYOffset},appendNewPage:function(e){this.has_more=e.has_more,this.hashes.append_multi(e.hashes),this.extra_data=e.extra_data;var t=n.documentFragmentFromString(e.html);this.moreButton?this.wrapper.insertBefore(t,this.moreButton.parentNode):this.wrapper.appendChild(t),l.evaluateContentJS(e),this.has_more?this.setAutoPageHeight():this.pagingDone(!1)},processListUpdates:function(e){var t=this,i=0;if(this.hashes.arr.forEach(function(n,o){if(-1==e.hashes.indexOf(n)){var a=t.wrapper.children[o-i],r=s.getComponentFromElement(a);t.wrapper.removeChild(a),s.unloadComponent(r.cid),i++}}),e.html){var o=n.documentFragmentFromString(e.html);e.hashes.forEach(function(e,i){if(-1==t.hashes.arr.indexOf(e)){var n=o.children[0];i<t.wrapper.children.length?t.wrapper.insertBefore(n,t.wrapper.children[i]):this.moreButton&&!t.auto_paged?t.wrapper.insertBefore(n,t.moreButton.parentNode):t.wrapper.appendChild(n)}}),l.evaluateContentJS(e)}this.hashes=new u(e.hashes)},pagingDone:function(e){if(this.moreButton&&!this.auto_paged&&this.moreButton.parentNode.parentNode.removeChild(this.moreButton.parentNode),this.enable_mobile_hide_content&&this.mapOverNodesBelowWrapper(function(e){d(e).removeClass("paged_list_hidden_footer")}),!0===e&&this.error_text){var t=document.createElement("div");t.className="paged_list_fail_message",t.innerHTML=this.error_text,this.wrapper.appendChild(t)}},mapOverNodesBelowWrapper:function(e){for(var t=this.wrapper;t;){if(t.nextSibling)t=t.nextSibling;else{if(!t.parentNode||"main_page_wrapper"==t.parentNode.id)break;t=t.parentNode.nextSibling}e(t)}},firstHash:function(){return this.hashes.arr&&this.hashes.arr.length?this.hashes.arr[0]:t.EMPTY_HASH}})},"./unified_view/login.js":function(e,t,i){var n=i("./unified_view/modal.js").ModalBase,o=i("./shared/events/index.js"),s=i("./unified_view/signup/_signup.js");t.SetPasswordForUnconfirmedEmailModal=n.extend({onSubmit:function(){this.$id("@email_password_leak_error").hide(),this.serverCall("on_password_set").kwargs({password:this.$id("@password").val()}).success(this.passwordSetCallback.bind(this)).send()},onLoad:function(){this._super.apply(this,arguments),s.hideSignupWall();var e=this;this.$id("@password").focus(),this.$id("@password").on("keypress",function(t){13==t.keyCode&&e.onSubmit()})},onClose:function(){s.loadSignupWall(),this._super.apply(this,arguments)},passwordSetCallback:function(e){e.success?this.emitEvent(o.helpers.loginUser()):e.error_message}})},"./unified_view/main.js":function(e,t,i){},"./unified_view/messages.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/events/index.js"),s=i("./unified_view/multimodal.js").Manager,a=i("./unified_view/multimodal.js").Step,r=0,d="messages_thread_list",l="messages_thread_detail",c="messages_composer",u=function(e,t,i){(i&&i.thread_id)===r&&t===d?e.pushStep(c,i):t===c?e.replaceStep(l,i):e.pushStep(l,i)};t.createMessagesManager=function(e){var t=new s(e,u);return t.easyDismissEnabled=!1,t.activate=function(){t.pushStep(d)},t},t.MessagesThreadList=a.extend({onLoad:function(){this._super.apply(this,arguments),this.handleItemClick=this.handleItemClick.bind(this),this.handleEvent(o.Types.MESSAGE_THREAD_CLICKED,this.handleItemClick)},getSubmitData:function(){return{thread_id:r}},handleItemClick:function(e){var t=e.payload.threadId;o.GlobalProxy.dispatch({type:o.Types.MULTIMODAL_DONE,payload:{manager_id:this.manager_id,current_step:this.step_name,data:{thread_id:t}}})}}),t.MessagesThreadDetail=a.extend({onLoad:function(){this._super.apply(this,arguments),this.scrollMessageThreadToHeight=this.scrollMessageThreadToHeight.bind(this),this.scrollOnNewMessage=this.scrollOnNewMessage.bind(this),this.$id("@thread").on("DOMNodeInserted",this.scrollOnNewMessage)},onShow:function(){this.scrollMessageThreadToHeight()},scrollMessageThreadToHeight:function(){var e=this.$id("@thread")[0].scrollHeight;this.$id("@content").scrollTop(e)},scrollOnNewMessage:function(e){e.preventDefault();var t=e.target;(n(t.children).is(".ModalThreadGroupMessage")||n(t.children).is(".ModalThreadSingleMessage"))&&this.scrollMessageThreadToHeight()}}),t.MessagesComposer=a.extend({onLoad:function(){this._super.apply(this,arguments),this.setTo=this.setTo.bind(this),this.change=this.change.bind(this),this.$id("@change_person").on("click",this.change),this.disableSubmit(),this.child("people_selector").onResultWasSelected(this.setTo)},onShow:function(){this.child("people_selector").$id("@input").focus()},change:function(e){e.preventDefault(),this.child("people_selector").setQuery(""),this.$id("@pick_people").removeClass("hidden"),this.$id("@picked_person").addClass("hidden"),this.$id("@to_name").html(""),this.child("people_selector").focus(),this.disableSubmit()},setTo:function(e){isNaN(parseInt(e))||(this.$id("@pick_people").addClass("hidden"),this.$id("@picked_person").removeClass("hidden"),this.$id("@compose_message_to_uid").val(e),this.getName(e),this.enableSubmit())},getName:function(e){var t=this;this.serverCall("get_name").kwargs({to_uid:e}).contentFor(this.$id("@to_name")).success(function(){t.$id("@message_editor").focus()}).send()},getMessageData:function(){var e=this.$id("@compose_message_to_uid").val(),t=this.$id("@message_editor").val();return e&&(this.to_uid=e),!(!this.to_uid||""===t)&&{to_uid:this.to_uid,msg:t}},getSubmitData:function(){return{thread_id:r,to_uid:this.to_uid}},submit:function(){var e=this._super.bind(this);if(!this.submitDisabled){var t=this.getMessageData();t&&this.serverCall("submit_message").kwargs(t).success(function(){e()}).send()}}})},"./unified_view/mobile_debug.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./shared/cookies.js"),r=i("./shared/keystrokes.js"),d=s.extend({toggle:function(){var e=this;e.has_cookie?a.setCookie(e.cookie_key,null):a.setCookie(e.cookie_key,1),window.location.reload()}});t.ToggleMobileButton=d.extend({onLoad:function(){var e=this;n=e,e.$id("@toggle").on("click",function(t){return e.toggle(),t.preventDefault(),t.stopPropagation(),!1})}}),t.ToggleTabletButton=d.extend({onLoad:function(){var e=this;o=e,e.$id("@toggle").on("click",function(t){return e.toggle(),t.preventDefault(),t.stopPropagation(),!1})}}),r.on([77,48,77,48],function(){n&&n.toggle()}),r.on([84,48,84,48],function(){o&&o.toggle()})},"./unified_view/mobile_overlays.js":function(e,t,i){var n,o,s,a=i("./shared/core/component.js").Component,r=i("./shared/core/component.js"),d=i("./shared/client.js"),l=i("./shared/errors.js"),c=i("./shared/jquery.js"),u=a.extend({$getContainer:function(){return this.$id("@container")},$getContent:function(){return this.$id("@content")},show:function(){var e=this;if(!this.isShown){this.isShown=!0,this._closeListener=this.close.bind(this),n.send("addHash",{hash:this._getHashName(),onRemove:this._closeListener}),window.onpopstate=function(t){var i=document.location.hash.substr(1);i&&i.length>0&&i!=e._getHashName()&&"action_sheet"!=i&&e.close()},this.modalBackground=document.createElement("div"),this.modalBackground.className="modal_bg";var t=this.$getContainer().css("z-index");this.modalBackground.style.zIndex=t-1,document.body.insertBefore(this.modalBackground,document.body.firstChild),c(this.modalBackground).on("click",function(){window.history.back()}),this.$getContainer().removeClass("hidden"),this.$getContainer().addClass(this._getOpenAnimation()),this.$getContent().scrollTop(0),this._fixHeight(),d.isIOSMobileWeb()?this._lockScrollOnIOS():document.body.style.overflowY="hidden",this._resizeListener=this._fixHeight.bind(this),window.addEventListener("resize",this._resizeListener)}},close:function(){if(this.isShown){if(this.isShown=!1,this.$getContainer().addClass("hidden"),window.removeEventListener("popstate",this._closeListener),window.removeEventListener("resize",this._resizeListener),d.isIOSMobileWeb()){var e=this.$getContent().get(0);e.removeEventListener("touchstart",this._handleTouchStart),e.removeEventListener("touchmove",this._handleTouchMove),window.removeEventListener("scroll",this._iOSScrollHack),document.body.removeEventListener("touchmove",this._cancelTouch)}else document.body.style.overflowY="scroll";document.body.removeChild(this.modalBackground),this.onClose&&this.onClose(),this._clearPageAction()}},setOnClose:function(e){this.onClose=e},setRightTextButton:function(e){var t=this.$id("@navigation_button");t.removeClass("hidden"),t.removeClass("has_badge"),t.toggleClass("is_disabled",e.disabled),t.text(e.title);var i=this.$id("@header_action_buttons");i&&i.addClass("hidden");var n=e.callback;t.on("click",function(){n()})},setRightIconButtons:function(e){this.hideRightButtons(),this.$id("@header_action_buttons").removeClass("hidden");for(var t=0;t<e.length;t++){var i=e[t],n="@right_icon_button_"+t,s=this.$id(n);s.removeClass("hidden"),s.toggleClass("is_disabled",i.disabled),s.text(o.getIconChar(i.iconName));var a=i.callback;s.on("click",function(){a()})}},hideRightButtons:function(){this.$id("@navigation_button").toggleClass("hidden",!0);for(var e=0;e<2;e++){var t="@right_icon_button_"+e;this.$id(t).addClass("hidden")}},_fixHeight:function(){var e;e=!this._height||this._height>window.innerHeight?window.innerHeight:this._height;var t=this.$id("@action_view_header").outerHeight();this.$getContainer().height(e),this.$getContent().height(e-t);var i=window.scrollY+(window.innerHeight-e);this.$getContainer().css("top",i+"px")},_lockScrollOnIOS:function(){var e=this.$getContent().get(0),t=this;t.startScroll=window.scrollY,this._handleTouchStart=function(e){t.allowUp=this.scrollTop>0,t.allowDown=this.scrollTop<this.scrollHeight-this.clientHeight,t.slideBeginY=e.pageY},e.addEventListener("touchstart",this._handleTouchStart),this._handleTouchMove=function(e){var i=e.pageY>t.slideBeginY,n=e.pageY<t.slideBeginY;t.slideBeginY=e.pageY,i&&t.allowUp||n&&t.allowDown?e.stopPropagation():e.preventDefault()},e.addEventListener("touchmove",this._handleTouchMove),this._cancelTouch=function(e){e.preventDefault()},document.body.addEventListener("touchmove",this._cancelTouch),this._iOSScrollHack=function(e){window.scrollTo(window.scrollX,t.startScroll)},window.addEventListener("scroll",this._iOSScrollHack)}});t.ActionViewOverlay=u.extend({onLoad:function(){var e=this;s=e,e.$id("@close_button").on("click",function(){window.history.back()})},_clearPageAction:function(){this.hideRightButtons(),this.setTitle("")},_getOpenAnimation:function(){return"action-view-slide-in"},_getHashName:function(){return"actionView"},setTitle:function(e){this.$id("@title").text(e)},setHeight:function(e){this._height=e,this._fixHeight()}}),t.getActionViewOverlay=function(){return s},t.isOverlayShown=function(){var e=!1;return[s].forEach(function(t){e|=t&&t.isShown}),e};var h=t.setPageAction=function(e){if(f[_]=e,s.isShown){var t=s;e.title&&t.setTitle(e.title),e.rightTextButton&&t.setRightTextButton(e.rightTextButton),e.rightIconButtons&&t.setRightIconButtons(e.rightIconButtons)}},p=0;t.moveElementToDiv=function(e,t){var i=document.createElement("div"),n="_movedElement_"+p++;i.id=n,e.parentElement&&e.parentElement.replaceChild(i,e),t.appendChild(e),e.setAttribute("_markerId",n)},t.moveElementBack=function(e){var t=e.getAttribute("_markerId"),i=document.getElementById(t);i?(i.parentElement.replaceChild(e,i),e.setAttribute("_markerId",undefined)):e.parentElement.removeChild(e)};var f={},_=-1,m=function(e){for(var t={},i=[e];i.length;){var n=i.pop();t[n]=!0;var o=r._allChildren[n];o&&Array.prototype.push.apply(i,o)}return delete t[e],Object.keys(t)};t.executeOnLoadForPrefetchedContent=function(e){var t=e.cid,i=m(t);if(_=t,e.getDvar("disableOnload")){e.setDvar("disableOnload",undefined);try{r.onLoad(i,!1)}catch(e){l.report(e)}}else{var n=f[t];n&&h(n)}}},"./unified_view/modal.js":function(e,t,i){var n,o,s,a=i("./shared/core/component.js").Component,r=i("./shared/modal.js"),d=i("./shared/util.js"),l=i("./shared/client.js");n=i("./w2.modal.js"),t.ModalBase=a.extend({onLoad:function(){var e=this;this.$id("@close").on("click",function(t){t.preventDefault(),e.onClose()}),this.$id("@cancel").on("click",function(t){t.preventDefault(),e.onClose()}),this.$id("@submit").on("click",function(t){t.preventDefault(),e.onSubmit()}),this.onLoadWeb()},onLoadWeb:function(){var e=n.Modal.modalFor(this);if(e){this._originalClose=e.close.bind(e);var t=this;e.close=d.once(function(){e._isOpen&&t.onClose()})}},onLoadMobile:function(){this._initMobileDoneButton(!1),this._initMobileCancelButton()},_initMobileDoneButton:function(e){this.mobile_done_button&&(l.isNativeApp()?this.nativeSetPageAction(e):(this.$nav=this.$id("@nav"),this.$nav.text(this.done_text),this.$nav.addClass("is_done"),this.$nav.removeClass("hidden"),this.$nav.on("click",this._mobileOnSubmit.bind(this))),this.setMobileDoneButtonDisabled(e))},_initMobileCancelButton:function(){l.isNativeApp()&&o.registerOneTimeMessageHandler("closeNavigationButtonPressed",this.onClose.bind(this))},_mobileOnSubmit:function(){this._mobileDisabled||this.onSubmit()},setMobileDoneButtonDisabled:function(e){this._mobileDisabled=e,l.isNativeApp()?this.nativeSetPageAction(e):this.$nav.toggleClass("is_disabled",e)},nativeSetPageAction:function(e){l.isNativeApp()&&s&&s.send("setPageAction",{title:this.title_text,rightTextButton:{title:this.done_text,disabled:e,callback:this._mobileOnSubmit.bind(this)}})},close:function(){this._originalClose&&this._originalClose(),r.handleClose(this)},onClose:function(){this.close()},submit:function(e){r.handleSubmit(this,e)},onSubmit:function(e){this.submit(e),this.close()}}),t.FormModal=t.ModalBase.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.child("form").registerOnSubmitSuccess(function(){e.registerOnFormSubmitSuccessExtra(),e.submit(),e.close()})},registerOnFormSubmitSuccessExtra:function(){},onSubmit:function(){this.child("form").submitForm()}}),t.ModalNavItem=a.extend({onLoad:function(){var e=this;e.$tab=e.$id("@tab"),e.$tab.on("click",function(t){t.preventDefault(),e.triggerSwitchTab()}),e.handleSwitchTab()},triggerSwitchTab:function(){},handleSwitchTab:function(){}})},"./unified_view/multifeed/_multifeed.js":function(e,t,i){var n,o,s=i("./unified_view/paged_list.js").PagedList,a=new Date;t.Multifeed=s.extend({onLoad:function(){this._super.apply(this,arguments),this.registerStaleMoreStoriesButton(),this.setDvar("feed_page",this.feed_page),this.setDvar("page_data",this.page_data)},registerStaleMoreStoriesButton:function(){},maybeShowMoreStoriesButton:function(){new Date-a>=54e5&&this.showMoreStoriesButton()},showMoreStoriesButton:function(){o.send("updateNewStoriesButton",{visible:!0,text:this.more_stories_text}),n.registerOneTimeMessageHandler("newStoriesButtonTapped",function(){o.send("updateNewStoriesButton",{visible:!1}),o.send("reload")})}})},"./unified_view/multifeed/bundle.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./unified_view/toggle.js"),a=i("./shared/events/index.js"),r=i("./shared/cookies.js"),d=i("./unified_view/carousel.js"),l=i("./view/hover_menu.js");t.BundleHeader=o.extend({onLoad:function(){this._super.apply(this,arguments),this.bundle_hash&&this.setDvar("bundle_hash",this.bundle_hash)}}),t.ClickthroughBundle=o.extend({onLoad:function(){this._super.apply(this,arguments),this.registerViewAllClick(),this.bundle_hash&&this.setDvar("bundle_hash",this.bundle_hash)},registerViewAllClick:function(){var e=this;e.$id("@view_all").on("click",function(){r.setFeedBundleLog(e,"FooterClickthrough")})}}),t.ExpandableBundle=s.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments),this.registerViewMoreClick(),this.bundle_hash&&this.setDvar("bundle_hash",this.bundle_hash)},actualSwitch:function(){this._super.apply(this,arguments),this.registerViewAllClick()},registerViewAllClick:function(){var e=this;e.$id("@view_all").on("click",function(){r.setFeedBundleLog(e,"FooterClickthrough")})},registerViewMoreClick:function(){var e=this;e.$id("@view_more").on("click",function(t){t.preventDefault(),r.setFeedBundleLog(e,"FooterExpand")})}}),t.ViewAllFooter=o.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@view_all").on("click",function(){r.setFeedBundleLog(e,"FooterClickthrough")})}}),t.QuestionsInTopic=t.ExpandableBundle.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.handleEvent(a.Types.MULTIFEED_BUNDLE_REMOVE,function(t){t.payload.tid==e.tid&&e.hideBundle()})},hideBundle:function(){r.setFeedBundleLog(this,"Hide"),this.$id("@normal_state").addClass("hidden"),this.$id("@removed_state").removeClass("hidden"),this.serverCall("hide_bundle").kwargs({tid:this.tid}).send()}}),t.QuestionsInTopicHeader=t.BundleHeader.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(a.Types.KNOWS_ABOUT_ADD_TOPIC,function(t){t.payload.tid==e.tid&&e.addKnowsAboutTopic()}),e.handleEvent(a.Types.KNOWS_ABOUT_REMOVE_TOPIC,function(t){t.payload.tid==e.tid&&e.removeKnowsAboutTopic()})},addKnowsAboutTopic:function(){var e=this;r.setFeedBundleLog(e,"AddKnowsAbout"),e.serverCall("add_knowsabout_topic").kwargs({tid:e.tid}).liveMutate().send()},removeKnowsAboutTopic:function(){var e=this;r.setFeedBundleLog(e,"RemovesKnowsAbout"),e.serverCall("remove_knowsabout_topic").kwargs({tid:e.tid}).liveMutate().send()},showActionSheet:function(){var e=this;n.showActionSheet({title:e.actionSheetTitle,buttonTitles:e.actionSheetTitles,destructiveButtonIndex:0,callback:function(t){if(e.is_knows_about_topic){if(0!=t)return;e.emitEvent({type:a.Types.KNOWS_ABOUT_REMOVE_TOPIC,payload:{tid:e.tid}})}else if(0==t)e.emitEvent({type:a.Types.KNOWS_ABOUT_ADD_TOPIC,payload:{tid:e.tid}});else{if(1!=t)return;e.emitEvent({type:a.Types.MULTIFEED_BUNDLE_REMOVE,payload:{tid:e.tid}})}}})}}),t.QuestionsInTopicWebOverflowLink=o.extend({onLoad:function(){var e=this;this.overflowMenu=new l.ToggleableMenu({$linkElem:this.$id("@bundle_action"),$menuElem:this.$id("@overflow_menu"),loadFunction:function(){},alignment:"right",clickOpen:!0,shouldAttachToBody:!0}),e.$id("@remove_knowsabout_topic").on("click",function(){e.emitEvent({type:a.Types.KNOWS_ABOUT_REMOVE_TOPIC,payload:{tid:e.tid}})}),e.$id("@add_knowsabout_topic").on("click",function(){e.emitEvent({type:a.Types.KNOWS_ABOUT_ADD_TOPIC,payload:{tid:e.tid}})}),e.$id("@hide_topic_bundle").on("click",function(){e.emitEvent({type:a.Types.MULTIFEED_BUNDLE_REMOVE,payload:{tid:e.tid}})})}}),t.TopQuestionsForYouInNetwork=o.extend({onLoad:function(){var e=this;this.handleEvent(a.Types.MULTIFEED_TOP_QUESTIONS_FROM_NETWORK_HIDE,function(t){e.hideBundle()})},hideBundle:function(){r.setFeedBundleLog(this,"Hide"),this.$id("@normal_state").addClass("hidden"),this.$id("@removed_state").removeClass("hidden"),this.serverCall("hide_bundle").send()}}),t.TopQuestionsForYouInNetworkHeader=t.BundleHeader.extend({onLoad:function(){this._super.apply(this,arguments)},showActionSheet:function(){var e=this;n.showActionSheet({buttonTitles:e.actionSheetTitles,callback:function(t){0==t&&e.emitEvent({type:a.Types.MULTIFEED_TOP_QUESTIONS_FROM_NETWORK_HIDE,payload:{}})}})}}),t.TopQuestionsForYouInNetworkWebOverflowLink=o.extend({onLoad:function(){var e=this;this.overflowMenu=new l.ToggleableMenu({$linkElem:this.$id("@bundle_action"),$menuElem:this.$id("@overflow_menu"),loadFunction:function(){},alignment:"right",clickOpen:!0,shouldAttachToBody:!0}),e.$id("@hide_bundle").on("click",function(){e.emitEvent({type:a.Types.MULTIFEED_TOP_QUESTIONS_FROM_NETWORK_HIDE,payload:{}})})}}),t.TranslateAnswerSuggestions=o.extend({onLoad:function(){var e=this;this.handleEvent(e.getEventToHandle(),function(t){e.hideBundle()})},getEventToHandle:function(){return a.Types.MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_HIDE},hideBundle:function(){r.setFeedBundleLog(this,"Hide"),this.$id("@normal_state").addClass("hidden"),this.$id("@removed_state").removeClass("hidden"),this.serverCall("hide_bundle").send()}}),t.TranslateAnswerSuggestionsHeader=t.BundleHeader.extend({onLoad:function(){this._super.apply(this,arguments)},getEventToEmit:function(){return a.Types.MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_HIDE},showActionSheet:function(){var e=this;n.showActionSheet({buttonTitles:e.actionSheetTitles,callback:function(t){0==t&&e.emitEvent({type:e.getEventToEmit(),payload:{}})}})}}),t.TranslateAnswerSuggestionsWebOverflowLink=o.extend({onLoad:function(){var e=this;this.overflowMenu=new l.ToggleableMenu({$linkElem:this.$id("@bundle_action"),$menuElem:this.$id("@overflow_menu"),loadFunction:function(){},alignment:"right",clickOpen:!0,shouldAttachToBody:!0}),e.$id("@hide_bundle").on("click",function(){e.emitEvent({type:e.getEventToEmit(),payload:{}})})},getEventToEmit:function(){return a.Types.MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_HIDE}}),t.TranslateAnswerSuggestionsTargetSilo=t.TranslateAnswerSuggestions.extend({getEventToHandle:function(){return a.Types.MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_TARGET_SILO_HIDE}}),t.TranslateAnswerSuggestionsTargetSiloHeader=t.TranslateAnswerSuggestionsHeader.extend({getEventToEmit:function(){return a.Types.MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_TARGET_SILO_HIDE}}),t.TranslateAnswerSuggestionsTargetSiloWebOverflowLink=t.TranslateAnswerSuggestionsWebOverflowLink.extend({getEventToEmit:function(){return a.Types.MULTIFEED_TRANSLATE_ANSWER_SUGGESTIONS_TARGET_SILO_HIDE}}),t.AnswersInTopicBundle=t.ClickthroughBundle.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.handleEvent(a.Types.MULTIFEED_ANSWERS_IN_TOPIC_HIDE,function(t){t.payload.tid==e.tid&&e.hideBundle()})},hideBundle:function(){r.setFeedBundleLog(this,"Hide"),this.$id("@normal_state").addClass("hidden"),this.serverCall("hide_bundle").liveMutate().send()}}),t.AnswersInTopicBundleHeader=t.BundleHeader.extend({onLoad:function(){this._super.apply(this,arguments)},showActionSheet:function(){var e=this;n.showActionSheet({title:e.actionSheetTitle,buttonTitles:e.actionSheetTitles,callback:function(t){0==t&&e.emitEvent({type:a.Types.MULTIFEED_ANSWERS_IN_TOPIC_HIDE,payload:{tid:e.tid}})}})}}),t.SuggestedAMAsBundle=d.Carousel.extend({onLoad:function(){this._super.apply(this,arguments);var e=this,t=e.$id("@start_session");t&&t.on("click",function(){e.createModal("open_session_modal").show()})}}),t.AmaSelfServeBundleHeader=t.BundleHeader.extend({onLoad:function(){this._super.apply(this,arguments);var e=this,t=e.$id("@stop_button");t&&t.on("click",function(){e.createModal("close_session_modal").show()})}}),t.CarouselStoryBundle=o.extend({onLoad:function(){var e=this;e.carousel=e.$id("@carousel")}}),t.AnswerStoryBundle=t.ExpandableBundle.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.$id("@view_more").on("click",function(t){t.preventDefault(),e.serverCall("log_similar_answers_clicked").send(),e.emitEvent({type:a.Types.MULTIFEED_ANSWER_BUNDLE_EXPAND,payload:{first_carousel_aid:e.first_carousel_aid}})}),"inline"==e.similar_answer_variant&&e.handleEvent(a.Types.FEED_ANSWER_INLINE_EXPAND,function(t){t.payload.aid==e.aid&&e.$id("@view_more").click()})}}),t.AppendedAnswerCarouselStoryBundle=d.Carousel.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(a.Types.MULTIFEED_ANSWER_BUNDLE_EXPAND,function(t){t.payload.first_carousel_aid==e.first_carousel_aid&&e.toggleNav(e.container.scrollLeft(),e.getScrollAmount())})}}),t.TopicHeaderBase=t.BundleHeader.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.$id("@topic_name").on("click",function(){r.setFeedBundleLog(e,"TopicNameClick")})}}),t.FollowedTopicHeader=t.TopicHeaderBase.extend({onLoad:function(){this._super.apply(this,arguments)},unfollowTopic:function(){r.setFeedBundleLog(this,"Unfollow"),this.serverCall("unfollow_topic").kwargs({tid:this.tid}).liveMutate().send()},muteTopic:function(){r.setFeedBundleLog(this,"Mute"),this.serverCall("mute_topic").kwargs({tid:this.tid}).liveMutate().send()},showActionSheet:function(){var e=this;n.showActionSheet({title:e.actionSheetTitle,buttonTitles:e.actionSheetTitles,destructiveButtonIndex:0,callback:function(t){e.does_follow_topic?0==t&&e.unfollowTopic():0==t&&(e.muteTopic(),e.emitEvent({type:a.Types.MULTIFEED_BUNDLE_REMOVE,payload:{tid:e.tid}}))}})}}),t.FollowedTopicOverflowLink=o.extend({onLoad:function(){var e=this;this.overflowMenu=new l.ToggleableMenu({$linkElem:this.$id("@bundle_action"),$menuElem:this.$id("@overflow_menu"),loadFunction:function(){},alignment:"right",clickOpen:!0,shouldAttachToBody:!0}),e.$id("@unfollow_topic").on("click",function(){e.unfollowTopic()}),e.$id("@mute_topic").on("click",function(){e.muteTopic(),e.emitEvent({type:a.Types.MULTIFEED_BUNDLE_REMOVE,payload:{tid:e.tid}})})},unfollowTopic:function(){this.serverCall("unfollow_topic").kwargs({tid:this.tid}).liveMutate().send()},muteTopic:function(){this.serverCall("mute_topic").kwargs({tid:this.tid}).liveMutate().send()}}),t.ImplicitTopicExpandableBundle=t.ExpandableBundle.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(a.Types.MULTIFEED_BUNDLE_REMOVE,function(t){t.payload.tid==e.tid&&e.hideBundle()})},hideBundle:function(){r.setFeedBundleLog(this,"Hide"),this.$id("@normal_state").addClass("hidden"),this.$id("@removed_state").removeClass("hidden")}}),t.FollowedTopicExpandableBundle=t.ExpandableBundle.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(a.Types.MULTIFEED_BUNDLE_REMOVE,function(t){t.payload.tid==e.tid&&e.hideBundle()})},hideBundle:function(){r.setFeedBundleLog(this,"Hide"),this.$id("@normal_state").addClass("hidden"),this.$id("@removed_state").removeClass("hidden")}}),t.TribeContentBundle=o.extend({onLoad:function(){var e=this;e.handleEvent(a.Types.TRIBE_ITEM_REMOVE,function(t){t.payload.oid==e.oid&&t.payload.object_type==e.object_type&&e.$id("@tribe_bundle").addClass("hidden")})}})},"./unified_view/multifeed/home.js":function(e,t,i){var n,o,s=i("./unified_view/multifeed/_multifeed.js").Multifeed,a=i("./shared/client.js"),r=i("./shared/window_manager.js"),d=i("./shared/events/index.js");t.HomeMultifeed=s.extend({onLoad:function(){var e=this;if(this._super.apply(this,arguments),this.prefetchNativeTabs(),this.removeVisitParams(),this.should_show_mobile_nux){var t={name:"nux_redirect_url",value:window.location.href,options:{expires:1}};o.send("setCookie",t),this.showNUX(),n.registerMessageHandler("showNUX",function(){e.showNUX()})}this.handleEvent(d.Types.HOME_MULTIFEED_REFRESH,function(e){r.navigateTo("/")})},prefetchNativeTabs:function(){a.isNativeApp()&&n.registerOneTimeMessageHandler("pageReadyComplete",function(){setTimeout(function(){o.send("prefetchTabs")},500)})},removeVisitParams:function(){var e=r.getURL();(-1!=e.indexOf("?qp_story=")||-1!=e.indexOf("?injected_aid=")||-1!=e.indexOf("?signup_answer_page=")||this.remove_visit_params)&&r.replaceURL("/")},showNUX:function(){setTimeout(function(){o.send("openURL",{url:"/nux/follow_topic",target:"nondismissable_modal",nux:!0})},1)}})},"./unified_view/multifeed/story.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./shared/log_sender.js"),a=i("./shared/impression_tracker.js"),r=i("./unified_view/toggle.js"),d=i("./gating.js"),l=i("./shared/client_log.js"),c=i("./shared/reading_time.js").logReadingTimeOpen,u=a.createTracker(function(e,t,i){d.qfeed_log_debugger&&(i.classList.add("__debug_border"),console.log("feed_impression",JSON.stringify(e.debug_data,null,2))),s.log("feed_impression",e.impression_data)},{ratioThreshold:.5,minTimeInViewMs:500,exitViewport:!1,oneOffTracking:!0});t.FeedStory=n.extend({onLoad:function(){this.setDvar("feed_story_hash",this.qfeed_log_hash),this.setDvar("enable_feed_logging",this.enable_feed_logging),this.trackImpression()},trackImpression:function(){this.enable_feed_logging&&u.observe(this.$id("@item").get(0),{impression_data:{story_hashes:[this.qfeed_log_hash],__js_data__:{feed_page:this.feed_page,page_data:this.page_data},nid_override:this.__extra_args.nid_override},debug_data:d.qfeed_log_debugger&&{hash:this.qfeed_log_hash,position:this.position,bundle_position:this.bundle_position,bundle_type:this.bundle_type}})},showDownvoteFeedback:function(e){var t=this;this.$id("@item").hasClass("hidden")||(t.$id("@item").addClass("hidden"),"question"==e?(t.$id("@question_feedback").removeClass("hidden"),!1===t.questionFeedbackLoaded&&t.serverCall("load_question_downvote_feedback").contentFor(t.$id("@question_feedback")).success(function(){t.questionFeedbackLoaded=!0}).send()):"answer"==e?(t.$id("@answer_feedback").removeClass("hidden"),!1===t.answerFeedbackLoaded&&t.serverCall("load_answer_downvote_feedback").contentFor(t.$id("@answer_feedback")).success(function(){t.answerFeedbackLoaded=!0,t.$id("@answer_feedback")[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}).send()):"board_item"==e?(t.$id("@board_item_feedback").removeClass("hidden"),!1===t.boardItemFeedbackLoaded&&t.serverCall("load_board_item_downvote_feedback").contentFor(t.$id("@board_item_feedback")).success(function(){t.boardItemFeedbackLoaded=!0}).send()):"hyperlink"==e?(t.$id("@hyperlink_feedback").removeClass("hidden"),!1===t.hyperLinkFeedbackLoaded&&t.serverCall("load_hyperlink_downvote_feedback").contentFor(t.$id("@hyperlink_feedback")).success(function(){t.hyperLinkFeedbackLoaded=!0}).send()):"post"==e&&(t.$id("@post_item_feedback").removeClass("hidden"),!1===t.postFeedbackLoaded&&t.serverCall("load_post_item_downvote_feedback").contentFor(t.$id("@post_item_feedback")).success(function(){t.postFeedbackLoaded=!0}).send()))},hideDownvoteFeedback:function(e){this.$id("@item").hasClass("hidden")&&(this.$id("@item").removeClass("hidden"),"question"==e?this.$id("@question_feedback").addClass("hidden"):"answer"==e?this.$id("@answer_feedback").addClass("hidden"):"board_item"==e?this.$id("@board_item_feedback").addClass("hidden"):"hyperlink"==e?this.$id("@hyperlink_feedback").addClass("hidden"):"post"==e&&this.$id("@post_item_feedback").addClass("hidden"))},showNegativeFeedback:function(e,t,i,n,o){var s=this;if(!this.$id("@item").hasClass("hidden")){s.$id("@item").addClass("hidden"),s.$id("@negative_feedback_options").removeClass("hidden");n==2&&l.logEvent("QuestionPass",s.$id("@item").get(0)),s.serverCall("load_negative_feedback").kwargs({oid:e,to_uid:t,tid:i,story_object_type:n,matched_condition:o}).contentFor(s.$id("@negative_feedback_options")).send()}},showNegativeFeedbackMessage:function(e,t,i,n){var o=this;o.$id("@item").addClass("hidden"),o.$id("@negative_feedback_options").addClass("hidden"),o.$id("@negative_feedback_message").removeClass("hidden"),o.serverCall("load_negative_feedback_message").kwargs({oid:e,message:t,action_event:i,action_id:n}).contentFor(o.$id("@negative_feedback_message")).liveMutate().send()},hideNegativeFeedback:function(){this.$id("@item").removeClass("hidden"),this.$id("@negative_feedback_options").addClass("hidden"),this.$id("@negative_feedback_message").addClass("hidden")}}),t.CarouselAnswerFeedStory=t.FeedStory.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.$id("@item_overlay").on("click",function(e){l.logEvent("AnswerExpand",e.target)})}}),t.AnswerFeedStory=t.FeedStory.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.answerFeedbackLoaded=!1,e.questionFeedbackLoaded=!1,e.handleEvent(o.Types.ANSWER_VOTE_STATE,function(t){t.payload.aid==e.aid&&("downvoted"==t.payload.state?e.showDownvoteFeedback("answer"):e.hideDownvoteFeedback("answer"))}),e.handleEvent(o.Types.QUESTION_VOTE_STATE,function(t){t.payload.qid==e.qid&&("downvoted"==t.payload.state?e.showDownvoteFeedback("question"):e.hideDownvoteFeedback("question"))}),e.handleEvent(o.Types.FEED_ANSWER_INLINE_EXPAND,function(t){t.payload.aid==e.aid&&(e.$id("@action_bar_truncated").addClass("hidden"),e.$id("@action_bar_expanded").removeClass("hidden"),e.log_click_for_injected_story&&l.logEvent("AnswerExpand",e.$id("@item").get(0),{aid:e.aid}))}),e.handleEvent(o.Types.FEED_NEGATIVE_FEEDBACK_STATE,function(t){t.payload.oid!=e.aid&&t.payload.oid!=e.share_id||("show_options"==t.payload.state?e.showNegativeFeedback(t.payload.oid,t.payload.to_uids,t.payload.tid,t.payload.story_object_type,t.payload.matched_condition):"show_message"==t.payload.state?e.showNegativeFeedbackMessage(t.payload.oid,t.payload.message,t.payload.action,t.payload.action_id):"hide"==t.payload.state&&e.hideNegativeFeedback())})}}),t.ToggleAnswerFooterWrapper=r.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(o.Types.FEED_ANSWER_INLINE_EXPAND,function(t){t.payload.aid==e.aid&&e.triggerSwitch()})}}),t.ToggleSharedAnswerFooterWrapper=r.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(o.Types.QUORA_SHARE_ANSWER_EXPANDED,function(t){t.payload.aid==e.aid&&e.triggerSwitch()})}}),t.ToggleTribePostFooterWrapper=r.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(o.Types.FEED_TRIBE_POST_INLINE_EXPAND,function(t){t.payload.pid==e.pid&&e.triggerSwitch()})}}),t.AnswerStoryTopicCarouselToggle=r.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(o.Types.FEED_ANSWER_INLINE_EXPAND,function(t){t.payload.aid==e.aid&&e.triggerSwitch()})}}),t.DigestPreExpandedFeedStory=t.AnswerFeedStory.extend({onLoad:function(){this._super.apply(this,arguments),c(this,this.$id("@item").get(0),"Answer",this.aid,this.getDvar("feed_page"))}}),t.QuestionFeedStory=t.FeedStory.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.questionFeedbackLoaded=!1,e.handleEvent(o.Types.QUESTION_VOTE_STATE,function(t){t.payload.qid==e.qid&&("downvoted"==t.payload.state?e.showDownvoteFeedback("question"):e.hideDownvoteFeedback("question"))}),this.handleEvent(o.Types.QUESTION_CANT_ANSWER_STATE,function(t){if(t.payload.qid==e.qid){var i="passed"==t.payload.state;e.$id("@item").toggleClass("cant_answer",i)}}),e.handleEvent(o.Types.FEED_NEGATIVE_FEEDBACK_STATE,function(t){t.payload.oid==e.qid&&("show_options"==t.payload.state?e.showNegativeFeedback(t.payload.oid,t.payload.to_uids,t.payload.tid,t.payload.story_object_type,t.payload.matched_condition):"show_message"==t.payload.state?e.showNegativeFeedbackMessage(t.payload.oid,t.payload.message,t.payload.action,t.payload.action_id):"hide"==t.payload.state&&e.hideNegativeFeedback())})}}),t.BoardItemFeedStory=t.FeedStory.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.boardItemFeedbackLoaded=!1,e.handleEvent(o.Types.POST_VOTE_STATE,function(t){t.payload.pid==e.board_item_id&&("downvoted"==t.payload.state?e.showDownvoteFeedback("board_item"):e.hideDownvoteFeedback("board_item"))}),e.handleEvent(o.Types.FEED_NEGATIVE_FEEDBACK_STATE,function(t){t.payload.oid==e.board_item_id&&("show_options"==t.payload.state?e.showNegativeFeedback(t.payload.oid,t.payload.to_uids,t.payload.tid,t.payload.story_object_type,t.payload.matched_condition):"show_message"==t.payload.state?e.showNegativeFeedbackMessage(t.payload.oid,t.payload.message,t.payload.action,t.payload.action_id):"hide"==t.payload.state&&e.hideNegativeFeedback())})}}),t.TribePostItemFeedStory=t.FeedStory.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.postFeedbackLoaded=!1,e.handleEvent(o.Types.POST_VOTE_STATE,function(t){t.payload.pid==e.pid&&("downvoted"==t.payload.state?e.showDownvoteFeedback("post"):e.hideDownvoteFeedback("post"))}),e.handleEvent(o.Types.FEED_NEGATIVE_FEEDBACK_STATE,function(t){t.payload.oid==e.pid&&("show_options"==t.payload.state?e.showNegativeFeedback(t.payload.oid,t.payload.to_uids,t.payload.tid,t.payload.story_object_type,t.payload.matched_condition):"show_message"==t.payload.state?e.showNegativeFeedbackMessage(t.payload.oid,t.payload.message,t.payload.action,t.payload.action_id):"hide"==t.payload.state&&e.hideNegativeFeedback())})}}),t.HyperLinkFeedStory=t.FeedStory.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.hyperLinkFeedbackLoaded=!1,e.handleEvent(o.Types.HYPERLINK_VOTE_STATE,function(t){t.payload.link_id==e.link_id&&("downvoted"==t.payload.state?e.showDownvoteFeedback("hyperlink"):e.hideDownvoteFeedback("hyperlink"))}),e.handleEvent(o.Types.FEED_NEGATIVE_FEEDBACK_STATE,function(t){t.payload.oid!=e.link_id&&t.payload.oid!=e.share_id||("show_options"==t.payload.state?e.showNegativeFeedback(t.payload.oid,t.payload.to_uids,t.payload.tid,t.payload.story_object_type,t.payload.matched_condition):"show_message"==t.payload.state?e.showNegativeFeedbackMessage(t.payload.oid,t.payload.message,t.payload.action,t.payload.action_id):"hide"==t.payload.state&&e.hideNegativeFeedback())})}}),t.VideoAnswerCarouselStory=t.FeedStory.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.handleEvent(o.Types.FEED_NEGATIVE_FEEDBACK_STATE,function(t){t.payload.oid==e.aid&&("show_options"==t.payload.state?e.showNegativeFeedback(t.payload.oid,t.payload.to_uids,t.payload.tid,t.payload.story_object_type,t.payload.matched_condition):"show_message"==t.payload.state?e.showNegativeFeedbackMessage(t.payload.oid,t.payload.message,t.payload.action,t.payload.action_id):"hide"==t.payload.state&&e.hideNegativeFeedback())}),e.$id("@item_overlay").on("click",function(t){l.logEvent("AnswerExpand",t.target,{aid:e.aid})})}}),t.AnswerStoryTopicCarouselWrapper=n.extend({onLoad:function(){}})},"./unified_view/multifeed/write.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/button/base.js").ButtonBase;t.EditKnowsAboutTopicsSection=n.extend({onLoad:function(){var e=this;e.$id("@add_topics_link").on("click",function(){e.createModal("load_modal").show()})}}),t.AddKnowsAboutTopicsButton=o.extend({onPressed:function(e){var t=this;t._super.apply(this,arguments),t.createModal("load_modal").show()}})},"./unified_view/multimodal.js":function(e,t,i){var n,o,s,a,r=i("./shared/core/component.js"),d=r.Component,l=i("./shared/util.js"),c=i("./shared/client.js"),u=i("./shared/util.js"),h=i("./shared/events/index.js"),p=i("./shared/jquery.js"),f=i("./shared/loading.js"),_=i("./shared/history_stack.js"),m=i("./shared/viewport.js"),g=i("./shared/Class.js").Class,v=i("./shared/visibility_state.js"),w=i("./settings.js"),b=i("./shared/window_manager.js"),y=i("./shared/client_log.js");s=i("./webnode2.js");var C=t.redirectTo=function(e){b.navigateTo(e)};t.openSingleModalStep=function(e,t){e.manager=new T(e,function(t){e.manager.popStep(),t.redirect&&C(t.redirect)}),e.manager.pushStep("single_step",t)};var k,S=t.Step=d.extend({__init__:function(){this._super.apply(this,arguments),this.data.prefetch_for_cloner&&!w.isClonedPage&&this.setDvar("disableOnload",!0)},onLoad:function(){var e=this;c.isNativeApp()?(v.onChange(function(t){t&&e._onShow()}),e._onShow()):(e.$submitButton=e.$id("@submit"),e.$backButton=e.$id("@cancel"),e.$id("@close").on("click",function(t){t.preventDefault(),e.dismiss()}),e.$submitButton.on("click",function(t){t.preventDefault(),e.submit()}),e.$backButton.on("click",function(t){t.preventDefault(),e.data&&e.data.noBack?e.dismiss():e.back()})),r.registerAfterOnLoadCallback(function(){e.reportedLoad||(e.reportedLoad=!0,h.GlobalProxy.dispatch({type:h.Types.MULTIMODAL_LOADED,payload:{manager_id:e.manager_id,stepName:e.step_name,noBack:e.data.noBack,persistent:e.data.persistent}}))}),e.handleEvent(h.Types.MULTIMODAL_SHOW,function(t){t.payload.step_name===e.step_name&&t.payload.manager_id===e.manager_id&&e._onShow()})},onShow:function(){},_onShow:function(){this.submitManuallyDisabled||this._enableSubmit(),this.onShow()},disableSubmit:function(){this.submitManuallyDisabled=!0,this._disableSubmit()},_disableSubmit:function(){c.isNativeApp()?a.send("setPageAction",{title:this.title_text,rightTextButton:{title:this.done_text,disabled:!0}}):this.$submitButton.addClass("u-disabled"),this.submitDisabled=!0},enableSubmit:function(){this.submitManuallyDisabled=!1,this._enableSubmit()},_enableSubmit:function(){if(c.isNativeApp()){var e={title:this.title_text};this.show_mobile_done_button&&(e.rightTextButton={title:this.done_text,disabled:!1,callback:this.submit.bind(this)}),a.send("setPageAction",e)}else this.$submitButton.removeClass("u-disabled");this.submitDisabled=!1},submit:function(e){if(!this.submitDisabled){var t=this.getSubmitData();u.isPlainObject(e)&&(t=u.extend({},t,e)),h.GlobalProxy.dispatch({type:h.Types.MULTIMODAL_DONE,payload:{manager_id:this.manager_id,current_step:this.step_name,data:t}}),this._disableSubmit()}},back:function(){this.data.noBack||(c.isNativeApp()?v.isVisible()&&a.send("dismiss"):_.popState())},dismiss:function(){h.GlobalProxy.dispatch({type:h.Types.MULTIMODAL_DISMISS,payload:{manager_id:this.manager_id}})},getSubmitData:function(){return{}}});c.isNativeApp()||(k={stack:[],current:function(){return this.stack[this.stack.length-1]},push:function(e){if(0===this.stack.length){m.setPageScroll(!1);var t=x();t.removeClass("hidden"),t.on("click",this.overlayClick.bind(this))}else this.current().$currentWebStepWrapper().addClass("hidden"),this.removeExtraOverlayClasses(this.current());this.stack.push(e),this.addExtraOverlayClasses(this.current())},pop:function(){if(this.removeExtraOverlayClasses(this.current()),this.stack.pop(),0===this.stack.length){m.setPageScroll(!0);var e=x();e.addClass("hidden"),e.off("click")}else this.addExtraOverlayClasses(this.current()),this.current().$currentWebStepWrapper().removeClass("hidden")},overlayClick:function(e){var t,i,n=x();if(e.target==n.get(0))for(i=this.stack.length-1;i>=0;i--){if(t=this.stack[i],!t.easyDismissEnabled)return;t.dismiss()}},addExtraOverlayClasses:function(e){var t=x(),i=e.extraOverlayClasses;i&&t.addClass(i)},removeExtraOverlayClasses:function(e){var t=x(),i=e.extraOverlayClasses;i&&t.removeClass(i)}});var E,x=function(){if(!E){var e=p("<div>");e.addClass("hidden modal_overlay"),E=e,p("#__w2_modal_container_").after(e)}return E},T=t.Manager=g.extend({easyDismissEnabled:!0,extraOverlayClasses:"",__init__:function(e,t,i){var n=this;n.component=e,n.transition=t,n.manager_id=i||l.randomId(),n.showNext=null,n.replaceNext=!1,n.loadedSteps={},n.pushedSteps=[],h.GlobalProxy.subscribe(h.Types.MULTIMODAL_DONE,function(e){e.payload.manager_id===n.manager_id&&n.transition(n,e.payload.current_step,e.payload.data)}),h.GlobalProxy.subscribe(h.Types.MULTIMODAL_LOAD,function(e){e.payload.manager_id===n.manager_id&&n.loadStep(e.payload.step,e.payload.data)}),h.GlobalProxy.subscribe(h.Types.MULTIMODAL_LOADED,function(e){e.payload.manager_id===n.manager_id&&n.onStepLoaded(e.payload)}),h.GlobalProxy.subscribe(h.Types.MULTIMODAL_DISMISS,function(e){e.payload.manager_id===n.manager_id&&n.onDismiss()})},onStepLoaded:function(e){var t=e.stepName,i=this.loadedSteps[t];i&&(i.noBack=e.noBack,i.persistent=e.persistent,c.isNativeApp()||t!==this.showNext||(this.hideLoading(),this._showStep(t),this.replaceNext&&this._removePreviousStep(),this.showNext=null,this.replaceNext=!1))},currentStepState:function(){return this.pushedSteps[this.pushedSteps.length-1]},$newStepWrapper:function(){var e=x(),t=p("<div>");t.addClass("modal_wrapper normal hidden"),e.append(t);var i=l.randomId();t.attr("id",i);var n=r.getLiveParent(this.component.cid);return y.associateParentChildDomIds(i,n),t},$currentWebStepWrapper:function(){return this.currentStepState().$div},loadStep:function(e,t){var i=this;if(!i.loadedSteps[e]){var n="load_step",o={manager_id:i.manager_id,step:e,data:t||{}};c.isNativeApp()&&(o.data.prefetch_for_cloner=!0);var s=i.$newStepWrapper();i.loadedSteps[e]={$div:s,stepName:e};var a={useLoadingSpinner:!1};c.isNativeApp()||(a.parentCid="*ROOT*"),i.component.serverCall(n).kwargs(o).contentFor(s,a).success(function(){i.loadedSteps[e].loadComplete=!0}).send()}},loadStepFromInline:function(e,t){var i=this.$newStepWrapper();i.append(t.children()),this.loadedSteps[e]={$div:i,stepName:e,loadComplete:!0}},_getStepComponent:function(e){var t,i,n=this.component.children();for(i=0;i<n.length;i++)if(t=n[i],t.step_name===e)return t;return null},_pushStep:function(e,t,i){if(c.isNativeApp()){i&&h.GlobalProxy.dispatch({type:h.Types.MULTIMODAL_PROXY_HACK,payload:{manager_id:this.manager_id,messageName:"hideAskToolbar",messageData:{}}});var s,r="load_step",d={manager_id:this.manager_id,step:e,data:t||{}},l=n.modalUrl(this.component.getHmac(),r,d,this.component),u=this.loadedSteps[e];s=u&&u.loadComplete?o.dataFromComponent(u.$div.children().get(0),this._getStepComponent(e),null,l):{url:l};var p="showActionView";i&&!v.isVisible()?(s.target="reload",delete s.title,delete s.height,p="openURL"):this.easyDismissEnabled||(s.dragToDismiss=!1),c.isIOSApp()&&!v.isVisible()?h.GlobalProxy.dispatch({type:h.Types.MULTIMODAL_PROXY_HACK,payload:{manager_id:this.manager_id,messageName:p,messageData:s}}):a.send(p,s)}else this.loadStep(e,t),this.loadedSteps[e].loadComplete?(this._showStep(e),i&&this._removePreviousStep()):(this.showLoading(),this.showNext=e,this.replaceNext=i)},pushStep:function(e,t){var i=t&&!!t.noBack;this._pushStep(e,t,i)},replaceStep:function(e,t){this._pushStep(e,t,!0)},alertStepShown:function(e){h.GlobalProxy.dispatch({type:h.Types.MULTIMODAL_SHOW,payload:{step_name:e,manager_id:this.manager_id}})},_showStep:function(e){if(this.pushedSteps.length>0){this.currentStepState().$div.addClass("hidden")}else k.push(this);var t=this.loadedSteps[e];t.$div.removeClass("hidden"),this.pushedSteps.push(t),_.pushState(this.popStep.bind(this)),this.alertStepShown(e)},showLoading:function(){this.$desktopLoading||(this.$desktopLoading=p("<div>"),this.$desktopLoading.addClass("multimodal_loading_overlay"),this.$desktopLoading.append(f.createDots()),0===this.pushedSteps.length?p(document.body).append(this.$desktopLoading):this.currentStepState().$div.append(this.$desktopLoading))},hideLoading:function(){var e=this;e.$desktopLoading&&(e.$desktopLoading.addClass("animate_out"),setTimeout(function(){e.$desktopLoading.remove(),delete e.$desktopLoading},200))},popStep:function(){if(c.isNativeApp())h.GlobalProxy.dispatch({type:h.Types.MULTIMODAL_NATIVE_BACK,payload:{manager_id:this.manager_id}});else{if(this.currentStepState().noBack)return;this.hideLoading();var e=this.currentStepState();if(e.$div.addClass("hidden"),this.pushedSteps.pop(),0===this.pushedSteps.length)return void this.dismiss();var t=this.currentStepState();this.alertStepShown(t.stepName),t.$div&&t.$div.removeClass("hidden"),e.persistent||this.unloadStep(e.stepName)}},_removePreviousStep:function(){var e=this.pushedSteps.length-2,t=this.pushedSteps[e];t&&(this.pushedSteps.splice(e,1),t.persistent||this.unloadStep(t.stepName))},unloadStep:function(e){var t=this.loadedSteps[e],i=t.$div;s.forgetContents(i);var n=r.getLiveParent(this.component.cid);y.removeParentChildAssociation(i.attr("id"),n);var o=this._getStepComponent(e);o&&o.cid&&r.unloadComponent(o.cid),i.remove(),delete this.loadedSteps[e]},dismiss:function(){h.GlobalProxy.dispatch({type:h.Types.MULTIMODAL_DISMISS,payload:{manager_id:this.manager_id}})},onDismiss:function(){this.pushedSteps.length>0&&this.currentStepState().$div.addClass("hidden"),k.pop(),_.skipBack(this.pushedSteps.length),this.pushedSteps=[];for(var e in this.loadedSteps)this.loadedSteps[e].persistent||this.unloadStep(e)}});t.Demo=d.extend({onLoad:function(){var e=this,t=new T(e,function(e,t,i){"1"===t?e.pushStep("2",{}):"2"===t&&e.dismiss()});t.easyDismissEnabled=!1,e.child("load").$id("@cell").on("click",function(){t.loadStep("1",{})}),e.child("present").$id("@cell").on("click",function(){t.pushStep("1",{})})}}),t.InlineDemo=d.extend({onLoad:function(){var e=this,t=new T(e,function(e,t,i){"1"===t?e.pushStep("2",{}):"2"===t&&e.dismiss()},"inlinedemo");t.loadStepFromInline("1",e.$id("@content")),e.child("present").$id("@cell").on("click",function(){t.pushStep("1",{}),t.loadStep("2",{})})}}),t.NUXDemo=d.extend({onLoad:function(){new T(this,function(e,t,i){"1"===t?e.pushStep("2",{}):"2"===t&&b.navigateTo("https://www.google.com")},"inlinedemo").loadStep("2",{})}}),t.SlowDemo=d.extend({onLoad:function(){var e=this,t=new T(e,function(e,t,i){"1"===t?e.pushStep("2",{slow:!0}):"2"===t&&e.dismiss()});e.child("present").$id("@cell").on("click",function(){t.pushStep("1",{slow:!0})})}}),t.IntermediateStepDemo=d.extend({onLoad:function(){var e=this,t=new T(e,function(e,t,i){"1"===t?e.pushStep("2",{}):"2"===t?e.replaceStep("3",{}):"3"===t&&e.dismiss()});t.easyDismissEnabled=!1,e.child("present").$id("@cell").on("click",function(){t.pushStep("1",{})})}}),t.DemoStep1=S.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.child("load").$id("@cell").on("click",function(){h.GlobalProxy.dispatch({type:h.Types.MULTIMODAL_LOAD,payload:{manager_id:e.manager_id,step:"2",data:{}}})})}}),t.DemoStep2=S.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.child("back").$id("@cell").on("click",function(){e.back()})}})},"./unified_view/network/admin.js":function(e,t,i){var n=i("./unified_view/question/ask_question.js").AskQuestionSelector;t.AdminA2AQuestionSelector=n.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.minWords=1,e.delay=200}})},"./unified_view/network/invite.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./unified_view/modal.js").ModalBase,s=(i("./shared/modal.js"),i("./shared/core/component.js").Component);t.InviteModalLink=s.extend({onLoad:function(){var e=this;e.$id("@link").on("click",function(){e.createModal("load_modal").show()}),e.actionButton=e.child("invite_link"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(){e.createModal("load_modal").show()})}}),t.InviteForm=s.extend({onLoad:function(){var e=this;this.handleEvent(n.Types.NETWORK_INVITE_USER,function(t){t.payload.uid?e.setToUser(t.payload.uid):t.payload.email&&e.performInviteActionToEmail(t.payload.email)})},setToUser:function(e){this.serverCall("perform_invite_existing_user_action").kwargs({invitee_uid:e}).success(this.onSuccessfulInvite.bind(this)).liveMutate().send()},onSuccessfulInvite:function(){this.child("selector")&&this.child("selector").setQuery("")},performInviteActionToEmail:function(e){this.serverCall("perform_invite_action").kwargs({email:e}).success(this.onSuccessfulInvite.bind(this)).liveMutate().send()}}),t.InviteModal=o.extend({onUnload:function(){}}),t.DontKnowLanguageLink=s.extend({onLoad:function(){var e=this;e.$id("@dont_know_language").on("click",function(){e.serverCall("mark_as_dont_know").liveMutate().send()}),e.$id("@unmark_dont_know_language").on("click",function(){e.serverCall("unmark_as_dont_know").liveMutate().send()})}}),t.DontKnowLanguageLinkModal=t.DontKnowLanguageLink.extend({onLoad:function(){var e=this;e.$id("@dont_know_language").on("click",function(){e.serverCall("mark_as_dont_know").success(function(){e.dismissModal()}).send()})},dismissModal:function(){this.emitEvent({type:n.Types.NETWORK_JOIN_MODAL,payload:{hideModal:!0,hasBeenMarkedAsDecideLater:!0}})}})},"./unified_view/network/join.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/events/index.js"),a=i("./unified_view/modal.js").ModalBase,r=i("./shared/window_manager.js");t.SwitchableWithLoginForms=o.extend({onLoad:function(){var e=this;this.handleEvent(s.Types.NETWORK_BETA_LOGIN_FORM_STATE,function(t){t.payload.showLogin?e.showLoginForm():e.showNonLoginForm()})},showLoginForm:function(){this.$id("@non_login_form").addClass("hidden"),this.$id("@login_form").removeClass("hidden")},showNonLoginForm:function(){this.$id("@non_login_form").removeClass("hidden"),this.$id("@login_form").addClass("hidden")}}),t.LoggedOutMainBase=o.extend({onLoad:function(){}}),t.LoggedInJoinBase=o.extend({onLoad:function(){this.$id("@go_back_link").on("click",this.onPressed.bind(this))},onPressed:function(){r.navigateTo(this.url)}}),t.PublicRequestForm=o.extend({onLoad:function(){var e=this;e.$email=e.$id("@email"),e.$first_name=e.$id("@first_name"),e.$last_name=e.$id("@last_name"),e.$bio=e.$id("@bio"),e.handleEvent(s.Types.NETWORK_BETA_WAITLIST_FORM_STATE,function(t){t.payload.email&&e.$email.val(t.payload.email),t.payload.first_name&&e.$first_name.val(t.payload.first_name),t.payload.last_name&&e.$last_name.val(t.payload.last_name),e.showLoginAttemptFailedDescription(),e.updateButton()}),e.$email.on("input",function(){e.updateButton()}),e.$first_name.on("input",function(){e.updateButton()}),e.$last_name.on("input",function(){e.updateButton()}),e.$bio.on("input",function(){e.updateButton()}),e.$id("@submit").on("click",function(){e.sendRequest()}),e.$id("@login").on("click",function(){e.showLoginForm()}),e.$id("@login2").on("click",function(){e.showLoginForm()})},showLoginForm:function(){this.emitEvent({type:s.Types.NETWORK_BETA_LOGIN_FORM_STATE,payload:{showLogin:!0}})},showLoginAttemptFailedDescription:function(){this.$id("@login_attempt_failed").removeClass("hidden")},updateButton:function(){var e=this;e.$email.val().length>0&&e.$first_name.val().length>0&&e.$last_name.val().length>0&&e.$bio.val().length>0?e.$id("@submit").removeClass("disabled"):e.$id("@submit").addClass("disabled")},sendRequest:function(){var e=this,t=e.$email.val(),i=e.$bio.val();e.serverCall("validate").kwargs({email:t}).success(function(n){n.success&&e.serverCall("request").kwargs({email:t,first_name:e.$first_name.val(),last_name:e.$last_name.val(),bio:i}).contentFor(e.$id("@request_form_content")).send()}).send()}}),t.EmailRequestInlineFeedback=o.extend({onLoad:function(){var e=this;this.$id("@login").on("click",function(){e.emitEvent({type:s.Types.NETWORK_BETA_LOGIN_FORM_STATE,payload:{showLogin:!1}})})}});var d=t.LoggedInJoinSiloPromptLink=o.extend({onLoad:function(){var e=this;e.setLinkHandler(),e.should_show_modal_on_load&&e.showModal()},setLinkHandler:function(){var e=this;e.$id("@link").on("click",function(){e.showModal()})},showModal:function(){var e=this;e.can_show_modal?e.createModal("load_desktop").show():r.navigateTo(e.fallback_redirect_url_if_cannot_show_modal)}});t.LoggedInJoinSiloPromptLinkAuto=t.LoggedInJoinSiloPromptLink.extend({showModal:function(){var e=this;e.createModal("load_desktop").webOnlyOptions({closeOnBackgroundClick:!1,closeOnEscape:!1}).show()}}),t.MobileAppLoggedInJoinSiloPromptPageAction=d.extend({setLinkHandler:function(){var e=this;e.setModalLinkState(!1),e.handleEvent(s.Types.NETWORK_JOIN_MODAL,function(t){t.payload.modalShown?e.setModalLinkState(!0):t.payload.modalDismissed&&e.setModalLinkState(!1)})},setModalLinkState:function(e){n.send("setPageAction",{rightTextButton:{title:this.join_text,callback:this.showModal.bind(this),disabled:e}})}}),t.DesktopLoggedInJoinSiloModal=a.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.handleEvent(s.Types.NETWORK_JOIN_MODAL,function(t){t.payload.showModal||(t.payload.hasBeenMarkedAsDecideLater?e.close():e.onClose())})},onClose:function(){var e=this;e.serverCall("mark_as_decide_later").success(function(){e.close()}).send()}}),t.MobileLoggedInJoinSiloModalWrapper=o.extend({onLoad:function(){var e=this;e.$id("@background").on("click",function(){e.dismissModal(!0)}),e.handleEvent(s.Types.NETWORK_JOIN_MODAL,function(t){t.payload.showModal?e.showModal():t.payload.hideModal&&e.dismissModal(!t.payload.hasBeenMarkedAsDecideLater)})},showModal:function(){var e=this;e.$id("@wrapper").addClass("show");var t=e.$id("@modal_wrapper");t.html().length||e.serverCall("load_modal").contentFor(t).send(),e.emitEvent({type:s.Types.NETWORK_JOIN_MODAL,payload:{modalShown:!0}})},_hideWrapper:function(){var e=this;e.$id("@wrapper").addClass("animate_out"),setTimeout(function(){e.$id("@wrapper").removeClass("show"),e.$id("@wrapper").removeClass("animate_out")},200),e.emitEvent({type:s.Types.NETWORK_JOIN_MODAL,payload:{modalDismissed:!0}})},dismissModal:function(e){var t=this;e?t.serverCall("mark_as_decide_later").success(function(){t._hideWrapper()}).send():t._hideWrapper()}}),t.MobileLoggedInJoinSiloModalWrapperLinkAuto=t.MobileLoggedInJoinSiloModalWrapper.extend({onLoad:function(){var e=this;e.should_show_modal_on_load&&e.showModal(),e.handleEvent(s.Types.NETWORK_JOIN_MODAL,function(t){t.payload.hideModal&&e.dismissModal(!t.payload.hasBeenMarkedAsDecideLater)})}});var l=t.MobileLoggedInJoinSiloModal=o.extend({onLoad:function(){var e=this;e.$id("@close").on("click",function(){e.emitEvent({type:s.Types.NETWORK_JOIN_MODAL,payload:{hideModal:!0,hasBeenMarkedAsDecideLater:!1}})})}});t.MobileLoggedInJoinSiloModalForSilo=l.extend({onLoad:function(){var e=this;e.$id("@close").on("click",function(){e.serverCall("mark_as_decide_later").send(),e.emitEvent({type:s.Types.NETWORK_JOIN_MODAL,payload:{hideModal:!0,hasBeenMarkedAsDecideLater:!0}})})}}),t.LoggedInJoinSiloPrompt=o.extend({onLoad:function(){var e=this;e.$id("@decide_later").on("click",function(){e.serverCall("mark_as_decide_later").success(function(){e.dismissModal()}).send()})},dismissModal:function(){this.emitEvent({type:s.Types.NETWORK_JOIN_MODAL,payload:{hideModal:!0,hasBeenMarkedAsDecideLater:!0}})}}),t.JoinSuggestedNetworksSidebar=o.extend({onLoad:function(){var e=this;e.$id("@dismiss").on("click",function(t){t.preventDefault(),e.serverCall("dismiss").success(function(){e.$id("@wrapper").addClass("hidden")}).liveMutate().send()})}})},"./unified_view/network/login.js":function(e,t,i){var n=i("./unified_view/signup/_signup.js").BaseSignupForm,o=i("./shared/events/index.js"),s=i("./unified_view/signup/facebook.js").SignupFacebookConnectButton,a=i("./unified_view/signup/google.js").SignupGoogleConnectButton;t.LoginOnlyForm=n.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@cancel_login").on("click",function(){e.emitEvent({type:o.Types.NETWORK_BETA_LOGIN_FORM_STATE,payload:{showLogin:!1}})})}}),t.LoginFacebookConnectButton=s.extend({onConnectSucceeded:function(e){var t=e,i=this;t.onFailure=function(e){i.emitEvent({type:o.Types.NETWORK_BETA_WAITLIST_FORM_STATE,payload:{email:e.facebookOauthData.email,name:e.facebookOauthData.name}}),i.emitEvent({type:o.Types.NETWORK_BETA_LOGIN_FORM_STATE,payload:{showLogin:!1}})},this.signupContext.set("facebookOauthData",t)}}),t.LoginGoogleConnectButton=a.extend({_setGoogleOauthDataOnConnectSucceeded:function(e){var t=e,i=this;t.onFailure=function(e){i.emitEvent({type:o.Types.NETWORK_BETA_WAITLIST_FORM_STATE,payload:{email:e.googleOauthData.email,name:e.googleOauthData.name}}),i.emitEvent({type:o.Types.NETWORK_BETA_LOGIN_FORM_STATE,payload:{showLogin:!1}})},this.signupContext.set("googleOauthData",t)}})},"./unified_view/network/signup.js":function(e,t,i){var n=i("./unified_view/signup/_signup.js").BaseSignupForm,o=i("./shared/core/component.js").Component,s=i("./shared/events/index.js"),a=(i("./shared/client.js"),i("./unified_view/signup/_signup.js").SignupContext),r=i("./shared/window_manager.js");t.HomepageSignupNetworkRedirectLink=o.extend({onLoad:function(){var e=this;e.$id("@link .silo-link").on("click",function(t){e.hyperlinkClick(t)})},hyperlinkClick:function(e){this.serverCall("mark_clicked").kwargs({nid:e.target.getAttribute("data-nid")}).success(function(){r.navigateTo(e.target.href)}).send()}}),t.SignupWithCodeForm=n.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.SignupContext=e.getContext(a),e.signupContext.set("emailSubmitButton",e.$id("@submit")),e.SignupContext.on("showEmailSignup",function(t,i){i?e.showEmailSignupForm():e.hideEmailSignupForm()}),e.$id("@login").on("click",function(){e.emitEvent({type:s.Types.NETWORK_BETA_LOGIN_FORM_STATE,payload:{showLogin:!0}})}),e.$id("@cancel_signup_with_email").on("click",function(){e.SignupContext.set("showEmailSignup",!1)})},showEmailSignupForm:function(){this.$id("@email_signup_form").removeClass("hidden"),this.$id("@social_signup_form").addClass("hidden")},hideEmailSignupForm:function(){this.$id("@email_signup_form").addClass("hidden"),this.$id("@social_signup_form").removeClass("hidden")}}),t.SignupWithEmailButton=o.extend({onLoad:function(){var e=this;e.SignupContext=e.getContext(a),this.$id("@button").on("click",function(){e.SignupContext.set("showEmailSignup",!0)})}})},"./unified_view/network/switcher.js":function(e,t,i){var n,o,s,a=i("./shared/core/component.js").Component;t.MobileNetworkSwitcherActionSheetSetter=a.extend({onLoad:function(){var e=this;e.$id("@link").on("click",function(t){t.preventDefault(),n.showActionSheet({buttonTitles:e.actionSheetTitles,callback:function(t){t>=e.actionSheetTitles.length||e.maybeSwitchNetwork(t)}})})},maybeSwitchNetwork:function(e){var t=this.destinationData[e];s.isMobileWeb()?window.location=t.url:t.is_member?n.updateConfig(t.subdomain,t.language):o.send("openURL",{target:"modal",url:t.url})}}),t.NativeSwitcherSetter=a.extend({onLoad:function(){o.send("updateSiloSwitcher",this.data)}})},"./unified_view/network/translate.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./unified_view/modal.js").ModalBase,a=i("./shared/events/index.js"),r=i("./shared/client.js"),d=i("./unified_view/button/base.js").ButtonBase,l=i("./shared/client_log.js"),c=i("./shared/window_manager.js"),u=i("./unified_view/multimodal.js").Step,h=i("./unified_view/question/ask_multi_modal.js").AskMultiModal,p=i("./unified_view/question/ask_multi_modal.js").AskQuestionStep;t.TranslateQuestionModalLink=o.extend({onLoad:function(){var e=this;e.source_qid&&setTimeout(function(){e.openModal()},300)},openModal:function(){h.open(this,"translate_question",{source_qid:this.source_qid,source_nid:this.source_nid,from_prompt:this.from_prompt})}}),t.TranslateQuestionPromptTrigger=o.extend({onLoad:function(){var e=this;window.history.replaceState(null,null,window.location.pathname),e.to_nid&&e.createModal("load_inner").kwargs({qid:e.qid,to_nid:e.to_nid}).show()}}),t.TranslateQuestionPromptModal=s.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.$id("@nav").click(function(){c.navigateTo(e.translate_question_url,"present")}),e.$id("@translate_question_link").click(function(){e.onSubmit()}),e.$id("@translate_question_button").click(function(){e.onSubmit()})},onClose:function(){this.serverCall("modal_dismissed").send(),this.emitEvent({type:a.Types.QUESTION_TRANSLATION_PROMPT_DISMISS,scope:a.scope.GLOBAL,payload:{}}),this._super.apply(this,arguments)}}),t.AskToTranslateModalStep=u.extend({onLoad:function(){var e=this;e.prompt_dismissed=!1,e._super.apply(e,arguments),e.$id("@nav").click(function(){e.submit()}),e.$id("@translate_question_link").click(function(){e.submit()}),e.$id("@translate_question_button").click(function(){e.submit()}),e.$id("@cancel").on("click",function(t){e.dismiss()})},dismiss:function(){this.serverCall("modal_dismissed").kwargs().send(),this.emitEvent({type:a.Types.QUESTION_TRANSLATION_PROMPT_DISMISS,scope:a.scope.GLOBAL,payload:{}}),this.prompt_dismissed=!0,this.submit()},getSubmitData:function(){return this.data.translate_question_url=this.translate_question_url,this.data.prompt_dismissed=this.prompt_dismissed,this.data}}),t.TranslateAnswerMain=o.extend({onLoad:function(){var e=this;e.existing_qid||e.handleExistingQuestion(),this.actionButton=this.child("translate_submit"),this.actionButton&&"function"==typeof this.actionButton.onPressed&&this.actionButton.onPressed(function(t){e.onSubmit(t)}),e.$id("@translation_suggestion_button")&&e.$id("@translation_suggestion_button").click(function(){e.$id("@suggest_translation_wrapper").addClass("hidden"),e.serverCall("get_translation_suggestion").success(function(t){t.success?e.child("translate_answer_editor").setEditorContent(t.json_content):e.$id("@suggest_translation_wrapper").removeClass("hidden")}).error(function(){e.$id("@suggest_translation_wrapper").removeClass("hidden")}).send()}),e.child("translate_answer_editor")&&e.child("translate_answer_editor").onEditorEmptyChange(function(t){t?e.$id("@suggest_translation_wrapper").removeClass("hidden"):e.$id("@suggest_translation_wrapper").addClass("hidden")})},handleExistingQuestion:function(){var e=this;e.handleEvent(a.Types.TRANSLATE_SELECT_EXISTING_QID,function(t){e.existing_qid=t.payload.qid}),e.handleEvent(a.Types.TRANSLATE_REMOVE_EXISTING_QID,function(t){e.existing_qid=!1})},onSubmit:function(){var e=this;e.$editor=e.child("translate_answer_editor").child("editor");var t="";e.existing_qid||(e.$selector=e.child("translate_question_selector"),t=e.$selector.$id("@input").val()),e.serverCall("submit_translation").kwargs({question_text:t,answer_text:e.$editor.serialize(),existing_qid:e.existing_qid}).success(function(e){e.redirect_url&&c.navigateTo(e.redirect_url)}).send()}}),t.TranslateAnswerEditor=o.extend({onLoad:function(){var e=this,t=this.child("editor");t.setMeaningfulChangeCallback(function(){e.editorEmptyChange(t.isEmpty())})},editorEmptyChange:function(e){this._onEditorEmptyChange&&this._onEditorEmptyChange(e)},onEditorEmptyChange:function(e){this._onEditorEmptyChange=e},setEditorContent:function(e){this.child("editor").resetFromJSON(e)}});var f=t.TranslateAnswerButton=d.extend({_logEvent:function(e){l.logEvent("TranslateAnswerButton",e.target,{aid:this.aid})},onPressed:function(e){this._logEvent(e),this._super.apply(this,arguments);var t=this;r.isNativeApp()?t.createModal("load_native_translate_answer_modal").kwargs({aid:t.aid,to_nid:t.to_nid}).show():c.navigateTo(t.translate_answer_url,"present")}});t.TranslateAnswerFromQuestionButton=f.extend({_logEvent:function(e){l.logEvent("TranslateAnswerFromQuestionButton",e.target,{aid:this.aid})}}),t.TranslateStep=p.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.$id("@close").on("click",function(t){t.preventDefault(),e.dismiss()})},onShowModalMobile:function(){var e={buttonText:"Add Translation",anonToggleText:""};this.updateAskToolbar(e),n.send("setPageAction",{noRightButtons:!0})}})},"./unified_view/notifications.js":function(e,t,i){var n=i("./unified_view/paged_list.js").PagedList,o=(i("./shared/events/index.js"),i("./shared/core/component.js").Component);t.NotificationsListContentsBaseUnified=n.extend({resyncButtonPressed:function(){this._super.apply(this,arguments),this.serverCall("clear_notif_badge").send()}}),t.NotificationsSettingsLink=o.extend({onLoad:function(){var e=this;e.setting_button=e.$id("@button"),e.setting_button.click(function(){e.serverCall("log_setting_click").send()})}}),t.AllNotificationsListContentsUnified=t.NotificationsListContentsBaseUnified.extend({onLoad:function(){this._super.apply(this,arguments)}})},"./unified_view/nux/_nux.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./shared/window_manager.js"),a=i("./unified_view/modal.js").ModalBase,r=i("./unified_view/multimodal.js").Step,d=i("./unified_view/multimodal.js").Manager,l=i("./shared/history_stack.js"),c=i("./shared/datetime.js"),u=i("./shared/cookies.js"),h=i("./shared/log_sender.js"),p=i("./shared/events/index.js"),f="add_phone_number",_="app_download",m="follow_topic",g="follow_tribes",v="language",w="spinner",b=t.Main=o.extend({onLoad:function(){var e=this,t=!e.showAppDownload&&!e.showFollowTribes,i=!e.showAppDownload,n=!1;e.noBack&&(n=e.noBack);var o=function(i,n,o){switch(n){case f:i.pushStep(m,{is_last_step:t});break;case m:e.showFollowTribes?i.pushStep(g,{}):e.showAppDownload?i.pushStep(_,{}):e.showSpinner?i.pushStep(w,{}):e.markNuxComplete();break;case g:e.showAppDownload?i.pushStep(_,{}):e.showSpinner?i.pushStep(w,{}):e.markNuxComplete();break;case _:e.showSpinner?i.pushStep(w,{}):e.markNuxComplete();break;case w:e.markNuxComplete()}},s=new d(e,o,"inlinenux");e.showAddPhoneNumber&&s.loadStep(m,{is_last_step:t,persistent:!0,noBack:n}),e.showFollowTribes&&s.loadStep(g,{is_last_step:i,persistent:!0,noBack:n}),e.showAppDownload&&s.loadStep(_,{persistent:!0,noBack:n}),e.showSpinner&&s.loadStep(w,{persistent:!0,noBack:n})},onNuxComplete:function(){u.getCookie("nux_redirect_url",function(e){var t="/";e&&e.value!==undefined&&(t=e.value),s.navigateTo(t)})},markNuxComplete:function(e){var t=this;this.serverCall("mark_nux_complete").success(function(){t.onNuxComplete(e)}).send()}});t.DesktopMain=b.extend({onLoad:function(){var e=this;e.$id("@progress_bar_container").removeClass("hidden");var t=function(t,i,n){switch(i){case f:h.log("nux_web_step_transition_logger",{step:"phone_number",step_num:e.currentStep}),t.pushStep(m,{is_last_step:!0});break;case m:h.log("nux_web_step_transition_logger",{step:"follow_interests",step_num:e.currentStep}),e.showLanguageStep?t.pushStep(v):e.showSpinner?t.pushStep(w):e.markNuxComplete(n);break;case v:h.log("nux_web_step_transition_logger",{step:"language",step_num:e.currentStep}),e.showSpinner?t.pushStep(w):e.markNuxComplete(n);break;case w:e.markNuxComplete(n)}e.updateProgressBar()},i=this.manager=new d(this,t,"desktop_nux_manager");i.easyDismissEnabled=!1,i.extraOverlayClasses="NuxModal",h.log("nux_dialog_impression",{}),this.showAddPhoneNumber?(i.loadStepFromInline(f,this.$id("@content")),i.pushStep(f)):(i.loadStepFromInline(m,this.$id("@content")),i.pushStep(m)),this.showAddPhoneNumber&&i.loadStep(m,{is_last_step:!0,persistent:!0,noBack:!0}),this.showLanguageStep&&i.loadStep(v,{persistent:!0,noBack:!0}),this.showSpinner&&i.loadStep(w,{persistent:!0,noBack:!0,answer_page_aid:this.answer_page_aid}),this.handleEvent(p.Types.NUX_FEED_REFRESH,function(){i.dismiss()})},updateProgressBar:function(){this.currentStep+=1,this.emitEvent({type:p.Types.NUX_PROGRESS_BAR_STEP,payload:{step:this.currentStep}})},onNuxComplete:function(e){return this.showSpinner?this.redirectAfterNux(e):this.hideAfterNux()},redirectAfterNux:function(e){e&&e.redirectUrl?s.navigateTo(e.redirectUrl):this.emitEvent({type:p.Types.HOME_MULTIFEED_REFRESH,payload:{}})},hideAfterNux:function(){this.$id("@progress_bar_container").addClass("hidden"),this.manager.dismiss()}}),t.NuxModal=a.extend({onLoad:function(){var e=this;e.submit=this.$id("@submit"),e.next=this.$id("@next"),e.skip=this.$id("@skip"),e.title=this.$id("@modal_title"),e.content=this.$id("@content"),e.currentStep=-1,e.submit.addClass("hidden"),this._super.apply(this),e.next.on("click",function(t){t.preventDefault(),e.loadStepData()}),e.skip.on("click",function(t){t.preventDefault(),e.loadStepData()}),e.loadStepData()},updateTitle:function(e){this.title.text(e)},showSkip:function(){this.skip.removeClass("hidden")},hideSkip:function(){this.skip.addClass("hidden")},showFinish:function(){this.next.addClass("hidden"),this.submit.removeClass("hidden")},onSubmit:function(){this.close()},loadStepData:function(){var e=this;this.currentStep++;var t=this[this.step_order[this.currentStep]];e.serverCall(t.content).contentFor(e.content).liveMutate().success(function(){e.updateTitle(t.title),t.allow_skip?e.showSkip():e.hideSkip(),e.currentStep==e.step_order.length-1&&e.showFinish()}).send()}}),t.AddPhoneNumberStep=r.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.disableSubmit(),e.$id("@skip").on("click",e.skip.bind(e)),this.$id("@sms_code").focus(),this.$id("@sms_code_link").on("click",this.sendCode.bind(this)),this.$id("@edit_button").on("click",this.editPhoneNumber.bind(this)),this.$id("@phone_number").on("input",function(){e.$id("@sms_code_link").removeClass("disabled")}),this.$id("@sms_code").on("input",function(){e.enableSubmit()})},skip:function(e){e.preventDefault(),h.log("nux_phone_number_step_skip_logger",{platform:"web"}),this.enableSubmit(),this.submit(!0)},editPhoneNumber:function(){this.$id("@phone_number").removeClass("disabled"),this.$id("@country_code").removeClass("disabled"),this.$id("@sms_code_row").addClass("hidden"),this.$id("@edit_button").addClass("hidden")},getCountryCode:function(){return this.child("country_code_selector")?this.child("country_code_selector").getValue():""},sendCode:function(){var e=this;this.$id("@phone_number").addClass("disabled"),this.$id("@country_code").addClass("disabled"),this.$id("@sms_code_row").removeClass("hidden"),this.$id("@edit_button").removeClass("hidden"),e.phoneNumber=e.$id("@phone_number").val(),e.countryCode=e.getCountryCode(),this.emitEvent({type:p.Types.PHONE_NUMBER_SEND_VERIFICATION_CODE_CLICKED,payload:{phoneNumber:e.phoneNumber,countryCode:e.countryCode}})},submit:function(e){var t=this;if(e)t._super.apply(this);else{t.phoneNumber=t.$id("@phone_number").val(),t.countryCode=t.getCountryCode();var i=t.$id("@sms_code").val();this.emitEvent({type:p.Types.PHONE_NUMBER_CONFIRM_CODE_CLICKED,payload:{phoneNumber:t.phoneNumber,countryCode:t.countryCode,code:i}}),this.handleEvent(p.Types.PHONE_NUMBER_VERIFIED,function(e){e.payload.phone_verified&&t.submit(!0)})}},back:function(){this.data.noBack||(u.setCookieOnDocument("reloadOnBack",1,{expires:0,expiresMins:1,path:"/"}),l.popState())}}),t.AppDownloadStep=r.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@skip").on("click",this.skip.bind(this)),e.disableSubmit()},onShow:function(){h.log("nux_mobile_step_logger",{step:"download_app"})},skip:function(e){e.preventDefault(),this.enableSubmit(),this.submit()}}),t.SpinnerStep=r.extend({onLoad:function(){this._super.apply(this,arguments),this.num_attempt=0,this.MAX_ATTEMPT=3,this.initial_time_wait=3e3},onShow:function(){this.disableSubmit(),h.log("nux_web_step_logger",{step:"feed_refresh"}),this.nux_redirect_url!==undefined?this.goToNextStep():this.fast_reload?this.waitThenGoToNextStep():this.maybeGoToNextStep(),this.use_placeholder_feed_refresh&&this.emitEvent({type:p.Types.NUX_FEED_REFRESH,payload:{}})},getSubmitData:function(){return this.nux_redirect_url?{redirectUrl:this.nux_redirect_url}:{}},goToNextStep:function(){this.enableSubmit(),this.submit()},waitThenGoToNextStep:function(){var e=this,t=3*c.SECOND;setTimeout(function(){e.goToNextStep()},t)},maybeGoToNextStep:function(){var e=this.initial_time_wait*(this.num_attempt+1);setTimeout(this.shouldShowFeed.bind(this),e)},shouldShowFeed:function(){var e=this;e.num_attempt+=1,e.num_attempt>e.MAX_ATTEMPT?(h.log("nux_feed_refresh_logger",{result:"timeout"}),e.goToNextStep()):e.serverCall("should_show_feed").success(function(t){t?(h.log("nux_feed_refresh_logger",{result:"success"}),e.goToNextStep()):e.maybeGoToNextStep()}).error(function(){e.serverCall("log_error"),e.goToNextStep()}).send()}}),t.NuxLink=o.extend({onLoad:function(){this.$id("@create_dialog_link").on("click",this.loadModal.bind(this))},loadModal:function(){this.createModal("load_modal").show()}}),t.NUXFeedPlaceholderGroup=o.extend({onLoad:function(){var e=this;this.handleEvent(p.Types.NUX_FEED_REFRESH,function(t){e.showFeedPlaceholderText()})},showFeedPlaceholderText:function(){this.$id("@feed_placeholder_text").removeClass("hidden_text"),this.$id("@feed_placeholder_text").addClass("animate_in")}}),t.FollowTopicStep=r.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.selectedTopics=[],e.disableSubmit(),this.handleEvent(p.Types.NUX_SELECT_TOPICS_ENABLE_SUBMIT,function(t){null!=t.payload&&(e.selectedTopics=t.payload.selectedTopics),e.enableSubmit()}),this.handleEvent(p.Types.NUX_SELECT_TOPICS_DISABLE_SUBMIT,function(t){e.disableSubmit()})},onShow:function(){h.log("nux_mobile_step_logger",{step:"follow_interests_impr"})},back:function(){this.data.noBack||(u.setCookieOnDocument("reloadOnBack",1,{expires:0,expiresMins:1,path:"/"}),l.popState())},submit:function(){h.log("nux_mobile_follow_topic_step_logger",{tids:this.selectedTopics}),this._super.apply(this,arguments)}}),t.LanguageStep=r.extend({onShow:function(){h.log("nux_web_step_logger",{step:"language"})}}),t.DesktopFollowTopicStep=r.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.toggleSubmitButton(),this.handleEvent(p.Types.TOPICS_GRID_ADD,function(t){t.payload.tid&&(e.addTopic(t.payload.tid),e.updateButtonLabel(),e.toggleSubmitButton())}),this.handleEvent(p.Types.TOPICS_GRID_REMOVE,function(t){t.payload.tid&&(e.removeTopic(t.payload.tid),e.updateButtonLabel(),e.toggleSubmitButton())})},onShow:function(){h.log("nux_web_step_logger",{step:"follow_interests"})},updateButtonLabel:function(){var e=Math.max(this.min_interests-this.followed_tids.length,0);this.$id("@submit").text(this.num_topics_texts[e])},addTopic:function(e){this.followed_tids.push(e)},removeTopic:function(e){var t=this.followed_tids.indexOf(e);-1!=t&&this.followed_tids.splice(t,1)},toggleSubmitButton:function(){this.followed_tids.length>=this.min_interests?this.enableSubmit():this.disableSubmit()},submit:function(){h.log("nux_web_follow_topic_step_logger",{tids:this.followed_tids}),this._super.apply(this,arguments)}}),t.FollowTribesStep=r.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.handleEvent(p.Types.TRIBE_FOLLOW_BUTTON_CLICK,function(t){e.$submitButton.text(e.alt_done_text)})},back:function(){this.data.noBack||(u.setCookieOnDocument("reloadOnBack",1,{expires:0,expiresMins:1,path:"/"}),l.popState())},submit:function(){this._super.apply(this,arguments)}})},"./unified_view/optout.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.AdPixelOptOutStatus=n.extend({onLoad:function(){var e=this;this.$id("@opt_in_link").click(function(t){return e.serverCall("opt_in").success(function(){e.toggle()}).send(),t.preventDefault(),!1}),this.$id("@opt_out_link").click(function(t){return e.serverCall("opt_out").success(function(){e.toggle()}).send(),t.preventDefault(),!1})},toggle:function(){this.$id("@main_page").find(".opt_in_text").toggleClass("hidden"),this.$id("@main_page").find(".opt_out_text").toggleClass("hidden")}})},"./unified_view/paged_list.js":function(module,exports,__webpack_require__){var Component=__webpack_require__("./shared/core/component.js").Component,coreComponent=__webpack_require__("./shared/core/component.js"),$=__webpack_require__("./shared/jquery.js"),debounce=__webpack_require__("./shared/debounce.js").debounce,events=__webpack_require__("./shared/events/index.js"),scrollAnimationHandler=__webpack_require__("./shared/scroll_animation_handler.js"),loading=__webpack_require__("./shared/loading.js"),perf=__webpack_require__("./shared/perf.js"),util=__webpack_require__("./shared/util.js"),context=__webpack_require__("./shared/w2.context.js"),viewport=__webpack_require__("./shared/viewport.js"),fx=__webpack_require__("./shared/fx.js"),messages,client;exports.PagedList=Component.extend({spinner:null,resyncIndex:null,updatedHashesDuringResync:null,elementsToDelete:null,scrollHandler:null,pagingInProgress:!1,onLoad:function(){this.loaded=!0,this.$paged_list=this.$id("@paged_list"),this.$wrapper=this.$id("@paged_list_wrapper"),this.$container=this.$getContainer(),this.$spinnerDisplayArea=this.$id("@spinner"),this.$resyncButton=this.$id("@resync"),this.$resyncButtonWrapper=this.$id("@resync_wrapper"),this.$resyncButton.on("click",this.resyncButtonPressed.bind(this)),this.$moreButton=this.$id("@more"),this.$moreButton.on("click",this.moreButtonPressed.bind(this));var e=this.getContext(context.HoverMenu);e?(this.inHoverMenu=!0,e.on("isShown",this.onContextVisiblityChange.bind(this)),this.contextIsVisible=e.get("isShown")):(this.contextIsVisible=!0,this.inHoverMenu=!1),this.setupPaging(),this.maybeRetargetLinks(),this.has_more&&this.enable_mobile_hide_content&&this.mapOverNodesBelowList(function(e){$(e).addClass("paged_list_hidden_footer")}),this.debug_show_resync&&this.showResyncButton()},onContextVisiblityChange:function(e,t){this.contextIsVisible=t,this.contextIsVisible||null===this.resyncIndex||this.performResync(),this.scrollHandler&&this.scrollHandler()},isVisible:function(){return this.aggressively_page_and_stop_when_hidden?viewport.isElementInViewport(this.$wrapper.get(0)):this.contextIsVisible},$getContainer:function(){var e=util.firstScrollingParent(this.$wrapper.get(0));return e===document.body&&(e=window),$(e)},getContainerBottom:function(){return this.$container.height()+this.$container.scrollTop()},setScrollHandler:function(e){null!==this.scrollHandler&&this.$container.off("scroll",this.scrollHandler),null!==e&&this.$container.on("scroll",e),this.scrollHandler=e},setupPaging:function(){this.has_more?this.auto_paged?(this.bindAutoPaging(),this.$moreButton.addClass("hidden"),this.showLoading()):(this.hideLoading(),this.$moreButton.removeClass("hidden")):this.onPagingDone()},calculateAutoPageHeight:function(){var e=this.getContainerBottom(),t=this.$wrapper.height(),i=.1*(t-e)+e-100,n=t-4e3;return this.aggressively_page_and_stop_when_hidden?t-3e3:Math.max(i,n)},bindAutoPaging:function(){var e=this,t=function(){var t=e.calculateAutoPageHeight();e.getContainerBottom()>=t&&e.isVisible()&&(e.setScrollHandler(null),e.bindAutoPagePerfLogging(),e.requestNextPage())},i=debounce(t,200,{leading:!0,maxWait:500});e.setScrollHandler(i),t()},bindAutoPagePerfLogging:function(){var e=this,t=debounce(function(){e.getContainerBottom()>e.$wrapper.height()&&(e.setScrollHandler(null),e.startUserPerceivedAction())},50,{leading:!0});e.setScrollHandler(t),t()},requestNextPage:function(e){var t=this;t.pagingInProgress||(t.pagingInProgress=!0,t.serverCall("get_next_page").kwargs({paged_list_parent_cid:t.parent().cid,client_hashes:t.hashes,force_cid:t.cid,domids_to_remove:t.domIdsToDelete()}).success(function(i){t.pagingInProgress=!1,t.appendPage(i,e)}).error(function(){t.pagingInProgress=!1,t.onPagingDone(!0)}).send())},domIdsToDelete:function(){for(var e=[],t=this.elementsToDelete||[],i=0;i<t.length;i++)e.push(t[i].id);return e},startUserPerceivedAction:function(){this.userPerceivedAction||(this.userPerceivedAction=perf.startUserPerceived({hmac:this.getHmac(),method:"get_next_page"}))},finishUserPerceivedAction:function(){this.startUserPerceivedAction(),perf.finishAction(this.userPerceivedAction),this.userPerceivedAction=null},appendPage:function(data,highlight){if(this.loaded){var fragment=util.documentFragmentFromString(data.html),originalNumItems=this.hashes.length,W2,item;this.has_more=data.has_more,this.hashes=this.hashes.concat(data.hashes),this.$wrapper.get(0).appendChild(fragment),W2=__webpack_require__("./webnode2.js"),eval(data.js),null===this.scrollHandler?this.finishUserPerceivedAction():this.setScrollHandler(null),this.removeComponentsToDelete(),this.setupPaging(),this.handleModelUpdates(this.updatedHashesDuringResync),highlight&&(item=this.$wrapper.get(0).children[originalNumItems],0!==originalNumItems&&fx.highlight(item,2e3))}},showLoading:function(){null===this.spinner&&(this.spinner=loading.createDots(),this.$spinnerDisplayArea.append(this.spinner)),this.$spinnerDisplayArea.removeClass("hidden")},hideLoading:function(){this.$spinnerDisplayArea.addClass("hidden")},onPagingDone:function(e){this.hideLoading(),e?(this.$moreButton.removeClass("hidden"),this.resyncIndex&&window.location.href.reload()):this.hashes.length>0&&this.$id("@footer").removeClass("hidden"),this.enable_mobile_hide_content&&this.mapOverNodesBelowList(function(e){$(e).removeClass("paged_list_hidden_footer")})},handleModelUpdates:function(e){if(e){if(null!==this.elementsToDelete)return void(this.updatedHashesDuringResync=e);this.updatedHashesDuringResync=null;var t=firstNewItemIndex(this.hashes,e);return null===t?void this.hideResyncButton():t>=this.hashes.length?(!1===this.has_more&&(this.has_more=!0,this.setupPaging()),void this.hideResyncButton()):(this.resyncIndex=t,this.resyncIndexIsBelowViewport()?void this.performResync(!1):void this.showResyncButton())}},$getChildAtIndex:function(){var e=this.$wrapper.get(0),t=e.children[this.resyncIndex];return $(t)},resyncIndexIsBelowViewport:function(){return!this.isVisible()||null!==this.resyncIndex&&this.$getChildAtIndex(this.resyncIndex).offset().top>this.getContainerBottom()},performResync:function(e){if(this.hideResyncButton(),null!==this.resyncIndex){if(this.emitEvent({type:events.Types.LIVENODE_LOADING_SPINNER,payload:{show:!0}}),this.$paged_list.addClass("resyncing"),e&&this.resyncIndex<this.hashes.length){var t=this.$getChildAtIndex(this.resyncIndex),i=0;this.$container.get(0)!==window&&(i=this.$container.offset().top);var n=200,o=t.offset().top-i-n;this.$container.scrollTop(o)}this.markComponentsToDelete(this.resyncIndex),this.resyncIndex=null,this.requestNextPage(!0)}},showResyncButton:function(){var e=this,t=e.$container.get(0);if(!e.inHoverMenu){e.$resyncButtonWrapper.removeClass("hidden");var i=function(i){var n,o,s;t===window?(n=viewport.siteHeaderHeight(),o=e.$wrapper.offset().top):(n=0,o=0),s=o+e.$wrapper.height()-2*e.$resyncButton.height(),i+=n,i<o?e.$resyncButtonWrapper.css("position","absolute").css("top",0).css("width","100%"):s<i?e.$resyncButtonWrapper.css("position","absolute").css("top",s-o).css("width","100%"):e.$resyncButtonWrapper.css("position","fixed").css("top",n).css("width",e.$wrapper.width())};e.resyncButtonScrollCallback=scrollAnimationHandler.add(t,i)}},hideResyncButton:function(){this.debug_show_resync||this.resyncButtonScrollCallback&&(this.$resyncButtonWrapper.addClass("hidden"),this.$container.off("scroll",this.resyncButtonScrollCallback))},resyncButtonPressed:function(){this.performResync(!0)},markComponentsToDelete:function(e){this.hashes=this.hashes.slice(0,e);var t,i,n=this.$wrapper.get(0),o=n.children;for(this.elementsToDelete=[],i=e;i<o.length;i++)t=o[i],this.elementsToDelete.push(t)},removeComponentsToDelete:function(){var e,t,i,n=this.$wrapper.get(0),o=this.elementsToDelete||[];for(this.elementsToDelete=null,i=0;i<o.length;i++)e=o[i],t=coreComponent.getComponentFromElement(e),t&&coreComponent.unloadComponent(t.cid),n.removeChild(e);o&&(events.DocumentProxy.dispatch({type:events.Types.LIVENODE_LOADING_SPINNER,payload:{show:!1}}),this.$paged_list.removeClass("resyncing"))},moreButtonPressed:function(){this.$moreButton.addClass("hidden"),this.showLoading(),this.requestNextPage()},maybeRetargetLinks:function(){this.retarget_links&&this.$id("@paged_list_wrapper").on("click","a",function(e){var t=window.location.protocol+"//"+window.location.host+window.location.pathname;e.currentTarget.href.replace(t,"").startsWith("#")||(e.currentTarget.target="_blank")})},mapOverNodesBelowList:function(e){var t;if(this.paged_list_error)t=this.$spinnerDisplayArea.get(0).nextSibling;else if(!(t=this.$spinnerDisplayArea.get(0)))return;for(;t;)if(e(t),t.nextSibling)t=t.nextSibling;else{if(!t.parentNode||"main_page_wrapper"==t.parentNode.id)break;t=t.parentNode.nextSibling}},forceResync:function(e){e=e||0,this.resyncIndex=e,this.setScrollHandler(null),this.performResync(!0)},onUnload:function(){this.loaded=!1,this.setScrollHandler(null),this.onPagingDone()}}),exports.InvisibleUpdater=Component.extend({onLoad:function(e){e||this.parent().handleModelUpdates(this.hashes)}});var firstNewItemIndex=exports.firstNewItemIndex=function(e,t){var i,n={};for(i=0;i<e.length;i++)n[e[i]]=!0;for(i=0;i<t.length;i++)if(!n[t[i]])return i;return null}},"./unified_view/paid_contributor/base.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./unified_view/form.js").Form,r=i("./shared/window_manager.js");t.PartnersTitle=s.extend({onLoad:function(){var e=this;e.$id("@info").on("click",function(t){t.preventDefault(),e.createModal("load_info_modal").show()})}}),t.JoinProgramForm=a.extend({onLoad:function(){var e=this,t=e.child("country"),i=null;e._super.apply(e,arguments),e.$id("@view_terms").on("click",function(){t&&(i=t.getValue()),e.createModal("load_terms_modal").kwargs({country:i}).show()})},onSubmitSuccess:function(){setTimeout(function(){r.navigateTo("/partners","replace")},500)}}),t.EarningsFilterActionSheet=s.extend({onLoad:function(){var e=this;e.$id("@earnings_filter").on("click",function(){o.showActionSheet({title:"Filters",buttonTitles:e.filters,callback:function(t){var i=e.urls[t];if(n&&n.isNativeApp()){var o=n.isAndroidApp()?"push":"replace";r.navigateTo(i,o)}else r.navigateTo(i)}})})}}),t.QuestionFiltersActionSheet=s.extend({onLoad:function(){var e=this;e.$id("@question_filter").on("click",function(){o.showActionSheet({title:"Filters",buttonTitles:e.filters,callback:function(t){var i=e.urls[t];if(n&&n.isNativeApp()){var o=n.isAndroidApp()?"push":"replace";r.navigateTo(i,o)}else r.navigateTo(i)}})})}}),t.QuestionListItem=s.extend({onLoad:function(){var e=this,t=414,i=e.$id("@question_earnings_graph").get(0);if(!e.is_minimal&&e.is_earnings_graph&&i){e.$id("@earnings_graph_header").on("click",function(t){e.$id("@earnings_graph_wrapper").toggleClass("hidden")});var n=new Rickshaw.Color.Palette({scheme:["#A7D678"]});for(var o in e.earnings_data)e.earnings_data[o].color=n.color();var s=new Rickshaw.Graph({element:i,series:e.earnings_data,width:t,height:360,renderer:"bar",stroke:!0});s.render();new Rickshaw.Graph.Axis.Y({graph:s,orientation:"left",element:e.$id("@y_axis").get(0),tickFormat:function(t){return e.currency_symbol+t}}).render();new Rickshaw.Graph.Axis.Time({graph:s,orientation:"bottom"}).render();new Rickshaw.Graph.HoverDetail({graph:s,formatter:function(t,i,n){return"Earnings: "+e.currency_symbol+n}})}}}),t.PaidA2aAnnouncement=s.extend({onLoad:function(){var e=this;e.$id("@close").on("click",function(){e.markAsSeen()}),e.$id("@blog_link").on("click",function(){e.markAsSeen()})},markAsSeen:function(){var e=this;e.$id("@announcement").addClass("hidden"),e.serverCall("mark_as_seen").send()}}),t.PartnersNavReorgAnnouncement=s.extend({onLoad:function(){var e=this;e.$id("@close").on("click",function(){e.markAsSeen()}),e.$id("@confirm").on("click",function(){e.markAsSeen()})},markAsSeen:function(){var e=this;e.$id("@announcement").addClass("hidden"),e.serverCall("mark_as_seen").send()}})},"./unified_view/paid_contributor/insights.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/events/index.js"),a=i("./shared/jquery.js");t.QuestionValueInsightsTimeFrameActionSheet=o.extend({onLoad:function(){var e=this;e.$id("@time_frame_action_sheet").on("click",function(){n.showActionSheet({title:"Question Value Insights",buttonTitles:e.filters,callback:function(t){e.emitEvent({type:s.Types.PARTNER_INSIGHTS_TIME_CHANGE,payload:{time_frame_index:t}}),e.$id("@time_frame_action_sheet").text(e.filters[t])}})})}}),t.QuestionValueInsightsViewMore=o.extend({onLoad:function(){var e=this;e.$id("@insights_view_more").on("click",function(t){t.preventDefault(),e.createModal("load_insights_modal").show()})}}),t.QuestionValueInsightsMobileModalLink=o.extend({onLoad:function(){var e=this;e.$id("@insights_view_more").on("click",function(t){t.preventDefault(),e.createModal("load_insights_modal").show()})}}),t.SampleQuestionToggles=o.extend({onLoad:function(){var e=this;e.$list=e.$id("@sample_question_list"),e.bucket_value="over_one_hundred",e.time_frame_index=0,e.$id("@wrapper").on("click",".toggle",function(t){e.bucket_value=a(t.target).attr("data_bucket_name"),e.updateQuestions()}),e.handleEvent(s.Types.PARTNER_INSIGHTS_TIME_CHANGE,function(t){e.time_frame_index=t.payload.time_frame_index,e.updateQuestions()})},updateQuestions:function(){var e=this;e.$list.empty(),e.$id("@bucket_toggles").children(".toggle").removeClass("selected"),e.$id("@"+e.bucket_value).addClass("selected"),e.serverCall("load_sample_questions").kwargs({bucket:e.bucket_value,time_frame_index:e.time_frame_index}).contentFor(e.$list).sendOnlyOnce()}}),t.SampleQuestionPicker=o.extend({onLoad:function(){var e=this;e.$list=e.$id("@sample_question_list"),e.$picker=e.$id("@bucket_picker"),e.bucket_index=3,e.time_frame_index=0,e.$picker.on("change",function(t){e.bucket_index=e.$picker[0].selectedIndex,e.updateQuestions()}),e.handleEvent(s.Types.PARTNER_INSIGHTS_TIME_CHANGE,function(t){e.time_frame_index=t.payload.time_frame_index,e.updateQuestions()})},updateQuestions:function(){var e=this;e.$list.empty(),e.serverCall("load_sample_questions").kwargs({bucket_index:e.bucket_index,time_frame_index:e.time_frame_index}).contentFor(e.$list).sendOnlyOnce()}}),t.QuestionValueInsightsTimePicker=o.extend({onLoad:function(){var e=this;e.$picker=e.$id("@insights_time_frame"),e.$picker.on("change",function(){var t=e.$picker[0].selectedIndex;e.emitEvent({type:s.Types.PARTNER_INSIGHTS_TIME_CHANGE,payload:{time_frame_index:t}})})}}),t.InsightsOverviewWrapper=o.extend({onLoad:function(){var e=this;e.$overview=e.$id("@insights_overview"),e.handleEvent(s.Types.PARTNER_INSIGHTS_TIME_CHANGE,function(t){var i=t.payload.time_frame_index;e.$overview.empty(),e.serverCall("load_insights_overview").kwargs({time_frame_index:i}).contentFor(e.$overview).sendOnlyOnce()})}})},"./unified_view/paid_contributor/prompts.js":function(e,t,i){var n=i("./unified_view/button/base.js").ButtonBase,o=i("./shared/core/component.js").Component,s=i("./shared/debounce.js").debounce,a=i("./shared/events/index.js"),r=i("./unified_view/a2a.js").openA2aModal,d="scrolled",l="minimized",c="expanded",u=i("./shared/jquery.js");t.RefreshTopicQuestionListButton=n.extend({onPressed:function(){var e=this;e.emitEvent({type:a.Types.PARTNER_PROMPTS_TOPIC_REFRESH,payload:{tid:e.tid}})}}),t.TopicPromptBundle=o.extend({onLoad:function(){var e=this;e.$list=e.$id("@sample_questions_wrapper"),e.starting_index=0,e.handleEvent(a.Types.PARTNER_PROMPTS_TOPIC_REFRESH,function(t){e.tid==t.payload.tid&&e.refreshList()})},refreshList:function(){var e=this;e.starting_index+=e.bundle_size,e.serverCall("refresh_topic_questions").kwargs({tid:e.tid,starting_index:e.starting_index}).contentFor(e.$list,{useLoadingSpinner:!1}).sendOnlyOnce()}}),t.PartnersPromptsMain=o.extend({onLoad:function(){u(document).on("scroll",s(this.scrollTrigger.bind(this),50))},scrollTrigger:function(){var e=this;u(document).scrollTop()>0?e.$id("@add_question_prompt").addClass(d):e.$id("@add_question_prompt").removeClass(d)}}),t.A2AButton=n.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.handleEvent(a.Types.A2A_SEND_REQUEST,function(t){t.payload.qid==e.oid&&e.actionButton.switchState(!0)})},onPressed:function(){this._super.apply(this,arguments),this.actionButton.switchState(!0),r(this,{qid:this.oid,a2a_type:this.a2a_type})},onUnpressed:function(){this._super.apply(this,arguments),this.actionButton.switchState(!1),r(this,{qid:this.oid,a2a_type:this.a2a_type})}}),t.RefreshA2AQuestionListButton=n.extend({onPressed:function(){this.emitEvent({type:a.Types.PARTNER_PROMPTS_A2A_REFRESH,payload:{}})}}),t.A2APromptBundle=o.extend({onLoad:function(){var e=this;e.$list=e.$id("@a2a_suggestions_wrapper"),e.handleEvent(a.Types.PARTNER_PROMPTS_A2A_REFRESH,function(){e.refreshList()})},refreshList:function(){var e=this;e.serverCall("refresh_a2a_questions").contentFor(e.$list,{useLoadingSpinner:!1}).sendOnlyOnce()}}),t.DailyAchievements=o.extend({onLoad:function(){var e=this;e.state=c,e.$wrapper=e.$id("@progress_wrapper"),e.$progress_bar=e.$id("@progress_bar"),e.num_current=parseInt(e.$id("@num_current")[0].innerHTML),e.handleEvent(a.Types.ASK_QUESTION_MODAL_SUCCESS,function(t){e.updateProgress()})},scrollTrigger:function(){var e=this;u(document).scrollTop()>0?e.minimize():e.expand()},minimize:function(){var e=this;e.$id("@minimized").removeClass("hidden"),e.$id("@expanded").addClass("hidden"),e.state=l},expand:function(){var e=this;e.$id("@minimized").addClass("hidden"),e.$id("@expanded").removeClass("hidden"),e.state=c},updateProgress:function(){var e=this;if(e.num_current++,e.$wrapper.parent().removeClass("not_started"),e.num_goal>=e.num_current){e.$progress_bar.children(u(".section")).slice(0,e.num_current).removeClass("undone").addClass("done")}e.num_goal==e.num_current&&e.$wrapper.parent().addClass("completed"),e.$id("@num_current")[0].innerHTML=e.num_current.toString(),e.num_goal<e.num_current&&(e.$id("@num_goal").addClass("hidden"),e.$id("@progress_bar").addClass("hidden"))}})},"./unified_view/payment/_payment.js":function(e,t,i){function n(e,t){var i;i="keydown paste change",e&&e.on(i,function(i){setTimeout(function(){var i=e.val(),n=t(i);i!==n&&e.val(n)},1)})}var o=i("./shared/core/component.js").Component,s=i("./shared/stripeLoader.js"),a=i("./shared/jquery.js");t.PaymentMethod=o,t.AddCardForm=o.extend({onLoad:function(){s.load();var e=this;e.$name=e.$id("@name"),e.$number=e.$id("@number"),e.$expiry=e.$id("@expiry"),e.$cvc=e.$id("@cvc"),e.$zip=e.$id("@zip"),e.cardType=null,e.isSubmitting=!1,n(e.$number,function(t){var i=Stripe.card.cardType(t);switch(i){case"Unknown":i=null;break;case"American Express":i="amex";break;case"Diners Club":i="diners";break;default:i=i.toLowerCase().replace(/\s+/g,"")}e._setCardType(i);var n=t.replace(/[^0-9]/g,"");return n="amex"===i?(n.slice(0,4)+" "+n.slice(4,10)+" "+n.slice(10,n.length)).trim():(n.slice(0,4)+" "+n.slice(4,8)+" "+n.slice(8,12)+" "+n.slice(12,n.length)).trim()}),n(e.$expiry,function(e){var t=e.replace(/[^0-9]/g,"");return" /"===e.slice(2,e.length)?t[0]:(1===t.length&&("0"!==t[0]&&"1"!==t[0]||2===e.length&&"1"===t[0]&&(" "===e[1]||isNaN(e[1])))&&(t="0"+t),t.length>1&&(t=t.slice(0,2)+" / "+t.slice(2,t.length)),t)}),n(e.$cvc,function(e){return e.replace(/[^0-9]/g,"")})},getExpiryMonth:function(){return this.$expiry.val().replace(/[^0-9]/g,"").slice(0,2)},getExpiryYear:function(){var e=this.$expiry.val();return e.replace(/[^0-9]/g,"").slice(2,e.length)},getEmail:function(){if(this.$email.length)return this.$email.val()},submit:function(e){var t=this;t.isSubmitting||(t.isSubmitting=!0,document.activeElement.blur(),t._getStripeToken(function(i,n){t.serverCall("submit").kwargs({stripe_response:n,source_type:t.source_type,source_id:t.source_id}).success(function(i){var n;n=i,n?(t.isSubmitting=!1,e()):t.isSubmitting=!1}).error(function(){t.isSubmitting=!1,t.showServerError()}).liveMutate().send()}))},showServerError:function(){this.serverCall("show_error_pmsg").send()},_getStripeToken:function(e){Stripe.card.createToken({name:this.$name.val(),number:this.$number.val(),exp_month:this.getExpiryMonth(),exp_year:this.getExpiryYear(),cvc:this.$cvc.val(),address_zip:this.$zip.val(),currency:"usd"},e)},_setCardType:function(e){this.cardType!==e&&(this.cardType&&this.$number.removeClass(this.cardType),this.cardType=e,this.cardType&&this.$number.addClass(this.cardType),"amex"===this.cardType?this.$number.attr("maxlength","17"):this.$number.attr("maxlength","19"))}}),t.AddBankForm=o.extend({onLoad:function(){s.load();var e=this;e.$form=e.$id("@form"),e.$name=e.$id("@name"),e.$country=e.$id("@country"),e.$routing_1_row=e.$id("@routing_1_row"),e.$routing_1_label=e.$id("@routing_1_label"),e.$routing_1=e.$id("@routing_1"),e.$routing_2_row=e.$id("@routing_2_row"),e.$routing_2_label=e.$id("@routing_2_label"),e.$routing_2=e.$id("@routing_2"),e.$currency_row=e.$id("@currency_row"),e.$currency=e.$id("@currency"),e.$account_row=e.$id("@account_row"),e.$account_label=e.$id("@account_label"),e.$account=e.$id("@account"),e.$us_tax_info=e.$id("@us_tax_info"),e.taxFormShown=!1,e.$dob=e.$id("@dob"),e.$address_line1=e.$id("@address_line1"),e.$address_city=e.$id("@address_city"),e.$address_state=e.$id("@address_state"),e.$address_postal_code=e.$id("@address_postal_code"),e.$ssn=e.$id("@ssn"),e.$i18n_verify=e.$id("@i18n_verify"),e.verifyFormShown=!1,e.$dob_year_first=e.$id("@dob_year_first"),e.$i18n_address_line1=e.$id("@i18n_address_line1"),e.$i18n_address_city=e.$id("@i18n_address_city"),e.$i18n_address_state=e.$id("@i18n_address_state"),e.$i18n_address_postal_code=e.$id("@i18n_address_postal_code"),e.$i18n_address_country=e.$id("@i18n_address_country"),e.$country.on("change",function(t){e.switchCountry(e.$country.val()),"US"===e.countryCode?(e.showVerifyForm(!1),e.$account.val().length>0&&e.showTaxForm(!0),e.$dob_year_first.val(""),e.$i18n_address_line1.val(""),e.$i18n_address_city.val(""),e.$i18n_address_state.val(""),e.$i18n_address_postal_code.val("")):(e.showTaxForm(!1),e.$account.val().length>0&&e.showVerifyForm(!0),e.$ssn.val(""),e.$dob.val(""),e.$address_line1.val(""),e.$address_city.val(""),e.$address_state.val(""),e.$address_postal_code.val(""))}),n(e.$routing_1,function(t){return e._fireOnEdit(),t.replace(/[^0-9]/g,"")}),n(e.$routing_2,function(t){return e._fireOnEdit(),t.replace(/[^0-9]/g,"")}),n(e.$account,function(t){return e._fireOnEdit(),!e.taxFormShown&&"US"===e.countryCode&&e.$account.val().length>0?e.showTaxForm(!0):!e.verifyFormShown&&"US"!==e.countryCode&&e.$account.val().length>0&&e.showVerifyForm(!0),e.inputs().account_numbers_only?t.replace(/[^0-9]/g,""):t.replace(/\s/g,"")}),n(e.$ssn,function(e){var t=e.replace(/[^0-9]/g,"");return t=t.slice(0,3)+"-"+t.slice(3,5)+"-"+t.slice(5,t.length),t.endsWith("--")?t=t.slice(0,t.length-2):t.endsWith("-")&&(t=t.slice(0,t.length-1)),t}),n(e.$dob,function(e){var t=e.replace(/[^0-9]/g,"");" /"===e.slice(-2)&&(t=t.slice(0,t.length-1));var i=t.slice(0,2),n=parseInt(i,10);(n>12||i.length<2&&n>1)&&(t="0"+t);var o=t.slice(2,4),s=parseInt(o,10);(s>31||o.length<2&&s>3)&&(t=t.slice(0,2)+"0"+t.slice(2,t.length));var a=t.slice(4,6);if(2==a.length&&"19"!=a&&"20"!=a){var r="19";parseInt(a,10)<16&&(r="20"),t=t.slice(0,4)+r+t.slice(4,t.length)}var d=t.slice(0,2);return t.length>=2&&(d+=" / "+t.slice(2,4)),t.length>=4&&(d+=" / "+t.slice(4,t.length)),d}),n(e.$dob_year_first,function(e){var t=e.replace(/[^0-9]/g,"");" /"===e.slice(-2)&&(t=t.slice(0,t.length-1));var i=t.slice(0,2);if(2==i.length&&"19"!=i&&"20"!=i){var n="19";parseInt(i,10)<16&&(n="20"),t=n+i+t.slice(4,t.length)}var o=t.slice(4,6),s=parseInt(o,10);(s>12||o.length<2&&s>1)&&(t=t.slice(0,4)+"0"+o+t.slice(6,t.length));var a=t.slice(6,t.length),r=parseInt(a,10);(r>31||a.length<2&&r>3)&&(t=t.slice(0,6)+"0"+a);var d=t.slice(0,4);return t.length>=4&&(d+=" / "+t.slice(4,6)),t.length>=6&&(d+=" / "+t.slice(6,t.length)),d}),n(e.$address_state,function(e){return e.replace(/[^a-zA-Z]/g,"").toUpperCase()}),n(e.$address_postal_code,function(e){return e.replace(/[^0-9]/g,"")}),e.focus()},updateCurrencySelector:function(){var e=this;e.$currency.empty();var t=e.currencies[e.countryCode];a.each(t,function(t,i){e.$currency.append(a("<option></option>").val(i).text(i))}),1===t.length?e.$currency_row.addClass("hidden"):e.$currency_row.removeClass("hidden")},onEdit:function(e){this._editCallbacks===undefined&&(this._editCallbacks=[]),this._editCallbacks.push(e)},focus:function(){this.$routing_1_row.hasClass("hidden")?this.$account.focus():this.$routing_1.focus()},showTaxForm:function(e){var t=this,i=333,n="swing";e&&!t.taxFormShown?(t.taxFormShown=!0,a("#"+t.$us_tax_info.attr("id")).animate({height:"show",opacity:"show"},i,n)):!e&&t.taxFormShown&&(t.taxFormShown=!1,a("#"+t.$us_tax_info.attr("id")).animate({height:"hide",opacity:"hide"},i,n))},showVerifyForm:function(e){var t=this,i=333,n="swing";e&&!t.verifyFormShown?(t.verifyFormShown=!0,a("#"+t.$i18n_verify.attr("id")).animate({height:"show",opacity:"show"},i,n)):!e&&t.verifyFormShown&&(t.verifyFormShown=!1,a("#"+t.$i18n_verify.attr("id")).animate({height:"hide",opacity:"hide"},i,n))},getRoutingNumber:function(){if(this.inputs().labels.routing_2){return this.inputs().routing_join_template.replace("{1}",this.$routing_1.val()).replace("{2}",this.$routing_2.val())}if(this.inputs().labels.routing_1)return this.$routing_1.val()},getBirthYear:function(){if("US"===this.countryCode){var e=this.$dob.val();return e.replace(/[^0-9]/g,"").slice(4,e.length)}return this.$dob_year_first.val().replace(/[^0-9]/g,"").slice(0,4)},getBirthMonth:function(){return"US"===this.countryCode?this.$dob.val().replace(/[^0-9]/g,"").slice(0,2):this.$dob_year_first.val().replace(/[^0-9]/g,"").slice(4,6)},getBirthDay:function(){return"US"===this.countryCode?this.$dob.val().replace(/[^0-9]/g,"").slice(2,4):this.$dob_year_first.val().replace(/[^0-9]/g,"").slice(6,8)},getSSN:function(){return this.$ssn.val().replace(/[^0-9]/g,"")},getAddressLine1:function(){return"US"===this.countryCode?this.$address_line1.val():this.$i18n_address_line1.val()},getAddressCity:function(){return"US"===this.countryCode?this.$address_city.val():this.$i18n_address_city.val()},getAddressState:function(){return"US"===this.countryCode?this.$address_state.val():this.$i18n_address_state.val()},getAddressPostalCode:function(){return"US"===this.countryCode?this.$address_postal_code.val():this.$i18n_address_postal_code.val()},getAddressCountry:function(){return"US"===this.countryCode?"US":this.$i18n_address_country.val()},submit:function(e){var t=this;t.isSubmitting||(t.isSubmitting=!0,document.activeElement.blur(),t._getStripeToken(function(i,n){t.serverCall("submit").kwargs({stripe_response:n,country:t.countryCode,name:t.$name.val(),birth_year:t.getBirthYear(),birth_month:t.getBirthMonth(),birth_day:t.getBirthDay(),address_line1:t.getAddressLine1(),address_city:t.getAddressCity(),address_state:t.getAddressState(),address_postal_code:t.getAddressPostalCode(),address_country:t.getAddressCountry(),ssn:t.getSSN()}).success(function(i){i?(t.isSubmitting=!1,e()):t.isSubmitting=!1}).error(function(){t.isSubmitting=!1,t.showServerError()}).liveMutate().send()}))},showServerError:function(){this.serverCall("show_error_pmsg").send()},inputs:function(e){var t=this.countryInputs[e||this.countryCode];return t.maxlength||(t.maxlength={}),t.placeholders||(t.placeholders={}),t},switchCountry:function(e){this.$form.removeClass("form_country_"+this.countryCode),this.countryCode=e,this.$form.addClass("form_country_"+this.countryCode),this.inputs().labels.routing_1?(this.$routing_1_label.text(this.inputs().labels.routing_1),this.$routing_1.attr("maxlength",this.inputs().maxlength.routing_1||""),this.$routing_1.attr("placeholder",this.inputs().placeholders.routing_1||""),this.$routing_1_row.removeClass("hidden")):this.$routing_1_row.addClass("hidden"),this.inputs().labels.routing_2?(this.$routing_2_label.text(this.inputs().labels.routing_2),this.$routing_2.attr("maxlength",this.inputs().maxlength.routing_2||""),this.$routing_2.attr("placeholder",this.inputs().placeholders.routing_2||""),this.$routing_2_row.removeClass("hidden")):this.$routing_2_row.addClass("hidden"),this.$account_label.text(this.inputs().labels.account),this.$account.attr("maxlength",this.inputs().maxlength.account||""),this.$account.attr("placeholder",this.inputs().placeholders.account||""),this.focus(),this.updateCurrencySelector(),this.$i18n_address_country.val(this.countryCode).trigger("change")},_fireOnEdit:function(){if(this._editCallbacks!==undefined)for(;this._editCallbacks.length>0;)this._editCallbacks.pop()()},_getStripeToken:function(e){Stripe.bankAccount.createToken({country:this.countryCode,currency:this.$currency.val(),routing_number:this.getRoutingNumber(),account_number:this.$account.val(),name:this.$name.val(),account_holder_type:"individual"},e)}})},"./unified_view/payment/money.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.MoneyAmountInput=n.extend({onLoad:function(){var e=this;e.$amount=e.$id("@amount"),e.$amount.on("keydown paste change",function(t){setTimeout(function(){e._filter()},1)}),e.$amount.on("blur",function(t){e._filter(!0)})},getValueInCents:function(){var e=this._cleanVal(!0)[1];return-1===e.indexOf(".")?e+="00":e=e.replace(".",""),parseInt(e)},_filter:function(e){var t=this._cleanVal(e),i=t[0],n=t[1],o=t[2];if(i!==n){var s=this.$amount.get()[0],a=s.selectionStart+o,r=s.selectionEnd+o;this.$amount.val(n),s.setSelectionRange(a,r)}},_cleanVal:function(e){for(var t=this.$amount.val(),i="",n=0,o=0,s=0,a=0;a<t.length;a++){var r=t.charAt(a);this.allowCents&&"."===r?0===o&&(0===n&&(i+="0",n++,s++),i+=r,o++):isNaN(r)||(o>0?3!==o&&(i+=r,o++):n<this.maxDollarNumbers&&(i+=r,n++))}if(e)for(;0!==o&&o<3;)i+="0",o++;var d=i.length;i=i.replace(/^0+(?=\d)/,"");var l=d-i.length;return l>0&&(n-=l,s-=l),[t,i,s]}})},"./unified_view/phone_number/confirmation.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.ConfirmPhoneNumberViaFirebaseHelper=n.extend({onLoad:function(){var e=this;e.phoneNumber="",e.countryCode="",this._loadFirebase(function(){e.emitEvent({type:o.Types.FIREBASE_LOAD_ATTEMPT,payload:{success:!0}})}),this.handleEvent(o.Types.PHONE_NUMBER_SEND_VERIFICATION_CODE_CLICKED,function(t){e.phoneNumber=t.payload.phoneNumber,e.countryCode=t.payload.countryCode,e.sendCode(t.payload.phoneNumber,t.payload.countryCode)}),this.handleEvent(o.Types.PHONE_NUMBER_CONFIRM_CODE_CLICKED,function(t){e.phoneNumber=t.payload.phoneNumber,e.countryCode=t.payload.countryCode,e.confirmCode(t.payload.phoneNumber,t.payload.countryCode,t.payload.code,t.payload.isSignup)})},_loadFirebase:function(e){i.e("firebase").then(function(){var t=i("./shared/firebase.js");e(t)}.bind(null,i))["catch"](this._loadingErrorCallback)},_loadingErrorCallback:function(e){var t=this.countryCode+this.phoneNumber;this.emitEvent({type:o.Types.FIREBASE_LOAD_ATTEMPT,payload:{success:!1}}),this.serverCall("firebase_loading_error").kwargs({error:e,phone_number:t}).send()},logFirebaseReadyToVerify:function(e){this.serverCall("log_firebase_ready_to_verify").kwargs({phone_number:e}).send()},logSendCode:function(e){this.serverCall("log_send_code").kwargs({phone_number:e}).send()},sendCode:function(e,t){var i=this;this.logSendCode(e);var n=t+e;this._loadFirebase(function(e){i.logFirebaseReadyToVerify(n);var t=function(e){i.confirmationResult=e,i.serverCall("verification_code_sent").kwargs({confirmation_result:e,phone_number:n}).send()},o=function(e){i.serverCall("phone_number_error").kwargs({error:e,phone_number:n}).send()};e.verifyPhoneNumber(n,t,o,i.apiKey,i.messagingSenderId)})},confirmCode:function(e,t,i,n){var s=t+e,a=this;null!=this.confirmationResult?this.confirmationResult.confirm(i).then(function(){var r={phone_number:e,phone_verified:!0,country_code:t};if(n)return void a.emitEvent({type:o.Types.PHONE_NUMBER_VERIFIED,payload:r});a.serverCall("phone_number_added").kwargs({phone_number:s,country_code:t,code:i}).success(function(){a.emitEvent({type:o.Types.PHONE_NUMBER_VERIFIED,payload:r})}).error(function(e){a.serverCall("verification_code_error").kwargs({phone_number:s,code:i,error:e}).send()}).liveMutate().send()})["catch"](function(t){a.serverCall("verification_code_error").kwargs({phone_number:s,code:i,error:t}).send(),a.emitEvent({type:o.Types.PHONE_NUMBER_CONFIRMATION_UNSUCCESSFUL,payload:{phone_number:e}})}):a.serverCall("verification_code_error").kwargs({phone_number:s,code:i,error:"Empty confirmationResult"}).send()}})},"./unified_view/pmsg.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/toast.js").Toast,a=i("./shared/core/webnode.js"),r=i("./shared/events/index.js"),d=i("./shared/jquery.js"),l=350;t.PMsg=o.extend(s).extend({onLoad:function(){this.$container=this.$id("@container"),this.show()}}),t.PMsgContainer=o.extend({onLoad:function(){var e=this;e.$container=e.$id("@pmsg_container"),e.handleEvent(r.Types.PMSG_SHOW,function(t){e.showPMsg(t.payload.content,!0)}),e.onLoadDesktop()},onLoadDesktop:function(){var e=this,t=d("#layout_header");0!==t.length&&(e.headerHeight=t.outerHeight(),e.$container.css("top",e.headerHeight+10)),e.$container.html()&&(e.setPMsgPosition(),e.$container.slideDown(l),e.hidePMsgDelayed()),e.$container.hover(function(){clearTimeout(e.t),e.$container.stop(),e.$container.css("opacity",100)},function(){e.hidePMsgDelayed()})},hidePMsgDelayed:function(){var e=this;e.hide_t=setTimeout(function(){e.$container.slideUp(l)},5e3)},showPMsg:function(e,t){var i=this;if(d.isArray(e.app_data)){for(var o=0;o<e.app_data.length;o++)n.send("showPMsg",e.app_data[o]);delete e.app_data}d.isEmptyObject(e)||(t&&i.$container.is(":visible")?(clearTimeout(i.hide_t),i.$container.slideUp(l,function(){i.showPMsg(e,!1)})):i.setPMsgContent(e))},setPMsgContent:function(e){var t=this;a.setContent(this.$container,e),t.setPMsgPosition(),t.$container.slideDown(l),t.hidePMsgDelayed()},setPMsgPosition:function(){var e=this;d(".Modal")[0]||!d(".SiteHeader")[0]?e.$container.addClass("push_to_top"):e.$container.removeClass("push_to_top")}})},"./unified_view/qtext.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./shared/events/index.js"),a=i("./unified_view/toggle.js"),r=i("./shared/client_log.js"),d=i("./shared/jquery.js"),l=i("./unified_view/signup/_signup.js"),c=i("./shared/action_log.js"),u=i("./shared/reading_time.js"),h=i("./view/fixable2.js");t.ExpandableBlob=o.extend({onLoad:function(){var e=this;this.$id("@truncated").on("click",function(){e.$id("@truncated").addClass("hidden"),e.$id("@expanded").removeClass("hidden")})}});var p=t.Expandable=a.ToggleBase.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.handleEvent(s.Types.QTEXT_EXPANDABLE_STATE,function(t){e.content_type&&t.payload.content_type==e.content_type&&t.payload.oid==e.oid&&e.triggerSwitch()})},enterLoadingState:function(){var e=this.child("truncated_qt");e&&e.enterLoadingState()},exitLoadingState:function(){var e=this.child("truncated_qt");e&&e.exitLoadingState()},actualSwitch:function(){if(!this.switchCompleted){this._logReadingTimeOpen(),"Answer"==this.obj_type?r.logEvent("AnswerExpand",n.getAnyElement(this),{aid:this.oid}):"Post"==this.obj_type?r.logEvent("PostExpand",n.getAnyElement(this)):"TribePost"==this.obj_type&&r.logEvent("TribePostExpand",n.getAnyElement(this)),c.logSecondaryAction("ContentExpand",null);var e=d(this.$switchHide.get(0));i("./video.js").handleVideosBeforeSelectionHidden(e)}this.css_truncation?(this.switchCompleted=!0,this.$id("@wrapper").addClass("expanded"),this.$id("@wrapper").removeClass("truncated")):this._super()},_logReadingTimeOpen:function(){var e=null;e=this.css_truncation?this.$id("@wrapper").get(0):this.$switchShow.get(0),u.logReadingTimeOpen(this,e,this.obj_type,"Post"===this.obj_type?this.biid:this.oid,this.page_type)}});t.PostContentExpandable=p.extend({actualSwitch:function(){var e=this;this.emitEvent({type:s.Types.FEED_ANSWER_INLINE_EXPAND,payload:{aid:e.biid}}),this._super.apply(this,arguments)}}),t.TribePostContentExpandable=p.extend({actualSwitch:function(){this.emitEvent({type:s.Types.FEED_TRIBE_POST_INLINE_EXPAND,payload:{pid:this.oid}}),this._super.apply(this,arguments)}});var f=t.AnswerExpandable=p.extend({actualSwitch:function(){this.loadCustomWall&&l.loadSignupWall(),this._super.apply(this,arguments)}});t.AnswerInFeedExpandable=f.extend({actualSwitch:function(){this.emitEvent({type:s.Types.FEED_ANSWER_INLINE_EXPAND,payload:{aid:this.oid}}),this._super.apply(this,arguments)}}),t.ExpandedAnswer=o.extend({onLoad:function(){var e=this;e.$id("@survey_wrapper").hasClass("sticky_survey")&&h.makeBottomFixable(e.$id("@survey_wrapper"),e.$id("@expanded_content"),{top:50,bottom:-8}),e.$id("@survey_wrapper").hasClass("sticky_survey_bottom")&&h.makeBottomFixable(e.$id("@survey_wrapper"),e.$id("@expanded_content"),{top:50,bottom:-8})}}),t.TruncatedContent=o.extend({enterLoadingState:function(){this.child("truncated_qt").enterLoadingState()},exitLoadingState:function(){this.child("truncated_qt").exitLoadingState()}}),t.Diff=o.extend({onLoad:function(){var e=this;e.$id("@more_link").on("click",function(){return e.$id("@diff_snip").addClass("hidden"),e.$id("@full_diff").removeClass("hidden"),!1})}})},"./unified_view/qtext2/editor.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/errors.js"),s=i("./shared/eventemitter.js"),a=i("./shared/Class.js").Class,r=i("./qtext2/util.js").Util,d=i("./shared/util.js"),l=i("./shared/onload.js"),c=i("./shared/toast.js"),u=i("./settings.js"),h=i("./qtext2/ui.js"),p=i("./third_party/autosize.js"),f=i("./qtext2/sections/video.js").VideoSection,_=h.LinkSelector.extend({__init__:function(e,t,i){var n=this;this._super(e),this.$selector=t,this.$wrapper=i,this.$selector.afterResultWasSelectedCallback=this.submit.bind(this),this.$selector.setEscKeyDown(function(e){var t=n.key+n.$selector.query;27!=e.keyCode&&("@"!==t||8!=e.keyCode&&13!=e.keyCode)||(n.cancel(t),e.preventDefault())})},show:function(e,t,i){this.key=e||"";var n=this.$wrapper.parent().get(0),o=r.getContainerOffset(n);t-=o.left,i-=o.top+5,this.$selector.setQuery(""),this.$wrapper.css("position","absolute").css("left",t).css("top",i).removeClass("hidden"),this.active=!0,this.$selector.focus()},hide:function(){this._super(),this.$wrapper.addClass("hidden")},submit:function(e,t,i){this._onSubmitCallback&&this._onSubmitCallback(e.data)},cancel:function(e){if(this._onCancelCallback)return this._onCancelCallback(e),!1}}),m=a.extend({__init__:function(e){this._listeners={},this.$node=e,this.$node.on("blur",this.trigger.bind(this,"blur")),this.$node.on("focus",this.trigger.bind(this,"focus")),this.$node.on("keydown",this.trigger.bind(this,"keydown")),this.$node.on("keydown",this.trigger.bind(this,"meaningfulChange")),p(this.$node.get(0))},on:function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)},trigger:function(e){this._listeners[e]&&this._listeners[e].forEach(function(e){e()})},focus:function(){this.$node.focus(),this.trigger("focus")},getLength:function(){return this.$node.val().length},isEmpty:function(){return 0===this.getLength()},isOnlyWhiteSpace:function(){return 0==this.$node.val().trim().length},toJSON:function(){return{is_plaintext:!0,text:this.$node.val()}},hasChanged:function(e){return!d.jsonEqual(e,this.toJSON())},disable:function(){this.$node.prop("disabled",!0)},enable:function(){this.$node.prop("disabled",!1)},clear:function(){this.$node.val("")},destroy:function(){this.clear()},getVideos:function(){return[]}});t.Editor=n.extend({__init__:function(){this._super.apply(this,arguments),this._emitter=new s.EventEmitter},onLoad:function(){this._editorReady=!1,this._unloaded=!1,this.shouldDelayOnLoad()?l.execAfterLoadDelayed(this._onLoad.bind(this)):this._onLoad()},shouldDelayOnLoad:function(){var e=u.controller,t=u.action;return!("question"==e&&"draft"==t||"board"==e&&"add"==t)},resetFromJSON:function(e){this.is_plaintext&&o.logJsError("qtext2.Editor","Called resetFromJSON on plaintext editor"),this._editorReady&&(this.doc&&this.doc.destroy(),this._setupDoc(e))},_setupComponent:function(){this._onEditorReady&&this._onEditorReady()},_setupDoc:function(e,t){var n=this;Promise.all([i.e("main"),i.e("qtext2")]).then(function(){if(n.is_plaintext)n._setupPlainTextEditor();else{var o=i("./qtext2/base.js");n._setupRichTextEditor(o,e)}n._setupEventListeners(),n.counter=n.child("counter"),n.counter&&n.counter.updateCounter(n.doc.getLength()),t&&t()}.bind(null,i))["catch"](i.oe)},_onLoad:function(){var e=this;this._setupDoc(this.content_json,function(){e._emitter.trigger("ready"),e.$id("@fake_editor").on("click",e.hideFakeEditor.bind(e)),e._editorReady=!0})},onUnload:function(){this._editorReady&&this.doc.destroy(),this._unloaded=!0},disabledCommands:function(){return this.disabled_commands},_setupPlainTextEditor:function(){this.doc=new m(this.$id("@doc"))},_setupRichTextEditor:function(e,t){var i=e.Doc;if(this.doc=new i(t),this.toolbar=this.child("toolbar"),this.doc.disableCommands(this.disabledCommands()),this.doc.setContentType(this.content_type),this.doc.setLinkSelector(new _(this,this.child("link_selector"),this.$id("@link_selector_wrapper"))),-1==this.disabledCommands().indexOf("image")){var n=new h.ImageUploader(this,this.doc,this.$id("@drop_zone").get(0),this.$id("@file").get(0),this.interface_strings);this.doc.setImageUploader(n)}this.$id("@doc").append(this.doc.node),this.doc.node.setAttribute("placeholder",this.interface_strings.placeholder),this._setupToolbar(),this.focusOnLoad&&(this.focus(),this.focusOnLoad=!1)},_setupToolbar:function(){var e=this;this.toolbar&&(this.toolbar.on("click",function(t){if("image"==t)e.$id("@file").click();else if("link_hide"==t)e.toolbar.showBar(1);else if("overflow_show"==t)e.toolbar.showBar(2);else if("overflow_hide"==t)e.toolbar.showBar(1);else{var i=[t,null,{source:"toolbar",button:t}];e.doc.handleCommand.apply(e.doc,i)}}),this.toolbar.on("imageUpload",function(t){e.doc.insertImages(t,{source:"upload"})}),this.toolbar.on("updateVideoPlaceholder",function(t){e.doc.handleCommand("video:update",t)}),this.toolbar.on("removeVideoPlaceholder",function(t){e.doc.handleCommand("video:remove",t)}),this.doc.on("focus",function(){e.toolbar.makeActive(e.doc)}),this.toolbar.makeActive(this.doc))},_setupEventListeners:function(){var e=this;this.doc.on("focus",function(){e.counter&&e.counter.show(),e._emitter.trigger("focus"),e.$id("@editor").addClass("focused")}),this.doc.on("blur",function(){e.counter&&e.counter.hide(),e._emitter.trigger("blur"),e.$id("@editor").removeClass("focused")}),this.doc.on("meaningfulChange",function(){e._updateCounter(),e.reportMeaningfulChange()})},_updateCounter:function(){if(this.counter){var e=0;this.doc.children.forEach(function(t){t.children.forEach(function(t){t.hasModifier("math")||(e+=t.getLength())})}),this.counter.updateCounter(e),this._emitter.trigger("lengthChange",[e>this.length_limit])}},setFocusCallback:function(e){this._emitter.on("focus",e)},setEditorReadyCallback:function(e){if(this._editorReady)return void e();this._emitter.once("ready",e)},setBlurCallback:function(e){this._emitter.on("blur",e)},setMeaningfulChangeCallback:function(e){this._emitter.on("meaningfulChange",e)},reportMeaningfulChange:function(){this._emitter.trigger("meaningfulChange")},setLengthChangeCallback:function(e){this._emitter.on("lengthChange",e)},isInteractive:function(){return!0},isEmpty:function(){return this.doc.isEmpty()&&!this.doc.linkSelector.isActive()},isOnlyWhiteSpace:function(){return this.doc.isOnlyWhiteSpace()},fixEditorButtons:function(){this.toolbar&&this.toolbar.fix()},focus:function(){this.doc?this.doc.focus():this.focusOnLoad=!0},hideFakeEditor:function(){this.$id("@fake_editor").addClass("hidden"),this.$id("@editor").removeClass("hidden"),this.focus(),this.fixEditorButtons()},serialize:function(){return this.doc.toJSON()},anyVideoUploadInProgress:function(){var e=!1;return this.doc.children.forEach(function(t){t instanceof f&&t.isUploading()&&(e=!0)}),e},alertUploadInProgress:function(){this.anyVideoUploadInProgress()?c.showError(u.qtextData.videosStillUploading):c.showError(u.qtextData.videosStillUploadingAnotherAnswer)},getVideos:function(){return this.doc.getVideos()},hasChanged:function(e){return this.doc.hasChanged(e)},disable:function(){this.doc.disable(),this.$id("@editor").addClass("disabled")},enable:function(){this.doc.enable(),this.$id("@editor").removeClass("disabled")},clear:function(){this.doc.clear()},getHeaderImage:function(){return this.child("header_image")},getHeaderImageData:function(){var e=this.getHeaderImage();return e&&e.data}})},"./unified_view/qtext2/editor/mobile.js":function(e,t,i){var n,o,s=i("./shared/client.js"),a=i("./unified_view/modal.js").ModalBase,r=i("./qtext2/ui.js"),d=i("./shared/debounce.js").debounce,l=i("./shared/window_manager.js"),c=i("./shared/events/index.js"),u=i("./shared/toast.js"),h=i("./settings.js"),p=i("./shared/log_sender.js"),f=i("./shared/util.js"),_=i("./shared/client_log.js"),m=i("./shared/core/component.js"),g=i("./shared/upload.js");t.EditorModal=a.extend({onLoad:function(){this._super.apply(this,arguments),t.activeEditor=this,this._setupEditor();var e=this;Promise.all([i.e("main"),i.e("qtext2")]).then(function(){s.isNativeApp()&&(o.send("setupEditor",{hasDraft:!!e.has_draft}),o.send("restoreState",{key:e.key})),s.isIOSApp()||e.focus()}.bind(null,i))["catch"](i.oe);var n=this.editor&&this.editor.getHeaderImage();n&&n.setDraftSaveCallback(function(){e.saveDraft()}),e.should_quora_share=!1,e.handleEvent(c.Types.QUORA_SHARE_ANSWER_TO_FOLLOWERS_TOGGLED,function(t){e.toggleQuoraShareEditor(t.payload.newState),e.focus()})},_setupEditor:function(){var e=this;if(this.editor=this.child("editor"),this.editor.setFocusCallback(function(){t.activeEditor=e}),this.has_draft){var i=d(this.autoSaveDraft.bind(this),750,{maxWait:1e4,leading:!0});this.editor.setMeaningfulChangeCallback(function(){i()})}else this.editor.setMeaningfulChangeCallback(this.saveState.bind(this))},focus:function(){this.editor.focus()},getState:function(){return this.editor.serialize()},getVideos:function(){return this.editor.getVideos()},saveState:function(){if(s.isNativeApp()){var e=this.getState();f.jsonEqual(this.getState(),this.lastSavedState)||(o.send("saveState",{key:this.key,value:e}),this.lastSavedState=e)}},restoreState:function(e){var t=this;this.editor.setEditorReadyCallback(function(){t.editor.doc.fromJSON(e)})},toggleQuoraShareEditor:function(e){var t=this,i=t.$id("@quora_share_editor");"toggled_off"==e?(i.slideUp(65),t.should_quora_share=!1):"toggled_on"==e&&(i.slideDown(65),t.should_quora_share=!0)},getShareComment:function(){if(this.child("quora_share_editor"))return this.child("quora_share_editor").$id("@share_comment").val()},_onDraftSaveSuccess:function(){o.send("draftSaveComplete",{success:!0})},_onDraftSaveError:function(){o.send("draftSaveComplete",{success:!1})},_onDraftClearSuccess:function(){o.send("draftClearComplete",{key:this.key,success:!0})},_onDraftClearError:function(){o.send("draftClearComplete",{key:this.key,success:!1})},_saveDraftServerCall:function(){var e={oid:this.oid,content:this.getState()},t=this.editor&&this.editor.getHeaderImageData();return t&&(e.header_data=t),this.extra_kwargs&&this.extra_kwargs.tribe_id&&(e.tribe_id=this.extra_kwargs.tribe_id),this.serverCall("save_draft").kwargs(e)},autoSaveDraft:function(){this.saveState(),this._saveDraftServerCall().send()},saveDraft:function(){this.saveState(),this._saveDraftServerCall().success(this._onDraftSaveSuccess.bind(this)).error(this._onDraftSaveError.bind(this)).send()},clearDraft:function(){o.send("showLoadingView"),this.serverCall("clear_draft").kwargs({oid:this.oid}).success(this._onDraftClearSuccess.bind(this)).error(this._onDraftClearError.bind(this)).send()},_beforeSubmit:function(){this.__submitPending=!0,s.isIOSApp()?o.send("showProgressBar"):o.send("showLoadingView");var e=this;this._doneButtonIntervalId=null,s.isAndroidApp()?this._doneButtonIntervalId=setInterval(function(){e.setMobileDoneButtonDisabled(!0)},30):this.setMobileDoneButtonDisabled(!0)},_afterSubmit:function(e){this.__submitPending=!1,s.isIOSApp()?o.send("hideProgressBar",{complete:!!e}):o.send("hideLoadingView"),this.setMobileDoneButtonDisabled(!1),s.isAndroidApp()&&(clearInterval(this._doneButtonIntervalId),o.send("saveState",{key:this.key,value:{}})),"AddCommentModal"==this.modal_type&&"answer"==this.extra_kwargs.comment_type?_.logEvent("AddAnswerComment",m.getAnyElement(this)):"WriteAnswerModal"==this.modal_type&&_.logEvent("AddAnswer",m.getAnyElement(this),{qid:this.oid})},onSubmit:function(){if(!this.__submitPending){var e=Date.now();this._beforeSubmit();var t=this,i=this.editor&&this.editor.getHeaderImageData();i?t.extra_kwargs.header_data=i:t.extra_kwargs.header_data&&delete t.extra_kwargs.header_data,"WriteAnswerModal"==t.modal_type&&(t.extra_kwargs.create_quora_share=t.should_quora_share,t.extra_kwargs.quora_share_comment=t.getShareComment());var n=this._super.bind(this);this._preOnSubmitChecks(function(){t.serverCall("submit").kwargs({oid:t.oid,content:t.getState(),extra_kwargs:t.extra_kwargs}).success(function(i){t._afterSubmit(!0),i.success&&n(i),i.redirect_url&&l.navigateTo(i.redirect_url),i.unconfirmed_email&&t.createModal("load_unconfirmed_email_modal").show();var o=Date.now()-e;s.isNativeApp()||p.log("modal_speed",{modal_type:t.modal_type,after_server_call:o})}).error(t._handleError.bind(t)).sendOnlyOnce()})}},_handleError:function(){this._afterSubmit(!1)},_preOnSubmitChecks:function(e){if(!h.qtextData.videoEnabled)return void e();var t=h.qtextData.videoEditorSupported,i=this.getVideos();if(0==i.length)return void e();if(g.isVideoUploadInProgress())return this.editor.alertUploadInProgress(),void this._handleError();if(!t&&0!=i.length)return this._handleError(),void u.showError(h.qtextData.cantSubmitVideo);if(s.isMobileWeb()&&h.debug)return void e();var n=this;o.send("getExistingVideos",{},function(t){var s={};if((t.videos||[]).forEach(function(e){s[e.uuid]=e}),!i.every(function(e){return s[e]}))return n._handleError(),void u.showError(h.qtextData.cantSubmitVideo);o.send("uploadVideos",{videoUuids:i},function(t){if(t.success)return void e();n._handleError()})})}}),t.WriteAnonAnswerModal=t.EditorModal.extend({onLoad:function(){this._super.apply(this,arguments),this.handleEvent(c.Types.ANON_LINK_SAVED,function(e){l.removeURLParam("show_alert")})},onSubmit:function(){var e=this._super.bind(this);l.isParamInURL("show_alert")?this.createModal("load_modal").kwargs({oid:this.oid,anon_content_key:this.extra_kwargs.anon_content_key}).onClose(function(){e()}).show():e()},submit:function(e){s.isMobileWeb()?l.navigateTo(e.next_url):this.emitEvent({type:c.Types.ANON_ACTION_VIEW_DISMISSED,scope:c.scope.GLOBAL,payload:{nextUrl:e.next_url,oid:this.oid,checkOid:!0}})}}),t.DualEditorModal=t.EditorModal.extend({_setupEditor:function(){var e=this;this.title_editor=this.child("title"),this.details_editor=this.child("details"),this.isTitleOverLimit=!1,this.isDetailsOverLimit=!1,this.lastFocusedEditor=null,this.title_editor.setFocusCallback(function(){t.activeEditor=e,e.lastFocusedEditor=e.title_editor}),this.details_editor&&this.details_editor.setFocusCallback(function(){t.activeEditor=e,e.lastFocusedEditor=e.details_editor}),this.title_editor.setMeaningfulChangeCallback(this.saveState.bind(this)),this.details_editor&&this.details_editor.setMeaningfulChangeCallback(this.saveState.bind(this)),this.title_length_limit&&this.title_editor.setLengthChangeCallback(function(t){e.isTitleOverLimit=t,e.updateButton()}),this.details_editor&&this.details_length_limit&&this.details_editor.setLengthChangeCallback(function(t){e.isDetailsOverLimit=t,e.updateButton()})},updateButton:function(){this.setMobileDoneButtonDisabled(this.isTitleOverLimit||this.isDetailsOverLimit)},focus:function(){var e=this;this.title_editor.setEditorReadyCallback(function(){var t=document.activeElement;e.title_editor.doc.contains(t)||e.details_editor.setEditorReadyCallback(function(){e.details_editor.doc.contains(t)||(null===e.lastFocusedEditor?e.title_editor.focus():e.lastFocusedEditor.focus())})})},getState:function(){return{title:this.title_editor.serialize(),details:this.details_editor?this.details_editor.serialize():""}},getVideos:function(){return[]},restoreState:function(e){var t=this;this.title_editor.setEditorReadyCallback(function(){t.title_editor.doc.fromJSON(e.title)}),this.details_editor&&this.details_editor.setEditorReadyCallback(function(){t.details_editor.doc.fromJSON(e.details)})}}),t.LinkSelectorModal=a.extend({onLoad:function(){this._super.apply(this,arguments),o.send("showSearchInput",{searchPlaceholderText:this.interface_strings.search_placeholder,searchFocus:!0,searchCancelButton:!1}),this.cleanUpCallback=this.close.bind(this),n.registerOneTimeMessageHandler("addLinkSelectorPressed",this.cleanUpCallback)},onUnload:function(){n.removeOneTimeMessageHandler("addLinkSelectorPressed",this.cleanUpCallback)}}),t.LinkSelector=r.LinkSelector.extend({__init__:function(e){var t=this;this._super(e),this._handleAddLink=function(e){t.submit(e)}},show:function(e){this.bindAddLinkHandler(),this.toolbar.createModal("load_link_selector").onClose(this.cancel.bind(this)).show(),this.active=!0,this.key=e||""},bindAddLinkHandler:function(){n.removeOneTimeMessageHandler("addLinkSelectorPressed",this._handleAddLink),n.registerOneTimeMessageHandler("addLinkSelectorPressed",this._handleAddLink)},cleanUpModal:function(){s.isMobileWeb()&&this.isActive()&&o.send("hideSearchInput")},submit:function(e){this._onSubmitCallback&&this._onSubmitCallback({text:e.text,url:e.url})},cancel:function(){this._onCancelCallback&&setTimeout(this._onCancelCallback.bind(this,this.key),0)},hide:function(){this.cleanUpModal(),this._super()}}),t.TranslateAnswerModal=t.EditorModal.extend({onSubmit:function(){var e=this;e.$question_editor=e.$id("@question_editor"),e.answer_editor=e.child("editor");var t=e.$question_editor.val();e.extra_kwargs={question_text:t,target_nid:e.target_nid,source_nid:e.source_nid,source_qid:e.source_qid,source_aid:e.source_aid,existing_qid:e.existing_qid},e._super.apply(e,arguments)}}),t.activeEditor=null},"./unified_view/qtext2/photo_search/_photo_search.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/debounce.js").debounce,a=i("./unified_view/modal.js").ModalBase,r=i("./shared/upload.js"),d=i("./shared/client.js"),l=i("./shared/window_manager.js"),c=i("./shared/jquery.js");t.PhotoSearch=o.extend({onLoad:function(){this.hasInitialized=!1,this.shouldFocusOnActive=!0},initSearchInput:function(){var e=this,t="",i=e.$id("@search"),n=s(function(){var n=i.val();0==e.allowWhitespaceOnly()&&(n=n.trim(),t=t.trim()),n!==t&&n.length>=e.getMinCharactersToSearch()&&(e.getPhotos(n),t=n),e.searchInputChanged(t)},500);i.on("input",function(){n()})},searchInputChanged:function(e){},getMinCharactersToSearch:function(){return 3},allowWhitespaceOnly:function(){return!0},initUploadLink:function(){var e=this;e.$id("@upload").on("click",function(t){t.preventDefault(),e.$uploader&&(e.uploadCallback&&e.uploadCallback(),e.$uploader.click())})},setUploader:function(e){this.$uploader=e},makeActive:function(){this.shouldFocusOnActive&&this.$id("@search").focus(),this.serverCall("log_action").kwargs({action_type:"open"}).send(),!1===this.hasInitialized&&(this.initSearchInput(),this.initUploadLink(),this.load_default_results&&this.getPhotos(),this.hasInitialized=!0)},getPhotosKwargs:function(e){return{query:e}},getPhotos:function(e){var t=this;e&&0!==e.length||(e=t.default_query||""),t.clearPhotos(),t.showSpinner(),t.serverCall("get_photos").kwargs(t.getPhotosKwargs(e)).success(function(e){t.hideSpinner(),t.renderPhotos(e)}).error(function(){t.hideSpinner(),t.showSearchErrorMsg()}).send()},hideSpinner:function(){this.$id("@spinner").addClass("hidden")},showSpinner:function(){this.$id("@spinner").removeClass("hidden")},renderEmptyState:function(){var e=this.$id("@empty_state");e.text(this.empty_msg),e.removeClass("hidden")},renderPhotos:function(e){var t=document.createDocumentFragment(),i=this;if(0===e.length)return void i.renderEmptyState();e.forEach(function(e){var n=i.getPhotoEl(e);t.appendChild(n)}),this.$id("@container").get(0).appendChild(t)},getPhotoEl:function(e){var t=this,i=document.createElement("img");return i.className="photo",i.src=e[1],i.dataset.original=e[0],i.addEventListener("click",function(){t.selectCallback&&t.selectCallback(i.dataset.original),t.serverCall("log_action").kwargs({action_type:"insert_image"}).send()}),i},clearPhotos:function(){for(var e=this.$id("@container").get(0),t=0;t<e.childNodes.length;)"IMG"==e.childNodes[t].tagName?e.removeChild(e.childNodes[t]):++t;this.$id("@empty_state").addClass("hidden")},setSelectCallback:function(e){this.selectCallback=e},setUploadCallback:function(e){this.uploadCallback=e},showSearchErrorMsg:function(){alert(this.searchErrorMsg)}}),t.WebPhotoSearch=t.PhotoSearch.extend({onLoad:function(){this._super.apply(this,arguments),this.makeActive(),this.getInlineFeatureables(),this.getGraphics(),this.getPhotosBySections(),this.addEventListenerForPhotos(),this.addEventListenerForGraphics(),this.addEventListenerForInlineFeaturables()},getMinCharactersToSearch:function(){return 0},allowWhitespaceOnly:function(){return!1},searchInputChanged:function(e){var t=this,i=t.$id("@hide_on_search"),n=t.$id("@show_on_search");e?(i.addClass("hidden"),n.removeClass("hidden")):(i.removeClass("hidden"),n.addClass("hidden"))},initSearchInput:function(){if(this._super.apply(this,arguments),d.isIOSApp()||d.isMobileWeb()){var e=this;d.isIOSApp()&&n.send("setPageProperties",{scrollable:!1}),e.$id("@photo_container").on("scroll",function(){e.blurSearchInput()}),e.$id("@photo_container").on("touchmove",function(t){e.blurSearchInput()}),e.$id("@search").on("keypress",function(t){13==t.which&&e.blurSearchInput()})}},blurSearchInput:function(){this.$id("@search").blur()},getPhotosKwargs:function(e){var t=this._super.apply(this,arguments);return t=t||{},t.qid=this.qid,t},addEventListenerForPhotos:function(){var e=this;this.$id("@container").on("click",".header_image_thumb",function(t){var i=t.target,n=i.getAttribute("image_data");e.photoSelected(n),e.serverCall("log_action").kwargs({action_type:"insert_image"}).send()}),this.$id("@default_photos").on("click",".header_image_thumb",function(t){var i=t.target,n=i.getAttribute("image_data");e.photoSelected(n),e.serverCall("log_action").kwargs({action_type:"insert_image"}).send()}),e.$id("@default_photos").on("click",".view_more_thumb",function(t){var i=c(this);i.hasClass("view_more_thumb")&&(i=i.closest(".view_more_thumb"));var n=i.data("query-string");e.$id("@search").val(n),e.getPhotos(n),e.searchInputChanged(n)})},getPhotoEl:function(e){var t=JSON.parse(e),i=t.thumb_url,n=document.createElement("div"),o=document.createElement("div");return o.className="image_attribution",o.innerHTML=t.attribution_string,n.appendChild(o),n.className="header_image_thumb",n.style.backgroundImage="url("+i+")",n.setAttribute("image_data",e),n},photoSelected:function(e){var t=JSON.parse(e);if(t.query=this.$id("@search").val(),this.selectCallback&&this.selectCallback(t),d.isNativeApp()){t.qid=this.qid;var i="/api/photo_preview?imageData="+encodeURIComponent(JSON.stringify(t));this.translatedPreviewTitle&&(i+="&title="+encodeURIComponent(this.translatedPreviewTitle)),l.navigateTo(i)}},getGraphics:function(){var e=this;e.serverCall("get_graphics").kwargs({qid:e.qid}).success(function(t){e.renderGraphics(t)}).send()},addEventListenerForGraphics:function(){var e=this;this.$id("@graphics_container").on("click",".js-graphic_bg",function(t){var i=t.target;i.classList.contains("js-graphic_icon")&&(i=i.parentNode);var n=i.getAttribute("image_data");e.photoSelected(n),e.serverCall("log_action").kwargs({action_type:"insert_graphic"}).send()})},renderGraphics:function(e){var t=document.createDocumentFragment();e.forEach(function(e,i){var n=document.createElement("div"),o=document.createElement("img");n.appendChild(o),n.setAttribute("image_data",JSON.stringify(e)),n.className="header_image_thumb js-graphic_bg u-relative",o.className="js-graphic_icon u-absolute u-absolute--center u-height--75",n.style.backgroundImage='url("'+e.background_url+'")',o.src=e.icon_url,t.appendChild(n)}),this.$id("@graphics_container").get(0).appendChild(t)},clearPhotos:function(){for(var e=this.$id("@container").get(0),t=0;t<e.childNodes.length;){var i=e.childNodes[t];"DIV"==i.tagName&&"header_image_thumb"==i.className?e.removeChild(e.childNodes[t]):++t}this.$id("@empty_state").addClass("hidden")},getPhotosBySections:function(){var e=this;e.clearPhotos(),e.showSpinner(),e.serverCall("get_photos_grouped_by_topics").kwargs(e.getPhotosKwargs()).success(function(t){e.hideSpinner(),e.renderPhotosBySections(t)}).error(function(){e.hideSpinner(),e.showSearchErrorMsg()}).send()},renderPhotosBySections:function(e){var t=document.createDocumentFragment(),i=this;if(0===e.length)return void i.renderEmptyState();e.forEach(function(e){if(0!==e.length){var n=document.createElement("div");n.className="photo_search_header";var o=document.createTextNode(e.topic_name);n.appendChild(o),t.appendChild(n);var s=document.createElement("div");s.className="photo_container_inner";var a=e.results,r=8,d=a,l=a.length>r;if(l&&(d=a.slice(0,r-1)),d.forEach(function(e){var t=i.getPhotoEl(e);s.appendChild(t)}),l){var c=document.createElement("div");c.className="view_more_thumb u-relative",c.setAttribute("data-query-string",e.topic_name);var u=JSON.parse(a[r-1]),h=u.thumb_url;c.style.backgroundImage='url("'+h+'")';var p=document.createElement("div"),f=document.createElement("div"),_=document.createTextNode(i.view_more_text);p.className="u-absolute u-absolute--fill u-bg--black-transparent-dark",f.className="u-absolute u-absolute--center                     u-sans-font-main--small u-text-align--center u-font-color--white",f.appendChild(_),c.appendChild(p),c.appendChild(f),s.appendChild(c)}t.appendChild(s)}}),i.$id("@default_photos").get(0).appendChild(t)},getInlineFeatureables:function(){var e=this;e.aid&&e.serverCall("get_inline_featurables").kwargs({aid:e.aid}).success(function(t){e.renderInlineFeaturables(t)}).send()},renderInlineFeaturables:function(e){var t=document.createDocumentFragment();0!==e.length&&(e.forEach(function(e){var i=JSON.parse(e),n=i.thumbUrl,o=document.createElement("div");o.className="inline_featurable_thumb",o.style.backgroundImage="url("+n+")",o.setAttribute("image_data",e),t.appendChild(o)}),this.$id("@inline_featurables_container").get(0).appendChild(t))},addEventListenerForInlineFeaturables:function(){var e=this;this.$id("@inline_featurables_container").on("click",".inline_featurable_thumb",function(t){var i=t.target,n=i.getAttribute("image_data");e.photoSelected(n),e.serverCall("log_action").kwargs({action_type:"insert_graphic"}).send()})}});var u=t.UploadHelper={setupUploader:function(){this.$uploadingOverlay=this.$id("@uploading_overlay");var e=this.$fileInput=this.$id("@file");this.fileInput=e.get(0),this.fileInput.addEventListener("change",this._handleFileUpload.bind(this))},_handleFileUpload:function(){this._showUploadingOverlay(),r.uploadData({kind:"qtext"},this.fileInput.files,this._onUpload.bind(this),this._onError.bind(this)),this.fileInput.value=null},_showUploadingOverlay:function(){this.$uploadingOverlay.removeClass("hidden")},_hideUploadingOverlay:function(){this.$uploadingOverlay.addClass("hidden")},_onUpload:function(e){this._hideUploadingOverlay(),this._handleImageData({url:e.qimg_urls[0]})},_onError:function(e){this._hideUploadingOverlay(),e&&e.message?alert(e.message):alert(this.uploadError)}};t.WebPhotoSearchModal=a.extend(u).extend({onLoad:function(){this._super.apply(this,arguments),this.photoSearch=this.child("photo_search"),this.photoSearch.setSelectCallback(this._photoSelected.bind(this)),this.setupUploader(),this.photoSearch.setUploader(this.$fileInput)},_photoSelected:function(e){this._handleImageData(e)},_handleImageData:function(e){this.serverCall("log_upload").send(),d.isMobileWeb()?this._showPreviewModal(e):this.onSubmit(e)},_showPreviewModal:function(e){var t=this;t.createModal("load_preview_modal").kwargs({image_data:e,translated_title:t.translatedTitle}).onSubmit(function(){setTimeout(function(){t.onSubmit(e)},200)}).show()}}),t.HeaderImageErrorModal=a.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.$id("@pick").on("click",function(t){t.preventDefault(),e.onPick()}),this.$id("@ok").on("click",function(t){t.preventDefault(),e.onOK()})},onPick:function(){this.onSubmit("pick")},onOK:function(){this.onSubmit("ok")}})},"./unified_view/qtext2/photo_search/preview.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./settings.js").interface_strings,r=i("./shared/client.js");t.PhotoPreview=s.extend({onLoad:function(){var e=this;r.isNativeApp()&&o.send("setPageAction",{title:e.title,rightTextButton:{title:a.done,callback:function(){n.broadcastMessageToWebViews("imagePickerDone",e.image_data),e.dismissModal?o.send("dismissModal"):o.send("dismiss")}}})}})},"./unified_view/qtext2/toolbar.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/jquery.js"),a=i("./shared/scroll_animation_handler.js"),r=i("./qtext2.js"),d=i("./qtext2/keys.js"),l=i("./qtext2/shortcuts.js").SHORTCUTS,c=i("./qtext2/util.js").Util,u=i("./shared/util.js"),h=i("./qtext2/tooltip.js"),p=i("./settings.js"),f=o.extend({onLoad:function(){this._barIdx=1},on:function(e,t){this._handlers=this._handlers||[],this._handlers[e]=t},trigger:function(e,t){this._handlers[e]&&this._handlers[e](t)},makeActive:function(e){this.showBar(1),this._doc=e,this._startUpdating(),t.activeToolbar=this},makeInactive:function(){this._doc=null,this._updating=!1,t.activeToolbar=null},showBar:function(e){this._barIdx<e?this._animation="up":this._barIdx>e?this._animation="down":this._animation="",this._barIdx=e},_startUpdating:function(){var e=this;if(this.currentState=null,!this._updating){this._updating=!0;var t=function(){setTimeout(function(){e._doc&&(e.update(e._doc.getToolbarState(e._barIdx),e._animation),e._animation=!1,e.updateStateRequestId&&cancelAnimationFrame(e.updateStateRequestId),e.updateStateRequestId=requestAnimationFrame(t))},167)};t()}},update:function(e,t){u.jsonEqual(e,this.currentState)||(this._update(e,t),this.currentState=e)},_update:null});t.Web=f.extend({onLoad:function(){this._super.apply(this,arguments),this.$linkInput=this.$id("@link_input"),this.$linkSave=this.$id("@link_save"),this.$isCitation=this.$id("@is_citation"),this.buttons.forEach(this.bindButtonEvents.bind(this)),this.bindLinkInput(),this.fix()},bindButtonEvents:function(e){this._bindButtonClick(e),this._bindButtonTooltip(e)},_bindButtonClick:function(e){var t="image"==e||"video"==e?"click":"touchstart mousedown",i=this;this.$id("@"+e).on(t,function(){return h.hide(),i.trigger("click",e),!1})},_bindButtonTooltip:function(e){this.$id("@"+e).on("mouseenter",function(){var t,i=this.getAttribute("tooltip");for(t in l)if(l[t]==e){i+=" ("+d.getShortcutHint(t)+")";break}h.show(this,i)}),this.$id("@"+e).on("mouseout",function(){h.hide()})},bindLinkInput:function(){var e=this;this.$linkSave.on("click",function(){return e._triggerLinkInput(),!1}),this.$linkInput.on("keydown",function(t){13==t.which?(t.preventDefault(),t.stopPropagation(),e._triggerLinkInput()):27==t.which&&(t.preventDefault(),t.stopPropagation(),e.$linkInput.val(""),e._triggerLinkInput())})},_triggerLinkInput:function(){this.trigger("linkInput",{url:this.$linkInput.val(),isCitation:this.$isCitation.prop("checked")}),this.$linkInput.val(""),this.$isCitation.prop("checked",!1)},_update:function(e,t){var i,n=this,o=this.$id("@bar"+this._barIdx),s=n.$id("@storage"),a=o.children(".left"),r=n.$id("@scroller");o.find(".modifier").each(function(e,t){s.append(t)}),e.forEach(function(e){"space"==e.name?a=o.children(".right"):(i=n.$id("@"+e.name),e.disabled?(i.removeClass("pressed"),i.addClass("disabled")):e.pressed?(i.removeClass("disabled"),i.addClass("pressed")):(i.removeClass("disabled"),i.removeClass("pressed")),a.append(i),e.focused&&i.focus())}),t?r.addClass("animate"):r.removeClass("animate"),r.css("top",100*-this._barIdx+"%")},setLinkToolbarStatus:function(e,t){this.$linkInput.val(e),this.$isCitation.prop("checked",!!t),this.$linkSave.text(e?"Update":"Add")},fix:function(){var e=this.$id("@toolbar"),t=e.parent(),i=c.firstScrollingParent(e.get(0)),n=s(".SiteHeader").height();0===s(".is_zen").length&&i===document.body||(n=0);var o=function(o){var a=t.offset().top-n;i===document.body?a-=o:a-=s(i).offset().top;var r=a+t.height()-2*e.height();a<0&&r>0?e.css("position","fixed").css("top",n).css("left",t.offset().left).css("width",t.width()).css("-webkit-transform","translateZ(0)"):e.css("position","absolute").css("top",0).css("left",0).css("width","").css("-webkit-transform","")};i===document.body?a.add(window,o):a.add(i,o)}}),t.activeToolbar=null;var _;t.MobileWebShim=t.Web.extend({onLoad:function(){this._super.apply(this),_=this},_bindButtonTooltip:function(e){},trigger:function(e,t){r.handleToolbarAction(e,t)},fix:function(){}}),t.updateMobileWebShim=function(e){if(_){for(var t=1,i=0;i<e.buttons.length;i++){if("link_input"==e.buttons[i].name){t=0;break}if("undo"==e.buttons[i].name){t=2;break}}_.showBar(t),_.update(e.buttons,e.animation)}},t.Mobile=f.extend({_update:function(e,t){var i={buttons:e,animation:t};p.tabbedEditorToolbar&&(i.tabbed=!0),n.send("updateToolbar",i)},_buttonExistsAndEnabled:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.name==e)return!n.disabled}return!1}})},"./unified_view/qtext_video/controls.js":function(e,t,i){var n=i("./shared/debounce.js").throttle,o=i("./shared/debounce.js").debounce,s=i("./shared/Class.js").Class,a=i("./shared/events/index.js"),r=i("./shared/jquery.js"),d=a.DocumentProxy,l=2e3,c=function(e){d.dispatch({type:a.Types.VIDEO_UNMUTED,payload:{jwplayerId:e}})},u=s.extend({__init__:function(e,t){this.player=e,this.$playerParent=r(e.getContainer().parentNode),this.$controlsContainer=this.$playerParent.find(".player_controls--container"),this.$iconContainer=this.$playerParent.find(".player_controls--display_icon_container"),this.$playIcon=this.$playerParent.find(".icon_play"),this.$pauseIcon=this.$playerParent.find(".icon_pause"),this.$replayIcon=this.$playerParent.find(".icon_replay"),this.$sliderBar=this.$playerParent.find(".player_controls--slider_container"),this.$bufferBar=this.$playerParent.find(".player_controls--slider-buffer"),this.$timeElapsed=this.$playerParent.find(".player_controls--time-elapsed"),this.$timeCountdown=this.$playerParent.find(".player_controls--time-countdown"),this.$knob=this.$sliderBar.find(".player_controls--slider-knob"),this.$progressBar=this.$playerParent.find(".player_controls--slider-progress"),this.playerClickActive=!1,this.controlsVisible=!0,this.controlsFadeId=null,this.jwplayerId=t,this.attachPlayerEvents()},isPlayerTryingToPlay:function(){var e=this.player.getState();return"idle"!=e&&"paused"!=e&&"complete"!=e},isVideoComplete:function(){var e=this.player.getDuration();return 0!=e&&this.videoElement.currentTime==e?(this.videoCompleteTime=e,!0):this.videoElement.currentTime==this.videoCompleteTime},attachPlayerEvents:function(){var e=this;this.player.on("pause",function(){e.showPlayIcon(),e.clearControlsFadeTimer()}),this.player.on("play",function(){e.showPauseIcon(),e.resetControlsFadeTimer()}),this.player.on("complete",function(){e.showReplayIcon(),e.clearControlsFadeTimer(),e.showControls()}),this.player.on("firstFrame",function(){e.setJwplayerPreviewVisible(!1)}),this.player.on("ready",function(){e.videoElement=e.$playerParent.find(".jw-video").get(0),e.$jwplayerPreview=e.$playerParent.find(".jw-preview"),e.setJwplayerPreviewVisible(!0),e.updatePositions(e.player.getPosition()),e.setupVolume(),e.setupSlider(),e.setupIconsAndOtherTouch()})},hideControls:function(){this.controlsVisible=!1,this.$controlsContainer.fadeOut(300)},showControls:function(){this.controlsVisible=!0,this.$controlsContainer.fadeIn(300)},resetControlsFadeTimer:function(){this.isPlayerTryingToPlay()&&(null!=this.controlsFadeId&&clearTimeout(this.controlsFadeId),this.controlsFadeId=setTimeout(this.hideControls.bind(this),l))},clearControlsFadeTimer:function(){clearTimeout(this.controlsFadeId),this.controlsFadeId=null},setJwplayerPreviewVisible:function(e){var t=e?"visible":"hidden",i=e?"block":"none";this.$jwplayerPreview.css("visibility",t),this.$jwplayerPreview.css("display",i)},updatePositions:function(e){var t=this.player.getDuration();if(0!=t){var i=e/t*100;this.$knob.css("left",i+"%"),this.$progressBar.css("right",100-i+"%");var n=Math.floor(e/60),o=Math.floor(e%60),s=Math.floor(t)-(60*n+o),a=Math.floor(s/60),r=s%60;r<10&&(r="0"+r),o<10&&(o="0"+o),this.$timeElapsed.text(n+":"+o),this.$timeCountdown.text("-"+a+":"+r)}},playVideo:function(){this.isVideoComplete()==("complete"==this.player.getState())?this.player.play(!0):(this.isVideoComplete()&&(this.updatePositions(0),this.videoElement.currentTime=0),this.videoElement.play()),this.showPauseIcon()},pauseVideo:function(){this.player.pause(!0),this.showPlayIcon()},togglePlaying:function(){this.isPlayerTryingToPlay()?this.pauseVideo():this.playVideo()},showPlayIcon:function(){this.$pauseIcon.hide(),this.$replayIcon.hide(),this.$playIcon.show(),this.$playIcon.removeClass("u-hidden")},showPauseIcon:function(){this.$replayIcon.hide(),this.$playIcon.hide(),this.$pauseIcon.show(),this.$pauseIcon.removeClass("u-hidden")},showReplayIcon:function(){this.$pauseIcon.hide(),this.$playIcon.hide(),this.$replayIcon.show(),this.$replayIcon.removeClass("u-hidden")},setupIconsAndOtherTouch:function(){var e=this;this.isPlayerTryingToPlay()?this.showPauseIcon():this.showPlayIcon(),this.$playerParent.on("click",o(function(){e.playerClickActive&&e.togglePlaying()},300,!0)),this.playerClickActive=!0,this.$playerParent.on("mousemove mouseenter touchstart touchmove",n(function(t){e.controlsVisible||e.showControls(),e.resetControlsFadeTimer()},l/4))},setupSlider:function(){var e=this;this.player.on("buffer",function(){var t=e.player.getBuffer();e.$bufferBar.css("right",100-t+"%")}),this.player.on("time",function(){var t=e.player.getPosition();e.updatePositions(t)});var t=function(t){var i=e.$sliderBar.width(),n=e.player.getDuration(),o=t[0]-e.$sliderBar.offset().left;o=Math.min(i,Math.max(0,o));var s=o/i*n;s!=e.player.getPosition()&&(e.$iconContainer.hide(),e.setJwplayerPreviewVisible(!1)),e.videoElement.currentTime=s,e.updatePositions(s)},i=function(e){return[e.pageX,e.pageY]},n=function(n){t(i(n)),e.resetControlsFadeTimer(),n.preventDefault(),n.stopPropagation()},o="mousemove";this.$sliderBar.on("mousedown",function(s){var a=i(s),d=!1;e.playerClickActive=!1,setTimeout(function(){d=e.isPlayerTryingToPlay(),e.player.pause(!0),t(a),r("body").on(o,n),r("body").one("mouseup",function(t){r("body").off(o,n),e.isVideoComplete()?e.showReplayIcon():d?(e.playVideo(),e.showPauseIcon()):e.showPlayIcon(),e.$iconContainer.show(),setTimeout(function(){e.playerClickActive=!0})})})})},setupVolume:function(){var e=this.$playerParent.find(".icon_volume"),t=this.$playerParent.find(".icon_muted"),i=this.$playerParent.find(".player_controls--volume"),n=this.$playerParent.find(".player_controls--volume-slider-container"),o=n.find(".player_controls--volume-slider"),s=n.find(".player_controls--slider-knob"),a=n.find(".player_controls--slider-progress"),d=!1,l=this,u=function(){l.player.getMute()||0==l.player.getVolume()?(e.hide(),t.show(),t.removeClass("u-hidden")):(e.show(),e.removeClass("u-hidden"),t.hide())},h=function(){var e=l.player.getMute()?0:l.player.getVolume();s.css("top",100-e+"%"),a.css("top",100-e+"%")};u(),h();var p=function(e){var t=e?0:"";i.css("border-top-left-radius",t),i.css("border-top-right-radius",t),n.css("display",e?"block":"")},f=function(){p(!0)},_=function(){d||p(!1)};i.hover(f,_);var m=function(e){var t=e.pageY-o.offset().top,i=o.height();t=Math.min(i,Math.max(0,t));var n=Math.round(100*(1-t/i)),s=l.player.getVolume();n!=s&&(l.player.setVolume(n),h(),0!=n&&0!=s||u()),l.resetControlsFadeTimer(),e.preventDefault()};n.on("mousedown",function(e){d=!0,l.playerClickActive=!1,r("body").on("mousemove",m),r("body").one("mouseup",function(e){setTimeout(function(){l.playerClickActive=!0}),d=!1,p(!1),r("body").off("mousemove",m)}),e.stopPropagation()}),t.on("click",function(e){l.player.getMute()?(l.player.setMute(!1),c(l.jwplayerId)):l.player.setVolume(10),h(),u(),e.stopPropagation()}),e.on("click",function(e){l.player.setMute(!0),h(),u(),e.stopPropagation()})}});t.attachControls=function(e,t){new u(e,t)}},"./unified_view/qtext_video/logger.js":function(e,t,i){var n,o=i("./shared/beforeunload.js"),s=i("./shared/Class.js").Class,a=i("./shared/log_sender.js"),r=i("./shared/client.js"),d=i("./shared/visibility_state.js"),l=s.extend({__init__:function(e,t){this.watchedSections=[],this.player=e,this.startPosition=null,this.jwId=t;var i=this;e.on("play",function(t,n){i.recordStartPlaying(e.getPosition())}),e.on("pause",function(){i.recordPauseOrStopPlayback(e.getPosition())}),e.on("complete",function(){i.recordPauseOrStopPlayback(e.getDuration()),i.sendData()}),e.on("seek",function(e){i.recordPauseOrStopPlayback(e.position),i.recordStartPlaying(e.offset)});var s=this.handleUnloadEvent.bind(this);r.isNativeApp()?(n.registerMessageHandler("pageHide",s),r.isIOSApp()&&n.registerMessageHandler("applicationBackground",s),o.registerHandler(s)):(o.registerHandler(s),d.onChange(function(e){e?i.recordStartPlaying(i.player.getPosition()):s()}))},handleUnloadEvent:function(){null!=this.startPosition&&this.recordPauseOrStopPlayback(this.player.getPosition()),this.sendData()},sendData:function(){if(0!=this.watchedSections.length){var e={time_segments:this.watchedSections,jwplayer_id:this.jwId,video_length:this.player.getDuration()};this.sendLog(e),this.watchedSections=[]}},recordWatchedSection:function(e,t){t<e&&(t=e,e=0),this.watchedSections.push([e,t])},recordStartPlaying:function(e){null==this.startPosition&&(this.startPosition=e,0==this.watchedSections.length&&a.log("video_logging_check",{event:"start"}),0==e&&a.log("product_monitoring",{metric:"video_plays"}))},recordPauseOrStopPlayback:function(e){null!=this.startPosition&&(this.startPosition!=e&&this.recordWatchedSection(this.startPosition,e),this.startPosition=null)},sendLog:function(e){a.log("video_logging_check",{event:"log"}),a.log("video_time",e)}});t.registerPlayer=function(e,t){new l(e,t)}},"./unified_view/qtext_video/player.js":function(e,t,i){var n=i("./settings.js"),o=i("./shared/onload.js"),s=i("./shared/jquery.js"),a=i("./shared/client.js"),r=i("./shared/events/index.js"),d=i("./shared/log_sender.js"),l=i("./shared/qlocal_storage.js"),c=i("./shared/jwplayer_cloud.js"),u=i("./unified_view/qtext_video/video_state_manager.js"),h=i("./unified_view/qtext_video/logger.js"),p=i("./unified_view/qtext_video/controls.js"),f=r.DocumentProxy,_=function(e){c.getJwPlayer(e)},m=function(e,t,i){var o,c,p="/videos"==window.location.pathname;o="https://content.jwplatform.com/thumbs/"+t+"-720.jpg",c="https://content.jwplatform.com/videos/"+t+"-720.mp4";var _="index"==n.controller&&"videos"==n.action,m="jwplayerPosition-"+t;p&&u.registerPlayer(e);var g=p&&!1;l.getItem(m,function(n){l.removeItem(m);var u=a.isAndroidApp()?"none":"metadata";e.setup({image:o,sources:[{file:c,type:"video/mp4"}],width:"100%",aspectratio:i,stretching:"fill",mediaid:t,preload:u,autostart:!(!_||a.isIOSApp()&&n)&&"viewable",repeat:g,mute:a.isAndroidApp()||_&&!n});var h=s("#"+e.id);p&&h.addClass("jw-flag-feedvideo"),e.once("play",function(){h.addClass("jw-flag-played")}),e.once("ready",function(){n&&e.seek(parseInt(n,10))}),e.on("complete",function(){f.dispatch({type:r.Types.VIDEO_COMPLETE,payload:{jwplayerId:t}})}),e.on("error",function(i){d.log("jwplayer_errors",{jwId:t,error:JSON.stringify(i)},{scribeOnly:!0}),e.setup(e.getConfig())}),e.on("setupError",function(){e.setup(e.getConfig())})}),h.registerPlayer(e,t)};t.setupPlayer=function(e){var t=s(e).attr("data-qt-video"),i=s(e).attr("needs-video-setup");if(t&&"True"==i){var n=s(e).attr("data-qt-aspect-ratio");o.execAfterLoad(function(){_(function(i){var o=i(e.id);o.setup&&(m(o,t,n),p.attachControls(o,t))})})}}},"./unified_view/qtext_video/uploader.js":function(e,t,i){var n,o=i("./shared/jquery.js"),s=i("./shared/core/component.js"),a=i("./settings.js"),r=i("./shared/client.js");t.updateUploadProgress=function(e){if(a.qtextData.videoEnabled&&r.isNativeApp()){var t=o(e).attr("data-qt-video-client-uuid"),i=o(e).attr("data-qt-video-status"),d="uploading"==i||"not_uploaded"==i;if(t&&d){var l=function(t){if(t.uploadedBytes>0&&t.totalBytes>0){var i=Math.round(t.uploadedBytes/1e3)+" / "+Math.round(t.totalBytes/1e3)+" KB",n=Math.round(t.uploadedBytes/t.totalBytes*100);o(e).find(".uploading_progress").text(i+" ("+n+"%)")}},c=function(){n.send("getVideoUploadingStatus",{uuid:t},function(t){if(l(t),2==t.state)setTimeout(c,2e3);else if(3==t.state){var i=s.getComponentFromElement(e);i.onVideoUploaded(t)}})};c()}}}},"./unified_view/qtext_video/video_state_manager.js":function(e,t,i){var n=i("./shared/debounce.js").throttle,o=i("./shared/Class.js").Class,s=i("./shared/viewport.js"),a=o.extend({__init__:function(){this.activePlayers=[]},registerPlayer:function(e){this.activePlayers.push(e),this.scrollListener||this.startScrollListener()},startScrollListener:function(){var e=this,t=function(){setTimeout(e.updatePlayPause.bind(e),0)};this.scrollListener=n(t,100),window.addEventListener("scroll",this.scrollListener)},updatePlayPause:function(){for(var e,t,i,n,o=0;o<this.activePlayers.length;o++){var a=this.activePlayers[o],r=a.getContainer(),d=r.querySelector(".jw-video");if(r){var l=s.percentInViewport(r);if("idle"==a.getState()||0!=l||0==a.getPosition()||(a.stop(),d.poster=a.getPlaylistItem(0).image),"playing"==a.getState()){if(e){if(e>=l){a.pause();continue}t.pause()}t=a,e=l}(!i||l>i)&&(i=l,n=a)}}!t&&n&&n.play(!0),t&&e<i&&e<=.6&&(t.pause(!0),n.play(!0))}}),r=new a;t.registerPlayer=function(e){r.registerPlayer(e)}},"./unified_view/qualtrics_survey.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./third_party/qualtrics.js"),s=i("./gating.js"),a=i("./shared/jquery.js"),r=i("./shared/client.js"),d=i("./shared/window_manager.js");t.QualtricsSurvey=n.extend({onLoad:function(){if(this.is_selected){var e=this;e._QSI=null,e._setCookie("q_survey_nid",e.nid),e._setCookie("q_survey_uid",e.viewer),e._setCookie("q_survey_platform",e.platform),e._setCookie("q_survey_layer",e.layer);for(var t=s.qualtrics_zone_codes,i=0;i<t.length;i++)o.load(t[i],s.qualtrics_development_mode);r.isNativeApp()&&(window.addEventListener("qsi_js_loaded",function(t){e._QSI=QSI},!1),a(document).on("DOMNodeInserted",function(t){a(t.target).hasClass("QSIInfoBar")&&setTimeout(function(){for(var t=a('.QSIInfoBar [data-type="target"]').get(0),i=t.cloneNode();t.firstChild;)i.appendChild(t.lastChild);t.parentNode.replaceChild(i,t),a(document).on("click",'.QSIInfoBar [data-type="target"]',function(){if(a(".QSIInfoBar").remove(),e._QSI){var t=Object.keys(e._QSI.reg);if(t){var i=t[0];d.navigateTo(e._QSI.reg[i].getTarget())}}})},1e3)}))}},_setCookie:function(e,t){var i=new Date;i.setTime(i.getTime()+864e5),document.cookie=e+"="+encodeURIComponent(t)+"; expires="+i.toUTCString()}})},"./unified_view/question/anon.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/window_manager.js"),a=i("./shared/jquery.js"),r=i("./shared/client.js"),d=i("./shared/events/index.js");t.MaybePromptAnonLinkOnQuestion=o.extend({onLoad:function(){var e=this;e.handleEvent(d.Types.ANON_LINK_SAVED,function(){s.removeURLParam("show_alert")}),e.$id("@maybe_prompter").find("a").each(function(){var t=a(this).attr("href");"#"!==t&&(a(this).attr("href","#"),a(this).click(function(i){i.preventDefault(),s.isParamInURL("show_alert")?e.showModal(t):e.goToNextUrl(t)}))})},showModal:function(e){var t=this;s.removeURLParam("show_alert"),t.createModal("load_modal").kwargs({oid:t.oid,anon_content_key:t.anon_content_key}).onClose(function(){t.goToNextUrl(e)}).show()},goToNextUrl:function(e){r.isNativeApp()?n.sendMessageToClient("openURL",{url:e,target:"main"}):s.navigateTo(e)}}),t.EditQuestionAndDetailsButton=o.extend({onLoad:function(){var e=this;this.$id("@button").on("click",function(){e.showModal()})},showModal:function(){var e=this;e.createModal("load_modal").kwargs({qid:e.qid,anon_content_key:e.anon_content_key}).show()}})},"./unified_view/question/ask_multi_modal.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./unified_view/multimodal.js").Step,s=i("./unified_view/multimodal.js").redirectTo,a=i("./shared/client.js"),r=i("./interface/settings.js"),d=i("./shared/window_manager.js"),l=i("./unified_view/multimodal.js").Manager,c=i("./unified_view/button/multi_state_button.js").MultiStateMenu,u=i("./shared/util.js"),h=i("./qtext2/util.js").Util;t.AskMultiModal={open:function(e,t,i){this._maybeInitManager(e),e.manager.pushStep(t,i)},load:function(e,t,i){this._maybeInitManager(e),e.manager.loadStep(t,i)},_maybeInitManager:function(e){e.manager||(e.manager=new l(e,this.transitionFunction))},transitionFunction:function(e,t,i){i.isAnon?(e.dismiss(),s(i.redirect)):"ask_question"==t||"translate_question"==t||"ask_hyperlink"==t?(i.noBack=!0,e.pushStep("edit_topics",i)):"edit_topics"==t?(i.noBack=!1,e.pushStep("a2a",i)):"a2a"==t&&i.openTopicsStep?(i.noBack=!0,e.pushStep("edit_topics",i)):"a2a"==t&&i.translate_nid?i.showOneStepTranslation?e.pushStep("one_step_translate",i):e.pushStep("ask_to_translate",i):"ask_to_translate"==t?i.prompt_dismissed?(e.dismiss(),i.redirect&&s(i.redirect)):(e.dismiss(),d.navigateTo(i.translate_question_url,"present")):(e.dismiss(),i.redirect&&s(i.redirect))}},t.AskQuestionStep=o.extend({onLoad:function(){var e=this;this.busy=!1,this.isAnon=!1,e._super.apply(e,arguments),e.activeTab="question",e.setEventHandlers(),this.isAnon=this.$id("@anon_checkbox").prop("checked")||!1,this.$id("@anon_checkbox").on("change",function(t){e.isAnon=e.$id("@anon_checkbox").prop("checked")||!1,e.toggleAnon(e.isAnon)}),e.enableUpdateAskToolbar=!1,e.handleEvent(n.Types.MULTIMODAL_SET_QUERY,function(t){t.payload.manager_id==e.manager_id&&t.payload.step_name==e.step_name&&(e.initial_query=t.payload.initial_query,e.maybeUpdateQuery())}),e.handleEvent(n.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,function(t){e.should_limit_distro=t.payload.should_limit}),e.handleEvent(n.Types.ANON_QUESTION_FLAG,function(t){e.isAnon=t.payload.anon}),e.child("quora_share_editor")&&e.child("quora_share_editor").onToggleButton(function(t){e.toggleLinkButtonState(t)}),this.setUpUserSharedLinks(),this.onLoadModalDesktop(),e.$id("@dismiss").on("click",function(t){e.$id("@setting_message").hide(),e.serverCall("dismiss_distribution_label").send()})},onLoadModalDesktop:function(){var e=this;this.handleEvent(n.Types.ASK_QUESTION_MODAL_ENTER,function(t){e.submit()}),this.onShowModalDesktop()},onShowModalDesktop:function(){var e=this.child("question_bar");e.focus(),e.query&&e.$id("@input").get(0).setSelectionRange(e.query.length,e.query.length)},onAskToolbarSubmit:function(e){!1===this.isAnon&&(this.isAnon=e.is_anonymous),this.submit()},onLoadModalMobile:function(){var e=this;this.onShowModalMobile();var t=i(!function(){var e=new Error('Cannot find module "mobile_app2/client"');throw e.code="MODULE_NOT_FOUND",e}());t.registerMessageHandler("askToolbarSubmit",this.onAskToolbarSubmit.bind(this)),t.registerMessageHandler("askToolbarToggleAnon",function(t){e.isAnon=t.is_anonymous,e.toggleAnon(e.isAnon)}),t.registerMessageHandler("askToolbarAnonToggle",function(t){e.isAnon=t.is_anonymous,e.toggleAnon(e.isAnon)})},onShowModalMobile:function(){var e={buttonText:this.submitButtonText,enabled:!0};this.anonymouslyText&&(e.anonToggleText=this.anonymouslyText),this.updateAskToolbar(e)},setUpUserSharedLinks:function(){var e=this;e.$id("@submit_link").on("click",function(t){e.submit()}),this.$id("@link_tab").on("click",function(t){e.$id("@link_tab").addClass("selected"),e.$id("@question_tab").removeClass("selected"),e.$id("@content_inner_link").removeClass("hidden"),e.$id("@content_inner_question").addClass("hidden"),e.$id("@submit_link_footer").removeClass("hidden"),e.$id("@submit_question_anon").addClass("hidden"),e.$id("@submit_question").addClass("hidden"),e.$id("@share_link_url").focus();var i={buttonText:"Share",anonToggleText:""};e.updateAskToolbar(i),a.isMobileWeb()&&e.$id("@nav").html("Share"),e.activeTab="link"}),this.$id("@question_tab").on("click",function(t){e.$id("@question_tab").addClass("selected"),e.$id("@link_tab").removeClass("selected"),e.$id("@content_inner_question").removeClass("hidden"),e.$id("@content_inner_link").addClass("hidden"),e.$id("@submit_link_footer").addClass("hidden"),e.$id("@submit_question_anon").removeClass("hidden"),e.$id("@submit_question").removeClass("hidden");var i={buttonText:e.submitButtonText,enabled:!0};e.anonymouslyText&&(i.anonToggleText=e.anonymouslyText),e.updateAskToolbar(i),a.isMobileWeb()&&e.$id("@nav").html(e.submitButtonText),e.activeTab="question"}),this.$id("@share_link_url").on("input",function(t){var i=e.$id("@share_link_url").val(),n=e.parseUrlFromText(i);n&&(e.$id("@url_input").addClass("url_input_filled"),e.$id("@url_input_box").addClass("url_input_box_filled"),setTimeout(function(){e.$id("@fake_preview").removeClass("hidden")},500),e.serverCall("show_hyperlink_preview").kwargs({url:n}).contentFor(e.$id("@link_preview")).send())}),this.$id("@close_preview").on("click",function(t){e.$id("@url_input").removeClass("url_input_filled"),e.$id("@url_input_box").removeClass("url_input_box_filled"),e.$id("@fake_preview").addClass("hidden"),e.$id("@share_link_url").focus(),e.$id("@share_link_url").val("")}),e.handleEvent(n.Types.TRIBE_QUORA_SHARE_MODAL_CLOSED,function(t){e.selected_tribes=t.payload.selected_tribes,e.share_to_feed=t.payload.share_to_feed})},setEventHandlers:function(){var e=this;e.handleEvent(n.Types.ASK_QUESTION_MODAL_QUERY_CHANGE,function(t){e.updateCounter()})},maybeUpdateQuery:function(){var e=this;e.initial_query&&e.child("question_bar")&&e.child("question_bar").setInitialQuery&&(e.child("question_bar").setInitialQuery(e.initial_query),e.child("question_bar").maybeChangeInput(e.initial_query),e.child("question_bar").query!==e.initial_query&&(e.child("question_bar").query=e.initial_query))},onShow:function(){var e=this;e.enableUpdateAskToolbar=!0,e.maybeUpdateQuery(),a.isMobileWeb()&&!a.isIOSMobileWeb()||a.isIOSApp()?setTimeout(function(){e.child("question_bar").focus(),e.child("question_bar").resizeInput()},200):(e.child("question_bar").focus(),e.child("question_bar").resizeInput()),this.onShowModalDesktop(),e.serverCall("log_modal_opened").send()},updateAskToolbar:function(e){if(a.isNativeApp()&&this.enableUpdateAskToolbar){i(!function(){var e=new Error('Cannot find module "mobile_app2/messages"');throw e.code="MODULE_NOT_FOUND",e}()).send("showAskToolbar",e)}},get_matched_qids:function(){var e=this.child("question_bar");if(!e)return[];var t=e.child("results");return t?(t.results||[]).map(function(e){return e.data.qid}):[]},submit:function(){var e=this;e.setBusyState(!0);var t;if("link"==this.activeTab){var i=this.$id("@share_link_url").val(),o=this.parseUrlFromText(i),s=e.child("quora_share_editor").$id("@share_comment").val();return void e.serverCall("share_link").liveMutate().kwargs({url:o,comment:s,selected_tribes:e.selected_tribes,share_to_feed:!0}).success(function(t){t?e.dismiss():e.setBusyState(!1)}).send()}t=e.is_logged_out?e.serverCall("logged_out_ask_question"):e.serverCall("ask_question");var a=e._super.bind(this),d=e.child("question_bar").$input.val(),l={question_text:d,is_anon:e.isAnon,hyperlink_text:e.getHyperlinkText(),source:e.source,target_type:e.targetType,target_oid:e.targetOid,location:r.controller,from_url:e.from_url,matched_qids:e.get_matched_qids(),limited_user_distro:e.should_limit_distro},c=e.extra_ask_server_call_kwargs;l=u.extend(l,c),t.kwargs(l).success(function(t){var i=t[0],o=t[1],s=t[2];e.setSubmitData({isAnon:e.isAnon,redirect:o,qid:s,translate_nid:e.data.translate_nid,showOneStepTranslation:e.showOneStepTranslation}),e.setBusyState(!1),i&&(e.emitEvent({type:n.Types.ASK_QUESTION_MODAL_SUCCESS,scope:n.scope.GLOBAL,payload:{}}),a())}).except(function(t){e.setBusyState(!1)}).error(function(t){e.setBusyState(!1)}).send()},setSubmitData:function(e){this.submitData=e},getSubmitData:function(){return this.submitData},setBusyState:function(e){this.busy=e,this.toggleButtonState(!this.busy);this.busy?this.$id("@submit").html(this.busyButtonText):this.$id("@submit").html(this.submitButtonText)},setSource:function(e){this.source=e},toggleAnon:function(e){e?(this.$id("@user_asks").addClass("hidden"),this.$id("@anon_asks").removeClass("hidden")):(this.$id("@anon_asks").addClass("hidden"),this.$id("@user_asks").removeClass("hidden"),this.emitEvent({type:n.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!1}})),this.emitEvent({type:n.Types.ANON_QUESTION_FLAG,payload:{anon:e}})},toggleButtonState:function(e){e?this.$id("@submit").removeClass("submit_button_disabled"):this.$id("@submit").addClass("submit_button_disabled")},toggleLinkButtonState:function(e){var t=this;e?t.$id("@submit_link").removeClass("submit_button_disabled"):t.$id("@submit_link").addClass("submit_button_disabled")},updateCounter:function(){var e=this.child("question_bar").charactersLeft();this.toggleButtonState(e>=0)},reset:function(){this.child("question_bar").reset(),this.updateCounter(),this.toggleAnon(!1),!a.isNativeApp()&&this.anonymouslyText&&(this.$id("@anon_checkbox").get(0).checked=!1),this.busy=!1},getHyperlinkText:function(){return this.child("sources").toJSON()},parseUrlFromText:function(e){var t=h.linkify(e);if(1==t.length){var i=t[0].href;if(i)return i}return""}}),t.DistributionSwitcher=c.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.handleEvent(n.Types.ANON_QUESTION_FLAG,function(t){1==t.payload.anon&&e._update(2)}),e.handleEvent(n.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,function(t){0==t.payload.should_limit&&e._update(0)})},onSelect:function(e){this._super.apply(this,arguments);var t=this;0==e?t.emitEvent({type:n.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!1}}):1==e?t.emitEvent({type:n.Types.ASK_QUESTION_LIMIT_QUESTION_DISTRO,payload:{should_limit:!0}}):2==e&&t.emitEvent({type:n.Types.ANON_QUESTION_FLAG,payload:{anon:!0}})}})},"./unified_view/question/ask_question.js":function(e,t,i){var n,o,s,a=i("./shared/core/component.js").Component,r=i("./shared/events/index.js"),d=i("./unified_view/modal.js").ModalBase,l=i("./shared/debounce.js").debounce,c=i("./shared/client.js"),u=i("./third_party/autosize.js"),h=i("./shared/scroll_animation_handler.js"),p=i("./shared/browser.js"),f=i("./unified_view/a2a.js").openA2aModal,_=i("./unified_view/question/ask_multi_modal.js").AskMultiModal;n=i("./view/selector.js").Selector;var m=i("./view/fixable2.js");t.PreloadedAskModalForNative=a.extend({onLoad:function(){var e=this;e.setDvar("disableOnload",!0),_.load(e,"ask_question",{source:e.source,initial_query:e.initial_query,translate_nid:e.question_translation_nid}),o.registerMessageHandler("askButtonPressed",function(t){_.open(e,"ask_question",{source:t.source,initial_query:t.initial_query,translate_nid:e.question_translation_nid}),t.initial_query&&setTimeout(function(){r.GlobalProxy.dispatch({type:r.Types.MULTIMODAL_SET_QUERY,payload:{initial_query:t.initial_query,manager_id:e.manager.manager_id,step_name:"ask_question"}})},500)})}});var g=a.extend({onClick:function(){this.showModal(this.initial_query)},showModal:function(e){var t=this,i=t.getModalData(e);_.open(t,t.multiModalAskStepName,i),t.emitEvent({type:r.Types.MULTIMODAL_SET_QUERY,payload:{initial_query:e,manager_id:t.manager.manager_id,step_name:t.multiModalAskStepName}})},getModalData:function(e){return{source:this.source,from_url:this.from_url,translate_nid:this.question_translation_nid,targetType:this.targetType,targetOid:this.targetOid,to_uid:this.to_uid,ama_id:this.ama_id,initial_query:e||this.initial_query}}});t.AskQuestionButton=g.extend({onLoad:function(){var e=this;if(c.isNativeApp()&&e.setDvar("disableOnload",!0),e.shouldOpenModalOnLoad&&window.setTimeout(function(){e.showModal(e.initial_query)},300),e.handleEvent(r.Types.QUESTION_TRANSLATION_PROMPT_DISMISS,function(t){e.question_translation_nid=null}),!e.preventAskModalPreload){var t=e.getModalData();_.load(e,e.multiModalAskStepName,t)}this.$id("@button").on("click",function(t){t.preventDefault(),e.onClick()})}}),t.AskQuestionActionButton=g.extend({onLoad:function(){var e=this;this.actionButton=this.child("action_button"),this.actionButton&&"function"==typeof this.actionButton.onPressed&&this.actionButton.onPressed(function(){e.onClick()}),e._super.apply(e,arguments)}}),t.AskQuestionInput=g.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.$id("@ask_input").keyup(function(t){t.preventDefault(),13===t.keyCode&&e.onClick()})},onClick:function(){var e=this.$id("@ask_input").val();this.showModal(e)}}),t.AskQuestionHyperLinkButton=t.AskQuestionActionButton.extend({getModalData:function(){var e=this._super.apply(this,arguments);return e.question_source=this.question_source,e}}),t.AskQuestionSelector=n.extend({onLoad:function(){var e=this;e.$input=e.$id("@input"),u(this.$input),e.queryChangeDebounced=l(function(){e.emitEvent({type:r.Types.ASK_QUESTION_MODAL_QUERY_CHANGE,payload:{query:e.query}})},10,{maxWait:300,trailing:!0}),e.composing=!1,e.$input.on("compositionstart compositionend",function(t){"compositionstart"==t.type?e.composing=!0:"compositionend"==t.type&&(e.composing=!1,p.chrome&&e.maybeChangeInput())}),e.$input.on("input",function(t){e.maybeChangeInput()}),e._super.apply(e,arguments),e.$input.on("keydown",function(t){13==t.which&&(t.preventDefault(),e.emitEvent({type:r.Types.ASK_QUESTION_MODAL_ENTER,payload:{}}))}),e.handleEvent(r.Types.ASK_QUESTION_MODAL_RESULT_CLICK,function(t){e.resultClickHandler(t)}),e.minWords=3,e.timer=null,e.firstEdit=!0,e.allow_no_selection=!0,this.query&&(this.queryDidChange(),this.updateResults()),e.$id("@add_details").on("click",function(t){t.preventDefault(),e.showQuestionDetailsEditor(!0)}),e.$id("@remove_details").on("click",function(t){t.preventDefault(),e.showQuestionDetailsEditor(!1)});var t=this.$id("@input").get(0);t.value.length>0&&t.setSelectionRange(t.value.length-1,t.value.length-1)},charactersLeft:function(){return this.question_length_limit-this.query.length},focus:function(){var e=this.$id("@input").get(0);e&&e.focus(),c.isAndroidApp()&&s.send("showKeyboard")},reset:function(){this.$id("@input").val(""),this.firstEdit=!0},resizeInput:function(){var e=document.createEvent("Event");e.initEvent("autosize:update",!0,!1);var t=this.$id("@input").get(0);t&&t.dispatchEvent(e)},setInitialQuery:function(e){this.$id("@input").get(0).innerText=e},setInputVal:function(e,t){if(e!=this.$input.val()){var i=this.$input.get(0).selectionStart,n=this.$input.get(0).selectionEnd;t&&(i+=t,n+=t),this.$input.val(e),this.query=e,e.length>0&&this.$input.get(0).setSelectionRange(i,n)}},getExtraKwargs:function(){return{target:this.target}},showQuestionDetailsEditor:function(e){e?(this.$id("@add_details").addClass("hidden"),this.$id("@remove_details").removeClass("hidden"),this.$id("@details_wrapper").removeClass("hidden")):(this.$id("@remove_details").addClass("hidden"),this.$id("@add_details").removeClass("hidden"),this.$id("@details_wrapper").addClass("hidden"))},capitalize:function(e){if(!e||!this.should_capitalize)return e;var t=e.startsWith(this.opening_question_punctuation)?this.opening_question_punctuation.length:0;return e=e.slice(0,t)+e.charAt(t).toUpperCase()+e.slice(t+1)},queryDidChange:function(){this.maybeChangeInput(),this.queryChangeDebounced()},maybeChangeInput:function(){if(!this.composing){var e=this.$input.val(),t=0;this.firstEdit&&(this.firstEdit=!1,e.endsWith(this.closing_question_punctuation)||(e+=this.closing_question_punctuation),e.startsWith(this.opening_question_punctuation)||(e=this.opening_question_punctuation+e),t=this.opening_question_punctuation.length),e=this.capitalize(e),this.setInputVal(e,t)}},wrapperFocusoutHandler:function(){},updateResults:function(){window.clearTimeout(this.timer),this.timer=window.setTimeout(this._super.bind(this),this.delay)},shouldShowEmptyInputPrompt:function(){return!this.show_results_for_empty_query&&(!this.has_spaces&&this.query.split(" ").length<this.minWords||0===this.query.trim().length)},resultClickHandler:function(e){var t=this,i=e.payload.question_text;t.setInputVal(i);var n=i.length;i.endsWith(t.closing_question_punctuation)&&(n-=t.closing_question_punctuation.length),t.$input.get(0).setSelectionRange(n,n),t.resizeInput()}}),t.BelowQuestionAddPrompt=a.extend({onLoad:function(){var e=this,t=e.$id("@question_prompt");m.makeBottomFixable(t,t.parent(),{top:50}),h.add(window,function(){window.scrollY>200&&t.removeClass("hidden")})}}),t.TranslateQuestionSelector=t.AskQuestionSelector.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.$id("@close_button").on("click",function(){e.clearSelector()}),e.$id("@input").on("keydown",function(t){8==t.keyCode&&e.existing_qid&&e.clearSelector()})},clearSelector:function(){var e=this;e.$id("@input").removeClass("selected"),e.$id("@input").val(""),e.$id("@close_button").addClass("hidden"),e.emitEvent({type:r.Types.TRANSLATE_REMOVE_EXISTING_QID,payload:{}}),e.existing_qid=!1},wrapperFocusoutHandler:function(e){var t=this.$wrapper.get(0);if(t&&t.contains(e.relatedTarget))return!1;this.showResults(!1)},resultWasSelected:function(e,t,i){var n=this;n.$input=n.$id("@input"),n.$input.val(i.text()),n.$input.addClass("selected"),n.$id("@close_button").removeClass("hidden"),n.emitEvent({type:r.Types.TRANSLATE_SELECT_EXISTING_QID,payload:{qid:e.data.qid}}),n.existing_qid=e.data.qid,n.selectorFocusOutHandler()}}),t.AfterAskModalTrigger=a.extend({onLoad:function(){this.createModal("load_inner").show()}}),t.AfterAskModal=d.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.actionButton=e.child("signup_button"),e.actionButton&&"function"==typeof e.actionButton.onPressed&&e.actionButton.onPressed(function(){e.serverCall("trigger_wall").send(),e.onClose()})}});var v=t.AskToAnswerModalLink=a.extend({onLoad:function(){var e=this;this.$id("@create_modal_link").on("click",function(t){t.preventDefault(),e.loadModal()}),this.handleOnLoad()},handleOnLoad:function(){},loadModal:function(){"outstanding_requests_modal"==this.parent().cname&&this.parent().close(),f(this,{qid:this.qid,a2a_type:this.a2a_type,source:this.source,ty:this.ty})}});t.AskToAnswerModalOutstandingLink=v.extend({handleOnLoad:function(){var e=this;e.handleEvent(r.Types.A2A_SEND_REQUEST,function(t){(e.daily_count>=0||e.daily_count<=e.limit)&&e.updateCount(t.payload.update_count)})},updateCount:function(e){this.daily_count=this.daily_count+e,this.total_count=this.total_count+e,this.$id("@daily_request_count").text(this.daily_count),this.$id("@total_request_count").text(this.total_count)}}),t.OutstandingRequestsModalLink=a.extend({onLoad:function(){var e=this;this.$id("@create_modal_link").on("click",function(t){t.preventDefault(),e.maybeDismissParentModal(),e.loadModal()}),e.handleEvent(r.Types.A2A_SEND_REQUEST,function(t){(e.daily_count>=0||e.daily_count<=e.limit)&&e.updateCount(t.payload.update_count)})},setParentModalToDismiss:function(e){this.parentModal=e},maybeDismissParentModal:function(){this.parentModal&&this.parentModal.dismiss()},loadModal:function(){this.createModal("load_inner").kwargs({qid:this.qid}).show()},updateCount:function(e){this.daily_count=this.daily_count+e,this.total_count=this.total_count+e,this.$id("@daily_request_count").text(this.daily_count),this.$id("@total_request_count").text(this.total_count)}}),t.DistributionSwitcherMenuContents=a.extend({onLoad:function(){var e=this;e.$id("@show_followers").on("click",function(t){t.preventDefault(),e.emitEvent({type:r.Types.LIMIT_QUESTION_DISTRO,payload:{should_limit:!1}}),e.serverCall("show_followers").kwargs({should_limit:!1}).send()}),e.$id("@no_show_followers").on("click",function(t){t.preventDefault(),e.emitEvent({type:r.Types.LIMIT_QUESTION_DISTRO,payload:{should_limit:!0}}),e.serverCall("show_followers").kwargs({should_limit:!0}).send()})}})},"./unified_view/question/disclaimer.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/modal.js").ModalBase;t.SetDisclaimerDialog=o.extend({showEditor:function(){this.$id("@choose_profession_area").hide(),this.$id("@edit_disclaimer_area").show(),this.child("editor").focusInput(),this.$id("@cancel").hide()},showError:function(){this.$id("@choose_profession_area").hide(),this.$id("@wrong_profession_error").show()}}),t.AttachDisclaimerLink2=n.extend({onLoad:function(){var e=this;this.$id("@add_disclaimer_link").click(function(){e.createModal("set_disclaimer_dialog").show()})}})},"./unified_view/question/pending_answer.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/broadcast.js"),s=i("./shared/events/index.js");t.PendingContentQText=n.extend({onVideoUploaded:function(){this.emitEvent({type:s.Types.PENDING_CONTENT_STATUS_CHANGE,payload:{pending_content_id:this.pending_content_id}}),o.rerenderComponent(this.cid)}})},"./unified_view/question/prompt.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/client.js"),s=i("./shared/broadcast.js"),a=i("./shared/events/index.js");t.NoAnswersYetPrompt=n.extend({onLoad:function(){var e=this;e.handleEvent(a.Types.ANSWER_TOGGLE_EDITOR,function(t){t.payload.is_pressed||e.$id("@prompt").addClass("u-border-top--0")})}}),t.QuestionMergedPrompt=n.extend({onLoad:function(){}}),t.PendingAnswerPromptBase=n.extend({onLoad:function(){var e=this;e.handleEvent(a.Types.PENDING_CONTENT_STATUS_CHANGE,function(t){t.payload.pending_content_id==e.pending_content_id&&s.rerenderComponent(e.cid)})}}),t.QuestionTranslateAnswerPrompt=n.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.handleNativeTranslateAnswerModal()},handleNativeTranslateAnswerModal:function(){var e=this;o.isNativeApp()&&e.$id("@prompt_overlay").on("click",function(t){t.preventDefault(),e.createModal("load_native_translate_answer_modal").kwargs({aid:e.aid}).show()})}}),t.UserAnswersNeeded=n.extend({onLoad:function(){var e=this;e.$id("@write_answer_button").on("click",function(t){e.hidePrompt()}),e.handleEvent(a.Types.ANSWER_TOGGLE_EDITOR,function(t){e.hidePrompt()})},hidePrompt:function(){this.$id("@prompt").addClass("hidden")}}),t.UserRequestAnswersPrompt=n.extend({onLoad:function(){var e=this;this.emitEvent({type:a.Types.A2A_SHOW_REQUEST_PROMPT,payload:{should_show:e.should_show}}),e.handleEvent(a.Types.ANSWER_TOGGLE_EDITOR,function(t){e.$id("@prompt").addClass("hidden")})}})},"./unified_view/question/rad.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./shared/w2.context.js").ActionBar,a=i("./shared/client_log.js"),r=i("./shared/action_log.js"),d=i("./unified_view/a2a.js").openA2aModal,l=i("./unified_view/action_bar/base.js").ActionButton;t.RequestActionButton=l.extend({onPressed:function(){this._super.apply(this,arguments),d(this,{qid:this.oid,a2a_type:this.a2a_type})}}),t.RequestActionCaret=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.A2A_SHOW_REQUEST_PROMPT,function(t){t.payload.should_show&&e.$id("@caret").removeClass("hidden")}),e.handleEvent(o.Types.ANSWER_TOGGLE_EDITOR,function(t){e.$id("@caret").addClass("hidden")})}}),t.RequestAnswersDrawer=n.extend({onLoad:function(){var e=this;e.actionBarContext=e.getContext(s),e.should_open_by_default&&(e.actionBarContext.set("toggleRAD",!0),e.should_open_request_modal||e.serverCall("log_rad_open").kwargs({qid:e.qid,autoexpanded:!0}).send()),e.actionBarContext.on("toggleRAD",function(t,i){e.toggleDrawer(i)}),e.$id("@close_button").on("click",function(t){t.preventDefault(),e.$id("@drawer").removeClass("is_active"),e.actionBarContext.set("toggleRAD",!1)})},toggleDrawer:function(e){var t=this;e?t.showDrawer():t.hideDrawer()},showDrawer:function(){var e=this;e.$id("@drawer").hasClass("is_active")||(e.$id("@drawer").addClass("transitioning_in"),setTimeout(function(){e.$id("@drawer").removeClass("transitioning_in"),e.$id("@drawer").addClass("is_active")},200),e.serverCall("log_rad_open").kwargs({qid:e.qid,autoexpanded:!1}).send())},hideDrawer:function(){var e=this;e.$id("@drawer").hasClass("is_active")&&(e.$id("@drawer").removeClass("is_active"),e.$id("@drawer").addClass("transitioning_out"),setTimeout(function(){e.$id("@drawer").removeClass("transitioning_out")},200),e.serverCall("log_rad_close").kwargs({qid:e.qid}).send())}}),t.RequestFromQuoraLink=n.extend({onLoad:function(){var e=this;e.$id("@request_button").on("click",function(){e.requestAnswers()}),e.$id("@undo_request_button").on("click",function(){e.unRequestAnswers()})},requestAnswers:function(){var e=this;e.showUndoRequestButton(),e.serverCall("request_answers").error(function(){e.showRequestButton()}).success(function(t){if(t){var i=e.$id("@request_button").get(0);a.logEvent("QuestionReask",i,{qid:e.qid})}}).send()},unRequestAnswers:function(){var e=this;e.showRequestButton(),e.serverCall("unrequest_answers").error(function(){e.showUndoRequestButton()}).send()},showRequestButton:function(){this.$id("@undo_request_button").addClass("pop_out"),this.$id("@undo_request_button").addClass("hidden pop_in").removeClass("pop_out"),this.$id("@request_button").removeClass("hidden"),this.$id("@list_item").removeClass("is_active")},showUndoRequestButton:function(){this.$id("@request_button").addClass("pop_out"),this.$id("@request_button").addClass("hidden pop_in").removeClass("pop_out"),this.$id("@undo_request_button").removeClass("hidden"),this.$id("@list_item").addClass("is_active")}}),t.Suggestions=n.extend({onLoad:function(){var e=this;e.suggestionsLoaded=e.should_load_by_default,e.actionBarContext=e.getContext(s),e.actionBarContext.get("toggleRAD")&&e.loadSuggestions(),e.actionBarContext.on("toggleRAD",function(t,i){!0===i&&e.loadSuggestions()})},loadSuggestions:function(){var e=this;!0!==e.suggestionsLoaded&&e.serverCall("get_suggestions_list").contentFor(e.$id("@suggestions_list").get(0)).success(function(){e.suggestionsLoaded=!0}).send()}}),t.SuggestionListItem=r.ActionableComponent.extend({onLoad:function(){var e=this;e.$id("@request_button").on("click",function(t){e.request(t)}),e._super.apply(e,arguments)},request:function(e){var t=this;t.renderRequested(),t.serverCall("request").success(function(e){"failed"==e&&t.renderDefault(),"reached"==e&&t.renderDefault()}).error(function(){t.renderDefault()}).liveMutate().send(),a.logEvent("AskToAnswer",e.target,{qid:t.qid}),r.logPrimaryAction("AskToAnswer",{type:t.impression_type,hash:t.impression_hash})},renderRequested:function(){this.$id("@request_button").addClass("pop_out"),this.$id("@request_button").addClass("hidden"),this.$id("@checkmark_icon").removeClass("hidden"),o.DocumentProxy.dispatch({type:o.Types.A2A_SEND_REQUEST,payload:{update_count:1,qid:this.qid}})},renderDefault:function(){this.$id("@checkmark_icon").removeClass("pop_in").addClass("pop_out"),this.$id("@checkmark_icon").addClass("hidden"),this.$id("@request_button").removeClass("hidden"),o.DocumentProxy.dispatch({type:o.Types.A2A_SEND_REQUEST,payload:{update_count:-1}})}})},"./unified_view/question/sources.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.QuestionSourceEdit=n.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;if(e.tutorial){var t=e.$id("@tutorial");t.on("click",function(){t.addClass("hidden"),e.serverCall("tutorial_clicked").send()})}},toJSON:function(){return{is_plaintext:!0,text:this.$id("@link_input").val()}}})},"./unified_view/quora_share/_quora_share.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./unified_view/modal.js").ModalBase,a=i("./third_party/autosize.js"),r=i("./shared/client.js"),d=i("./shared/events/index.js"),l=i("./shared/client_log.js"),c=i("./unified_view/switch.js").Switch;t.QuoraShareEditor=o.extend({onLoad:function(){var e=this;e.$input=e.$id("@share_comment"),e.$counter=this.child("counter"),e.submit_state=!0,r.isMobileWeb()&&!r.isIOSMobileWeb()||r.isIOSApp()?setTimeout(function(){e.$input.focus()},200):e.$input.focus(),a(this.$input),e.updateCounter(),e.$input.on("input",function(){e.updateCounter()}),e.handleEvent(d.Types.TRIBE_QUORA_SHARE_MODAL_CLOSED,function(t){var i=t.payload.selected_tribes,n=t.payload.share_to_feed;t.payload.refresh&&(e.$id("@tribe_picker").empty(),e.serverCall("update_tribe_picker_link").kwargs({selected_tribes:i,share_to_feed:n}).contentFor(e.$id("@tribe_picker")).send())})},updateCounter:function(){var e=this;if(e.$counter){var t=e.$input.val().length;e.$counter.updateCounter(t),e.shouldToggleButton(t)}},shouldToggleButton:function(e){var t=this;e>t.char_limit?t.submit_state&&(t.submit_state=!t.submit_state,t.toggleButtonState(t.submit_state)):t.submit_state||(t.submit_state=!t.submit_state,t.toggleButtonState(t.submit_state))},toggleButtonState:function(e){this._onToggleButtonCallback&&this._onToggleButtonCallback(e)},onToggleButton:function(e){this._onToggleButtonCallback=e}}),t.QuoraShareModal=s.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.selected_tribes=[],e.share_to_feed=!0,e.child("quora_share_editor").onToggleButton(function(t){e.disableButton(t)}),e.handleEvent(d.Types.TRIBE_QUORA_SHARE_MODAL_CLOSED,function(t){e.selected_tribes=t.payload.selected_tribes,e.share_to_feed=t.payload.share_to_feed,e.selected_tribes&&e.serverCall("check_duplicate_tribe_share").kwargs({tribe_id:e.selected_tribes[0],oid:e.oid,content_type:e.content_type}).contentFor(e.$id("@duplicate_tribe_share")).send()})},onSubmit:function(e){this.addQuoraShare()},disableButton:function(e){var t=this;e?t.$id("@submit").removeClass("submit_button_disabled"):t.$id("@submit").addClass("submit_button_disabled")},addQuoraShare:function(){var e=this,t=e.child("quora_share_editor").$id("@share_comment").val();e.setBusyState(!0),e.serverCall("add_quora_share").liveMutate().kwargs({content_type:e.content_type,oid:e.oid,comment:t,selected_tribes:e.selected_tribes,share_to_feed:e.share_to_feed}).success(function(t){t?(l.logEvent("AddQuoraShare",n.getAnyElement(e)),e.close()):e.setBusyState(!1)}).except(function(t){e.setBusyState(!1)}).error(function(t){e.setBusyState(!1)}).send()},setBusyState:function(e){this.busy=e,this.disableButton(!this.busy);this.busy?this.$id("@submit").html(this.busy_button_text):this.$id("@submit").html(this.done_text)}}),t.EditQuoraShareModal=t.QuoraShareModal.extend({onSubmit:function(e){this.edit()},edit:function(){var e=this,t=e.child("quora_share_editor").$id("@share_comment").val();e.serverCall("edit").kwargs({share_id:e.share_id,comment:t}).success(function(t){t&&(l.logEvent("QuoraShareEdit",n.getAnyElement(e)),e.close())}).liveMutate().send()}}),t.QuoraSharePostAnswerModal=t.QuoraShareModal.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.should_quora_share=!1,e.handleEvent(d.Types.QUORA_SHARE_ANSWER_TO_FOLLOWERS_TOGGLED,function(t){e.toggleQuoraShareEditor(t.payload.newState)})},toggleQuoraShareEditor:function(e){var t=this,i=t.$id("@quora_share_editor_and_answer");"toggled_off"==e?(i.slideUp(100),t.should_quora_share=!1):"toggled_on"==e&&(i.slideDown(100),t.should_quora_share=!0)},onSubmit:function(e){var t=this;t.should_quora_share?t.addQuoraShare():t.close()}}),t.QuoraShareToFollowersToggle=c.extend({toggleOn:function(e){this.emitEvent({type:d.Types.QUORA_SHARE_ANSWER_TO_FOLLOWERS_TOGGLED,payload:{newState:"toggled_on"}})},toggleOff:function(e){this.emitEvent({type:d.Types.QUORA_SHARE_ANSWER_TO_FOLLOWERS_TOGGLED,payload:{newState:"toggled_off"}})}}),t.QuoraShareAnswerPagePrompt=o.extend({onLoad:function(){var e=this;e.$id("@submit_button").on("click",e.addQuoraShare.bind(e)),e.$id("@close_button").on("click",e.closePrompt.bind(e))},addQuoraShare:function(){var e=this,t=e.child("quora_share_editor").$id("@share_comment").val();e.serverCall("add_quora_share").liveMutate().kwargs({oid:e.oid,comment:t}).success(function(t){t&&(l.logEvent("AddQuoraShare",n.getAnyElement(e)),e.$id("@prompt_to_share").slideUp(500))}).send()},closePrompt:function(){this.$id("@prompt_to_share").slideUp(500)}})},"./unified_view/quora_share/reshare.js":function(e,t,i){var n,o=i("./shared/core/component.js"),s=o.Component,a=i("./shared/client.js"),r=i("./shared/jquery.js"),d=i("./shared/events/index.js"),l=i("./unified_view/modal.js").ModalBase,c=i("./shared/client_log.js");t.ReshareMobileModal=s.extend({onLoad:function(){var e=this;e.selectedDestination=0,n.send("setPageAction",{rightTextButton:{title:e.submit_text,disabled:!1,callback:e.addReshare.bind(e)}}),e.handleEvent(d.Types.RESHARE_DESTINATION_UPDATED,function(t){e.selectedDestination=t.payload.destination_index})},addReshare:function(){var e=this;e.updatePageAction(!0);var t=0==e.selectedDestination,i=0==e.selectedDestination?null:e.candidate_tribe_ids[e.selectedDestination-1];e.serverCall("add_reshare").liveMutate().kwargs({share_to_feed:t,selected_tribe:i,oid:e.share_id}).success(function(t){t?(e.emitEvent({type:d.Types.RESHARE_ADDED,payload:{share_id:e.share_id},scope:d.scope.GLOBAL}),c.logEvent("AddReshare",o.getAnyElement(e)),n.send("dismiss")):e.updatePageAction(!1)}).except(function(t){e.updatePageAction(!1)}).error(function(t){e.updatePageAction(!1)}).send()},updatePageAction:function(e){var t=this;n.send("setPageAction",{rightTextButton:{title:t.submit_text,disabled:e}})}}),t.ReshareModal=l.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.selectedDestination=0,e.handleEvent(d.Types.RESHARE_DESTINATION_UPDATED,function(t){e.selectedDestination=t.payload.destination_index})},onSubmit:function(e){this.addReshare()},addReshare:function(){var e=this;e.setBusyState(!0);var t=0==e.selectedDestination,i=0==e.selectedDestination?null:e.candidate_tribe_ids[e.selectedDestination-1];e.serverCall("add_reshare").liveMutate().kwargs({share_to_feed:t,selected_tribe:i,oid:e.share_id}).success(function(t){t?(e.emitEvent({type:d.Types.RESHARE_ADDED,payload:{share_id:e.share_id},scope:d.scope.GLOBAL}),c.logEvent("AddReshare",o.getAnyElement(e)),e.close()):e.setBusyState(!1)}).except(function(t){e.setBusyState(!1)}).error(function(t){e.setBusyState(!1)}).send()},disableButton:function(e){var t=this;e?t.$id("@submit").removeClass("submit_button_disabled"):t.$id("@submit").addClass("submit_button_disabled")},setBusyState:function(e){this.busy=e,this.disableButton(!this.busy);this.busy?this.$id("@submit").html(this.busy_button_text):this.$id("@submit").html(this.done_text)}}),t.DeleteReshareModal=l.extend({onSubmit:function(e){this.deleteReshare()},deleteReshare:function(e){var t=this;t.emitEvent({type:d.Types.RESHARE_DELETED,payload:{reshare_id:t.reshare_id},scope:d.scope.GLOBAL}),t.serverCall("delete_reshare").kwargs({reshare_id:t.reshare_id}).success(function(){t.close()}).send()}}),t.TribePicker=s.extend({onLoad:function(){var e=this;e.tribePickerElement=e.$id("@tribe_picker").get(0);for(var t=e._toggleableItems(),i=0;i<t.length;i++)e.initCheckableTribeElement(t[i]);e.$id("@create_tribe_modal").on("click",function(t){t.preventDefault(),a.isNativeApp()?e.emitEvent({type:d.Types.RESHARE_OPEN_TRIBE_CREATION,payload:{},scope:d.scope.GLOBAL}):e.createModal("load_tribe_create_modal").show()})},_toggleableItems:function(){return this.tribePickerElement.getElementsByClassName("tribe_checkable_item")},toggleTribeCheckable:function(e){for(var t=this,i=t._toggleableItems(),n=0;n<i.length;n++)r(i[n]).removeClass("tribe_item_is_checked");r(i[e]).toggleClass("tribe_item_is_checked"),t.emitEvent({type:d.Types.RESHARE_DESTINATION_UPDATED,payload:{destination_index:e},scope:d.scope.GLOBAL})},initCheckableTribeElement:function(e){var t=this;r(e).on("click",function(i){var n=t.indexOfTribeElement(e);t.toggleTribeCheckable(n)})},indexOfTribeElement:function(e){for(var t=this.tribePickerElement.getElementsByClassName("tribe_checkable_item"),i=0;i<t.length;i++)if(t[i]===e)return i}})},"./unified_view/quora_share/sharer_list.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.QuoraSharerListModalLink=n.extend({onLoad:function(){var e=this;this.$id("@modal_link").click(function(t){t.preventDefault(),e.createModal("load_inner").appOnlyOptions({target:"discardable_modal"}).kwargs({object_id:e.object_id,content_type:e.content_type}).show()})}})},"./unified_view/quora_share/tribe.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/modal.js").ModalBase,s=i("./shared/events/index.js"),a=i("./unified_view/button/multi_state_button.js").MultiSelectMenu;t.QuoraShareTribePickerLink=n.extend({onLoad:function(){this.$id("@add_to_tribe_button").on("click",this.onTribePickerClick.bind(this))},onTribePickerClick:function(e){e.preventDefault();var t=this,i={selected_tribes:t.selected_tribes,share_to_feed:t.share_to_feed};t.createModal("open_tribe_picker_modal").kwargs(i).show()}}),t.QuoraShareTribePickerModal=o.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.candidatesSection=e.child("tribe_section"),e.selectedTribes=0,e.shareToFeed=!0,e.candidatesSection.onToggleCell(function(t){e.selectedTribes=[e.candidate_tribe_ids[t-1]],e.shareToFeed=0==t})},onSubmit:function(e){var t=this;t.emitEvent({type:s.Types.TRIBE_QUORA_SHARE_MODAL_CLOSED,payload:{selected_tribes:t.selectedTribes,share_to_feed:t.shareToFeed,refresh:!0},scope:s.scope.GLOBAL}),t.close()}}),t.QuoraShareTribeMultiPicker=a.extend({onSelect:function(e){for(var t=this,i=[e],n=0;n<this.states.length;n++){var o=i.indexOf(n)>=0;this.child("picker").child("states").$id("@state_"+n).toggleClass("hidden",!o)}t.candidate_tribe_ids&&0!=t.candidate_tribe_ids[0]&&t.candidate_tribe_ids.unshift(0),t.overflowMenu.hideMenu(),t.emitEvent({type:s.Types.TRIBE_QUORA_SHARE_MODAL_CLOSED,payload:{selected_tribes:0==e?null:[t.candidate_tribe_ids[e]],share_to_feed:0==e,refresh:!1},scope:s.scope.GLOBAL})},getLinkElem:function(){return this.child("picker").$id("@picker_button")},close:function(e){}})},"./unified_view/reauth.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./unified_view/modal.js").ModalBase;t.ReauthWrapper=n.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.WEBNODE_RPC_EXCEPTION,function(t){"reauth_required"==t.payload.exceptionType&&e.load_reauth(t.payload.requestId)})},load_reauth:function(e){return this.createModal("load_reauth_modal").kwargs({request_id:e}).show(),!1}}),t.ReauthModal=s.extend({onSubmit:function(e){if(!this.submit_disabled){var t=this,i=t._super,n=function(n){n.login_success?(t.emitEvent({type:o.Types.WEBNODE_RPC_RETRY_FAILED,scope:o.scope.GLOBAL,payload:{requestId:t.request_id}}),i.call(t,e)):t.$id("@password").val("")},s=function(){t.serverCall("load_password_leaked_dialog").contentFor(t.$id("@email_password_leak_error")).success(function(){t.$id("@normal_subtitle").hide(),t.$id("@email_password_leak_error").removeClass("hidden"),t.submit_disabled=!0}).send()},a=function(){t.serverCall("load_force_password_reset_dialog").contentFor(t.$id("@email_password_leak_error")).success(function(){t.$id("@normal_subtitle").hide(),t.$id("@email_password_leak_error").removeClass("hidden"),t.submit_disabled=!0}).send()},r={password:this.$id("@password").val()};this.serverCall("verify").kwargs(r).success(n).except("password_leaked",s).except("force_password_reset",a).send()}},onLoad:function(){this._super.apply(this,arguments);var e=this;this.$id("@password").focus(),this.$id("@password").on("keypress",function(t){13==t.keyCode&&e.onSubmit()}),this.$id("@create_password").on("click",this.sendResetPasswordEmail.bind(this)),this.$id("@forgot_password").on("click",this.sendResetPasswordEmail.bind(this))},sendResetPasswordEmail:function(e){e.preventDefault(),this.serverCall("send_reset_password_email").send()}})},"./unified_view/repeat_offender.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/onload.js");t.RepeatOffendersModalWrapper=n.extend({onLoad:function(){var e=this;o.execAfterLoad(function(){e.createModal("load_repeat_offender_modal").kwargs({action_type:e.action_type}).webOnlyOptions({closeOnBackgroundClick:!1,closeOnEscape:!1}).onSubmit(function(){e.serverCall("mark_modal_as_read").kwargs({action_id:e.action_id}).send()}).show()})}})},"./unified_view/selector/_selector.js":function(e,t,i){var n,o,s,a,r=i("./shared/core/webnode.js"),d=i("./shared/jquery.js"),l=i("./shared/window_manager.js"),c=i("./third_party/autosize.js"),u=i("./shared/core/component.js"),h=u.Component;a=i("./webnode2.js"),s=i("./simscroll.js"),t.Selector=h.extend({onLoad:function(){function e(e){if("keydown"===e.type){var t=n.child("results");if(t){var i=t.getSelectedResult();null===i&&n.allow_no_selection?n.submit():i&&n.onResultSelected(i,!1,t.$selectedItemElem)}else n.submit()}}function t(t){if(n.shouldSimScroll&&"keydown"==t.type){if(!n.query&&s.maybeSimulateScroll(t))return!1;if(!n.query&&39==t.which)return void n.$input.blur()}switch(t.which){case 13:t.preventDefault(),e(t);break;case 27:n.selectorFocusOutHandler();break;case 38:n.handleUpDownArrowKey(t,-1);break;case 40:n.handleUpDownArrowKey(t,1)}}function i(e){var t=n.$input.val();t!==n.query&&n._setQuery(t)}var n=this;n._busy=!1,n._resultsLastUpdated=Date.now(),n.$input=n.$id("@input"),n.$results_container=n.$id("@results_container"),n.$results=n.$id("@results"),n.$empty_input_prompt=n.$id("@empty_input_prompt"),n.$spinner=n.$id("@spinner"),n.$wrapper=n.$id("@wrapper"),n.$underlay=n.$id("@selector_underlay"),n.shouldSimScroll=!1,n.hasAutoSized=!1,n.query=n.$input.val(),n.has_updated_result=!1,n.inputIsFocused=!1,n.force_below=!1,n.$input.on("input",i).change(i).keydown(t).keyup(t).focus(n.inputFocusHandler.bind(n)).blur(n.inputBlurHandler.bind(n)),n.$wrapper.focusout(n.wrapperFocusoutHandler.bind(n)).focusin(n.wrapperFocusinHandler.bind(n))},handleUpDownArrowKey:function(e,t){if(e.preventDefault(),"keydown"===e.type){var i=this.child("results");i&&i.moveSelection(t)}},inputFocusHandler:function(){this.inputIsFocused=!0,this.has_updated_result||(this.has_updated_result=!0,this.updateResults()),this.is_textarea&&!this.hasAutoSized&&(c(this.$input),this.hasAutoSized=!0),this.showResults(!0),this.length_limit&&this.child("counter").show()},inputBlurHandler:function(){this.inputIsFocused=!1,this.length_limit&&this.child("counter").hide()},selectorFocusOutHandler:function(){this.showResults(!1),this.$input.blur()},wrapperFocusoutHandler:function(e){var t=this.$wrapper.get(0);if(t&&t.contains(e.relatedTarget))return!1;this.showResults(!1)},wrapperFocusinHandler:function(){this.focus()},setQuery:function(e){var t=this.$input[0].selectionStart,i=this.$input[0].selectionEnd;this.$input.val(e),this.$input[0].setSelectionRange(t,i),this._setQuery(e)},queryDidChange:function(){},resultsDidChange:function(){},onResultSelected:function(e,t,i){t=t||!1,this.beforeSelectResultCallback&&this.beforeSelectResultCallback(e,t,i),this.resultWasSelected(e,t,i),this.afterResultWasSelectedCallback&&this.afterResultWasSelectedCallback(e,t,i)},resultWasSelected:function(e,t,i){},submit:function(){},shouldShowEmptyInputPrompt:function(){return!(this.show_results_for_empty_query||this.query&&0!==this.query.trim().length)},adjustResultContainerContent:function(){this.shouldShowEmptyInputPrompt()?(this.$results.addClass("hidden"),this.$empty_input_prompt.removeClass("hidden")):(this.$results.removeClass("hidden"),this.$empty_input_prompt.addClass("hidden")),this.preventOverflow()},showResults:function(e){e?(this.$results_container.removeClass("hidden"),this.adjustResultContainerContent()):(this.$results_container.addClass("hidden"),this._needToPreventOverflow=!0)},preventOverflow:function(){if(!this.$results_container.hasClass("hidden")&&this._needToPreventOverflow){this._needToPreventOverflow=!1,this.$results_container.removeClass("inverted"),this.$results_container.css({"overflow-y":"auto",height:"auto"});var e,t=this.$results_container.offset().top,i=this.$results_container.outerHeight(!0),n=t+i,o=d(window).scrollTop()+l.headerOffset,s=d(window).scrollTop()+d(window).height(),a=s-t,r=t-o;r>500&&a<200&&!this.force_below?(this.$results_container.addClass("inverted"),e=o-this.$results_container.offset().top):e=n-s,e>0&&this.$results_container.css({"overflow-y":"scroll",height:i-e})}},getExtraKwargs:function(){return{}},updateResults:function(){var e,t,i,n=this;if(n.shouldShowEmptyInputPrompt())return this._needToPreventOverflow=!0,void n.adjustResultContainerContent();if(!n.isBusy()){var o=Date.now();e={query:n.query,parent_cid:n.cid,parent_domid:u.getLiveParent(n.cid)};var s=n.$results.get(0),a=u.getLiveChildren(n.cid),r=a.filter(function(e){return s.contains(document.getElementById(e))});e.domids_to_remove=JSON.stringify(r),t=n.getExtraKwargs();for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.setBusy(!0),n.serverCall("results_content_for").kwargs(e).success(function(e){n.maybeUpdateResults(e,o),n.resultsServerCallHandler()}).except(function(){n.resultsServerCallHandler(!0)}).error(function(){n.resultsServerCallHandler(!0)}).send()}},maybeUpdateResults:function(e,t){if(t>this._resultsLastUpdated){this._resultsLastUpdated=t;var i=this.$results.get(0);a.forgetContents(d(i)),r.setContent(d(i),e),this._needToPreventOverflow=!0}},resultsServerCallHandler:function(e){this.setBusy(!1),this.$input.is(":focus")&&""!==this.$input.val()&&this.showResults(!0),e||this.child("results").query===this.$input.val()||this.updateResults()},isBusy:function(){return this._busy},setBusy:function(e){function t(){return!i._busy&&i._spinner}var i=this;if(i._busy=e,i._lastBusyUpdate=Date.now(),i._busy&&!i._spinner){i.$spinner.removeClass("hidden"),i._spinner=!0;var n=i._lastBusyUpdate;setTimeout(function(){i._busy&&i._lastBusyUpdate===n&&i.resultsServerCallHandler.call(i)},5e3)}else t()&&setTimeout(function(){t()&&(i.$spinner.addClass("hidden"),i._spinner=null)},100)},focus:function(){var e=this.$id("@input");!this.inputIsFocused&&e&&e.focus()},blur:function(){this.$id("@input").blur()},_setQuery:function(e){this.query=e,this.length_limit&&this.child("counter").updateCounter(e.length),this.queryDidChange(),this.updateResults()},listenToQueryChange:function(){var e=this;if(e.should_inline){var t=e.$id("@input");t.on("input",function(){e._setQuery(t.val())})}else n.registerMessageHandler("searchQueryChanged",function(t){e._setQuery(t.query)})},showQueryInput:function(){this.should_inline||o.send("showSearchInput",{searchPlaceholderText:this.placeholder_text||"",searchFocus:!!this.should_autofocus})},hideQueryInput:function(){this.should_inline||o.send("hideSearchInput")},clearQueryInput:function(){this.should_inline?this.$id("@input").val(""):o.send("clearWebViewSearchBar")},fadeOutResults:function(){this.$results.addClass("is_loading")},fadeInResults:function(){this.$results.removeClass("is_loading")}}),t.MultiSelector=t.Selector.extend({onLoad:function(){this._super.apply(this,arguments),this.saved_results=this.saved_results||[]},getExtraKwargs:function(){return{saved_results:this.saved_results}},resultWasSelected:function(e,t,i){this.saved_results.push(e),this.showResults(!1),this.setQuery(""),this.updateDisplayedResults(),this.onSavedResultsChanged()},onSavedResultsChanged:function(){},remove:function(e){this.saved_results.splice(e,1),this.updateDisplayedResults(),this.onSavedResultsChanged()},clear:function(){this.saved_results=[],this.updateDisplayedResults(),this.onSavedResultsChanged()},updateDisplayedResults:function(){var e=this;e.serverCall("saved_results_content_for").contentFor(e.$id("@saved_results"),{useLoadingSpinner:!1}).args(e.saved_results).send()}}),t.MultiSelectorSavedResultList=h.extend({onLoad:function(){for(var e=0;e<this.num_results;e++)this.attachRemoveClickHandler(e)},attachRemoveClickHandler:function(e){var t=this;t.$id("@remove"+e).click(function(){return t.parent().remove(e),!1})}}),t.NavigateToResultUrlSelectorMixin={resultWasSelected:function(e,t){this._super.apply(this,arguments),e.data&&e.data.url&&(t?l.navigateTo(e.data.url,"present"):l.navigateTo(e.data.url))}},t.SelectorResults=h.extend({onLoad:function(){var e=this;e.allow_no_selection?e.setSelection(-1):e.setSelection(0),e.$id("@wrapper").on("mouseover",".selector_result",function(t){var i=e.getIndexFromResultElementID(this.id);e.setSelection(i)}).on("mousedown",".selector_result",function(e){e.preventDefault()}).on("click",".selector_result",function(t){var i=e.getIndexFromResultElementID(this.id);e.setSelection(i);var n=e.getSelectedResult(),o=t.metaKey||t.ctrlKey;e.parent().onResultSelected(n,o,e.$selectedItemElem)}),e.allow_no_selection&&e.$id("@wrapper").mouseleave(function(t){e.setSelection(-1)}),e.parent().resultsDidChange!=undefined&&e.parent().resultsDidChange()},listenToResultClick:function(){var e=this,t=function(e){var t=e.split("_");return parseInt(t[t.length-1])},i=this.$id("@wrapper").get(0);if(i)for(var n=i.getElementsByClassName("selector_result"),o=function(i){return function(n){var o=e.parent();o.allow_open_new_link||n.preventDefault();var s=t(i.id),a=e.results[s];o.onResultSelected(a,d(i))}},s=0;s<n.length;s+=1){var a=n[s];d(a).on("click",o(a))}},getSelectedResult:function(){return-1===this.selectedIndex?null:!this.numResults&&this.allow_no_selection?null:this.results[this.selectedIndex]},setSelection:function(e){if(this.numResults&&!isNaN(parseInt(e)))if(-1===this.selectedIndex||isNaN(parseInt(this.selectedIndex))||this.$id("@result_"+this.selectedIndex).removeClass("selector_highlighted"),(this.allow_no_selection&&e<-1||!this.allow_no_selection&&e<0)&&(e=this.numResults-1),e>this.numResults-1&&(e=this.allow_no_selection?-1:0),-1===e)this.selectedIndex=e,this.$selectedItemElem=null;else{var t=this.$id("@result_"+e);t&&(this.$selectedItemElem=t,this.$selectedItemElem.addClass("selector_highlighted"),this.selectedIndex=e)}},moveSelection:function(e){var t=this.selectedIndex+e;this.setSelection(t)},getIndexFromResultElementID:function(e){var t=e.split("_");return parseInt(t[t.length-1])}}),t.WithServerCallMessageMixin=t.Selector.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.$serverMessage=e.$id("@server_message"),e.pendingServerCallRequest=null,e.serverCallBusy=!1},queryDidChange:function(){this._super.apply(this,arguments),this.showServerMessage(!1)},makeServerCall:function(e){this.pendingServerCallRequest=e,this.isBusy()||this.doServerCall()},hasPendingServerCall:function(){return null!==this.pendingServerCallRequest||this.serverCallBusy},resultsServerCallHandler:function(){var e=this;null!==e.pendingServerCallRequest?e.doServerCall():(e._super.apply(e,arguments),e.showServerMessage(!1))},doServerCall:function(){var e=this;e.setBusy(!0),e.serverCallBusy=!0,e.showServerMessage(!1);var t=function(t,i){e.updateServerMessage(t,i)&&e.showServerMessage(!0),e.serverCallBusy=!1,e.setBusy(!1)};e.pendingServerCallRequest.success(function(e){t(!0,e)}).except(function(e){t(!1,e)}).error(function(){t(!1)}).send(),e.pendingServerCallRequest=null},updateServerMessage:function(e,t){return!1},showServerMessage:function(e){e?this.$serverMessage.removeClass("hidden"):this.$serverMessage.addClass("hidden")}})},"./unified_view/selector/board.js":function(e,t,i){var n=i("./unified_view/selector/_selector.js").Selector,o=i("./unified_view/selector/search_utils.js").SelectorWithTypeaheadLogMixin;t.BoardSelector=n.extend(o).extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.$input_wrapper=e.$id("@input_wrapper"),e.$selected_board_wrapper=e.$id("@selected_board_wrapper"),e.$new_board_name_wrapper=e.$id("@new_board_name_wrapper"),e.$new_board_name=e.$id("@new_board_name"),e.$change_create_board=e.$id("@change_create_board");var t=function(t){t.preventDefault(),t.stopPropagation(),e.$change_create_board.addClass("hidden"),e.clear(),e.$input.focus()};e.$change_create_board.click(t)},shouldTypeaheadLog:function(e){var t=this.child("results");return!!e&&"board"===e.ty&&!!t.typeahead_log_data},resultWasSelected:function(e,t){this._super.apply(this,arguments);var i=this;"board"===e.ty?(i.selected_board={name:null,bid:e.data.bid,is_submission:!!e.data.is_submission},i.serverCall("update_selected_board").kwargs({bid:e.data.bid}).contentFor(i.$selected_board_wrapper).success(function(){i.$wrapper.focusout(),i.$input_wrapper.addClass("hidden"),i.$new_board_name_wrapper.addClass("hidden"),i.$selected_board_wrapper.removeClass("hidden"),i.$change_create_board.removeClass("hidden")}).send()):"additem"===e.ty?(this.selected_board={name:i.query,bid:null,is_submission:!1},i.$new_board_name.text(i.query),i.$wrapper.focusout(),i.$input_wrapper.addClass("hidden"),i.$selected_board_wrapper.addClass("hidden"),i.$new_board_name_wrapper.removeClass("hidden"),i.$change_create_board.removeClass("hidden")):console.assert(!1)},clear:function(){this.setQuery(""),this.$input_wrapper.removeClass("hidden"),this.$selected_board_wrapper.addClass("hidden"),this.$selected_board_wrapper.empty(),this.$new_board_name_wrapper.addClass("hidden"),this.$new_board_name.empty(),this.selected_board=null}})},"./unified_view/selector/link.js":function(e,t,i){var n=i("./unified_view/selector/_selector.js").Selector,o=i("./unified_view/selector/search_utils.js").SelectorWithTypeaheadLogMixin;t.LinkSelector=n.extend(o).extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@input").keydown(function(){if(e._escKeyDown)return e._escKeyDown.apply(this,arguments)}),e.$id("@input").keyup(function(t){if(e._keyUp)return e._keyUp.apply(this,arguments)})},setEscKeyDown:function(e){this._escKeyDown=e},setKeyUp:function(e){this._keyUp=e},resultWasSelected:function(e,t){this._super.apply(this,arguments)}})},"./unified_view/selector/search_utils.js":function(e,t,i){var n=i("./shared/log_sender.js");t.SelectorWithTypeaheadLogMixin={shouldTypeaheadLog:function(e){return!0},resultWasSelected:function(e,t){var i=this.child("results");if(this.shouldTypeaheadLog(e)){var o={data:i.typeahead_log_data,click_index:i.selectedIndex};parseInt(o.click_index)===o.click_index&&o.click_index>=0&&"undefined"!=typeof o.data&&n.log("typeahead",{message:o})}this._super.apply(this,arguments)}}},"./unified_view/selector/tribe.js":function(e,t,i){var n=i("./unified_view/selector/_selector.js").Selector,o=i("./unified_view/selector/search_utils.js").SelectorWithTypeaheadLogMixin;t.TribeSelector=n.extend(o).extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.$input_wrapper=e.$id("@input_wrapper"),e.$selected_tribe_wrapper=e.$id("@selected_tribe_wrapper"),e.$change_tribe=e.$id("@change_tribe");var t=function(t){t.preventDefault(),t.stopPropagation(),e.$change_tribe.addClass("hidden"),e.$selected_tribe_wrapper.addClass("hidden"),e.clear(),e.$input.focus()};e.$change_tribe.click(t)},resultWasSelected:function(e,t){this._super.apply(this,arguments);var i=this;"tribe"===e.ty&&(i.selected_tribe={tribe_id:e.data.tribe_id},i.serverCall("update_selected_tribe").kwargs({tribe_id:e.data.tribe_id}).contentFor(i.$selected_tribe_wrapper).success(function(){i.$wrapper.focusout(),i.$input_wrapper.addClass("hidden"),i.$selected_tribe_wrapper.removeClass("hidden"),i.$change_tribe.removeClass("hidden")}).send())},clear:function(){this.setQuery(""),this.$input_wrapper.removeClass("hidden"),this.$selected_tribe_wrapper.empty(),this.selected_tribe=null}})},"./unified_view/service_worker.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/onload.js"),s=i("./shared/log_sender.js"),a=i("./shared/events/index.js");t.Installer=n.extend({onLoad:function(){o.execAfterLoadDelayed(this.install.bind(this))},install:function(){var e=this;"serviceWorker"in window.navigator&&window.navigator.serviceWorker.register("/sw.js").then(function(t){e.emitEvent({type:a.Types.SERVICE_WORKER_REGISTERED,payload:{}})})["catch"](function(e){s.log("service_worker_errors",{step:"register",success:!1,error:e.toString()},{scribeOnly:!0})})}})},"./unified_view/settings/languages.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./unified_view/modal.js").ModalBase,r=i("./shared/client.js"),d=i("./shared/window_manager.js");t.LeaveModalLink=s.extend({onLoad:function(){var e=this;this.$id("@leave_link").on("click",function(){e.openModal()})},openModal:function(){var e=this;e.createModal("load_modal").kwargs({nid:e.nid}).show()}}),t.MakeNetworkDefaultLink=s.extend({onLoad:function(){var e=this;e.$id("@make_default_link").on("click",function(){e.serverCall("set_default_network").liveMutate().send()})}}),t.LeaveNetworkModal=a.extend({onLoad:function(){this._super.apply(this,arguments)},onSubmit:function(e){var t=this;t.redirectUrl&&(r.isNativeApp()?n.updateConfig(t.redirectSubdomain,t.redirectLanguage):d.navigateTo(t.redirectUrl)),r.isNativeApp()&&o.send("updateSiloSwitcher",t.siloSwitcherData),t.serverCall("leave_network").kwargs({nid:t.nid}).success(function(){t.redirectUrl||t.close()}).liveMutate().send()}})},"./unified_view/settings/password.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/window_manager.js"),a=i("./shared/client.js"),r=i("./shared/core/rpc.js");t.ResetPasswordDialog=o.extend({onLoad:function(){var e=this;this.hasActiveRequest=!1,e.$id("@reset_email_submit").click(function(){var t=e.$id("@email_input").val();return!!t&&(e.emailRequest(t),!1)}),e.$id("@reset_password_submit").click(function(){var t=e.$id("@reset_password_code").val(),i=e.$id("@new_password").val(),n=e.$id("@confirm_password").val(),o=e.$id("@password_confirmation_mismatch");return e.$id("@reset_password_error").addClass("hidden"),i!==n?(o.removeClass("hidden"),!1):(o.addClass("hidden"),!!i&&(e.passwordRequest(t,i),!1))}),s.replaceURL("/settings/reset_password")},emailRequest:function(e){var t=this;if(!t.hasActiveRequest)return t.hasActiveRequest=!0,r.rpc("/settings/send_reset_password_email_POST").kwargs({email:e}).success(function(){t.hasActiveRequest=!1,t.$id("@email_input").val(""),t.$id("@reset_email_conf").removeClass("hidden"),t.$id("@reset_email_form").addClass("hidden")}).error(function(){t.hasActiveRequest=!1}).send(),!1},passwordRequest:function(e,t){var i=this;if(!i.hasActiveRequest)return i.hasActiveRequest=!0,r.rpc("/settings/reset_password_POST").kwargs({code:e,new_password:t}).success(function(e){var t=e[0],o=e[1];t?(i.hasActiveRequest=!1,a.isNativeApp()?n.send("dismiss"):s.navigateTo("/?__pmsg__=password_changed")):(i.$id("@reset_password_error").removeClass("hidden"),i.$id("@reset_password_error").text(o))}).error(function(){i.hasActiveRequest=!1}).send(),!1}})},"./unified_view/settings/privacy.js":function(e,t,i){var n,o,s=i("./shared/core/component.js").Component,a=i("./w2.modal.js").ModalWithCallBacks,r=s.extend({onLoad:function(e){this.desktopOnLoad(e)},desktopOnLoad:function(){var e=this;this.$id("@check_reauth").on("click",function(t){e.serverCall("check_reauth").success(function(){e.showControl()}).send(),t.preventDefault()})},showControl:function(){this.$id("@check_reauth").addClass("hidden"),this.$id("@option_control").removeClass("hidden")},showAlert:function(e){var t=this;n.showAlert({title:t.dialog_title,message:t.dialog_message,callback:function(t){0===t.buttonIndex&&e&&e()},cancelButtonTitle:t.dialog_button_title,otherButtonTitles:[o.cancel]})}});t.DeactivateAccountCell=r.extend({desktopOnLoad:function(){this._super.apply(this,arguments);var e=this;this.$id("@deactivate").on("click",function(){var t=new a(e,{});t.onSubmitCallBack(function(){e.deactivateAccount()}),t.load("load_deactivate_account_modal")})},mobileOnLoad:function(){var e=this;this.$id("@deactivate").on("click",function(){e.showAlert(e.deactivateAccount.bind(e))})},deactivateAccount:function(){this.serverCall("deactivate_account").success(function(){}).send()}}),t.DeleteAccountCell=r.extend({desktopOnLoad:function(){this._super.apply(this,arguments);var e=this;this.$id("@delete").on("click",function(){var t=new a(e,{});t.onSubmitCallBack(function(){e.deleteAccount()}),t.load("load_delete_account_modal")})},mobileOnLoad:function(){var e=this;this.$id("@delete").on("click",function(){e.showAlert(e.deleteAccount.bind(e))})},deleteAccount:function(){this.serverCall("delete_account").success(function(){}).send()}})},"./unified_view/sharethis.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.SharethisImageTracker=n.extend({onLoad:function(){var e=this;e.image_source&&setTimeout(function(){e.delayedImageTracker()},500)},delayedImageTracker:function(){(new Image).src=this.image_source}})},"./unified_view/signup/_signup.js":function(e,t,i){function n(e){if(!e)return"";e=e.trim();var t=e.split(/\s+/);if(!t.length)return"";var i=t[0],n=i.length;return"."===i.charAt(n-1)&&n--,t.length<=1||n>1?i:t[0]+" "+t[1]}function o(e){if(!e)return"";var t=n(e),i=t.length,o=t.substring(i+1);return o=o.trim()}var s,a,r,d,l=i("./shared/core/component.js").Component,c=i("./shared/w2.context.js"),u=i("./shared/events/index.js"),h=i("./shared/recaptcha.js"),p=c.CaptchaInput,f=i("./settings.js"),_=(f.isLoggedIn,i("./shared/window_manager.js")),m=null,g=i("./shared/action_log.js").ActionableComponent,v=i("./shared/action_log.js").logSecondaryAction,w=i("./shared/dom.js"),b=i("./shared/siteuri.js"),y=i("./shared/onload.js"),C=i("./unified_view/signup/_signup.js"),k=i("./shared/jquery.js"),S=i("./unified_view/modal.js").ModalBase;t.SignupActionableComponent=g;var E=t.SignupContext=c.Context.extend({initialProperties:function(){return{googleOauthData:null,facebookOauthData:null,twitterOauthData:null,emailSignupData:null,phoneNumber:null,phoneNumberCountry:null,captchaResponse:"",requiresCaptcha:!1,validators:{},emailForm:null,emailSubmitButton:null,loginData:null,showEmailSignup:!1,facebookSignupFlowData:null}}}),x=t.BaseSignupForm=g.extend({contextConstructor:function(){return E},onLoad:function(){this._super.apply(this,arguments),this.signupContext=this.getContext(E),this.signupContext.on("googleOauthData",this.onGoogleAccountConnected.bind(this)),this.signupContext.on("facebookOauthData",this.onFacebookAccountConnected.bind(this)),this.signupContext.on("twitterOauthData",this.onTwitterAccountConnected.bind(this)),this.signupContext.on("emailSignupData",this.onEmailSignupFormFilled.bind(this)),this.loginInProgress=!1,this.oauth_error_response&&this.handleServerCallResponse(this.oauth_error_response)},showLoading:function(){this.emitEvent({type:u.Types.LIVENODE_LOADING_SPINNER,payload:{show:!0}})},hideLoading:function(){this.emitEvent({type:u.Types.LIVENODE_LOADING_SPINNER,payload:{show:!1}})},setRedirectCookie:function(e){if(e.indexOf("#")>0&&(e=e.substring(0,e.indexOf("#"))),e.indexOf("?")>0){var t=e.split("?"),i=t[1].split("&"),n=["success","access_token","provider","force_dialog"];i=i.filter(function(e){var t=e.split("=")[0];return!n.includes(t)}),e=t[0]+"?"+i.join("&")}d.setCookie("login_redirect_url",e,{expires:1})},clearRedirectCookie:function(){d.setCookie("login_redirect_url")},logSignupToMobileApp:function(e,t){e.success&&e.is_login,1},handleServerCallResponse:function(e){if(this.hideLoading(),this.loginInProgress=!1,e.success){if("oauth_redirect"==e.next_action)return void(window.location=e.next_url);switch(e.next_action){case"redirect":_.navigateTo(e.next_url);break;case"refresh":_.reload()}}else if(e.isMissingFbInfo&&this.signupContext.set("facebookSignupFlowData",e.facebookOauthData),e.next_url&&_.navigateTo(e.next_url),e.pmsg&&this.serverCall("show_error_as_pmsg").kwargs({error_message:e.pmsg}).send(),e.error_message,"set_password_modal"===e.next_action){var t=e.state_token;y.execAfterLoad(function(){this.createModal("load_unconfirmed_set_password_modal").kwargs({state_token:t}).show()}.bind(this))}},maybeSwitchNativeSilo:function(e){e.subdomain&&e.language?s.updateConfig(e.subdomain,e.language):this.subdomain&&this.language&&s.updateConfig(this.subdomain,this.language)},logSignupSuccessAction:function(e){v(e,this.impression_target)},onGoogleAccountConnected:function(e,t){if(t){if(this.loginInProgress)return;this.loginInProgress=!0;var i={google_access_token:t.access_token,google_auth_code_info:t.auth_code_info||!1,use_test_signup:t.use_test_signup||!1};t.code&&(i.google_auth_code_info={code:t.code,type:"web_offline"});var n=function(e){this.handleServerCallResponse(e),this.logSignupToMobileApp(e,"google"),this.remove_nux_double_redirect,e.success||(this.loginInProgress=!1,t.onFailure&&t.onFailure(e))};this.serverCall("on_google_account_connected").kwargs(i).success(n.bind(this)).error(function(){this.loginInProgress=!1}.bind(this)).send(),this.showLoading()}},onFacebookAccountConnected:function(e,t){if(t){if(this.loginInProgress)return;this.loginInProgress=!0;var i={fb_uid:t.userID,fb_access_token:t.accessToken||t.access_token,expires:t.expiresIn,use_test_signup:t.use_test_signup||!1},n=function(e){this.handleServerCallResponse(e),this.logSignupToMobileApp(e,"facebook"),this.remove_nux_double_redirect,e.success||(this.loginInProgress=!1,t.onFailure&&t.onFailure(e))};this.serverCall("on_facebook_account_connected").kwargs(i).success(n.bind(this)).error(function(){this.loginInProgress=!1}.bind(this)).send(),this.showLoading()}},onTwitterAccountConnected:function(e,t){if(t){if(this.loginInProgress)return;this.loginInProgress=!0;var i={twitter_access_token:t.access_token,use_test_signup:t.use_test_signup||!1},n=function(e){this.handleServerCallResponse(e),this.logSignupToMobileApp(e,"twitter"),this.remove_nux_double_redirect,e.success||(this.loginInProgress=!1,t.onFailure&&t.onFailure(e))};this.serverCall("on_twitter_account_connected").kwargs(i).success(n.bind(this)).error(function(){this.loginInProgress=!1}.bind(this)).send(),this.showLoading()}},onEmailSignupFormFilled:function(e,t){function i(e){if(this.handleServerCallResponse(e),this.logSignupToMobileApp(e,"email"),e.success);else this.loginInProgress=!1,t.onFailure&&t.onFailure(),this.signupContext.get("requiresCaptcha")&&h.onInit(function(){grecaptcha.reset()})}if(!this.loginInProgress){this.$id("@email_password_leak_error").addClass("hidden"),this.loginInProgress=!0;var n=t.first_name,o=t.last_name,s=t.email,a=t.password,r=this.signupContext.get("captchaResponse"),d=this.signupContext.get("phoneNumber"),l=this.signupContext.get("phoneNumberCountry"),c=l+d;this.serverCall("on_try_email_signup").kwargs({first_name:n,last_name:o,email:s,password:a,phone_number:c,phone_number_country:l,"g-recaptcha-response":r}).success(i.bind(this)).except("password_leaked",this.passwordLeakHandler.bind(this,s)).except("force_password_reset",this.forcePasswordResetHandler.bind(this,s)).error(function(){this.loginInProgress=!1}.bind(this)).send(),this.showLoading()}},passwordLeakHandler:function(e){this.loginInProgress=!1,this.hideLoading();var t=this;this.serverCall("load_password_leaked_dialog").kwargs({email:e}).contentFor(this.$id("@email_password_leak_error")).success(function(){t.$id("@email_password_leak_error").removeClass("hidden")}).send()},forcePasswordResetHandler:function(e){this.loginInProgress=!1,this.hideLoading();var t=this;this.serverCall("load_force_password_reset_dialog").kwargs({email:e}).contentFor(this.$id("@email_password_leak_error")).success(function(){t.$id("@email_password_leak_error").removeClass("hidden")}).send()}});t.HomePageSignupForm=x.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.$id("@continue_with_email").on("click",function(){e.toggleSignupColumn(!0)}),this.$id("@cancel").on("click",function(){e.toggleSignupColumn(!1)}),this.signupContext.set("emailForm",this.$id("@home_page_email_signup_form")),this.signupContext.set("emailSubmitButton",this.$id("@submit")),this.signupContext.on("loginData",function(e,t){t&&(this.serverCall("record_no_account_found_link").send(),this.toggleSignupColumn(!0))}.bind(this)),this.signupContext.on("facebookSignupFlowData",function(){this.toggleSignupColumn(!0)}.bind(this)),this.signupContext.get("facebookSignupFlowData")&&this.toggleSignupColumn(!0)},toggleSignupColumn:function(e){e?(this.$id("@toggled_signup_column").removeClass("hidden"),this.$id("@initial_signup_column").addClass("hidden")):(this.$id("@toggled_signup_column").addClass("hidden"),this.$id("@initial_signup_column").removeClass("hidden"))}}),t.DialogSignupFormMobile=x.extend({onLoad:function(){if(this._super.apply(this,arguments),this.$id("@login .normal_login .inline_login_form").removeClass("hidden"),this.dismissible){var e=m.hideSignupWall.bind(m);this.$id("@dismiss_button").on("click",e);var t="@outer_modal".replace("@",this._my());this.$id("@outer_modal").on("click",function(i){i.target.id===t&&e()})}}}),t.DialogSignupFormWeb=x.extend({onLoad:function(){var e=this;if(this._super.apply(this,arguments),this.signupContext.set("emailSubmitButton",this.$id("@submit")),this.$id("@login .normal_login .inline_login_form").removeClass("hidden"),this.$id("@bottom_section .login_link").on("click",function(t){e.toggleToState("login_state"),t.preventDefault()}),this.$id("@bottom_section .email_signup_link").on("click",function(t){e.toggleToState("email_signup_state"),t.preventDefault()}),this.$id("@bottom_section .social_connect_link").on("click",function(t){e.toggleToState("social_signup_state"),t.preventDefault()}),this.dismissible){var t=m.hideSignupWall.bind(m);this.$id("@bottom_section .dismiss_link").on("click",t),this.$id("@close").on("click",t),this.$id("@outer_form").on("click",function(e){var i="@outer_form".replace("@",this._my());e.target.id===i&&t()}.bind(this))}this.signupContext.on("loginData",function(e,t){t&&(this.serverCall("record_no_account_found_link").send(),this.toggleToState("email_signup_state"))}.bind(this)),this.signupContext.on("facebookSignupFlowData",function(){this.toggleToState("email_signup_state")}.bind(this)),this.signupContext.get("facebookSignupFlowData")&&this.toggleToState("email_signup_state")},toggleToState:function(e){if(e!==this.current_state){var t=this.state_toggle_id_map[e];this.state_toggle_id_map[this.current_state].forEach(function(e){this.$id(e).addClass("hidden")}.bind(this)),t.forEach(function(e){this.$id(e).removeClass("hidden")}.bind(this)),this.current_state=e}}}),t.SignupCaptcha=l.extend({contextConstructor:function(){return p},onLoad:function(){this.signupContext=this.getContext(E),this.captchaContext=this.getContext(p),this.captchaContext.on("captchaResponse",this.onCaptchaResponseChanged.bind(this)),this.signupContext.set("requiresCaptcha",!0)},onCaptchaResponseChanged:function(e,t){this.signupContext.set("captchaResponse",t)}}),t.EmailSignupFormWeb=l.extend({onLoad:function(){this.signupContext=this.getContext(E),this.signupContext.on("loginData",this.onLoginDataReceived.bind(this)),this.registerFormChecks(),this.phone_number_enabled?(this.setCountryCodeText(),this.signupContext.get("emailSubmitButton").on("click",this.tryPhoneCode.bind(this))):this.signupContext.get("emailSubmitButton").on("click",this.onSubmitClicked.bind(this));var e=this.signupContext.get("emailForm");e&&e.on("submit",this.onFormSubmit.bind(this)),this.signupContext.on("facebookSignupFlowData",function(e,t){this.onFacebookSignupFlowDataReceived(t)}.bind(this));var t=this.signupContext.get("facebookSignupFlowData");t&&this.onFacebookSignupFlowDataReceived(t)},setCountryCodeText:function(){var e=this,t=this.countries;k("select > option").each(function(){var i=e.$id("@country_code option:selected").text(),n=this.text,o=this.value;if(i==n)e.$id("@country_code option:selected").text(o);else for(var s in t){var a=t[s],r=a[0],d=a[1];n==d&&e.$id('@country_code option[value="'+n+'"]').text(r)}})},onFacebookSignupFlowDataReceived:function(e){if(this.intermediate_facebook_data=e,e.name){var t=n(e.name),i=o(e.name);this.$id("@first_name").val(t),this.$id("@last_name").val(i)}e.email&&this.$id("@email").val(e.email)},onLoginDataReceived:function(e,t){t&&(this.$id("@email").val(t.email),this.$id("@password").val(t.password))},registerFormChecks:function(){var e=this,t=this.maybeChangeEmailSubmitButton.bind(this);this.signupContext.on("captchaResponse",t),this.$id("@email").on("keyup",t),this.$id("@first_name").on("keyup",t),this.$id("@last_name").on("keyup",t),this.$id("@password").on("keyup",t),this.phone_number_enabled&&this.$id("@country_code").on("change",function(){e.setCountryCodeText()})},shouldEnableEmailSubmitButton:function(){var e=this.$id("@first_name").val();return(!this.signupContext.get("requiresCaptcha")||""!==this.signupContext.get("captchaResponse"))&&this.$id("@email").val()&&e&&this.validatePasswordInJs()},maybeChangeEmailSubmitButton:function(){var e=this.signupContext.get("emailSubmitButton");this.shouldEnableEmailSubmitButton()?(e.prop("disabled",!1),e.removeClass("submit_button_disabled")):(e.prop("disabled",!0),e.addClass("submit_button_disabled"))},getValidator:function(e){return this.signupContext.get("validators")[e]},validateEmailSignupFields:function(){this.getValidator("@first_name").validate(),this.getValidator("@email").validate(),this.getValidator("@password").validate()},validatePasswordInJs:function(){var e=this.$id("@password").val();return!(e.length<this.minimum_password_length||e.length>this.maximum_password_length)&&"password"!==e.toLowerCase()},onFormSubmit:function(e){this.onSubmitClicked(),e.preventDefault()},tryPhoneCode:function(e){var t=this;if(""==t.$id("@phone_number").val())return void this.onSubmitClicked();t.createModal("load_inner").kwargs({phone_number:t.$id("@phone_number").val(),country_code:t.$id("@country_code").val()}).onSubmit(function(e){t.signupContext.set("phoneNumber",e.phone_number),t.signupContext.set("phoneNumberCountry",e.country_code),t.onSubmitClicked()}).show(),e.preventDefault()},onSubmitClicked:function(){if(this.validateEmailSignupFields(),this.maybeChangeEmailSubmitButton(),this.shouldEnableEmailSubmitButton()){var e=this.$id("@first_name").val()+" "+this.$id("@last_name").val();this.signupContext.set("emailSignupData",{name:e,first_name:this.$id("@first_name").val(),last_name:this.$id("@last_name").val(),email:this.$id("@email").val(),password:this.$id("@password").val()})}}}),t.EmailSignupFormMobile=l.extend({onLoad:function(){var e=this;this.signupContext=this.getContext(E),this.enableDoneButton(),this.phone_number_enabled?s.registerMessageHandler("modalDoneButtonTapped",this.tryPhoneCode.bind(this)):s.registerMessageHandler("modalDoneButtonTapped",this.trySignup.bind(this)),this.signupContext.on("requiresCaptcha",function(t,i){!t&&i&&e.disableDoneButton()}),this.signupContext.on("captchaResponse",function(t,i){""!==i?e.enableDoneButton():e.disableDoneButton()}),s.registerOneTimeMessageHandler("pageReadyComplete",function(){e.delayFocus?setTimeout(function(){e.focusForm()},300):e.focusForm(),a.isAndroidApp()&&r.send("showKeyboard")})},setDoneButton:function(e){this.phone_number_enabled?r.send("setPageAction",{rightTextButton:{title:this.doneButtonText,callback:this.tryPhoneCode.bind(this),disabled:e}}):r.send("setPageAction",{rightTextButton:{title:this.doneButtonText,callback:this.trySignup.bind(this),disabled:e}})},disableDoneButton:function(){this.setDoneButton(!0)},enableDoneButton:function(){this.setDoneButton(!1)},focusForm:function(){this.$id("@first_name").focus()},onSignupFailure:function(){this.enableDoneButton(),r.send("hideLoadingView",{}),this.signupContext.get("requiresCaptcha")&&this.disableDoneButton(),this.previousActiveElement?this.previousActiveElement.focus():this.$id("@password").focus()},tryPhoneCode:function(){var e=this,t=e.getCountryCode();if(""==e.$id("@phone_number").val())return void this.trySignup();e.createModal("load_inner").kwargs({phone_number:e.$id("@phone_number").val(),country_code:t}).onSubmit(function(t){e.signupContext.set("phoneNumber",t.phoneNumber),e.signupContext.set("phoneNumberCountry",t.countryCode),e.trySignup()}).show()},getCountryCode:function(){var e,t=this;return t.children().forEach(function(t){if(t.getFieldId){"country_code_selector"==t.getFieldId()&&(e=t.getValue())}}),e},trySignup:function(){this.disableDoneButton(),r.send("showLoadingView",{}),this.previousActiveElement=document.activeElement,document.activeElement.blur();var e=this.$id("@first_name").val()+" "+this.$id("@last_name").val();this.signupContext.set("emailSignupData",{name:e,first_name:this.$id("@first_name").val(),last_name:this.$id("@last_name").val(),email:this.$id("@email").val(),password:this.$id("@password").val(),onFailure:this.onSignupFailure.bind(this)})}});var T=t.DialogSignupFormWrapper=l.extend({onLoad:function(){m=this,this.signupWallLoaded=!this.dismissible,this.dismissible||this.disableScroll();var e=this;this.handleEvent(u.Types.WEBNODE_RPC_EXCEPTION,function(t){"login_required"==t.payload.exceptionType&&e.loadSignupWall()})},disableScroll:function(){var e=w.getScrollbarWidth(),t=document.getElementsByClassName("SiteHeader")[0];document.body.style.paddingRight=e+"px",t.style.paddingRight=e+"px",k(document.body).on("touchmove",function(e){e.preventDefault(),e.stopPropagation()}),document.body.classList.add("signup_wall_prevent_scroll")},loadSignupWall:function(){if(b.isSiteAbsoluteUrl(window.top.location.href))return i("./settings.js").isLoggedIn?void this.serverCall("record_attempt_to_load_signup_wall_logged_in").send():void(this.signupWallLoaded?(this.disableScroll(),this.$id("@signup_wall_wrapper").removeClass("hidden")):(this.signupWallLoaded=!0,this.serverCall("load_signup_wall").contentFor(this.$id("@signup_wall_wrapper")).success(this.disableScroll.bind(this)).send()))},hideSignupWall:function(){var e=document.getElementsByClassName("SiteHeader")[0];document.body.style.paddingRight=0,e.style.paddingRight=0,this.$id("@signup_wall_wrapper").addClass("hidden"),document.body.classList.remove("signup_wall_prevent_scroll"),k(document.body).off("touchmove")}});t.CustomizedSignupFormWrapper=T.extend({onLoad:function(){m=this;var e=this;this.handleEvent(u.Types.WEBNODE_RPC_EXCEPTION,function(t){"login_required"==t.payload.exceptionType&&e.loadSignupWall()})},loadSignupWall:function(){if(b.isSiteAbsoluteUrl(window.top.location.href))return i("./settings.js").isLoggedIn?void this.serverCall("record_attempt_to_load_signup_wall_logged_in").send():void(this.signupWallHasBeenShown||(this.signupWallLoaded?(this.$id("@custom_signup_wrapper").removeClass("hidden"),this.signupWallHasBeenShown=!0):(this.signupWallLoaded=!0,this.serverCall("load_custom_signup_wall").contentFor(this.$id("@custom_signup_wrapper")).success(this.disableScroll.bind(this)).except("user_logged_in",function(){window.location.reload(!0)}).send())))},hideSignupWall:function(){var e=document.getElementsByClassName("SiteHeader")[0];document.body.style.paddingRight=0,e.style.paddingRight=0,this.$id("@custom_signup_wrapper").addClass("hidden"),document.body.classList.remove("signup_wall_prevent_scroll"),k(document.body).off("touchmove")}}),t.AdReferralSignupForm=l.extend({onLoad:function(){var e=k(document).height(),t=k(window).height();this.initScrollDistance=e-t,this.isScrollToWall?this.handleEvent(u.Types.SIGNUP_WALL_FROM_AD_REFERRAL,this.scrollPastCallback.bind(this)):this.isReadMoreWall||this.isInlineWall||k(window).on("scroll",this.fixedScrollDistanceTrigger.bind(this)),this.timeout!==undefined&&null!==this.timeout&&setTimeout(function(){C.loadSignupWall()},this.timeout)},scrollPastCallback:function(e){this.signupWallLoaded||(C.loadSignupWall(),this.signupWallLoaded=!0)},fixedScrollDistanceTrigger:function(){if(!this.signupWallLoaded){k(window).scrollTop()>this.initScrollDistance/2&&(C.loadSignupWall(),this.signupWallLoaded=!0)}}}),t.PhoneCodeEntryModal=S.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.$id("@submit").addClass("disabled"),this.$id("@sms_code").focus(),this.confirmationResult=null,this.$id("@sms_code_link").on("click",function(){e.sendCode()}),this.$id("@resend_sms_code_link").on("click",function(){e.sendCode()}),this.$id("@edit_button").on("click",this.editPhoneNumber.bind(this)),this.$id("@sms_code").on("input",function(){e.$id("@submit").removeClass("disabled"),e.PAGE_IS_MOBILE&&this.setMobileDoneButtonDisabled(!1)}),this.$id("@phone_number").on("input",function(){e.$id("@sms_code_link").removeClass("disabled")}),e.PAGE_IS_MOBILE&&this.setMobileDoneButtonDisabled(!0),k(document).ready(function(){e.phoneNumber&&e.sendCode(e.countryCode,e.phoneNumber)})},onSubmit:function(e){var t=this,i=t._super.bind(t);if(!this.submit_disabled){var n=t.$id("@sms_code").val();t.countryCode=t.getCountryCode(),this.emitEvent({type:u.Types.PHONE_NUMBER_CONFIRM_CODE_CLICKED,payload:{phoneNumber:t.phoneNumber,countryCode:t.countryCode,code:n,isSignup:!0}}),this.handleEvent(u.Types.PHONE_NUMBER_VERIFIED,function(e){i(e.payload)})}},getCountryCode:function(){var e,t=this;return t.children().forEach(function(t){if(t.getFieldId){"country_code_selector"==t.getFieldId()&&(e=t.getValue())}}),e},editPhoneNumber:function(){this.$id("@phone_number").removeClass("disabled"),this.$id("@country_code").removeClass("disabled"),this.$id("@sms_code_row").addClass("hidden"),this.$id("@edit_button").addClass("hidden"),this.$id("@resend_sms_code_link").addClass("hidden"),this.$id("@sms_code_link").removeClass("hidden")},sendCode:function(e,t){var i=this;this.$id("@phone_number").addClass("disabled"),this.$id("@country_code").addClass("disabled"),this.$id("@resend_sms_code_link").removeClass("hidden"),this.$id("@sms_code_link").addClass("hidden"),this.$id("@sms_code_row").removeClass("hidden"),this.$id("@edit_button").removeClass("hidden"),e!=undefined?i.countryCode=e:i.countryCode=i.getCountryCode(),t!=undefined?i.phoneNumber=t:i.phoneNumber=i.$id("@phone_number").val(),this.emitEvent({type:u.Types.PHONE_NUMBER_SEND_VERIFICATION_CODE_CLICKED,payload:{phoneNumber:i.phoneNumber,countryCode:i.countryCode}})}}),t.PhoneCodeEntryModalLink=l.extend({onLoad:function(){},onLoadMobile:function(){var e=this;e.$id("@modal_link").on("click",function(t){t.preventDefault(),e.emitEvent({type:u.Types.ZAPDOS_INLINE_DISMISS,payload:{cardType:e.card_type}}),e.createModal("load_modal").show()})}}),t.loadSignupWall=function(){m&&m.loadSignupWall()},t.hideSignupWall=function(){m&&m.hideSignupWall()}},"./unified_view/signup/conversion_logging.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/cookies.js"),s=i("./shared/core/component.js"),a=i("./settings.js"),r=i("./shared/jquery.js");t.ConversionLogging=n.extend({onLoad:function(){var e=function(e){var t=e.currentTarget,i=t.getAttribute("href");if(i&&"#"!=i){for(var n=s.getComponentFromElement(t),r=[],d=0;d<3&&n&&n.getHmac();d++)r.push(n),n=n.parent();var l=[];for(d=0;d<r.length;d++)l.push(r[d].getHmac());var c=[];c.push(a.controller),c.push(a.action),c.push(window.location.pathname);var u=c.concat(l);JSON.stringify(u).length<400&&o.setMessage("cl",u)}};r("a").on("click",e)}})},"./unified_view/signup/facebook.js":function(e,t,i){var n=i("./unified_view/signup/_signup.js").SignupContext,o=i("./shared/oauth.js"),s=i("./shared/facebook.js"),a=i("./unified_view/signup/_signup.js").SignupActionableComponent;t.SignupFacebookConnectButton=a.extend({onLoad:function(){var e=this;s.onInit(function(){window.FB.XFBML.parse(e.$id("@button").get(0))}),this._super.apply(this,arguments),this.signupContext=this.getContext(n),this.$id("@facebook_connect_button").on("click",this.clicked.bind(this)),s.load(),o.facebookOnLoad(this,this.onConnectSucceeded.bind(this),this.onConnectFailed.bind(this))},clicked:function(e){this.serverCall("log_click_to_funnel").send(),o.facebookConnect(this,this.onConnectSucceeded.bind(this),this.onConnectFailed.bind(this)),i("./settings.js").instance.includes("test")&&document.addEventListener("facebook_ui_test_event",function(e){var t={userID:e.detail.fb_uid,accessToken:e.detail.fb_access_token,expiresIn:e.detail.expires,use_test_signup:e.detail.use_test_signup};this.onConnectSucceeded(t)}.bind(this)),e.preventDefault()},onConnectSucceeded:function(e){this.signupContext.set("facebookOauthData",e)},onConnectFailed:function(){}})},"./unified_view/signup/footer.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/signup/_signup.js");t.SignupFooter=n.extend({onLoad:function(){var e=this;e.$id("@dismiss").click(function(t){t.preventDefault(),e.$id("@signup_container").addClass("hidden"),e.$id("@footer_gradient").addClass("hidden")}),e.$id("@signup_prompt").click(function(){return e.serverCall("log_browser_id").send(),o.loadSignupWall(),!1}),e.$id("@signin_link").click(function(){return e.serverCall("log_browser_id").send(),o.loadSignupWall(),!1}),e.$id("@signup_button").click(function(){return e.serverCall("log_browser_id").send(),o.loadSignupWall(),!1})}})},"./unified_view/signup/google.js":function(e,t,i){var n,o,s=i("./unified_view/signup/_signup.js").SignupContext,a=i("./settings.js"),r=i("./shared/oauth.js"),d=i("./shared/window_manager.js"),l=i("./unified_view/signup/_signup.js"),c=i("./shared/google_.js"),u=l.SignupActionableComponent,h=i("./shared/core/component.js").Component;window.loginInProgress=!1,t.SignupGoogleConnectButton=u.extend({onLoad:function(){this._super.apply(this,arguments),this.signupContext=this.getContext(s),this.$id("@google_connect_button").on("click",this.onClick.bind(this)),r.googleOnLoad(this,this.onConnectSuceeded.bind(this),this.onConnectFailed.bind(this))},onClick:function(e){r.googleConnect(this,this.onConnectSuceeded.bind(this),this.onConnectFailed.bind(this),this.should_use_contacts_permissions_fix),i("./settings.js").instance.includes("test")&&document.addEventListener("google_ui_test_event",function(e){var t={access_token:e.detail.access_token,use_test_signup:!0,auth_code_info:null};this._setGoogleOauthDataOnConnectSucceeded(t)}.bind(this)),this.serverCall("log_google_contacts_permission_fix_experiment").send(),e.preventDefault()},_setGoogleOauthDataOnConnectSucceeded:function(e){this.signupContext.set("googleOauthData",e)},onConnectSuceeded:function(e){this._setGoogleOauthDataOnConnectSucceeded(e)},onConnectFailed:function(e){this.onConnectFailedWeb()},onConnectFailedWeb:function(){this.serverCall("render_google_connect_failed_message").send()},onConnectFailedMobile:function(e){n.showAlert({title:this.mobile_data.error_title,message:this.mobile_data.error_message})}}),t.GoogleEndpointComponent=h.extend({onLoad:function(){window.opener.postMessage(this.response,window.location.origin),window.close()}}),t.GoogleAutoLoginWeb=h.extend({onLoad:function(){var e=this;c.onInit(function(){window.gapi.auth.authorize({immediate:!0,client_id:a.googleClientId,cookiepolicy:a.googleCookiePolicy,scope:e.scopes},e.signInCallback.bind(e))})},signInCallback:function(e){e&&e.error===undefined&&this.onLogin(e)},onLogin:function(e){!0!==window.loginInProgress&&(window.loginInProgress=!0,this.serverCall("try_auto_login").kwargs({access_token:e.access_token}).success(function(e){e&&"post_reload"===a.pageMode&&d.reload(),window.loginInProgress=!1}).error(function(){window.loginInProgress=!1}).except(function(){window.loginInProgress=!1}).send())}}),t.GoogleAutoLoginMobile=h.extend({onLoad:function(){var e=this;this.requestedGoogleAPI=!1,c.onInit(function(){window.gapi.auth.authorize({immediate:!0,client_id:a.googleClientId,cookiepolicy:a.googleCookiePolicy,scope:e.scopes},e.signInCallback.bind(e))})},signInCallback:function(e){e&&e.error===undefined&&this.serverCall("try_auto_login").kwargs({access_token:e.access_token}).success(this.onLogin.bind(this)).send()},onLogin:function(e){if(e){var t=function(){o.send("loginStateChanged",{isLoggedIn:!0})},i={name:"login_redirect_url",value:this.redirect_url,options:{expires:1}};o.send("setCookie",i,t)}}})},"./unified_view/signup/oauth.js":function(e,t,i){var n=i("./shared/core/component.js").Component;i("./shared/client.js"),i("./shared/window_manager.js");t.PermissionsMain=n.extend({onLoad:function(){var e=this;this.$id("@accept_button").on("click",function(){e.serverCall("authenticate_user").success(function(e){window.location=e.location}).send()})}})},"./unified_view/signup/pixel.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/pixel.js");t.FacebookPixel=n.extend({onLoad:function(){Array.isArray(this.events)&&this.events.length>0&&o.fireFacebookEvents(this.events)}}),t.GooglePixel=n.extend({onLoad:function(){Array.isArray(this.events)&&this.events.length>0&&o.fireGoogleEvents(this.events)}}),t.TwitterPixel=n.extend({onLoad:function(){Array.isArray(this.events)&&this.events.length>0&&o.fireTwitterEvents(this.events)}}),t.OutbrainPixel=n.extend({onLoad:function(){Array.isArray(this.events)&&this.events.length>0&&o.fireOutbrainEvents(this.events)}}),t.TaboolaPixel=n.extend({onLoad:function(){Array.isArray(this.events)&&this.events.length>0&&o.fireTaboolaEvents(this.events)}}),t.KeyweePixel=n.extend({onLoad:function(){Array.isArray(this.events)&&this.events.length>0&&o.fireKeyweeEvents(this.events)}}),t.AwinPixel=n.extend({onLoad:function(){Array.isArray(this.events)&&this.events.length>0&&o.fireAwinEvents(this.events,this.hashedUid,this.awc)}}),t.CriteoPixel=n.extend({onLoad:function(){Array.isArray(this.events)&&this.events.length>0&&o.fireCriteoEvents(this.events,this.currentCriteoID,this.refererCriteoID,this.isHomePage,this.isQuestionPage)}}),t.AppNexusPixel=n.extend({onLoad:function(){o.fireAppNexusEvent()}})},"./unified_view/signup/twitter.js":function(e,t,i){var n,o=i("./unified_view/signup/_signup.js").SignupContext,s=i("./unified_view/signup/_signup.js"),a=s.SignupActionableComponent,r=i("./shared/oauth.js");t.SignupTwitterConnectButton=a.extend({onLoad:function(){this._super.apply(this,arguments),this.signupContext=this.getContext(o),this.$id("@twitter_connect_button").on("click",this.onClick.bind(this)),r.twitterOnLoad(this,this.onConnectSuceeded.bind(this),this.onConnectFailed.bind(this))},onClick:function(e){r.twitterConnect(this,this.onConnectSuceeded.bind(this),this.onConnectFailed.bind(this)),e.preventDefault()},onConnectSuceeded:function(e){this._setTwitterOauthDataOnConnectSucceeded(e)},_setTwitterOauthDataOnConnectSucceeded:function(e){this.signupContext.set("twitterOauthData",e)},onConnectFailed:function(e){this.onConnectFailedWeb()},onConnectFailedWeb:function(){this.serverCall("render_twitter_connect_failed_message").send()},onConnectFailedMobile:function(e){n.showAlert({title:this.mobile_data.error_title,message:this.mobile_data.error_message})}})},"./unified_view/simple_components/create_confirmation_modal_on_click.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/multimodal.js").Manager;t.CreateConfirmationModalOnClick=n.extend({onLoad:function(){var e=this;e.$id(e.id).click(function(t){new o(e,function(e,t,i){"1"==t&&(e.component.liveMutate?e.component.serverCall("on_confirm").kwargs(e.component.kwargs).liveMutate().send():e.component.serverCall("on_confirm").kwargs(e.component.kwargs).send()),e.dismiss()}).pushStep("1",e.modal_params),e.stopPropagation&&t.stopPropagation(),e.preventDefault&&t.preventDefault()})}})},"./unified_view/simple_components/emit_event_on_click.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.EmitEventOnClick=n.extend({onLoad:function(){var e=this;e.$id(e.id).click(function(t){e.emitEvent({type:o.Types[e.eventType],payload:e.payload}),e.stopPropagation&&t.stopPropagation(),e.preventDefault&&t.preventDefault()})}})},"./unified_view/simple_components/emit_event_on_load.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.EmitEventOnLoad=n.extend({onLoad:function(){var e=this;e.handleEvent(o.Types.WEBNODE_COMPONENT_POST_ONLOAD,function(t){e.emitEvent({type:o.Types[e.eventType],payload:e.payload})})}})},"./unified_view/simple_components/server_call_on_click.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.ServerCallOnClick=n.extend({onLoad:function(){var e=this;e.$id(e.id).click(function(t){e.liveMutate?e.serverCall("on_click").kwargs(e.kwargs).liveMutate().send():e.serverCall("on_click").kwargs(e.kwargs).send(),e.stopPropagation&&t.stopPropagation(),e.preventDefault&&t.preventDefault()})}})},"./unified_view/static/contact.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/toast.js"),s=i("./shared/jquery.js"),a=i("./shared/window_manager.js");t.GeneralForm=n.extend({onLoad:function(){var e=this;e.logged_in=this.logged_in,e.clicked=!1;var t=this.child("upload_form");t&&t.success(this.uploadSuccess.bind(this)).failure(this.uploadFailure.bind(this)),e.$id("@submit_button").on("click",function(t){if(!e.clicked){e.clicked=!0,t.preventDefault(),e.$id("@submit_button").addClass("disabled");var i=e.$id("@name").val(),n=e.$id("@email").val(),o=e.$id("@profile").val(),s=e.$id("@photo_key").val()||"",r=e.$id("@editor").val(),d=e.$id("@appeal_selector").val(),l=e.$id("@appeal_content").val(),c=document.referrer;e.serverCall("submit_feedback").kwargs({feedback_type:e.feedback_type,msg:r,referrer:c,name:i,email:n,profile:o,photo_key:s,target:e.target,appeal:d,appeal_content:l}).success(function(t){t&&t.redirect?setTimeout(function(){a.navigateTo("/")},2e3):(e.clicked=!1,e.$id("@submit_button").removeClass("disabled"))}).liveMutate().send()}})},uploadSuccess:function(e){this.$id("@photo_key").val(e.photo_key),this.serverCall("upload").kwargs({photo_key:e.photo_key,target:this.target}).contentFor(this.$id("@iframe")).send()},uploadFailure:function(){s(".drop_zone").removeClass("drag_and_hover"),this.child("drag_and_drop_form").$id("@form_title").removeClass("drag_and_hover"),this.child("upload_form").hideSpinner()}}),t.CustomForm=n.extend({onLoad:function(){var e=this;e.logged_in=this.logged_in,e.clicked=!1;var t=this.child("upload_form");t&&t.success(this.uploadSuccess.bind(this)).failure(this.uploadFailure.bind(this)),e.$id("@submit_button").on("click",function(t){if(e.validate()&&!e.clicked){e.clicked=!0,t.preventDefault(),e.$id("@submit_button").addClass("disabled");for(var i={},n=0;n<e.fields.length;n++){var o=e.fields[n];i[o.id]=e.getFieldValue(o)}var s=e.$id("@photo_key").val(),r=document.referrer;e.serverCall("submit_feedback").kwargs({feedback_type:e.feedback_type,values:i,referrer:r,photo_key:s,target:e.target}).success(function(t){t&&t.redirect?setTimeout(function(){a.navigateTo("/")},2e3):(e.clicked=!1,e.$id("@submit_button").removeClass("disabled"))}).liveMutate().send()}})},getFieldValue:function(e){if("textarea"==e.type)return this.$id(e.id).val();if("radio"==e.type){var t=s("input[type='radio'][name='"+e.id+"']:checked");return t.length>0?t.val():""}return""},highlightField:function(e){var t=this,i=100,n="255, 255, 20",o=setInterval(function(){i-=3,i<=0&&clearInterval(o),t.$id(e.id).css({background:"rgba("+n+", "+i/100+")"})},30);"textarea"==e.type&&this.$id(e.id).focus(),window.scrollTo(0,t.$id(e.id).offset().top-window.innerHeight/2)},validate:function(){for(var e=0;e<this.fields.length;e++){var t=this.fields[e],i=this.getFieldValue(t),n=!0;if(t.required&&""==i?n=!1:t.id.startsWith("@confirm_")&&i!=this.$id("@"+t.id.substring(9)).val()&&(n=!1),!n)return this.highlightField(t),o.showError(this.validation_message),!1}return!0},uploadSuccess:function(e){this.$id("@photo_key").val(e.photo_key),this.serverCall("upload").kwargs({photo_key:e.photo_key,target:this.target}).contentFor(this.$id("@iframe")).send()},uploadFailure:function(){s(".drop_zone").removeClass("drag_and_hover"),this.child("drag_and_drop_form").$id("@form_title").removeClass("drag_and_hover"),this.child("upload_form").hideSpinner()}})},"./unified_view/switch.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.Switch=n.extend({onLoad:function(){this.getSwitch().on("click",this.handleClick.bind(this))},handleClick:function(){var e=this.getSwitch();e.hasClass("on")?this.toggleOff(e):this.toggleOn(e),this.toggleOnOffClasses(e)},toggleOnOffClasses:function(e){e.toggleClass("on").toggleClass("off")},toggleOff:function(e){this.serverCall("off").kwargs(this.kwargs).liveMutate().error(function(){e.removeClass("on").addClass("off")}).send()},toggleOn:function(e){this.serverCall("on").kwargs(this.kwargs).liveMutate().error(function(){e.addClass("on").removeClass("off")}).send()},getSwitch:function(){return this.$id("@switch")}})},"./unified_view/tchannel_up.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/onload.js"),s=i("./shared/util.js"),a=i("./shared/beforeunload.js"),r=i("./shared/events/index.js"),d=i("./shared/errors.js"),l=i("./shared/Class.js").Class,c=null,u=null,h=function(e,t,i,n){var o=window.location.protocol;return n&&(o="https:"===o?"wss:":"ws:"),e?o+"//"+e:[o,"//tch",Math.floor(1e6*Math.random())+1,".tch.",t,"/up/",i,"/updates?"].join("")},p=function(e){try{var t=JSON.parse(e)}catch(t){return void d.logJsError("unified_view/tchannel_up:processMessage","A message is not in JSON format: "+e)}if(!t.message_type||!t.payload)return void d.logJsError("unified_view/tchannel_up:processMessage","Malformed message data (missing message_type and/or payload): "+e);"broadcastReloadDirtiedDepkeys"==t.message_type&&r.DocumentProxy.dispatch({type:r.Types.BROADCAST_RELOAD_DIRTIED_DEPKEYS,payload:t.payload})},f=l.extend({__init__:function(e,t,i,n,o,s,a){this.minSeq=e,this.channel=t,this.channelHash=i,this.boxName=n,this.baseHost=o,this.enableWebsocket=a,this.socket=null,this.targetUrl=h(s,this.baseHost,this.boxName,this.enableWebsocket),this.isConnected=!0,this.isActive=!0,this.maxBackOffTime=3e4,this.updateBackOffTime(!0),this.numActiveXhr=0,this.pendingMessages=[];var r=this;window.addEventListener("online",function(){r.poll(null,!0)}),window.addEventListener("offline",function(){r.setIsConnected(!1),r.closeWebsocket()})},makeJsonpRequest:function(e){if(0===this.numActiveXhr){this.numActiveXhr+=1;var t={min_seq:this.minSeq,channel:this.channel,hash:this.channelHash};e&&(t.timeout=e),n.ajax({url:this.targetUrl,jsonpCallback:function(){return"jsonp"+s.uuid4()},dataType:"jsonp",method:"GET",data:t,success:this._onSuccess.bind(this),error:this._onError.bind(this),complete:this._onPollComplete.bind(this)})}},makeWebsocketRequest:function(e){null===this.socket&&(e&&u?u(this._makeWebsocketRequest.bind(this)):this._makeWebsocketRequest())},_makeWebsocketRequest:function(e,t,i,o,s){e!=undefined&&(this.minSeq=e),this.channel=t||this.channel,this.channelHash=i||this.channelHash,this.boxName=o||this.boxName,o&&(this.targetUrl=h(s,this.baseHost,this.boxName,this.enableWebsocket));var a=this.targetUrl+n.param({min_seq:this.minSeq,channel:this.channel,hash:this.channelHash});try{this.socket=new window.WebSocket(a)}catch(e){return void this._onError()}this.socket.onerror=this._onWebsocketError.bind(this),this.socket.onmessage=this._onWebsocketSuccess.bind(this),this.socket.onclose=this._onWebsocketClose.bind(this)},closeWebsocket:function(){null!==this.socket&&(this.socket.close(1e3),this.socket=null)},setIsConnected:function(e){this.isConnected=e},updateBackOffTime:function(e){e&&(this.backOffTime=500),this.backOffTime=Math.min(2*this.backOffTime,this.maxBackOffTime)},_onError:function(){var e=this;setTimeout(function(){e.isActive&&!a.isUnloading()&&(e.updateBackOffTime(),e.enableWebsockets||(e.setIsConnected(!1),e.poll(null,!0)))},0)},_onWebsocketError:function(e){this.closeWebsocket(),this._onError()},_onPollError:function(e,t){this._onError()},_onSuccess:function(e){if(this.isActive&&!a.isUnloading()){this.updateBackOffTime(!0),this.setIsConnected(!0);try{if(e.error)throw e.error;this.minSeq=e.min_seq;for(var t=0;t<e.messages.length;t++)e.messages[t].includes("w2.livenode")||p(e.messages[t])}catch(e){return}this.enableWebsockets||this.poll(null,!1)}},_onWebsocketSuccess:function(e){this._onSuccess(JSON.parse(e.data))},_onPollSuccess:function(e){this._onSuccess(e)},_onWebsocketClose:function(e){this.isConnected&&(this.setIsConnected(!1),this.poll(null,!0))},_onPollComplete:function(){this.numActiveXhr-=1},poll:function(e,t){this.enableWebsocket?setTimeout(this.makeWebsocketRequest.bind(this,t),this.backOffTime):setTimeout(this.makeJsonpRequest.bind(this,e),this.backOffTime)},start:function(){this.poll(2e3,!1)},stop:function(){this.isActive=!1}});t.start=function(e){"WebSocket"in window&&(c=new f(e.minSeq,e.channel,e.channelHash,e.boxName,e.baseHost,e.targetUrl,e.enableWebsocket),o.execAfterLoadDelayed(function(){c.start()}))},t.stop=function(){c&&c.stop()},t.setBeforeReconnection=function(e){u=e}},"./unified_view/threaded_comments.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/log_sender.js"),s=i("./shared/loading.js"),a=i("./shared/events/index.js");t.FeaturedCommentsPreview=n.extend({onLoad:function(){var e=this,t=e.$id("@toggle_link");t.on("click",function(i){i.preventDefault(),t.get(0).style.minHeight=t.get(0).clientHeight+"px",t.get(0).innerHTML="",t.append(s.createDots()),e.serverCall("load_comments").kwargs({oid:e.oid,comment_type:e.comment_type}).contentFor(e.$id("@expanded_wrapper"),{useLoadingSpinner:!1}).success(function(){t.addClass("hidden")}).sendOnlyOnce(),o.log("comments_toggled",{comment_type:e.comment_type,object_id:e.oid})})}}),t.TribeFeaturedCommentsPreview=n.extend({onLoad:function(){var e=this;e.$id("@toggle_link").on("click",function(t){t.preventDefault(),e.emitEvent({type:a.Types.TRIBE_ITEM_MODAL_SHOW,payload:{tribe_item_id:e.tribe_item_id}})})}})},"./unified_view/toggle.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/errors.js"),s=i("./shared/debounce.js").debounce,a=i("./shared/toast.js"),r=i("./shared/perf.js"),d=i("./shared/viewport.js");t.ToggleBase=n.extend({onLoad:function(){this._userPerceivedAction=null,this.fetchCalled=!1,this.fetchCompleted=!1,this.switchCompleted=!1,this.switchPending=!1,this.$fetchInto=this.$id(this.fetch_into),this.$switchShow=this.optional$id(this.switch_show),this.$switchHide=this.optional$id(this.switch_hide),this.$loadingShow=this.optional$id(this.loading_show),this.$loadingHide=this.optional$id(this.loading_hide),this.$fetchOnElem=this.fetch_on.length>1?this.$id(this.fetch_on[1]):this.$switchHide,this.$switchOnElem=this.switch_on.length>1?this.$id(this.switch_on[1]):this.$switchHide,this.bindFetch(),this.handleSwitch(),this.fetchCompleted||this.$fetchInto||o.logJsError("Toggle","$fetchInto undefined but fetch is not completed.")},optional$id:function(e){return e?this.$id(e):null},bindFetch:function(){switch(this.fetch_on[0]){case"request":this.fetchCalled=!0,this.fetchCompleted=!0;break;case"load":this.fetch();break;case"js":break;case"view":case"hover":case"click":var e=this.fetch_on[0];if(!this.$fetchOnElem)return void o.logJsError("Toggle","$fetchOnElem undefined for view/hover/click triggers.");"hover"==e?this.bindHover(this.$fetchOnElem,this.fetch.bind(this)):"view"==e?this.bindInViewPort(this.$fetchOnElem,this.fetch.bind(this)):this.bindClick(this.$fetchOnElem,this.fetch.bind(this));break;default:throw new Error("Invalid fetch trigger specified "+this.fetch_on)}},handleSwitch:function(){switch(this.switch_on[0]){case"request":this.fetchCalled=!0,this.fetchCompleted=!0,this.switchCompleted=!0;break;case"load":this.triggerSwitch();break;case"js":break;case"view":case"hover":case"click":var e=this.switch_on[0];if(!this.$switchOnElem)return void o.logJsError("Toggle","$switchOnElem undefined for view/hover/click triggers.");"hover"==e?this.bindHover(this.$switchOnElem,this.triggerSwitch.bind(this)):"view"==e?this.bindInViewPort(this.$switchOnElem,this.triggerSwitch.bind(this)):this.bindClick(this.$switchOnElem,this.triggerSwitch.bind(this));break;default:throw new Error("Invalid show trigger specified "+this.switch_on)}},fetch:function(){this.fetchCalled||(this.fetchCalled=!0,this.serverCall("fetch_toggled_component").kwargs({serialized_args:this.serialized_args}).disableDefaultUserPerceivedLogging().sendJsData(!1).contentFor(this.$fetchInto.get(0)).success(this.onFetched.bind(this)).error(this.onFetchError.bind(this)).send({batched:!0}))},onFetchError:function(){this.switchPending&&"click"==this.switch_on[0]&&a.showPleaseTryAgainError(),this.switchPending=!1,this.fetchCalled=!1,this.exitLoadingState()},onFetched:function(){this.fetchCompleted=!0,this.switchPending&&(this.switchPending=!1,this.triggerSwitch())},enterLoadingState:function(){this.$loadingShow&&this.$loadingShow.removeClass("hidden"),this.$loadingHide&&this.$loadingHide.addClass("hidden")},exitLoadingState:function(){this.$loadingShow&&this.$loadingShow.addClass("hidden")},actualSwitch:function(){this.switchCompleted||(this.switchCompleted=!0,this.$switchShow&&this.$switchShow.toggleClass("hidden"),this.$switchHide&&this.$switchHide.toggleClass("hidden"))},triggerSwitch:function(){this.switchStart(),this.fetch(),this.fetchCompleted?(this.exitLoadingState(),this.actualSwitch(),this.switchEnd()):(this.switchPending=!0,this.enterLoadingState())},switchStart:function(){this.log_switch_time&&(this._userPerceivedAction=r.startUserPerceived({hmac:this.getHmac(),method:"fetch_toggled_component"}))},switchEnd:function(){this.log_switch_time&&(this.log_switch_time=!1,this._userPerceivedAction&&(r.finishAction(this._userPerceivedAction),this._userPerceivedAction=null))},_isLinkedAnchorTag:function(e){return"A"==e.tagName&&e.getAttribute("href")&&"#"!=e.getAttribute("href")},bindClick:function(e,t){var i=this;e.on("click",function(n){for(var o=n.target;o&&o!=e.get(0);){if(i._isLinkedAnchorTag(o))return;o=o.parentElement}n.preventDefault(),t()})},bindHover:function(e,t){e.on("mouseenter",t)},bindInViewPort:function(e,t){if(d.isElementInViewport(e.get(0)))t();else{var i={leading:!0},n=s(function(){d.isElementInViewport(e.get(0))&&(t(),window.removeEventListener("scroll",n))},50,i);window.addEventListener("scroll",n)}}})},"./unified_view/tooltip.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/viewport.js");t.Tooltip=n.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),this.$tooltip=this.$id("@tooltip"),e.$id("@dismiss_button").on("click",function(){e.$tooltip.addClass("hidden")}),e.showTooltip(6e3)},showTooltip:function(e){var t=this;t.$tooltip.removeClass("hidden");var i=setInterval(function(){o.isElementInViewport(t.$tooltip.get(0))&&(t.hideAfterDelay(e),clearInterval(i))},1e3)},hideAfterDelay:function(e){var t=this;setTimeout(function(){t.$tooltip.removeClass("fadeInDownMini"),t.$tooltip.addClass("fadeOutUpMini")},e),setTimeout(function(){t.$tooltip.addClass("hidden")},e+1e3)}})},"./unified_view/topic/edit_topic_modal.js":function(e,t,i){var n=i("./unified_view/multimodal.js").Step,o=i("./shared/core/component.js").Component,s=i("./shared/events/index.js"),a=i("./shared/util.js");t.EditTopicsModalStep=n.extend({onLoad:function(){var e=this;e.currentTidSelection=e._initialTidSelection(),e.actionTaken=!1,e._super.apply(e,arguments),e.handleEvent(s.Types.QUESTION_TOPIC_SELECTION_ADD,function(t){e.updateNavText(),e.actionTaken=!0,t.payload.tid in e.currentTidSelection&&e.saveSelection(t.payload.tid,!0)}),e.$id("@selectable_topic_list").on("click",".SelectableTopic",function(){e.actionTaken=!0,e.updateNavText()}),e.show_steps&&e.$id("@submit").addClass("ui_button--BoxStyle--white")},updateNavText:function(){var e=this;e.show_steps&&(e.$id("@submit").removeClass("ui_button--BoxStyle--white"),e.$id("@submit").addClass("ui_button--BoxStyle--dark-blue"),e.$id("@submit")[0].innerHTML=e.nav_text)},saveSelection:function(e,t){this.currentTidSelection[e]=t},_initialTidSelection:function(){var e={};return this.applied_tids.forEach(function(t){e[t]=!0}),this.suggested_tids.forEach(function(t){e[t]=!1}),e},onShow:function(){this.showSelectorIfMobile()},hideSelectorIfMobile:function(){},showSelectorIfMobile:function(){},dismiss:function(){var e=this;if(e.show_steps){1==window.confirm(e.blocking_dismiss_text)&&(e._super.apply(e,arguments),e.hideSelectorIfMobile())}else e._super.apply(e,arguments),e.hideSelectorIfMobile()},back:function(){var e=this;e._super.apply(e,arguments),e.hideSelectorIfMobile()},submit:function(){var e=this,i=e.children().filter(function(i){return e.show_steps?i instanceof t.SelectableAppliedTopicList||i instanceof t.SelectableSuggestedTopicList:i instanceof t.SelectableTopicList}),n={};i.forEach(function(e){var t=e.getTidSelection();n=a.extend({},n,t)});var o=this._initialTidSelection(),s=[],r=[];Object.keys(n).forEach(function(e){e=parseInt(e),e in o||!n[e]?e in o||n[e]?!o[e]&&n[e]?s.push(e):o[e]&&!n[e]&&r.push(e):r.push(e):s.push(e)});var d=e._super.bind(e);if(e.show_steps&&!e.actionTaken){1==window.confirm(e.blocking_submit_text)&&d()}else e.serverCall("update_topics").kwargs({qid:e.qid,tids_to_add:s,tids_to_remove:r}).success(function(t){t&&(e.hideSelectorIfMobile(),d())}).send()},getSubmitData:function(){return this.data.qid=this.qid,this.data}}),t.SelectableTopicList=o.extend({getTidSelection:function(){var e={};return this.children().forEach(function(t){e[t.tid]=t.isSelected()}),e}}),t.SelectableAppliedTopicList=o.extend({getTidSelection:function(){var e={};return this.children().forEach(function(t){e[t.tid]=t.isSelected()}),e}}),t.SelectableSuggestedTopicList=o.extend({getTidSelection:function(){var e={};return this.children().forEach(function(t){e[t.tid]=t.isSelected()}),e}}),t.SelectableTopic=o.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.presetSelection(),e.$id("@topic").on("click",function(){var t=e.isSelected();e.parent().parent().saveSelection(e.tid,t)}),e.$id("@topic_checkbox").on("click",function(){var t=e.isSelected();e.parent().parent().saveSelection(e.tid,t)})},isSelected:function(){return this.$id("@topic_checkbox").prop("checked")||this.$id("@input_checkbox").prop("checked")},presetSelection:function(){var e=this.parent().parent().currentTidSelection,t=!0;this.tid in e?e[this.tid]?t=!0:e[this.tid]||(t=!1):t=!0,this.$id("@topic_checkbox").prop("checked",t),this.parent().parent().saveSelection(this.tid,t)}})},"./unified_view/topic_digest.js":function(e,t,i){var n=i("./shared/core/component.js"),o=n.Component,s=i("./shared/debounce.js").debounce,a=i("./shared/viewport.js"),r=i("./shared/jquery.js"),d=i("./shared/email_normalizer.js").normalizeEmail;t.TopicDigestOptIn=o.extend({onLoad:function(){r(document).on("scroll",s(this.scrollTrigger.bind(this),50)),this.$id("@subscribe").on("click",this.clickHandler.bind(this))},scrollTrigger:function(){this.shown||this.inView()&&(this.logImpression(),this.shown=!0)},clickHandler:function(){var e=this,t=e.$id("@email_input").val();if(e.uid)e.subscribe(t);else{t=d(t);e.validateEmail(t)?e.subscribe(t):(e.$id("@email_error").removeClass("hidden"),e.$id("@email_input_wrapper").addClass("error"))}},validateEmail:function(e){return!!this.uid||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},inView:function(){var e=n.getLiveDomElement(this.cid);return a.isElementInViewport(e)&&r(window).scrollTop()>0},logImpression:function(){this.serverCall("log_impression_after_shown").kwargs({source:this.source,topic_digest_id:this.topic_digest_id}).send()},subscribe:function(e){this.serverCall("submit_subscribe").kwargs({source:this.source,topic_digest_id:this.topic_digest_id,email:e}).send(),this.$id("@action_wrapper").addClass("hidden"),this.$id("@success").removeClass("hidden"),this.$id("@email_error").addClass("hidden")}})},"./unified_view/translation.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/window_manager.js");t.TranslationInterfaceToggle=n.extend({onLoad:function(){this._state=!1,this.setupKeyboardShortcut()},toggle:function(){var e=this;e._state?(e._state=!1,o(".translation_interface_info").hide()):(e._state=!0,o(".translation_interface_info").show())},setupKeyboardShortcut:function(){i("./shared/keystrokes.js").on([76,73,68,76,73,68],this.toggle.bind(this))}}),t.TranslationTemplateInfo=n.extend({onLoad:function(){this.$id("@string_info").on("click",this.onClick.bind(this))},onClick:function(){s.navigateTo(this.url)}})},"./unified_view/tribe.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./shared/window_manager.js"),a=i("./unified_view/modal.js").ModalBase,r=i("./shared/client.js"),d=i("./shared/events/index.js");t.UnfollowConfirmationModal=a.extend({onSubmit:function(){var e=this;e.serverCall("unfollow_tribe").kwargs({tribe_id:e.tribe_id}).liveMutate().success(function(){e.close()}).sendOnlyOnce()}}),t.SimpleCreateTribeModalLink=o.extend({onLoad:function(){var e=this;e.$id("@create_modal").on("click",function(t){t.preventDefault(),e.createModal("load_modal").show()})}}),t.SimpleCreateTribeModal=a.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.child("input_name").$id("@tribe_name").focus()},onSubmit:function(){var e=this,t=e.child("input_name").$id("@tribe_name").val();e.serverCall("create_tribe").kwargs({name:t}).success(function(e){e&&(r.isNativeApp()?n.sendMessageToClient("openURL",{url:e,target:"main"}):s.navigateTo(e))}).send()}}),t.CreateTribeModal=a.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.saved_target_uids=[],e.child("selector")&&e.child("selector").whenOnSavedResultsChanged(function(t){e.saved_target_uids=t})},onSubmit:function(){var e=this,t=[];e.saved_target_uids.forEach(function(e){t.push(e.data.uid)}),e.target_uid&&t.push(e.target_uid);var i=e.$id("@tribe_name").val(),n=e.$id("@tribe_description").val(),o=e.$id("@tribe_type").val();e.serverCall("create_tribe").kwargs({target_uids:t,name:i,description:n,type:o}).success(function(e){e&&s.navigateTo(e)}).send()}}),t.MobileEditTribeTopicsLink=o.extend({onLoad:function(){var e=this;this.$id("@edit_topics").click(function(t){t.preventDefault(),e.createModal("load_modal").kwargs({tribe_id:e.metadata.tribe_id}).show()})}}),t.TribeTopicList=o.extend({onLoad:function(){var e=this;this.handleEvent(d.Types.TOPIC_LIST_REMOVE,function(t){e.removeTid(t.payload.tid)})},removeTid:function(e){this.serverCall("remove").kwargs({tid:e}).liveMutate().send()}}),t.TribeTopicRow=o.extend({onLoad:function(){var e=this;this.$id("@remove_topic").on("click",function(t){t.preventDefault(),e.emitEvent({type:d.Types.TOPIC_LIST_REMOVE,payload:{tid:e.tid}})})}})},"./unified_view/tribe/composer.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./unified_view/question/ask_multi_modal.js").AskQuestionStep,a=i("./shared/window_manager.js"),r=i("./shared/client.js"),d=i("./unified_view/modal.js").ModalBase,l=i("./shared/events/index.js"),c=i("./shared/window_manager.js"),u=i("./unified_view/question/ask_multi_modal.js").AskMultiModal,h=i("./qtext2/util.js").Util;t.TribeAddPostModal=d.extend({onSubmit:function(){var e=this,t=this.child("tribe_post_editor").child("editor").serialize(),i=this.$id("@title_editor").text();this.serverCall("write_post_to_tribe").kwargs({tribe_id:e.tribe_id,post_content:t,post_title:i,is_submission:e.is_submission}).success(function(t){t.success&&(e.submit(t),e.close())}).error(function(t){e.serverCall("display_error_message").send()}).liveMutate().sendOnlyOnce()}}),t.TribeAskQuestionStep=s.extend({setEventHandlers:function(){var e=this;e._super.apply(e,arguments),e.handleEvent(l.Types.TRIBE_QUESTION_SUBMITTED,function(t){t.payload.tribe_id==e.tribe_id&&(e.submit({success:!0,qid:t.payload.qid,tribe_id:t.payload.tribe_id,redirect_url:t.payload.redirect_url}),e.close())})}}),t.TribeAddHyperLinkModal=d.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),r.isAndroidApp()&&n.send("showKeyboard"),e.share_of_space&&(e.$id("@url_input").addClass("url_input_filled"),e.$id("@url_input_box").addClass("url_input_box_filled")),e.$id("@url_input").on("input",function(t){var i=e._parseUrlFromText(t.target.value);i&&(e.$id("@url_input").addClass("url_input_filled"),e.$id("@url_input_box").addClass("url_input_box_filled"),setTimeout(function(){e.$id("@fake_preview").removeClass("hidden")},500),e.serverCall("create_link_preview_and_check_duplicates").kwargs({url:i,tribe_id:e.tribe_id}).contentFor(e.$id("@link_preview")).send())}),this.$id("@close_preview").on("click",function(t){e.$id("@url_input").removeClass("url_input_filled"),e.$id("@url_input_box").removeClass("url_input_box_filled"),e.$id("@fake_preview").addClass("hidden"),e.$id("@share_link_url").focus(),e.$id("@share_link_url").val("")})},onSubmit:function(){var e=this,t=e._parseUrlFromText(e.$id("@share_link_url").val()),i=e.child("quora_share_editor").$id("@share_comment").val();e.serverCall("add_link_to_tribe").kwargs({tribe_id:e.tribe_id,hyperlink_url:t,comment:i,is_submission:e.is_submission,share_of_space:e.share_of_space}).success(function(t){t.success&&(e.submit(t),e.close(),t.redirect_url&&c.navigateTo(t.redirect_url))}).error(function(t){e.serverCall("display_error_message").send()}).liveMutate().sendOnlyOnce()},_parseUrlFromText:function(e){var t=h.linkify(e);if(1==t.length){var i=t[0].href;if(i)return i}}}),t.TribeAddButton=o.extend({onLoad:function(){var e=this;e.$id("@add").click(function(t){t.preventDefault(),e.handleAddClick()})},handleAddClick:function(){var e=this;e.createModal("load_modal").kwargs({tribe_id:e.tribe_id,is_submission:e.is_submission}).onSubmit(function(t){e.onSubmit(t)}).show()},onSubmit:function(e){var t=this;e.success&&(t.emitEvent({type:l.Types.TRIBE_ITEM_ADD,payload:{tribe_id:t.tribe_id}}),a.navigateTo(e.redirect_url))}}),t.TribeAddQuestionButton=t.TribeAddButton.extend({onLoad:function(){this._super.apply(this,arguments),u.load(this,"ask_tribe",{tribe_id:this.tribe_id,is_submission:this.is_submission})},handleAddClick:function(){u.open(this,"ask_tribe",{tribe_id:this.tribe_id,is_submission:this.is_submission})}})},"./unified_view/tribe/invite.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.TribeInviteModalLink=n.extend({onLoad:function(){var e=this;e.$id("@add_member").click("on",function(t){t.preventDefault(),e.createModal("load_tribe_invite_modal").kwargs({tribe_id:e.tribe_id,permission:e.permission}).show()})}}),t.TribeInviteBanner=n.extend({onLoad:function(){var e=this;e.$id("@ignore").click(function(t){t.preventDefault(),e.serverCall("do_decline_invite").kwargs({tribe_id:e.tribe_id}).success(function(){setTimeout(function(){e.$id("@invite_banner").slideUp()},250)}).liveMutate().send()}),e.$id("@invite_button").click(function(t){t.preventDefault(),e.serverCall("do_join_or_accept_invite").kwargs({tribe_id:e.tribe_id,permission:e.permission,from_uid:e.from_uid}).success(function(){setTimeout(function(){e.$id("@invite_banner").slideUp()},250)}).liveMutate().send()})}})},"./unified_view/tribe/item.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./shared/window_manager.js"),s=i("./ui/link.js").OverlayWithAppDiscardableModal,a=i("./shared/client_log.js"),r=i("./app/view/common.js").Content;t.TribePostItem=r.extend({editorCallbacks:function(e){"edit"==e?this.toggle(!1):"cancel"==e?this.toggle(!0):"submit"==e?this.toggle(!0):"toggle"==e&&this.toggle()},showContent:function(){this.$content.find(".feed_item_answer_content").removeClass("hidden"),this.$editor.addClass("hidden")},showEditor:function(){if(!this.editorLoaded)return this.$id("@loading").removeClass("hidden"),void this.fetchEditor();this.$content.find(".feed_item_answer_content").addClass("hidden"),this.$editor.removeClass("hidden")},fetchEditor:function(){var e=this;this.editorFetched||(this.editorFetched=!0,this.serverCall("editor_component").contentFor(this.$editor).success(function(){e.$id("@loading").addClass("hidden"),e.editorLoaded=!0,e.emitEvent(n.helpers.inlineEditorEdit(e.content_type,e.oid)),e.showEditor()}).send())}}),t.TribePostOverlay=s.extend({onLoad:function(){var e=this;e.$id("@overlay").click("on",function(t){t.stopPropagation(),t.preventDefault(),a.logEvent("TribePostExpand",t.target,{pid:e.pid}),o.navigateTo(e.url,"present")})}})},"./unified_view/tribe/nux.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=t.CreatorNUXStep=n.extend({onLoad:function(){var e=this,t=e.$id("@expand"),i=e.$id("@subtitle");t.on("click",function(e){e.preventDefault(),i.toggleClass("closed"),t.toggleClass("down")})}});t.ShareStep=o.extend({onLoad:function(){var e=this;this._super.apply(this,arguments),e.$id("@test").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({tribe_id:e.tribe_id}).show()})}})},"./unified_view/tribe/page.js":function(e,t,i){var n,o=i("./shared/core/component.js").Component,s=i("./view/fixable2.js");t.TribePageMain=o.extend({onLoad:function(){var e=this;e.serverCall("mark_tribe_read").kwargs({tribe_id:e.tribe_id}).liveMutate().send(),e.hideNavBar&&n.send("setPageAction",{visible:!1})}}),t.DesktopTribesSwitcher=o.extend({onLoad:function(){s.makeFixable(this.$id("@fixable"))}})},"./unified_view/tribe/settings.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/core/component.js").Component,s=i("./shared/events/index.js"),a=i("./shared/window_manager.js");t.InviteMemberModalLink=o.extend({onLoad:function(){var e=this;e.$id("@create_modal").on("click",function(t){t.preventDefault(),e.createModal("load_inner").kwargs({tribe_id:e.tribe_id}).show()})}}),t.TribeSettingsTextEditors=o.extend({onLoad:function(){var e=this;e.handleEvent(s.Types.TRIBE_SETTINGS_SAVE,function(t){if(e.tribe_id==t.payload.tribe_id&&"text"==t.payload.save_type){var i=e.child("input_name").$id("@tribe_name").val(),n=e.child("input_description").$id("@tribe_description").val();e.serverCall("save_changes").kwargs({tribe_id:e.tribe_id,new_name:i,new_description:n}).success(function(e){e.success&&window.location.reload(!0)}).send()}})}}),t.TribeColorPicker=o.extend({onLoad:function(){var e=this;e.handleEvent(s.Types.TRIBE_SETTINGS_SAVE,function(t){e.tribe_id==t.payload.tribe_id&&"color"==t.payload.save_type&&e.serverCall("save_changes").kwargs({tribe_id:e.tribe_id,color_key:t.payload.color_key}).success(function(){window.location.reload(!0)}).send()}),e.colorPickerSet()},colorPickerSet:function(){var e=this,t=e.$id("@color_picker_trigger"),i=e.$id("@color_picker_options");t.click("on",function(e){i.toggleClass("hidden")}),n(".color_option").click("on",function(t){var i=n(this).attr("color_key");e.emitEvent({type:s.Types.TRIBE_SETTINGS_SAVE,payload:{tribe_id:e.tribe_id,save_type:"color",color_key:i}})})}}),t.TribeSettingsDeleteSection=o.extend({onLoad:function(){var e=this;e.$id("@delete").on("click",function(t){t.preventDefault(),e.createModal("load_modal").kwargs({tribe_id:e.tribe_id}).onSubmit(function(){e.serverCall("delete_tribe").kwargs({tribe_id:e.tribe_id}).liveMutate().success(function(){a.navigateTo("/spaces")}).error(function(){e.serverCall("display_error").send()}).send()}).show()})}})},"./unified_view/twitter.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/twitter.js");t.TwitterFollowButton=n.extend({onLoad:function(){o.onInit(function(){})}})},"./unified_view/user/block.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/modal.js").ModalBase;t.BlockUser=n.extend({onLoad:function(){var e=this;e.button=e.$id("@user_block_button"),e.button.click(function(t){e.isBlocking?e.createModal("load_unblock_modal").kwargs({target_uid:e.target_uid}).show():e.createModal("load_block_modal").kwargs({target_uid:e.target_uid}).show(),t.preventDefault()})}}),t.BlockUserModal=o.extend({onSubmit:function(){var e=this;this.serverCall("add_block").liveMutate().success(function(){e.close()}).send()}}),t.UnblockUserModal=o.extend({onSubmit:function(){var e=this;this.serverCall("remove_block").liveMutate().success(function(){e.close()}).send()}})},"./unified_view/user/name.js":function(e,t,i){var n=i("./shared/window_manager.js"),o=i("./shared/core/component.js").Component,s=i("./unified_view/modal.js").ModalBase;t.TwoScriptNameEditModalLink=o.extend({onLoad:function(){var e=this;this.$id("@create_dialog_link").on("click",function(t){t.preventDefault(),e.createModal("load_inner").show()})}}),t.TwoScriptNameEditModal=s.extend({onSubmit:function(){var e=this;this.serverCall("submit").kwargs(e.getServerCallKwargs()).success(function(e){e&&n.reload()}).liveMutate().send(),this._super.apply(this,arguments)},getServerCallKwargs:function(){var e={};return this.children().forEach(function(t){if(t.getFieldId){var i=t.getFieldId();e[i]=t.getValue()}}),e}})},"./unified_view/util.js":function(e,t){t.positionForElement=function(e){for(var t=0,i=0,n=e.offsetWidth,o=e.offsetHeight;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{left:t,top:i,width:n,height:o}}},"./unified_view/write/writing_list.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./unified_view/modal.js").ModalBase;t.RemoveAllWritingListLink=n.extend({onLoad:function(){var e=this;this.$id("@confirmation_dialogue").on("click",function(){return e.showModal(),!1})},showModal:function(){this.createModal("load_modal").show()}}),t.RemoveAllWritingListConfirmationModal=o.extend({onSubmit:function(){var e=this._super.bind(this);this.serverCall("remove_all").success(function(t){e(t)}).liveMutate().send()}})},"./unified_view/zapdos/card.js":function(e,t,i){var n=i("./shared/events/index.js"),o=i("./shared/core/component.js").Component;t.CardBase=o.extend({onLoad:function(){var e=this;this.handleEvent(n.Types.ZAPDOS_INLINE_DISMISS,function(t){t.payload.cardType==e.cardType&&e.$id(e.id_).addClass("hidden")})}}),t.CardButton=o.extend({onLoad:function(){var e=this;e.$id("@card-button-link").on("click",function(t){"#"===e.redirectUrl&&t.preventDefault(),e.onClick()})},onClick:function(){this.serverCall("click").send()}}),t.DismissCardButton=t.CardButton.extend({onClick:function(e){var t=this;return t.emitEvent({type:n.Types.ZAPDOS_INLINE_DISMISS,payload:{cardType:t.cardType}}),t._super.apply(t,arguments)}}),t.CardListItem=o.extend({onLoad:function(){var e=this;e.$id("@card-button-link").on("click",function(t){"#"===e.redirectUrl&&t.preventDefault(),e.onClick()})},onClick:function(){var e=this;e.serverCall("click").kwargs({card_type:e.card_type,metadata:e.metadata}).send()}})},"./unified_view/zapdos/wall.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./shared/scroll_animation_handler.js");t.DialogZapdosFormWrapper=n.extend({onLoad:function(){var e=this,t=e.$id("@zapdos_wall_wrapper"),i=e.scroll_threshold,n=e.is_blocking,a=!1,r=!1;e.$id("@background").on("click",function(){0==n&&(e.dismissZapdosWall(),a=!0)}),e.handleEvent(o.Types.ZAPDOS_WALL_DISMISS,function(t){e.dismissZapdosWall(t.payload.cardType),a=!0}),e.force_show?(t.addClass("show"),e.disableScroll()):s.add(window,function(){window.scrollY>i&&!r&&!a&&i>0&&(t.addClass("show"),e.disableScroll(),e.serverCall("log_impression").kwargs({card_type:e.card_type}).send(),r=!0)})},disableScroll:function(){document.body.classList.add("zapdos_wall_prevent_scroll")},dismissZapdosWall:function(e){var t=this;t.force_show||this.serverCall("dismiss_wall").kwargs({card_type:t.card_type}).send(),this.$id("@zapdos_wall_wrapper").removeClass("show"),document.body.classList.remove("zapdos_wall_prevent_scroll")}}),t.ZapdosWallBase=n.extend({onLoad:function(){var e=this;e.$id("@close").on("click",function(){e.dismissWall()})},dismissWall:function(){var e=this;this.emitEvent({type:o.Types.ZAPDOS_WALL_DISMISS,payload:{cardType:e.card_type}})}}),t.CancelWallButton=n.extend({onLoad:function(){var e=this;e.$id("@cancel_link").on("click",function(){e.dismissWall()})},dismissWall:function(){var e=this;e.emitEvent({type:o.Types.ZAPDOS_WALL_DISMISS,payload:{cardType:e.card_type}})}})},"./video.js":function(e,t,i){var n=i("./shared/jquery.js");t.handleVideosBeforeSelectionHidden=function(e){e.find(".qtext_embed, .qt-video").each(function(t,i){e.find("iframe, video")&&n(i).parent().empty()})},t.stopAllVideos=function(e){e.find(".qtext_embed").each(function(e,t){n(t).find("iframe").each(function(e,t){var i=n(t).attr("src");i&&-1!==i.indexOf("autoplay=1")&&(i=i.replace("autoplay=1","autoplay=0")),n(t).attr("src",i)})}),e.find("video").each(function(e,t){t.pause()})}},"./view/announcement.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.Announcement=n.extend({onLoad:function(){var e=this;this.$id("@close").click(function(){return e.closeAnnouncement("x"),!1}),this.serverCall("track_announcement_view").send()},closeAnnouncement:function(e){this.serverCall("close_announcement").kwargs({closing_action:e}).liveMutate().send()}})},"./view/captcha.js":function(e,t,i){var n=i("./shared/recaptcha.js"),o=i("./shared/events/index.js"),s=i("./shared/core/component.js").Component,a=i("./view/modal.js").Base;t.Captcha=s.extend({onLoad:function(){var e=this;this.handleEvent(o.Types.WEBNODE_RPC_EXCEPTION,function(t){"captcha_required"==t.payload.exceptionType&&e.load_captcha()})},load_captcha:function(){return this.createModal("load_captcha_modal").show(),!1}}),t.CaptchaModal=a.extend({onLoad:function(){this._super.apply(this,arguments);var e=this,t=function(){e.serverCall("on_captcha_verified").liveMutate().success(function(){e._closeModal()}).send()};n.onInit(function(){grecaptcha.render(e.$id("@captcha")[0],{sitekey:e.recaptcha_key,theme:"light",callback:t})})}})},"./view/dialog.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./tooltip.js"),a=i("./w2.dialog.js"),r=a.Dialog;t.Dialog=n.extend({onLoad:function(){var e=this;this.successCallback=null,this.ok2Submit=!0,this.submitted=!1,this.$id("@submit").click(function(t){e.submit(),t.preventDefault()}),this.$id("@cancel").click(function(t){e.close(),t.preventDefault()})},submit:function(){this.request()},request:function(){var e=this.getPars();!this.submitted&&e&&this.ok2Submit&&(this.submitted=!0,this.submitServerCall(e))},getPars:function(){return{}},setSetup:function(e){var t=this;e.each(function(e,i){t.options[e]=i})},setSuccessCallback:function(e){this.successCallback=e},close:function(){o("#generic_dialog").length?o("#generic_dialog").remove():r.dialogFor(this).close_()},submitServerCall:function(e){var t=this;this.serverCall("dialog_submit_controller").liveMutate().kwargs(e).success(function(e){t.successCallback&&t.successCallback(e),t.close()}).send()}}),t.AddCommentDialog=t.Dialog.extend({onLoad:function(){this._super.apply(this,arguments),this.editor=this.child("editor"),this.editor.focus()},getPars:function(){return(!this.comment_required||!this.editor.isOnlyWhiteSpace())&&{comment:this.editor.serialize()}}}),t.DialogLink=n.extend({onLoad:function(){var e=this;this.tooltip&&s.attach(this.$id("@link"),this.tooltip),this.$id("@link").click(function(t){e.click(),t.preventDefault()})},containsNonLatinCodepoints:function(e){return/[^\u0000-\u00ff]/.test(e)},addOption:function(e,t){t&&this.containsNonLatinCodepoints(JSON.stringify(t))&&(t=window.unescape(encodeURIComponent(t))),this.options[e]=t},click:function(){a.createDialog(this).load("get_dialog",{kwargs:{ty:this.type,object_id:this.object_id,options:this.options}})},triggerClick:function(e){o.each(e,this.addOption.bind(this)),this.click()}})},"./view/editable_list.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./settings.js").interface_strings;t.EditableList=n.extend({onLoad:function(){var e=this;e.setEditLink(),this.editLink&&(setTimeout(function(){e.update(!0)},1),e.initState(),e.bindClickHandler())},setEditLink:function(){this.editLink=this.$id("@edit")},initState:function(){this.editLink.removeClass("hidden")},bindClickHandler:function(){var e=this;this.editLink.click(function(t){t.preventDefault(),e.toggleEdit()})},toggleEdit:function(){this.is_editing=!this.is_editing,this.update(!1)},update:function(e){this.is_editing?(this.$id("@wrapper").addClass("is_editing"),this.editLink.text(o.done)):(this.$id("@wrapper").removeClass("is_editing"),this.editLink.text(this.edit_text))}}),t.EditableListItem=n.extend({onLoad:function(){var e=this;this.$id("@remove").click(function(t){e.serverCall("remove").liveMutate().send()})}})},"./view/embed.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js");t.ExternalEmbed=n.extend({onLoad:function(e){var t=this;this.$id("@embed_logo").mouseover(function(){t.$id("@embed_logo").css({"background-position":"0 -20px"}).animate({right:"0px"},80)}),this.$id("@external_embed_wrapper").on("mousedown",'a[href!="#"]',function(e){o(e.currentTarget).attr("target","_blank")})}})},"./view/filter_nav_list.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/events/index.js"),a=i("./shared/window_manager.js");t.FilterNavListItem=n.extend({onLoad:function(){var e=this;this.$id("@item").on("click",function(){var t=o(this);if(t.hasClass("selected"))return!1;var i=t.attr("data-value");return e.updateDataAndReloadList(e.data_key,i),!1})},updateDataAndReloadList:function(e,t){var i=a.parseURLParams(window.location.search.substring(1).replace(/\+/g,"%20"));i[e]=t;for(var n in i)"all"!==i[n]&&""!==i[n]||delete i[n];var s=o.param(i);a.navigateTo(window.location.pathname+"?"+s)}}),t.FilterMultipleValuesNavListBase=n.extend({onLoad:function(){var e=this;this.handleEvent(s.Types.FILTER_NAV_LIST_UPDATE,function(t){t.payload.key==e.data_key&&t.payload.remove&&e.removeFilterFromKey(t.payload.remove)})},updateDataAndReloadList:function(e){var t=o.param(e);a.navigateTo(window.location.pathname+"?"+t)},addFilterToKey:function(e){var t=this.data_key,i=a.parseURLParams(window.location.search.substring(1).replace(/\+/g,"%20")),n=[];if("followed"==i[t]&&delete i[t],i[t]&&(n=i[t].split(" ")),0===n.length)i[t]=e;else{n.push(e);var o=n.join(" ");i[t]=o}this.updateDataAndReloadList(i)},removeFilterFromKey:function(e){var t=this.data_key,i=a.parseURLParams(window.location.search.substring(1).replace(/\+/g,"%20")),n=i[t].split(" "),o=n.indexOf(e);if(o>-1){n.splice(o,1);var s=n.join(" ");i[t]=s}for(var r in i)"all"!==i[r]&&""!==i[r]||delete i[r];this.updateDataAndReloadList(i)}}),t.FilterMultipleValuesNavListItemBase=n.extend({onLoad:function(){var e=this;this.$id("@remove").click(function(){return e.emitEvent({type:s.Types.FILTER_NAV_LIST_UPDATE,payload:{key:e.data_key,remove:e.filter_value.toString()}}),!1})}})},"./view/filterable_list.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.FilterableList=n.extend({onLoad:function(){this.lastQuery=null,this.delay=100;var e=this;this.$id("@search").keyup(function(){var t=function(t){e.fetchResults(t)};setTimeout(t,e.delay,e.$id("@search").val())}),this.$id("@search_link").click(function(){return e.$id("@search_link").hide(),e.$id("@bullet").hide(),e.$id("@search").show().focus(),e.$id("@after_search").show().focus(),e.$id("@search_row").show().focus(),!1})},newQueryEntered:function(e){},fetchResults:function(e){var t=this;e==this.$id("@search").val()&&e!=this.lastQuery&&(e&&""!==e&&e!=this.lastQuery?(this.serverCall("search_results").kwargs({query:e}).contentFor(this.$id("@search_results"),{useLoadingSpinner:!1}).success(function(){var e=t.$id("@search").val();e&&""!==e?(t.$id("@search_results").show(),t.$id("@default").hide()):(t.$id("@search_results").hide(),t.$id("@default").show())}).send(),this.lastQuery=e,this.newQueryEntered(e)):""===e&&(this.$id("@search_results").hide(),this.$id("@default").show()))}})},"./view/fixable2.js":function(e,t,i){function n(){return y.mobile||y.tablet}function o(e,t){if("object"==typeof t&&null!==t||(t={}),!n()||t.enable_mobile){var i=_(t.header)||document.querySelector(".SiteHeader"),o=_(t.footer)||null,d=i&&i.offsetHeight||0,l=i&&w(i).top||0,u={winHeight:S.innerHeight,winWidth:S.innerWidth,winScroll:document.documentElement.scrollTop,scrollingDown:!0,elPosition:window.getComputedStyle(e).position,elTop:parseInt(window.getComputedStyle(e).top),elWidth:e.offsetWidth,topSpacing:0};t=C.extend({scroll_dep:!1,height_dep:!0,width_dep:!0,header:i,footer:o,extra_top_spacing:t.extra_top_spacing||0,extra_bottom_spacing:t.extra_bottom_spacing||0,min_scroll:a(e,i,u.winScroll),max_scroll:r(e,i,o,u.winScroll),min_height:e.offsetHeight+d+l-u.winScroll,min_width:u.elWidth,sticky_release:!0,custom_trigger:null,enable_mobile:!1,min_scroll_callback:null,max_scroll_callback:null,responsive_width:!1},t),t.min_scroll-=t.extra_top_spacing,t.max_scroll-=t.extra_top_spacing+t.extra_bottom_spacing,u.topSpacing=w(e).top-t.min_scroll-parseInt(window.getComputedStyle(e)["margin-top"]),c(e,t,u),k.push(new s(e,t,u))}}function s(e,t,i){this.el=e||null,this.options=t||{},this.state=i||{}}function a(e,t,i){return w(e).top-(t&&t.offsetHeight||0)-((t&&w(t).top||0)-i)-parseInt(window.getComputedStyle(e)["margin-top"])}function r(e,t,i,n){var o=i&&w(i).top||0,s=w(e).top,r=e.offsetHeight,d=parseInt(window.getComputedStyle(e)["margin-bottom"]);return a(e,t,n)+o-s-r-d}function d(e){var t={scrollTop:document.documentElement.scrollTop,height:S.innerHeight,width:S.innerWidth};T||requestAnimationFrame(l.bind(null,e,t)),T=!0}function l(e,t){var i=e.type;k.filter(function(e){return"w2.fixable.trigger"===i?e.getDependencies().custom:e.getDependencies()[i]}).forEach(function(i){var n=i.state.winScroll;C.extend(i.state,{winScroll:t.scrollTop,winHeight:t.height,winWidth:t.width,customTop:e.top||i.state.customTop||null}),i.state.scrollingDown=i.state.winScroll>n,c(i.el,i.options,i.state)}),T=!1}function c(e,t,i){u(e,t,i)?h(e,t,i):p(e,t,i)}function u(e,t,i){if("none"===window.getComputedStyle(e).display)return!1;var n=!0;return null!==t.custom_trigger?n=t.custom_trigger(t,i):t.scroll_dep&&(n=A.scroll(t,i)),n&&(t.height_dep&&(n=A.height(t,i)),t.width_dep&&(n=n&&A.width(t,i))),n}function h(e,t,i){if(!e.classList.contains("fixable_fixed")){var n,o=i.topSpacing;i.elWidth=e.offsetWidth,g(e),null!==t.custom_trigger&&null!==i.customTop?(o=i.customTop,i.customTop=null):t.scroll_dep||(o=w(e).top+parseInt(window.getComputedStyle(e)["margin-top"])),e.style.top=o+"px",e.style.position="fixed",e.style.width=t.responsive_width?"100%":i.elWidth+"px",e.classList.add("fixable_fixed");try{n=new window.Event("w2.fixable.fixed")}catch(e){n=document.createEvent("Event"),n.initEvent("w2.fixable.fixed",!0,!0)}e.dispatchEvent(n)}}function p(e,t,i){var n;if(e.classList.contains("fixable_fixed")){null!==t.custom_trigger&&(i.customTop=parseInt(window.getComputedStyle(e).top)),i.scrollingDown&&null===t.custom_trigger&&t.sticky_release?(e.style.top=t.max_scroll-t.min_scroll+"px",e.style.position="relative"):(e.style.top=i.elTop+"px",e.style.position=i.elPosition),v(e),e.classList.remove("fixable_fixed");try{n=new window.Event("w2.fixable.unfixed")}catch(e){n=document.createEvent("Event"),n.initEvent("w2.fixable.unfixed",!0,!0)}e.dispatchEvent(n)}}function f(e){for(var t=0,i=k.length;t<i;t++)if(e===k[t].el)return t;return-1}function _(e){if(b&&e instanceof b){if(e.length>=2)throw new Error("Error in makeFixable(): getDomNode must only have a single element. (check the fixable element, header, and footer, are not collections)");return e[0]}return e}function m(e){var t=document.createElement("div"),i=window.getComputedStyle(e);return t.classList.add("fixable_clone"),t.style.height=e.offsetHeight+"px",t.style.width=e.offsetWidth+"px",t.style["margin-top"]=i["margin-top"],t.style["margin-right"]=i["margin-right"],t.style["margin-bottom"]=i["margin-bottom"],t.style["margin-left"]=i["margin-left"],t}function g(e){var t=m(e);return e.parentNode.replaceChild(t,e),t.appendChild(e),t}function v(e){return e.parentNode.parentNode.replaceChild(e,e.parentNode),e}function w(e){var t=e.getBoundingClientRect();return{top:t.top+document.documentElement.scrollTop,left:t.left+document.body.scrollLeft}}var b=i("./shared/jquery.js"),y=i("./shared/browser.js"),C=i("./shared/util.js"),k=[],S=window,E=document,x=["resize","scroll","w2.fixable.trigger"],T=!1,A={height:function(e,t){return t.winHeight>=e.min_height},width:function(e,t){return t.winWidth>=e.min_width},scroll:function(e,t){if(e.min_scroll>=0&&(e.min_scroll_callback||e.max_scroll_callback)){var i=e.min_scroll;e.min_scroll_callback&&(i=e.min_scroll_callback());var n=e.max_scroll;return e.max_scroll_callback&&(n=e.max_scroll_callback(),e.max_scroll=n),t.winScroll<=n&&i<=t.winScroll}return e.min_scroll>=0&&e.max_scroll>=0?e.min_scroll<=t.winScroll&&t.winScroll<=e.max_scroll:e.min_scroll>=0?t.winScroll>=e.min_scroll:e.max_scroll>=0&&t.winScroll<=e.max_scroll}},L=function(e,t){if(!(e=_(e)))throw new Error("No element given for makeFixable");if(-1===f(e))return o(e,t),x.forEach(function(e){"resize"===e&&(S.removeEventListener(e,d),S.addEventListener(e,d)),E.removeEventListener(e,d),E.addEventListener(e,d)}),e},$=function(e){if(!(e=_(e)))throw new Error("No element given for removeFixable");var t,i=f(e);return i>-1&&(t=k.splice(i,1)[0],t.el.style.top=t.state.elTop+"px",t.el.style.position=t.state.elPosition,t.el.classList.remove("fixable_fixed")),k.length<=0&&x.forEach(function(e){E.removeEventListener(e,d),S.removeEventListener(e,d)}),e},D=function(e,t,i){function n(){if(!e||!t)return!1;var n,o=e.offsetHeight,s=document.documentElement.scrollTop+window.innerHeight,a=w(t).top+o+i.top,r=e.parentNode;return n=r.classList.contains("fixable_clone")?w(r).top+o-i.bottom:w(e).top+o-i.bottom,s>=a&&s<=n}e=_(e),t=_(t),i=i||{},i.top=i.top||0,i.bottom=i.bottom||0,L(e,{scroll_dep:!0,custom_trigger:n}),e.addEventListener("w2.fixable.fixed",function(){this.style.top="auto",this.style.bottom=0})},j=function(e,t){var i,n=e.length;for(i=0;i<n-1;i++)L(e[i],C.extend(t,{scroll_dep:!0,footer:e[i+1]}));L(e[i],C.extend(t,{scroll_dep:!0,footer:t&&t.footer||null}))};s.prototype.getDependencies=function(){return{resize:this.options.height_dep||this.options.width_dep,scroll:this.options.scroll_dep,custom:null!==this.options.custom_trigger}},t.makeFixable=L,t.removeFixable=$,t.makeBottomFixable=D,t.makeStackedFixables=j},"./view/fixable_component.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./view/fixable2.js");t.FixableComponent=n.extend({onLoad:function(){var e=this.$id("@fixable_component");o.makeFixable(e.parent(),this.options),e.remove()}})},"./view/follower_list.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.FollowerListModalLink=n.extend({onLoad:function(){var e=this;this.$id("@modal_link").click(function(){return e.createModal("load_inner").kwargs({object_id:e.object_id}).show(),!1})}})},"./view/hover_menu.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./shared/Class.js").Class,a=i("./shared/onload.js"),r=i("./shared/dom.js"),d=i("./shared/perf.js"),l=i("./shared/client_log.js"),c=i("./shared/w2.context.js");t.HoverMenu=n.extend({contextConstructor:function(){return c.HoverMenu},onLoad:function(e){this.on=this.on||350,this.off=this.off||350,this.st=null,this.ht=null,this.loaded=this.loaded||this.should_preload_menu,this.loading=!1,this.shown=!1,this.cancelHover=!1,this.load_on_pageload&&e&&this.loadMenu(!0),this.registerClickHandlers(),this.maybeRegisterHoverHandlers(),this.hoverMenuContext=this.getContext(c.HoverMenu),this._userPerceivedAction=null,this.setDvar("hovermenu_parent",this.cid)},registerClickHandlers:function(){var e=this;e.hoverMenuContext=e.getContext(c.HoverMenu),e.hoverMenuContext.on("hidden",function(t,i){!0===i&&(e.cancelHover=!0,e.doHide())}),this.click_open?(this.$id("@link").click(function(t){e.shown?(e.cancelHover=!0,e.doHide()):(e._userPerceivedAction=d.startUserPerceived({hmac:e.getHmac(),method:"load_menu"}),e.cancelHover=!1,e.loadMenu(),e.doShow()),t.preventDefault()}),r.onDocClick(function(t){var i=e.isInvalidCloseTarget(o(t));e.shown&&!i&&(e.cancelHover=!0,e.doHide())})):this.$id("@link").click(function(){e.cancelHover=!0,e.doHide()})},isInvalidCloseTarget:function(e){var t=this.$id("@link");return!(!e.is(t)&&!e.parents(t).is(t))},maybeRegisterHoverHandlers:function(){var e=this;this.show_menu&&!this.click_open&&(this.$id("@link").hover(this.show.bind(this),function(){e.hide(),e.cancelHover=!1,e.$id("@link").removeClass("hover")}),this.$id("@menu").hover(this.show.bind(this),this.hide.bind(this)))},setPosition:function(){if(!this.css_positioning){var e=this.$id("@link").outerHeight(),t=this.$id("@link").offset(),i=t,n=o(window).height(),s=275,a=i.top-o(window).scrollTop(),r=n-a<s,d=this.menu_offset_px?this.menu_offset_px:0;if(this.$id("@menu").removeAttr("style"),r?(this.attach_to_body?this.$id("@menu").css("bottom",n-t.top+d+"px"):this.$id("@menu").css("bottom",e+"px"),this.$id("@menu").addClass("hover_menu_above")):(this.attach_to_body?this.$id("@menu").css("top",t.top+e+1+d+"px"):this.$id("@menu").css("top",e+"px"),this.$id("@menu").removeClass("hover_menu_above")),this.attach_to_body){var l=o(window).width(),c=this.$id("@menu").outerWidth(),u=c+i.left,h=i.left,p=this.$id("@link").outerWidth();"right"==this.alignment?this.$id("@menu").css("left",h-c+p+"px"):"center"==this.alignment?this.$id("@menu").css("left",h-c/2+p/2+"px"):l<u?(this.$id("@menu").addClass("right_align"),this.$id("@menu").css("left",h-c+p+"px")):(this.$id("@menu").css("left",h+"px"),this.$id("@menu").removeClass("right_align"))}}},hide:function(){this._userPerceivedAction&&(d.cancelAction(this._userPerceivedAction),this._userPerceivedAction=null),clearTimeout(this.st),this.ht=setTimeout(this.doHide.bind(this),this.off)},doHide:function(){var e=this;this.shown&&(this.hoverMenuContext.set("isShown",!1),this.shown=!1,this.$id("@link").removeClass("hover"),this.$id("@menu").addClass("animate_out"),setTimeout(function(){e.shown||(e.$id("@menu").removeClass("animate_out"),e.$id("@menu").addClass("hidden"))},150))},getKwargs:function(){return this.kwargs?this.kwargs:{}},okToShowHoverMenu:function(){return this.should_show_hover_menu&&0===this.$id("@menu").parents(".hover_menu_contents").length},show:function(){this.okToShowHoverMenu()&&this.showInner()},showInner:function(){this._userPerceivedAction=d.startUserPerceived({hmac:this.getHmac(),method:"load_menu"}),clearTimeout(this.ht),this.st=setTimeout(this.doShow.bind(this),this.on),this.loadMenu(),this.$id("@menu").removeClass("animate_out"),this.$id("@link").addClass("hover")},doShow:function(){this.shown||this.cancelHover||(this.hoverMenuContext.set("isShown",!0),this.hoverMenuContext.set("hidden",!1),this.shown=!0,this.css_positioning||this.movedToBody||!this.attach_to_body||(this.$id("@menu").detach().prependTo(o("body")),l.associateParentChildDomIds(this.$id("@menu").attr("id"),this.$id("@link").attr("id")),this.movedToBody=!0),o(".GrowlNotification").hide(),this.$id("@menu").removeClass("hidden"),this.$id("@link").addClass("hover"),this.setPosition(),!0===this.loaded&&this._userPerceivedAction&&(d.finishAction(this._userPerceivedAction),this._userPerceivedAction=null))},loadMenu:function(e){var t=this;e===undefined&&(e=!1);var i=function(){t.loaded||t.loading||(t.loading=!0,t.serverCall("load_menu").kwargs(t.getKwargs()).disableDefaultUserPerceivedLogging().contentFor(t.$id("@menu_contents")).success(function(e){t.loaded=!0,t.loading=!1,!0===t.shown&&t._userPerceivedAction&&(d.finishAction(t._userPerceivedAction),t._userPerceivedAction=null)}).except(function(e){t.loading=!1}).send())};e?a.execAfterLoadDelayed(function(){i()}):i()}}),t.ToggleableMenu=s.extend({__init__:function(e){if(this.$linkElem=e.$linkElem,this.$menuElem=e.$menuElem,this.loadFunction=e.loadFunction,!(this.$linkElem&&this.$menuElem&&this.loadFunction))throw new Error("Invalid kwargs given: "+e);this.useCssPositioning=e.useCssPositioning||!1,this.shouldAttachToBody=!!e.shouldAttachToBody,this.menuOffsetPx=e.menuOffsetPx||0,this.alignment=e.alignment||"left",this.clickOpen=e.clickOpen||!1,this.showDelayMs=e.showDelayMs||350,this.hideDelayMs=e.hideDelayMs||350,this.appendCssClass=e.appendCssClass||"",this.onHideShowFunction=e.onHideShowFunction||null,this.shown=!1,this.movedToBody=!1,this.cancelHover=!1,this.hideTimeout=null,this.showTimeout=null,this.registerHoverHandlers(),this.registerClickHandlers(),this.appendClass()},registerHoverHandlers:function(){this.clickOpen||(this.$linkElem.hover(this.showMenuSlow.bind(this),function(){this.hideMenuSlow(),this.cancelHover=!1,this.$linkElem.removeClass("hover")}.bind(this)),this.$menuElem.hover(this.showMenuSlow.bind(this),this.hideMenuSlow.bind(this)))},registerClickHandlers:function(){this.clickOpen?(this.$linkElem.click(this.toggleMenu.bind(this)),r.onDocClick(this.maybeHideMenu.bind(this))):this.$linkElem.click(this.hideMenu.bind(this))},toggleMenu:function(e){e.preventDefault(),this.shown?(this.cancelHover=!0,this.hideMenu()):(this.cancelHover=!1,this.loadFunction(),this.showMenu())},maybeHideMenu:function(e){var t=this.$linkElem.get(0);e==t||t&&o.contains(t,e)||this.hideMenu()},hideMenuSlow:function(){clearTimeout(this.showTimeout),this.hideTimeout=setTimeout(this.hideMenu.bind(this),this.hideDelayMs)},hideMenu:function(){this.shown&&(this.cancelHover=!0,this.shown=!1,this.$linkElem.removeClass("hover"),this.$menuElem.addClass("animate_out"),setTimeout(function(){this.shown||(this.$menuElem.removeClass("animate_out"),this.$menuElem.addClass("hidden"))}.bind(this),150),this.onHideShowFunction&&this.onHideShowFunction(this.shown))},shouldShowMenu:function(){return 0===this.$menuElem.parents(".hover_menu_contents").length},showMenuSlow:function(){this.shouldShowMenu()&&(clearTimeout(this.hideTimeout),this.showTimeout=setTimeout(this.showMenu.bind(this),this.showDelayMs),this.loadFunction(),this.$menuElem.removeClass("animate_out"),this.$linkElem.addClass("hover"))},showMenu:function(){this.shown||this.cancelHover||(this.shown=!0,this.moveMenuToBody(),o(".GrowlNotification").hide(),this.$menuElem.removeClass("hidden"),this.$linkElem.addClass("hover"),this.setPosition(),this.onHideShowFunction&&this.onHideShowFunction(this.shown))},moveMenuToBody:function(){this.useCssPositioning||this.movedToBody||(this.movedToBody=!0,this.shouldAttachToBody?(this.$menuElem.detach().prependTo(o("body")),l.associateParentChildDomIds(this.$menuElem.attr("id"),this.$linkElem.attr("id"))):this.$menuElem.detach().prependTo(this.$linkElem))},appendClass:function(){this.appendCssClass&&this.$menuElem.addClass(this.appendCssClass)},setPosition:function(){if(!this.useCssPositioning){var e=o(window),t=this.$linkElem.outerHeight(),i=this.$linkElem.offset(),n=i,s=e.height(),a=275,r=n.top-e.scrollTop(),d=s-r<a,l=this.$menuElem.outerWidth(),c=this.$linkElem.outerWidth();if(this.$menuElem.removeAttr("style"),d?(this.shouldAttachToBody?this.$menuElem.css("bottom",s-i.top+this.menuOffsetPx+"px"):this.$menuElem.css("bottom",t+"px"),this.$menuElem.addClass("hover_menu_above")):(this.shouldAttachToBody?this.$menuElem.css("top",i.top+t+1+this.menuOffsetPx+"px"):this.$menuElem.css("top",t+"px"),this.$menuElem.removeClass("hover_menu_above")),this.shouldAttachToBody){var u=e.width(),h=l+n.left,p=n.left;if(u<h){var f=h-u;"left"==this.alignment&&(p-=f+10)}"right"==this.alignment?this.$menuElem.css("left",p-l+c+"px"):"center"==this.alignment?this.$menuElem.css("left",p-l/2+c/2+"px"):this.$menuElem.css("left",p+"px")}else"right"==this.alignment?this.$menuElem.css("right",0):"center"==this.alignment?this.$menuElem.css("left",c/2-l/2+"px"):this.$menuElem.css("left",0)}}})},"./view/inline_editor.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js"),s=i("./webnode2.js"),a=i("./shared/core/component.js"),r=i("./shared/events/index.js"),d=i("./shared/debounce.js").debounce,l=i("./w2.dialog.js"),c=i("./settings.js"),u=i("./shared/beforeunload.js"),h=c.interface_strings;t.InlineEditor=n.extend({onLoad:function(){var e=this;e.editor=e.child("editor"),e.input_obj=e.$id("@"+e.input),e.input_button="inline_editor_submit",e.input_button_obj=e.$id("@"+e.input_button),e.editorShown=e.show_editor,e.should_toggle_on_submit=!0,e.draft_space&&(e.draft_button="inline_editor_save_draft",e.draft_button_obj=e.$id("@"+e.draft_button)),e.toggle_callback=null,e.locked=!1,e.$id("@inline_editor_link").click(function(){return e.onEditLinkClick(),!1}),e.$id("@inline_editor_cancel").click(function(){return e.content_type?e.emitEvent(r.helpers.inlineEditorCancel(e.content_type,e.id)):e.cancelEditor(),!1}),e.registerEditorCallbacks(),e.$id("@inline_editor_create_link").click(function(){return e.content_type?e.emitEvent(r.helpers.inlineEditorEdit(e.content_type,e.id)):e.toggle_editor(),!1}),e.submitHandler(),e.initDraftHandlers(),e.focus_onload&&e.focusInput(),e.input_obj.is("[maxlength]")&&e.input_obj.on("keyup",function(){var e=o(this).attr("maxlength"),t=o(this).val();t.length>e&&o(this).val(t.slice(0,e))}),e.content_type&&e.whenOnLoaded(function(){e.emitEvent(r.helpers.inlineEditorLoad(e.content_type,e.id))})},registerEditorCallbacks:function(){var e=this;this.handleEvent(r.Types.INLINE_EDITOR_STATE,function(t){t.payload.contentType==e.content_type&&t.payload.oid==e.id&&("cancel"==t.payload.state?e.cancelEditor():"edit"==t.payload.state?e.onEditLinkClick():"disclaimer"==t.payload.state&&e.updateDisclaimer())})},onEditLinkClick:function(){this.editorShown||this.toggle_editor()},updateDisclaimer:function(){var e=this.child("metadata"),t=e&&e.child("disclaimer");""===this.disclaimer_update||"remove"===this.disclaimer_update?(this.disclaimer_update="attach",t.$id("@item").removeClass("hidden")):(this.disclaimer_update="remove",t.$id("@item").addClass("hidden"))},initDraftHandlers:function(){this.draft_space&&(this.initEditorFocusCallback(),this.initDraftButtonClickCallback(),this.initMeaningfulChangeCallback(),this.initBeforeUnloadCallback(),this._latestSavedState=null)},initBeforeUnloadCallback:function(){u.registerHandler(this.beforeUnload.bind(this))},beforeUnload:function(){if(this.hasUnsavedContent())return this.unsaved_content_msg},initSavedState:function(){this._latestSavedState||(this._latestSavedState=this.get_value())},updateSavedState:function(e){this._latestSavedState=e},hasUnsavedContent:function(){return!(this.cid in a._unloaded)&&(!!this._latestSavedState&&((!this.editor.isOnlyWhiteSpace()||0!==this._latestSavedState.sections.length)&&this.editor.hasChanged(this._latestSavedState)))},initEditorFocusCallback:function(){var e=this;this.editor.setFocusCallback(function(){e.initSavedState(),e.$id("@inline_editor_save_draft").removeClass("hidden")})},initDraftButtonClickCallback:function(){var e=this;this.draft_button_obj.click(function(t){t.preventDefault(),e.save_draft(!0)})},initMeaningfulChangeCallback:function(){var e=d(this.save_draft.bind(this,!1),750,{maxWait:1e4,leading:!0});this.editor.setMeaningfulChangeCallback(e)},cancelEditor:function(){this.editorShown&&this.toggle_editor()},isEditorEmpty:function(){var e=this.getEditor();return!!e&&e.isOnlyWhiteSpace()},getEditor:function(){return this.editor},submitHandler:function(){var e=this;this.input_button_obj.click(function(){return e.trigger_request(),!1})},get_value:function(){return this.is_qtext?this.editor.serialize():this.input_obj.val()},save_draft:function(e){var t=this,i=this.getSaveDraftMethod(e),n=this.getSaveDraftKwargs(),o=this.serverCall(i).kwargs(n);e&&(o.liveMutate(),null!==s.interactionMode&&s.interactionMode.isBlocking()&&s.fallbackToPostReloadMode()),this.logSaveDraft(),o.success(function(){t.updateSavedState(n.content)}),o.send()},logSaveDraft:function(){},getSaveDraftMethod:function(e){return e?"save_draft":"save_draft_auto"},getSaveDraftKwargs:function(){return{content:this.get_value(),window_id:c.windowId,draft_space:this.draft_space}},server_call_method:"edit",_get_kwargs:function(){return{id:this.id,input:this.get_value()}},trigger_request:function(){if(this.locked)return!1;this.locked=!0,this.require_comment?this.showConfirmationDialog():this.okToSubmitRequest()?(this.is_qtext&&this.editor.disable(),this.invokeEditServerCall(this._get_kwargs())):(this.is_qtext&&this.editor.focus(),this.locked=!1)},trigger_cancel:function(){this.$id("@inline_editor_cancel").click()},okToSubmitRequest:function(){return!this.require_value||this.require_value&&!this.editor.isOnlyWhiteSpace()},invokeEditServerCall:function(e){var t=this,i=function(){t.locked=!1};o(document).on("login_cancelled",i),this.content_type&&this.emitEvent(r.helpers.inlineEditorSubmit(this.content_type,this.id)),t.input_button_obj.addClass("disabled");var n=function(e){t.locked=!1,t.input_button_obj.removeClass("disabled"),t.editor.enable(),o(document).off("login_cancelled",i)},s=function(){n()};t.serverCall(t.server_call_method).kwargs(e).success(function(i){t.maybeLogAction(),t.updateSavedState(e.input),t.ajax_callback(i),n()}).error(s).except(s).liveMutate().send()},maybeLogAction:function(){},ajax_callback:function(e){this.content_type&&r.DocumentProxy.dispatch(r.helpers.inlineEditorSubmitted(this.content_type,this.id)),this.should_toggle_on_submit&&this.toggle_editor()},focusInput:function(){var e=this;e.is_qtext?e.editor.focus():e.input_obj.focus()},setToggleCallback:function(e){if(this.toggle_callback){var t=this.toggle_callback;this.toggle_callback=function(){t(),e()}}else this.toggle_callback=e},toggle_editor:function(){if(this.editorShown=!this.editorShown,this.$id("@inline_editor_content").find(".qtext_embed").each(function(e,t){o(t).addClass("thumbnail").empty()}),this.$id("@inline_editor_content").toggleClass("hidden"),this.$id("@inline_editor_form").toggleClass("hidden"),this.is_qtext&&this.$id("@inline_editor_form").is(":visible")){var e=this.child("editor");e&&e.focus()}this.toggle_callback&&this.toggle_callback()},showConfirmationDialog:function(){var e=this;this._dialog=l.createDialog(this).title(this.confirm_text).cancel(function(){e.locked=!1},h.cancel).ok(function(){var t=arguments[0].dialogComponent,i=t.child("editor");if(i.isOnlyWhiteSpace())return!1;var n=e._get_kwargs();n.comment=i.serialize(),e.invokeEditServerCall(n),e._dialog.close_()},this.submit_text).load("comment_dialog")}}),t.InlineEditCommentDialog=n.extend({onLoad:function(){this.child("editor").focus()}}),t.DraftStatus=n.extend({onLoad:function(){var e=this;e.$id("@draft_status_clear").on("click",function(){return e.createModal("load_clear_draft_confirmation").kwargs({draft_space:e.draft_space}).onSubmit(function(){e.clearDraftCallback()}).show(),!1})},clearDraftCallback:function(){}}),t.BoardDraftStatus=t.DraftStatus.extend({clearDraftCallback:function(){window.location.reload()}})},"./view/link_selector.js":function(e,t,i){var n=i("./view/selector.js").Selector,o=i("./view/selector.js").SelectorWithTypeaheadLogMixin;t.LinkSelector=n.extend(o).extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.$id("@input").keydown(function(){if(e._escKeyDown)return e._escKeyDown.apply(this,arguments)}),e.$id("@input").keyup(function(t){if(e._keyUp)return e._keyUp.apply(this,arguments)})},setEscKeyDown:function(e){this._escKeyDown=e},setKeyUp:function(e){this._keyUp=e}})},"./view/livenode.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./webnode2.js"),s=i("./shared/events/index.js"),a=i("./w2.livenode.js"),r=i("./shared/core/component.js"),d=r.Component,l=i("./shared/window_manager.js"),c=i("./shared/loading.js");t.LiveSpinner=d.extend({init:function(){this._super.apply(this,arguments),this.t=null,this.showing=!1;var e=this;this.handleEvent(s.Types.LIVENODE_LOADING_SPINNER,function(t){t.payload.show?e.show():e.hide()})},show:function(){this.showing||(this.showing=!0,this.spinner||(this.spinner=c.createDots("small"),this.$id("@spinner").append(this.spinner)),this.$id("@loading").removeClass("fade_out").removeClass("hidden"))},hide:function(){var e=this;this.showing&&(this.showing=!1,this.$id("@loading").addClass("fade_out"),setTimeout(function(){e.$id("@loading").hasClass("fade_out")&&e.$id("@loading").removeClass("fade_out").addClass("hidden")},150))}}),t.ErrorBanner=d.extend({init:function(){var e=this;this._super.apply(this,arguments),o.Error=this,this.shown=!1,this.$id("@hide").click(function(){return e.hide(),!1})},show:function(e){e=e||this.default_text,this.$id("@text").text(e),this.shown||(this.shown=!0,this.emitEvent({type:s.Types.INTERACTION_MODE_BANNER_STATE,payload:{shown:!0}}),this.$id("@banner").show().addClass("fade_in"),u())},hide:function(){if(this.shown){this.shown=!1,this.emitEvent({type:s.Types.INTERACTION_MODE_BANNER_STATE,payload:{shown:!1}});var e=this;e.$id("@banner").removeClass("fade_in").addClass("fade_out"),setTimeout(function(){e.$id("@banner").hide()},150),h()}}});var u=t.addContentPadding=function(){n(".ContentWrapper").addClass("extra_padding"),n(".NotifHeaderBar").addClass("extra_padding"),n(".fixed_sidebar").css({position:"initial"}),n(".fixable_fixed").addClass("extra_padding")},h=function(){n(".ContentWrapper").removeClass("extra_padding"),n(".NotifHeaderBar").removeClass("extra_padding"),n(".fixable_fixed").removeClass("extra_padding")};t.InteractionModeBanner=d.extend({init:function(){this._super.apply(this,arguments),o.interactionMode=this,this._changedComponents={},this._cidToDomId={},this._otherInteractions={},this._states={OFF:0,PENDING:1,ON:2,BLOCKING:3}},onLoad:function(){this.resumeUpdates(),this._state=this._states.OFF,this._lastVal=null,this._lastDOMNode=null,this.bindInteractionMode()},updateStateForLastFocusedDOMElement:function(e){var t;if(!e)return!1;if(this._state==this._states.PENDING)return t=this._getCIDForElement(e),this._lastVal==this._val(e)?(this._changedComponents[t]=this._states.OFF,!1):(this._changedComponents[t]=this._states.ON,this._cidToDomId[t]=this._getLiveDOMIdForElement(e),!0);if(this._state==this._states.ON){t=this._getCIDForElement(e);var i=this._changedComponents[t];return this._lastVal==this._val(e)&&i==this._states.PENDING?(this._changedComponents[t]=this._states.OFF,!1):(this._changedComponents[t]=this._states.ON,this._cidToDomId[t]=this._getLiveDOMIdForElement(e),!0)}return!1},_getLiveDOMIdForElement:function(e){return e.id&&"ld_"==e.id.substr(0,3)?e.id:e.parentNode?this._getLiveDOMIdForElement(e.parentNode):null},_getCIDForElement:function(e){return e&&e.getAttribute?e.getAttribute("w2cid")?e.getAttribute("w2cid"):this._getCIDForElement(e.parentNode):null},isBlocking:function(){return this._state==this._states.BLOCKING},startBlocking:function(){var e=this,t=[];n.each(this._changedComponents,function(i,n){if(n==e._states.ON||n==e._states.PENDING){var o=r._components[i];o.meaningfulChangeCallback&&!o.draft_space&&t.push(o)}}),this.showBanner(t),u(),this._setBlockingState()},_setBlockingState:function(){this._state=this._states.BLOCKING},bindInteractionMode:function(){var e=this;n(document).on("focus",'[data-group="js-editable"]:not(.ignore_interaction)',function(t){var i=e._getCIDForElement(t.target);if(e._lastVal=e._val(t.target),e._lastDOMNode=t.target,0===a.state.pendingMutationCount)if(e._state==e._states.OFF)e._changedComponents[i]=e._states.PENDING,e._state=e._states.PENDING;else{var n=e._changedComponents[i];n&&n!=e._states.OFF||(e._changedComponents[i]=e._states.PENDING)}}),n(document).on("blur",'[data-group="js-editable"]:not(.ignore_interaction)',function(t){switch(e._state){case e._states.PENDING:e.updateStateForLastFocusedDOMElement(t.target),e._lastVal==e._val(t.target)?e._state=e._states.OFF:e._state=e._states.ON;break;case e._states.ON:e.updateStateForLastFocusedDOMElement(t.target);break;case e._states.OFF:case e._states.BLOCKING:break;default:console.error("Unknown state of InteractionMode at blur time... weird")}})},_val:function(e){var t=n(e);return t.is(":input")?t.val():t.html()},_setVal:function(e,t){var i=n(e);i.is(":input")?i.val(t):i.html(t)},showBanner:function(e){return this.emitEvent({type:s.Types.INTERACTION_MODE_BANNER_STATE,payload:{shown:!0}}),e.length>0&&(this.$id("@draftable").removeClass("hidden"),this.$id("@not_draftable").addClass("hidden"),this.$id("@resume").click(function(t){return n.each(e,function(e,t){t.meaningfulChangeCallback()}),l.reload(),!1})),this.$id("@banner").show().removeClass("fade_out").addClass("fade_in")},hideBanner:function(){this.emitEvent({type:s.Types.INTERACTION_MODE_BANNER_STATE,payload:{shown:!1}});var e=this;e.$id("@banner").removeClass("fade_in").addClass("fade_out"),setTimeout(function(){e.$id("@banner").hide()},150)},resumeUpdates:function(){this._state=this._states.OFF,this._changedComponents={},this.hideBanner(),h();for(var e=a.state.interactionDelayedLivedepOperations;e.length>0&&this._state==this._states.OFF;){var t=e.shift();a.onLivedepOperations(t.data,t.textStatus,!0)}}})},"./view/modal.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/errors.js"),s=i("./shared/util.js"),a=i("./w2.modal.js"),r=t.Base=n.extend({onLoad:function(){var e=this;e.close_button=this.$id("@close_button"),e.cancel_button=this.$id("@cancel_button"),e.submit_button=this.$id("@submit_button"),e.close_button.on("click",function(t){e.onClose(),t.preventDefault()}),e.cancel_button.on("click",function(t){e.onCancel(),t.preventDefault()}),e.submit_button.on("click",function(t){e.onSubmit(),t.preventDefault()})},_closeModal:function(){a.Modal.modalFor(this).close()},onClose:function(){this._closeModal()},onCancel:function(){this._closeModal()},onSubmit:function(){this.submitDisabled||this._closeModal()},disableSubmit:function(){this.submitDisabled=!0,this.submit_button.addClass("action_disabled")},enableSubmit:function(){this.submitDisabled=!1,this.submit_button.removeClass("action_disabled")}});t.MultiStep=r.extend({onLoad:function(){if(this.stepCallbacks=this.getCallBacks(),this.onLoadInit(),this._super.apply(this,arguments),this._bindEventHandlers(),!this.key)return void o.logJsError("modal.MultiStep","Please set a data key in python js_data");if(!this.stepCallbacks){var e=["Sub classes should override getCallBacks() and have it return a ","list of methods supported by each modal steps."].join("");return void o.logJsError("modal.MultiStep",e)}return this.data_cache?void 0:void o.logJsError("modal.MultiStep","Please define a data storage variable in python")},onLoadInit:function(){var e=this.m("init");"function"==typeof e&&e()},getCallBacks:function(){},_bindEventHandlers:function(){var e=this.m("eventHandlers");"function"==typeof e&&e();var t=this;this.$id("@back_button").on("click",function(){t.onBack()})},m:function(e){return this.stepCallbacks[this.key][e]},onSubmit:function(){var e=this.m("onSubmit");if("function"==typeof e)return void e();this.submitDisabled||this._loadNext()},onBack:function(){var e=this.m("onBack");if("function"==typeof e)return void e();this.loadPrev()},isLastStep:function(){var e=this.m("isLastStep");return e||!1},_loadNext:function(){var e=this;if(e.$id("@modal_body").addClass("loading_transparency"),e.isLastStep())e.serverCall("last_step").kwargs({data_set:{data_cache:this.persistData()}}).success(function(t){e._closeModal()}).send();else{var t=new a.ModalWithCallBacks(e,{closeOnBackgroundClick:this.m("closeOnBackgroundClick"),sendJsData:!0,kwargs:{data_set:{data_cache:this.persistData()}}});t.load("load_next_modal"),t.onCloseCallBack(function(){e._closeModal()})}},loadPrev:function(){var e=this;e.$id("@modal_body").addClass("loading_transparency");var t=new a.ModalWithCallBacks(e,{closeOnBackgroundClick:this.m("closeOnBackgroundClick"),sendJsData:!0,kwargs:{data_set:{data_cache:this.persistData()}}});t.load("load_previous_modal"),t.onCloseCallBack(function(){e._closeModal()})},_getStepData:function(){var e=this.m("getStepData");if("function"==typeof e){var t=e();if(!t){var i=["Hey! we noticed that you defined a getStepData() method in ","your code but its not returning any value that is to be ","persisted for this modal step. To fix this error, either ","delete getStepData() definition or return a data that you ","want to be persisted for: "+this.key].join("");return void o.logJsError("modal.MultiStep",i)}var n=this.data_cache[this.key];return s.extend(n,t)}return null},persistData:function(){return this.data_cache[this.key]=this._getStepData(),this.data_cache},_closeModal:function(){a.Modal.modalFor(this).executeOnCloseCallBack(),this._super.apply(this,arguments)}})},"./view/paged_list.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/core/component.js").Component,s=i("./shared/core/component.js"),a=i("./w2.errors.js"),r=i("./shared/viewport.js"),d=i("./shared/onload.js"),l=i("./shared/eventemitter.js").EventEmitter,c=i("./shared/window_manager.js"),u=i("./shared/loading.js"),h=i("./shared/perf.js");t.PagedList=o.extend({init:function(e){this._super.apply(this,arguments),this.model_count=e.initial_count,this.container=window,this.first_hidden_index=0,this.visible_count=0,this.invisible_count=0,this.total_count=0,this.initializeCounts(),this.max_should_show=this.buffer_count,this.hidden_count=0,this.currently_fetching=!1,this.waiting_for_updates=!1,this.waiting_for_updates_from_preload=!1,this.show_hidden_when_done_updating=!1,this.lastGetMoreSucceeded=!0,this.eventEmitter=new l,this.eventEmitter.on("onGetMoreDone",this.maybeUpdateOptimizedPaged),this.retarget_links&&this.retarget(),this.pagingDone=!1,this.userPerceivedAction=null},getFocusedItem:function(){var e=s.getLiveDomId(this.cid),t=n("#"+e+" .pagedlist_item:focus").first();return t.length?t:null},maybeScrollToItem:function(e,t,i){var o=e.height(),s=e.position().top,a=s+o,r=n(document).scrollTop()+c.headerOffset,d=Math.max(0,n(window).height()-(c.headerOffset+c.actionBarHeight+c.scrollContext)),l=r+d;if(!t.length){if(i&&s>=r)return void c.scrollAndFocus(0);if(!i&&a<=l)return void c.scrollAndFocus(n(document).height());t=e}if(a<r||s>l)return void c.scrollAndFocus(s);var u=i&&s>=r-5||!i&&a<=l+5;u&&(o=t.height(),s=t.position().top,a=s+o);var h=r;if(i)u&&o>d?h=a-d:s<r&&(h=s);else{var p=.25*n(window).height();s>r+p?h=s-p+5:u||(h=r+d)}h=r+Math.max(Math.min(h-r,d),-d),c.scrollAndFocus(h,u&&t)},onMoreButtonClick:function(e){return e||a.beginCanBeRelatedToUserActionBlock(100),this.showHiddenAndMaybeGetMore()||(this.show_hidden_when_done_updating=!0),this.currently_fetching&&this.showLoading(),this.startUserPerceivedAction(),!1},loadMoreButton:function(){var e=this;this.child("more_button").$id("@more").click(this.onMoreButtonClick.bind(this)),!this.crawler&&this.has_more&&d.execAfterLoadDelayed(function(){setTimeout(e.maybeGetMore.bind(e),50)})},initializeCounts:function(){var e=s.getLiveDomId(this.cid);if(e){var t=document.getElementById(e);if(t)for(var i=t.childNodes,o=0;o<i.length;o++){var a=n(i[o]),r=a.attr("id");r&&a.hasClass("pagedlist_item")&&(this.first_hidden_index+=1,this.total_count+=1,a.hasClass("pagedlist_invisible")?this.invisible_count+=1:this.visible_count+=1)}}},showHiddenAndMaybeGetMore:function(){return this.showHidden(this.buffer_count),this.maybeGetMore()},showHidden:function(e){var t=0,i=0,o=s.getLiveDomElement(this.cid);if(o){for(var a=o.childNodes,r=!1,d=0;d<a.length;d++){var l=n(a[d]);if(l.hasClass("pagedlist_item")&&l.hasClass("pagedlist_hidden")&&(l.hasClass("pagedlist_invisible")||(t+=1),r||(r=!0),l.removeClass("pagedlist_hidden"),a[d].style.display="",i+=1,t>=e))break}this.visible_count+=t,this.hidden_count-=t,this.first_hidden_index+=i,this.has_more||this.pagingDone||(this.pagingDone=!0,this.onPagingDone()),this.visible_count>this.max_should_show&&(this.max_should_show=this.visible_count),this.eventEmitter.trigger("onShowHidden")}},onPagingDone:function(){},hideLoading:function(){var e=this.child("more_button");e&&(e.$id("@loading").hide(),this.lastGetMoreSucceeded?e.updateAutoClickCapable():e.auto_click_capable=!1,e.maybeEnableOrDisableAutoClick())},showLoading:function(){var e=this.child("more_button");if(e&&this.auto_paged&&!this.crawler){var t=this.child("more_button").$id("@loading");this.spinner||(this.spinner=u.createDots(),t.append(this.spinner)),t.show()}else e&&e.$id("@loading").show()},hideMoreButton:function(){var e=this.child("more_button");e&&!e.isVirtual&&e.maybeHideButton()},showMoreButton:function(){var e=this.child("more_button");e&&!e.isVirtual&&e.maybeShowButton()},maybeGetMore:function(e){return this.currently_fetching||this.waiting_for_updates||this.waiting_for_updates_from_preload?e!==undefined&&this.total_count<e&&(this.eventEmitter.once("onGetMoreDone",this.maybeGetMore.bind(this,e)),!0):(e!==undefined&&this.total_count<e?this.getMore(e):this.visible_count+this.hidden_count>=this.model_count&&this.hidden_count<=this.buffer_count/4?this.getMore():this.hidden_count<=0&&this.hideMoreButton(),!0)},maybeUpdateOptimizedPaged:function(){this.optimize_for_seo&&(this.model_count>this.offset_count&&(this.model_count-=this.offset_count),this.child("html_nav")&&(this.html_nav_item=s.getLiveDomElement(this.child("html_nav").cid),this.html_nav_item.style.display="block"))},getMore:function(e){return this.currently_fetching=!0,this.waiting_for_updates=!0,this.serverCall("increase_count").kwargs({cid:this.cid,num:e!==undefined?e-this.total_count:this.buffer_count,current:this.model_count}).disableDefaultUserPerceivedLogging().success(this._onGetMoreSuccess.bind(this)).error(this._onGetMoreError.bind(this)).send(),!1},_onGetMoreSuccess:function(){this.lastGetMoreSucceeded=!0,this.currently_fetching=!1,this.waiting_for_updates||(this.hideLoading(),this.show_hidden_when_done_updating&&(this.show_hidden_when_done_updating=!1,this.showHiddenAndMaybeGetMore())),this.eventEmitter.trigger("onGetMoreDone")},_onGetMoreError:function(){var e=this;this.lastGetMoreSucceeded=!1,this.currently_fetching=!1,setTimeout(function(){e.waiting_for_updates&&e.userPerceivedAction&&(h.finishAction(e.userPerceivedAction),e.userPerceivedAction=null),e.waiting_for_updates=!1,e.hideLoading()},2e3)},onInsertNode:function(e,t){var i=n("#"+t);if(i.hasClass("pagedlist_item")){this.retarget_links&&i.find('a:not([href^="#"])').each(function(){"feed_modal"!=this.target&&n(this).attr("target","_blank")});var o=i.hasClass("pagedlist_invisible");if(this.total_count+=1,e.position>0&&e.position>=this.first_hidden_index)i.addClass("pagedlist_hidden"),e.transition.type="none",o||(this.hidden_count+=1,this.fixed_size_paged_list&&this.first_hidden_index<this.max_should_show?this.showHidden(1):this.showMoreButton());else{i.removeClass("pagedlist_hidden"),i[0].style.display="";var a=!0;if(o)this.invisible_count+=1;else if(this.visible_count+=1,this.fixed_size_paged_list&&this.visible_count>=this.first_hidden_index&&this.first_hidden_index>=this.max_should_show){a=!0;for(var r=s._domids[this.cid],d=document.getElementById(r),l=d.childNodes,c=0,u=0;u<l.length;u++){var h=n(l[u]);if(h.hasClass("pagedlist_item")&&!h.hasClass("pagedlist_hidden")&&!h.hasClass("pagedlist_invisible")&&(c+=1)>this.first_hidden_index){h.addClass("pagedlist_hidden"),l[u].style.display="none",this.hidden_count+=1,this.visible_count-=1,this.showMoreButton();break}}}this.fixed_size_paged_list&&a||(this.first_hidden_index+=1)}}},onDeleteNode:function(e,t){var i=n("#"+t);if(i.hasClass("pagedlist_item")){var o=i.hasClass("pagedlist_invisible");this.total_count-=1,e.position>=this.first_hidden_index?o||(this.hidden_count-=1):(this.first_hidden_index-=1,o?this.invisible_count-=1:(this.visible_count-=1,this.fixed_size_paged_list&&this.showHidden(1)))}},onUpdate:function(e){this.model_count=e.count,this.has_more=e.has_more;var t=this.child("more_button");t&&!t.isVirtual&&(t.maybeEnableOrDisableAutoClick(),this.hidden_count<=0?this.hideMoreButton():this.showMoreButton()),this.auto_paged&&this.waiting_for_updates&&this.finishUserPerceivedAction(),this.waiting_for_updates=!1,this.waiting_for_updates_from_preload=!1,this.visible_count<this.buffer_count&&this.hidden_count>0&&(this.show_hidden_when_done_updating=!0);var i=!0;this.currently_fetching||(this.hideLoading(),this.show_hidden_when_done_updating&&(this.show_hidden_when_done_updating=!1,this.showHiddenAndMaybeGetMore(),i=!1)),this.eventEmitter.trigger("onGetMoreDone"),i&&this.maybeGetMore()},startUserPerceivedAction:function(){this.userPerceivedAction||(this.userPerceivedAction=h.startUserPerceived({hmac:this.getHmac(),method:"increase_count"}))},finishUserPerceivedAction:function(){this.startUserPerceivedAction(),h.finishAction(this.userPerceivedAction),this.userPerceivedAction=null},orderedVisibleChildren:function(){var e,t=s.getLiveDomElement(this.cid),i=t.childNodes,o=[];for(e=0;e<i.length;e++){var a=n(i[e]),r=a.attr("id");r&&a.hasClass("pagedlist_item")&&!a.hasClass("pagedlist_invisible")&&o.push(r)}return o},allOrderedChildren:function(){for(var e=s.getLiveDomElement(this.cid),t=e.childNodes,i=!1,o=[],a=0;a<t.length;a++){var r=n(t[a]),d=r.attr("id");d&&r.hasClass("pagedlist_item")&&(!i&&r.hasClass("pagedlist_invisible")||(i=!0,o.push(d)))}return o},retarget:function(){n("#"+s.getLiveDomId(this.cid)+" .pagedlist_item").find('a:not([href^="#"])').each(function(){"feed_modal"!=this.target&&n(this).attr("target","_blank")})}}),t.PagedListMoreButton=o.extend({init:function(){this._super.apply(this,arguments),this.last_check_time=0,this.rate_limiter_ms=245,this.auto_click_enabled=!1,this.updateAutoClickCapable()},updateAutoClickCapable:function(){this.auto_click_capable=null!==this.auto_click_period&&this.auto_click_period>0},checkButtonPosition:function(e){if(this.auto_click_capable&&this.parent()){var t=+new Date;if(e||!(t<this.last_check_time+this.rate_limiter_ms)){var i=this.parent().model_count;this.parent().waiting_for_updates&&(i+=this.parent().buffer_count);var o=this.shouldEnableAutoClickFromModelCount(i);this.last_check_time=t;if(0!==this.$id("@more").length){var s=this.$id("@sentinel"),a=this.parent().container,d=Math.ceil(n(a).height()),l=!1;if(r.isElementInViewport(s.get(0)))l=!0,this.parent().auto_paged&&this.parent().startUserPerceivedAction();else{n(a).height()+n(a).scrollTop()<=n(s).offset().top-d||(l=!0)}if(l)return this.parent().currently_fetching||this.parent().waiting_for_updates?(this.parent().showLoading(),void(o&&(this.parent().show_hidden_when_done_updating=!0))):void(o&&this.parent().onMoreButtonClick())}}}},onLoad:function(){var e=this;if(this.parent().loadMoreButton(),this.parent().eventEmitter.on("onShowHidden",function(){e.auto_click_capable&&!e.auto_click_enabled&&e.shouldEnableAutoClickFromModelCount(e.parent().model_count+e.parent().buffer_count)&&e.$id("@more").is(":visible")&&e.maybeHideButton()}),this.auto_click_capable){var t=function(){setTimeout(e.checkButtonPosition.bind(e,!1),125)};this._mousemove_handler=t,this._keypress_handler=t,this._scroll_handler=t,document.addEventListener("mousemove",this._mousemove_handler),document.addEventListener("keypress",this._keypress_handler),document.addEventListener("scroll",this._scroll_handler)}this.maybeEnableOrDisableAutoClick(),this.auto_click_enabled&&d.execAfterLoadDelayed(function(){setTimeout(e.checkButtonPosition.bind(e,!0),125)})},onUnload:function(){this._mousemove_handler!==undefined&&document.removeEventListener("mousemove",this._mousemove_handler),this._keypress_handler!==undefined&&document.removeEventListener("keypress",this._keypress_handler),this._scroll_handler!==undefined&&document.removeEventListener("scroll",this._scroll_handler)},maybeShowButton:function(){this.auto_click_enabled||this.$id("@more").show()},maybeHideButton:function(){this.$id("@more").hide()},shouldEnableAutoClickFromModelCount:function(e){return e%this.auto_click_period!=0},maybeEnableOrDisableAutoClick:function(){if(!this.auto_click_capable)return void(this.auto_click_enabled=!1);var e=this.shouldEnableAutoClickFromModelCount(this.parent().model_count);e&&!this.auto_click_enabled?(this.auto_click_enabled=!0,this.parent().hideMoreButton()):!e&&this.auto_click_enabled&&(this.auto_click_enabled=!1)},counterStr:function(){return"PagedList counters: total_count "+this.total_count+", visible_count "+this.visible_count+", invisible_count "+this.invisible_count+", hidden_count "+this.hidden_count+", first_hidden_index "+this.first_hidden_index}})},"./view/photo.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.InlinePhotoEditor=n.extend({onLoad:function(){var e=this;this.$id("@x_photo").click(function(t){return t.preventDefault(),e.createModal("load_modal").onSubmit(function(){e.serverCall("remove_photo").send()}).show(),!1}),e.whenOnLoaded(function(){e.$id("@photo").hover(function(){e.$id("@edit").toggleClass("hidden"),e.$id("@x_photo").toggleClass("hidden")})})}})},"./view/placepicker.js":function(e,t,i){function n(e){c?e():(p(),u.push(e))}var o=i("./shared/core/component.js").Component,s=i("./shared/jquery.js"),a=i("./shared/loadjs.js").loadJS,r=i("./shared/util.js"),d=i("./w2.dialog.js"),l=i("./shared/window_manager.js"),c=!1,u=[],h=i("./settings.js").interface_strings,p=r.once(function(){a("//maps.googleapis.com/maps/api/js?sensor=false&libraries=places",function(){for(c=!0;u.length;)u.pop().call()})});t.PlacePicker=o.extend({onLoad:function(){n(this.onLoadBase.bind(this))},onLoadBase:function(){var e=this;this.address=this.default_location,this.initializeGoogleMaps(),!0===this.mutable&&(this.$id("@edit_map").click(function(){return e.toggleEditor(),!1}),this.$id("@change_location").click(function(){if(e.place||e.marker){e.$id("@search_text_field").blur();var t,i;if(e.map.getBounds().contains(e.marker.getPosition())?(t=e.marker.getPosition().lat(),i=e.marker.getPosition().lng()):(t=e.map.getCenter().lat(),i=e.map.getCenter().lng()),!e.place){var n=new google.maps.LatLng(t,i);(new google.maps.Geocoder).geocode({location:n},function(t,i){if(i==google.maps.GeocoderStatus.OK&&t.length){var n=t[0];e.radius=e.computeRadius(n.geometry.viewport),e.setAddress(n.address_components)}})}var o=s.trim(e.$id("@search_text_field").val());e.serverCall("place_changed").kwargs({radius:e.radius,reference:e.place&&e.place.reference||e.reference,lat:t,lng:i,viewport:{zoom:e.map.getZoom(),mapTypeId:e.map.getMapTypeId(),icon:e.place&&e.place.icon,tilt:e.map.getTilt(),heading:e.map.getHeading()},address:o.length?o:e.address}).success(function(){e.default_location.hasLocation=!0}).send()}else e.$id("@search_text_field").focus()}),this.$id("@edit").click(function(){return e.toggleEditor(),!1}),this.$id("@add").click(function(){return e.reinitializeMap(),!1}),this.$id("@clear").click(function(){return d.createDialog(e).title(e.dialog_title).cancel(null,h.cancel).ok(function(){e.serverCall("place_cleared").success(e.toggleEditor.bind(e)).send()},e.dialog_title).html(e.dialog_message),!1}),this.$id("@close").click(function(){return e.toggleEditor(),e.initializeGoogleMaps(),!1===e.default_location.hasLocation&&e.$id("@map_wrapper").hide(),!1}),"#editlocation"==l.getHash().substr(0,13)&&this.reinitializeMap())},initializeGoogleMaps:function(){n(this.initializeGoogleMapsBase.bind(this))},initializeGoogleMapsBase:function(){var e=this;this.mapOptions={center:window.google&&google.maps&&new google.maps.LatLng(this.default_location.latitude,this.default_location.longitude),zoom:this.viewport&&this.viewport.zoom||7,mapTypeId:this.viewport&&this.viewport.mapTypeId||window.google&&google.maps&&google.maps.MapTypeId.ROADMAP||"roadmap",tilt:this.viewport&&this.viewport.tilt!==undefined&&this.viewport.zoom>=18?this.viewport.tilt:45,heading:this.viewport&&this.viewport.heading,streetViewControl:!this.mutable};var t=this.viewport&&this.viewport.icon;if(!0===this.static_map){var i="//maps.googleapis.com/maps/api/staticmap?center="+encodeURIComponent(this.default_location.latitude+","+this.default_location.longitude)+"&zoom="+encodeURIComponent(this.mapOptions.zoom)+"&size="+encodeURIComponent(this.size.width+"x"+this.size.height)+"&maptype="+encodeURIComponent(this.mapOptions.mapTypeId)+"&markers="+encodeURIComponent("icon:"+t+"shadow:false|"+this.default_location.latitude+","+this.default_location.longitude)+"&sensor=false",n=s('<img src="'+i+'" />');return void this.$id("@map_canvas").replaceWith(n)}if(this.map=new google.maps.Map(this.$id("@map_canvas").get(0),this.mapOptions),!0!==this.simple_view&&!0!==this.mutable||this.toggleControls(!1),!1!==this.default_location.hasLocation&&this.updateMarker(t,this.mapOptions.center,this.default_text),!0===this.mutable&&this.toggleDraggable(!1),!0===this.mutable){var o=this.$id("@search_text_field").get(0),a=new google.maps.places.Autocomplete(o);a.bindTo("bounds",this.map),google.maps.event.addListener(a,"place_changed",function(){e.infowindow&&e.infowindow.close(),e.place=a.getPlace(),e.place.geometry.viewport?(e.map.fitBounds(e.place.geometry.viewport),e.radius=e.computeRadius(e.place.geometry.viewport)):(e.map.setCenter(e.place.geometry.location),e.map.setZoom(17),e.radius=30),e.setAddress(e.place.address_components),e.updateMarker(e.place.icon,e.place.geometry.location)}),google.maps.event.addListener(this.map,"click",function(t){if(e.getControlState()){var i=t.latLng;e.radius=e.computeRadius(e.map.getBounds()),e.handleMarkerReposition(i),e.updateMarker(null,i)}})}},setAddress:function(e){var t=this;if(this.address="",e){this.address=[e[0]&&e[0].short_name||"",e[1]&&e[1].short_name||"",e[2]&&e[2].short_name||""],this.address[1]==this.address[2]&&this.address.splice(2,1),this.address[0]==this.address[1]&&this.address.splice(1,1);var i="";s.each(this.address,function(e,n){i+=n,/^[0-9]+$/.test(n)?i+=" ":e!=t.address.length-1&&(i+=", ")}),this.address=i}},reinitializeMap:function(){var e=this;this.$id("@map_wrapper").show(0,function(){e.initializeGoogleMaps(),e.toggleEditor(),e.$id("@search_text_field").focus()})},toggleEditor:function(){this.$id("@view").toggleClass("hidden"),this.$id("@editor").toggleClass("hidden"),this.$id("@edit_map").toggleClass("hidden"),this.toggleDraggable(),this.toggleControls()},getControlState:function(){return!!this.mapOptions.mapTypeControl},toggleControls:function(e){n(this.toggleControlsBase.bind(this,e))},toggleControlsBase:function(e){var t=e!==undefined?e:!this.getControlState();this.mapOptions.mapTypeControl=t,this.mapOptions.panControl=t,this.mapOptions.zoomControl=t,this.mapOptions.scaleControl=t,this.mapOptions.rotateControl=t,this.mapOptions.overviewMapControl=t,this.map.setOptions(this.mapOptions)},toggleDraggable:function(e){n(this.toggleDraggableBase.bind(this,e))},toggleDraggableBase:function(e){this.mapOptions.draggable=e!==undefined?e:!this.mapOptions.draggable,this.mapOptions.draggable?(this.mapOptions.minZoom=undefined,this.mapOptions.maxZoom=undefined,this.marker&&this.marker.setDraggable(!0)):(this.mapOptions.minZoom=this.map.getZoom(),this.mapOptions.maxZoom=this.map.getZoom(),this.marker&&this.marker.setDraggable(!1)),this.map.setOptions(this.mapOptions)},updateMarker:function(e,t){n(this.updateMarkerBase.bind(this,e,t))},updateMarkerBase:function(e,t){var i=this;this.marker&&this.marker.setMap(null);var n=new google.maps.MarkerImage(e||"//maps.gstatic.com/mapfiles/place_api/icons/geocode-71.png",new google.maps.Size(40,40),new google.maps.Point(0,0),new google.maps.Point(20,40),new google.maps.Size(40,40));this.marker=new google.maps.Marker({clickable:!0,draggable:this.mapOptions&&this.mapOptions.draggable,icon:n,map:this.map,position:t}),google.maps.event.addListener(this.marker,"dragend",function(e){var t=e.latLng;i.handleMarkerReposition(t)}),this.updateInfoWindow(t)},handleMarkerReposition:function(e){n(this.handleMarkerRepositionBase.bind(this,e))},handleMarkerRepositionBase:function(e){var t=this;this.place=null,window.setTimeout(function(){t.map.panTo(e)},1e4),(new google.maps.Geocoder).geocode({location:e},function(i,n){if(n==google.maps.GeocoderStatus.OK&&i.length){var o=i[0];t.radius=t.computeRadius(o.geometry.viewport),t.setAddress(o.address_components),t.updateInfoWindow(e)}})},updateInfoWindow:function(e){n(this.updateInfoWindowBase.bind(this,e))},updateInfoWindowBase:function(e){var t=this;this.infowindow&&this.infowindow.close(),this.address&&this.address.length&&(this.infowindow=new google.maps.InfoWindow({content:this.address,position:e}),google.maps.event.addListener(this.marker,"click",function(){t.infowindow.open(t.map,t.marker)}))},computeRadius:function(e){var t=e.getNorthEast(),i=e.getSouthWest(),n=t.lat(),o=i.lat();return Math.floor(111045*Math.abs(n-o)/2)}})},"./view/pmsg.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/jquery.js");t.PMsg=n.extend({onLoad:function(){var e=this;this.$id("@x").click(function(){return e.close(),!1})},close:function(){this.$id("@container").hide(),o(".pmsg_container").hide()}})},"./view/reorderable_list.js":function(e,t,i){function n(e){var t=e.style[h];if(t)return{value:t,original:t};if(window.getComputedStyle){var i=window.getComputedStyle(e).getPropertyValue(p);if(i&&"none"!==i)return{value:i,original:""}}return{value:"",original:""}}function o(e){var t=e.ownerDocument&&e.ownerDocument.defaultView&&e.ownerDocument.defaultView.getComputedStyle&&e.ownerDocument.defaultView.getComputedStyle(e,null),i=t&&t.getPropertyValue("height")||"";return i=i&&i.indexOf(".")>-1?parseFloat(i)+parseInt(t.getPropertyValue("padding-top"))+parseInt(t.getPropertyValue("padding-bottom"))+parseInt(t.getPropertyValue("border-top-width"))+parseInt(t.getPropertyValue("border-bottom-width")):e.offsetHeight}function s(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}var a=i("./shared/core/component.js").Component,r=i("./shared/events/index.js"),d=i("./tooltip.js"),l=i("./shared/jquery.js"),c=document.createElement("div"),u="webkitTransition"in c.style?"webkitTransition":"transition",h="webkitTransform"in c.style?"webkitTransform":"transform",p="webkitTransform"===h?"-webkit-transform":"transform",f="webkitUserSelect"in c.style?"webkitUserSelect":"userSelect";c.style[h]="translateZ(0)";var _=c.style[h]?"translateZ(0) ":"",m=c.style[h]?"translateZ(1px) ":"";t.ReorderableList=a.extend({onLoad:function(){this.pageRoots=l(".Standard2ColLayout").add(l(".ContentPageFeed").parent());var e=this;this.handleEvent(r.Types.REORDERABLE_LIST_ITEM_UPDATE,function(){e.is_editing&&(e.detach(),e.attach()),e.showErrorOnLiveUpdate()}),this.handleEvent(r.Types.REORDERABLE_LIST_ITEM_ACTIVE,function(){e.$id("@wrapper").hasClass("is_editing")&&e.resetActiveState()})},isOnDragActive:!1,enableLocalUpdate:!0,onStartSectionMousedownCallback:null,onEndSectionMousedownCallback:null,onStartSubsectionMousedownCallback:null,onEndSubsectionMousedownCallback:null,onStartSectionMousemoveCallback:null,onEndSectionMousemoveCallback:null,onStartSubsectionMousemoveCallback:null,onEndSubsectionMousemoveCallback:null,onStartSectionMouseupCallback:null,onEndSectionMouseupCallback:null,onStartSubsectionMouseupCallback:null,onEndSubsectionMouseupCallback:null,setToDefaultView:function(){this.target.node.style[f]="",this.target.node.style[u]="",this.target.node.style[h]=this.target.baseTransform.original,this.target.node.style.zIndex="",document.body.removeChild(this.targetNodeClone),this.targetNodeClone=null,this.target.node.style.visibility="";for(var e=0;e<this.sectionNodesContainer.length;e++){var t=this.sectionNodes[e][0];t.style.height="",t.style[h]="",t.style[u]="";for(var i=0;i<this.sectionNodesContainer[e].nodes.length;i++){var n=this.sectionNodesContainer[e].nodes[i];n.node.style[h]=n.baseTransform.original,n.node.style[u]=""}}this.pageRoots.removeClass("unselectable"),this.pageRoots.removeClass("u-select--off"),s(),this.removeMouseHandlers()},attach:function(){this.ReorderableList=this.$id("@wrapper")[0],this.otherNodes=[];var e=[];this.sectionNodes=this.$id("@wrapper").find(".ReorderableListBranch").each(function(){e.push(l(this).parent())}),this.sectionNodes=e;for(var t=0;t<this.sectionNodes.length;t++)for(var i=this.sectionNodes[t].find(".ReorderableListContents .drag_icon"),n=0;n<i.length;n++){var o=i[n],s=l(o).closest(".ReorderableListItem").parent(),a={startSectionIndex:t,startSubsectionIndex:o,node:s};l(o).on("mousedown",a,this._onSubsectionMousedown.bind(this))}},detach:function(){if(this.sectionNodes)for(var e=0;e<this.sectionNodes.length;e++)for(var t=this.sectionNodes[e].find(".ReorderableListContents .drag_icon"),i=0;i<t.length;i++){var n=t[i];l(n).off("mousedown")}},updatePosition:function(e,t){this.latestPosition=t;var i=document.body,n=i.scrollTop;n!=i.scrollTop&&(this.startPosition.y+=n-i.scrollTop),this.latestPosition.time-this.previousPosition.time>100&&(this.previousPosition=this.latestPosition)},removeMouseHandlers:function(){this.mouseHandlersAttached&&(this.mouseHandlersAttached=!1,l(window).off("mousemove"),l(window).off("mouseup"))},_onMousedown:function(e){var t=e.data.node[0];this.startSectionIndex=e.data.startSectionIndex,this.startSubsectionIndex=e.data.startSubsectionIndex,this.target={node:t,baseTransform:n(t),height:t.offsetHeight},this.zero=this.target.node.offsetTop+this.target.height/2,this.sectionNodesContainer=[];for(var i=0;i<this.sectionNodes.length;i++){var s,a=[],r=this.sectionNodes[i][0];this.target.node!==r&&(r.style[u]=p+" 0.2s ease-in-out");for(var d=this.sectionNodes[i].find(".ReorderableListContents .ReorderableListItem"),l=0;l<d.length;l++){var c=d.eq(l)[0].parentNode;this.target.node!==c&&(c.style[u]=p+" 0.2s ease-in-out"),s=c.offsetTop,a.push({node:c,baseTransform:n(c),pos:s+(s<this.zero?c.offsetHeight:0)-this.zero})}s=r.offsetTop,this.sectionNodesContainer.push({nodes:a,posRelative:s+(s<this.zero?r.offsetHeight:0)-this.zero,pos:r.getBoundingClientRect().top+window.pageYOffset-r.clientTop,height:o(r)})}var h={x:e.pageX,y:e.pageY,time:e.timeStamp};this.startTransformPosition=e.clientY,this.startPosition=this.previousPosition=this.latestPosition=h,this.targetNodeClone=this.target.node.cloneNode(!0),this.target.node.style.visibility="hidden";var f=this.target.node.getBoundingClientRect();this.targetNodeClone.style.position="fixed",this.targetNodeClone.style.top=f.top+"px",this.targetNodeClone.style.left=f.left+"px",this.targetNodeClone.style["background-color"]="#fff",document.body.appendChild(this.targetNodeClone)},_onSectionMousedown:function(e){"function"==typeof this.onStartSectionMousedownCallback&&this.onStartSectionMousedownCallback(),this._onMousedown(e),"function"==typeof this.onEndSectionMousedownCallback&&this.onEndSectionMousedownCallback(this.target.node,this.targetNodeClone),this._onSectionMousemove(e),this.mouseHandlersAttached||(this.mouseHandlersAttached=!0,l(window).on("mousemove",this._onSectionMousemove.bind(this)),l(window).on("mouseup",this._onSectionMouseup.bind(this)))},_onSubsectionMousedown:function(e){"function"==typeof this.onStartSubsectionMousedownCallback&&this.onStartSubsectionMousedownCallback(),this._onMousedown(e),"function"==typeof this.onEndSubsectionMousedownCallback&&this.onEndSubsectionMousedownCallback(this.targetNodeClone,this.startSectionIndex),this._onSubsectionMousemove(e),this.mouseHandlersAttached||(this.mouseHandlersAttached=!0,l(window).on("mousemove",this._onSubsectionMousemove.bind(this)),l(window).on("mouseup",this._onSubsectionMouseup.bind(this)))},_onMousemove:function(e){this.isOnDragActive=!0,this.updatePosition(e,{x:e.pageX,y:e.pageY,time:e.timeStamp}),this.transformY=e.clientY,this.scrollIfNearEdge(this.transformY),this.pageRoots.addClass("unselectable"),this.pageRoots.addClass("u-select--off");var t=this.transformY-this.startTransformPosition;this.target.node.style[h]="translate(0, "+t+"px) "+m+this.target.baseTransform.value,this.targetNodeClone.style[h]=this.target.node.style[h]},_onSectionMousemove:function(e){"function"==typeof this.onStartSectionMousemoveCallback&&this.onStartSectionMousemoveCallback(),this._onMousemove(e);for(var t=this.getTotalMovement(),i=this.target.node.offsetHeight,n=0;n<this.sectionNodesContainer.length;n++){var o=this.sectionNodesContainer[n],s=this.sectionNodes[n][0],a=0;o.posRelative<0&&t.y<0&&o.posRelative>t.y?a=i:o.posRelative>0&&t.y>0&&o.posRelative<t.y&&(a=-i),s.style[h]=a?"translate(0,"+a+"px) "+_:""}"function"==typeof this.onEndSectionMousemoveCallback&&this.onEndSectionMousemoveCallback()},_onSubsectionMousemove:function(e){"function"==typeof this.onStartSubsectionMousemoveCallback&&this.onStartSubsectionMousemoveCallback(),this._onMousemove(e);for(var t=this.getTotalMovement(),i=this.target.height,n=0;n<this.sectionNodesContainer.length;n++)this.latestPosition.y>this.sectionNodesContainer[n].pos&&this.latestPosition.y<(this.sectionNodesContainer[n+1]?this.sectionNodesContainer[n+1].pos:Infinity)?(this.endSectionIndex=n,n!==this.startSectionIndex?this.sectionNodes[n][0].style.height=this.sectionNodesContainer[n].height+this.target.height+"px":this.sectionNodes[n][0].style.height=this.sectionNodesContainer[n].height+"px"):n===this.startSectionIndex?this.sectionNodes[n][0].style.height=this.sectionNodesContainer[n].height-this.target.height+"px":this.sectionNodes[n][0].style.height=this.sectionNodesContainer[n].height+"px";for(n=0;n<this.sectionNodesContainer.length;n++)for(var o=this.sectionNodesContainer[n],s=0;s<o.nodes.length;s++){var a=0,r=o.nodes[s];if(r.pos<0&&t.y<0&&r.pos>t.y?a+=i:r.pos>0&&t.y>0&&r.pos<t.y&&(a+=-i),this.latestPosition.y>o.pos&&n>this.startSectionIndex){a+=i,this.zero=this.target.node.offsetTop+this.target.height/2;var d=r.node.offsetTop;t.y>0?r.pos=d+(d<this.zero?r.offsetHeight:0)-this.zero+i:t.y<0&&(r.pos=d+(d<this.zero?r.offsetHeight:0)-this.zero-i);for(var l=0;l<this.sectionNodes.length;l++)this.sectionNodesContainer[l].pos=this.sectionNodes[l][0].getBoundingClientRect().top+window.pageYOffset-this.sectionNodes[l][0].clientTop}r.node.style[h]=a?"translate(0,"+a+"px) "+_+r.baseTransform.value:r.baseTransform.original}"function"==typeof this.onEndSubsectionMousemoveCallback&&this.onEndSubsectionMousemoveCallback()},_onMouseup:function(){this.isOnDragActive=!1,l("html, body").stop()},_onSectionMouseup:function(){"function"==typeof this.onStartSectionMouseupCallback&&this.onStartSectionMouseupCallback(),this._onMouseup();var e,t=this.getTotalMovement();if(t.y<0){for(e=0;e<this.sectionNodesContainer.length;e++)if(this.sectionNodesContainer[e].posRelative>t.y){this.endSectionIndex=e,this.enableLocalUpdate&&this.target.node.parentNode.insertBefore(this.target.node,this.sectionNodes[this.endSectionIndex]);break}}else for(e=this.sectionNodesContainer.length-1;e>=0;e--)if(this.sectionNodesContainer[e].posRelative<t.y){this.startSectionIndex===e+1?this.endSectionIndex=e+1:this.endSectionIndex=e,this.enableLocalUpdate&&this.target.node.parentNode.insertBefore(this.target.node,this.sectionNodes[e+1]?this.sectionNodes[e+1]:null);break}if(this.removeMouseHandlers(),!this.enableLocalUpdate){var i=this.targetNodeClone.getBoundingClientRect().left;this.targetNodeClone.style[h]="",this.targetNodeClone.style.position="absolute",this.targetNodeClone.style.left=i;var n,o=l(window).scrollTop();0!==this.endSectionIndex&&(t.y<0?(n=this.sectionNodes[this.endSectionIndex-1][0],o+=n.getBoundingClientRect().bottom):(n=this.sectionNodes[this.endSectionIndex][0],o+=n.getBoundingClientRect().bottom)),this.targetNodeClone.style.top=o+"px"}"function"==typeof this.onEndSectionMouseupCallback&&this.onEndSectionMouseupCallback(this.target.node,this.targetNodeClone,this.endSectionIndex,this.startSectionIndex)},_onSubsectionMouseup:function(){this.removeMouseHandlers(),"function"==typeof this.onStartSubsectionMouseupCallback&&this.onStartSubsectionMouseupCallback(this.target.node,this.endSubsectionIndex,this.startSubsectionIndex),this._onMouseup();var e,t=this.sectionNodesContainer[this.endSectionIndex].nodes,i=this.getTotalMovement();if(0===t.length)this.enableLocalUpdate&&this.sectionNodes[this.endSectionIndex].querySelector("div.nested_contents").firstChild.appendChild(this.target.node),this.endSubsectionIndex=0;else if(i.y<0){for(t[t.length-1].pos+this.target.height>i.y&&(this.localUpdate&&this.sectionNodes[this.endSectionIndex].querySelector("div.nested_contents").firstChild.insertBefore(this.target.node,t[t.length-1].node.nextSibling),this.endSubsectionIndex=t.length),e=0;e<t.length;e++)if(t[e].pos>i.y){this.endSubsectionIndex=e,this.localUpdate&&this.sectionNodes[this.endSectionIndex].querySelector("div.nested_contents").firstChild.insertBefore(this.target.node,t[e].node);break}}else for(t[0].pos>i.y&&(this.localUpdate&&this.sectionNodes[this.endSectionIndex].querySelector("div.nested_contents").firstChild.insertBefore(this.target.node,t[0].node),this.endSubsectionIndex=0),e=t.length-1;e>=0;e--)if(t[e].pos<i.y){this.endSectionIndex===this.startSectionIndex&&e+1!==this.startSubsectionIndex?this.endSubsectionIndex=e:this.endSubsectionIndex=e+1,this.localUpdate&&this.sectionNodes[this.endSectionIndex].querySelector("div.nested_contents").firstChild.insertBefore(this.target.node,t[e+1]?t[e+1].node:null);break}if(!this.enableLocalUpdate){var n=this.targetNodeClone.getBoundingClientRect().left;this.targetNodeClone.style[h]="",this.targetNodeClone.style.position="absolute",this.targetNodeClone.style.left=n;var o,s=l(window).scrollTop();0===this.endSubsectionIndex||0===this.sectionNodesContainer[this.endSectionIndex].nodes.length?(o=l(this.sectionNodes[this.endSectionIndex])[0],s+=o.getBoundingClientRect().top):i.y<0?(o=this.sectionNodesContainer[this.endSectionIndex].nodes[this.endSubsectionIndex-1].node,s+=o.getBoundingClientRect().bottom):(o=this.endSectionIndex!==this.startSectionIndex?this.sectionNodesContainer[this.endSectionIndex].nodes[this.endSubsectionIndex-1].node:this.sectionNodesContainer[this.endSectionIndex].nodes[this.endSubsectionIndex].node,s+=o.getBoundingClientRect().bottom),this.targetNodeClone.style.top=s+"px"}"function"==typeof this.onEndSubsectionMouseupCallback&&this.onEndSubsectionMouseupCallback(this.target.node,this.targetNodeClone,this.endSubsectionIndex,this.startSubsectionIndex,this.endSectionIndex,this.startSectionIndex)},scrollIfNearEdge:function(e){this.isOnDragActive&&(e+50>l(window).height()?l("html, body").stop().animate({scrollTop:l(document).height()},6e3,"linear"):e<100?l("html, body").stop().animate({scrollTop:0},6e3,"linear"):l("html, body").stop())},getTotalMovement:function(){return{x:this.latestPosition.x-this.startPosition.x,y:this.latestPosition.y-this.startPosition.y}}}),t.ReorderableListContents=a.extend({onLoad:function(){this.separator_tooltip_content&&d.attach(this.$id("@separator"),this.separator_tooltip_content)}}),t.ReorderableListItem=a.extend({onLoad:function(){var e=this;this.emitEvent({type:r.Types.REORDERABLE_LIST_ITEM_UPDATE,payload:{}}),e.$id("@remove").click(function(){return e.remove(),!1}),e.$id("@item").mousedown(function(){e.emitEvent({type:r.Types.REORDERABLE_LIST_ITEM_ACTIVE,payload:{}}),l(this).addClass("active").focus()})},remove:function(){this.serverCall("remove").liveMutate().send()}})},"./view/review_queue.js":function(e,t,i){var n=i("./shared/jquery.js"),o=i("./shared/core/component.js").Component,s=i("./shared/core/component.js"),a=i("./shared/errors.js"),r=i("./shared/events/index.js"),d=i("./w2.modal.js").Modal,l=i("./shared/keystrokes.js"),c=i("./shared/window_manager.js"),u=function(){return d.getCurrentModal()!=undefined};t.Queue=o.extend({onLoad:function(){this.time_tracker=this.child("footer").child("time_tracker"),this.setupKeyboardShortcuts(),this.handleEvent(r.Types.REVIEW_QUEUE_LOGOUT,this.onLogout.bind(this)),this.currentlyFetching=!1,this.emptyQueueCheck()||this.setCurrentIndex(0)},items:function(e){var t=this.children().filter(function(e){return e instanceof h});return e?t.filter(function(e){return Boolean(e.active)}):t},seekActiveItemIndex:function(e,t){for(var i=e,n=this.items(!1);;){if(t?(i+=1)>=n.length&&(i=0):(i-=1)<0&&(i=Math.max(0,n.length-1)),i==e)break;if(n[i]&&n[i].active)return i}return null},setupKeyboardShortcuts:function(){for(var e=this,t=0;t<9;t++){var i=this.label_toggle_map[t];if(i!==undefined){var n=function(e){u()||this.currentItem().child("labels").toggleLabelAtIndex(e)}.bind(e,t);l.on([i],n)}}l.on([68],function(){u()||this.currentItem().process()}.bind(e)),e.enable_scroll&&(l.on([74],function(){u()||e.nextItem()}),l.on([75],function(){u()||e.previousItem()}))},afterItemProcess:function(){this.nextItem(),this.maybeFetchNewItem()},handleItemUnload:function(e){var t=!1,i=this.items(!1).map(function(e){return e.cid}).indexOf(e.cid);i<0&&a.report("Trying to unload missing item with cid: "+e.cid),null!==this.currentIndex&&i<this.currentIndex&&(t=!0),e.unload(),t&&this.setCurrentIndex(this.currentIndex-1),this.emptyQueueCheck()},nextItem:function(){this.newItem(!0)},previousItem:function(){this.newItem(!1)},newItem:function(e){var t=this.seekActiveItemIndex(this.currentIndex,e);null!==t?this.setCurrentIndex(t):this.currentIndex=null,this.time_tracker.resetTimer()},setCurrentIndex:function(e){var t=this.items(!1),i=t[this.currentIndex];i&&i.setAsNotCurrent(),this.currentIndex=e;var n=t[e];n.setAsCurrent(this.afterItemProcess.bind(this),this.handleItemUnload.bind(this,n),this.time_tracker)},currentItem:function(){return this.items(!1)[this.currentIndex]},onLogout:function(){this.items(!1).forEach(function(e){e.unload()}),this.newItem(!0),this.$id("@logged_out_queue").removeClass("hidden"),this.hiddenState()},maybeFetchNewItem:function(){if(!(this.currentlyFetching||this.items(!0).length>=this.count)){var e=this.items(!1).map(function(e){return e.__js_init}),t=document.createElement("DIV");t.classList.add("queue_item_container"),this.$id("@queue_item_list").append(t),this.serverCall("get_new_item").kwargs({ignore_items:e}).contentFor(t).success(this.addNewItemFinish.bind(this,t)).except("migration_mismatch",c.reload).error(function(){this.currentlyFetching=!1}).send()}},addNewItemFinish:function(e,t){if(this.currentlyFetching=!1,""===t.html){var i=this.child("dummy_component");i&&s.unloadComponent(i.cid),e.remove(),this.emptyQueueCheck()}else null===this.currentIndex&&this.setCurrentIndex(this.seekActiveItemIndex(-1,!0)),this.maybeFetchNewItem()},emptyQueueCheck:function(){return!(this.currentlyFetching||this.items(!1).length>0)&&(this.$id("@empty_queue").removeClass("hidden"),this.hiddenState(),!0)},hiddenState:function(){n("html, body").scrollTop(0),this.child("logout").hide(),this.child("footer").$id("@footer").addClass("hidden")}}),t.TimeTracker=o.extend({onLoad:function(){this.resetTimer(),setInterval(this.updateTimer.bind(this),1e3)},resetTimer:function(){this.started=new Date,this.updateTimer()},updateTimer:function(){var e=(new Date-this.started)/1e3;this.$id("@review_clock").text(this.formatTime(e))},elapsedTimeMSecs:function(){return new Date-this.started},formatTime:function(e){var t=Math.floor(e/60),i=Math.floor(e%60);return i<10&&(i="0"+i),t+":"+i}});var h=t.QueueItem=o.extend({onLoad:function(){this.active=!0},setAsCurrent:function(e,t,i){this.$id("@item").addClass("current"),this.scrollTo(),this.child("labels").bindDoneHandler(this.process.bind(this)),this.afterProcess=e,this.handleUnload=t,this.time_tracker=i},setAsNotCurrent:function(){this.$id("@item").removeClass("current")},scrollTo:function(){var e=10,t=this.$id("@item"),i=t.offset().top-e;n("html, body").scrollTop(i)},unload:function(){s.unloadComponent(this.cid),this.$id("@item").parents(".queue_item_container").remove()},process:function(){var e=this;this.emitEvent({type:r.Types.REVIEW_QUEUE_ACTIVITY,payload:{}});var t=this.child("labels").getSelected();if(0==t.length)return window.alert("You must select at least one label."),!1;var i={},n=!0;this.children().forEach(function(e){e.validateData&&(e.validateData(t)||(n=!1)),n&&e.getOperationData&&(i[e.cname]=e.getOperationData())}),n&&(this.active=!1,this.$id("@item").addClass("complete"),this.serverCall("process_review").kwargs({labels:t,operation_data:i,time_taken_msecs:this.time_tracker.elapsedTimeMSecs(),notes:this.child("labels").getNotes()}).success(function(){e.handleUnload(e.unload.bind(e))}).except("migration_mismatch",c.reload).send(),this.afterProcess())}});t.LabelSection=o.extend({onLoad:function(){this.bindLabelBoldingHandler(),this.bindEditorLabelSwitch()},getSelected:function(){var e=[];return this.$id("@form input:checked").each(function(t,i){e.push(i.value)}),e},bindDoneHandler:function(e){this.$id("@done_button").unbind("click").bind("click",e)},toggleLabelAtIndex:function(e){var t=this.$id("@label_input_"+e);"radio"==t.attr("type")?t.prop("checked",!0).change():t.prop("checked",!t.prop("checked")).change()},bindLabelBoldingHandler:function(e){this.$id("@form").change(function(){n(this).find("input").each(function(){n(this).prop("checked")?n(this).siblings("label").addClass("selected"):n(this).siblings("label").removeClass("selected")})})},bindEditorLabelSwitch:function(){var e=this.child("notes_editor");e&&e.$id("@editor").on("click",this.toggleLabelAtIndex.bind(this,1))},getNotes:function(){var e=this.child("notes_editor");return e&&e.serialize()}}),t.QueueLogout=o.extend({onLoad:function(){this.updateLastActivity(),this.$id("@logout").click(this.logout.bind(this)),this.timer=setInterval(this.checkTime.bind(this),1e3),this.handleEvent(r.Types.REVIEW_QUEUE_ACTIVITY,this.updateLastActivity.bind(this))},logout:function(){clearInterval(this.timer),this.serverCall("logout").except("migration_mismatch",c.reload).send(),this.emitEvent({type:r.Types.REVIEW_QUEUE_LOGOUT,payload:{}})},updateLastActivity:function(){this.lastActivity=Date.now()},checkTime:function(){(Date.now()-this.lastActivity)/1e3>this.auto_logout_seconds&&this.logout()},onUnload:function(){clearInterval(this.timer)},hide:function(){this.$id("@logout").addClass("hidden")}})},"./view/review_queue/module/question.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.EditableQuestionText=n.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;this.$id("@original").attr("disabled",!0),this.child("editor").setEditorReadyCallback(function(){e.$id("@original").attr("disabled",!1)}),this.$id("@original").click(function(){e.child("editor").resetFromJSON(e.original_json)}),this.$id("@suggested").click(function(){e.child("editor").resetFromJSON(e.suggested_json)})},validateData:function(e){return!(e.length&&parseInt(e[0])===this.fixed_label_value&&this.child("editor").doc.getLength()>this.length_limit&&(window.alert("Please limit your question to "+this.length_limit+" characters."),1))},getOperationData:function(){return{original_question:this.original_json,fixed_question:this.child("editor").serialize()}}})},"./view/review_queue/module/topic.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js"),s=i("./shared/keystrokes.js");t.Suggestions=n.extend({onLoad:function(){var e=this;this.children().forEach(function(t){t.setToggleCallback&&t.setToggleCallback(e.topicsUpdatedCallback.bind(e))}),this.handleEvent(o.Types.QUESTION_TOPIC_SELECTION_ADD,function(t){t.payload.selector_cname==e.selector_cname&&t.payload.name&&e.newTopicAdded({value:t.payload.name})}),this.is_audit||s.on([70],function(t){e.child(e.selector_cname).$input.focus(),t.preventDefault()})},totalNumAvailableAnswerers:function(){var e=0;return this.children().forEach(function(t){var i=t.$id("@row");i&&i.hasClass("selected")&&(e+=t.num_available_answerers||0)}),e},numSuggestions:function(){var e=0;return this.children().forEach(function(t){var i=t.$id("@row");i&&i.hasClass("suggestion_row")&&(e+=1)}),e},validateData:function(e){return!(e.length&&parseInt(e[0])===this.apply_label_value&&!this.enoughAnswerers()&&(window.alert("Oops, the topics you selected do not have enough available answerers. Please select more relevant topics and try again."),1))},getOperationData:function(){var e=[],t=[];return this.children().forEach(function(i){var n=i.$id("@row");n&&n.hasClass("selected")&&(i.tid?e.push(i.tid):t.push(i.name))}),{selected_tids:e,new_topic_names:t}},enoughAnswerers:function(){return this.totalNumAvailableAnswerers()>=this.too_few_available_answerers_threshold},topicsUpdatedCallback:function(){this.enoughAnswerers()?(this.$id("@too_few_status").hide(),this.$id("@normal_status").show(),this.$id("@status_row").removeClass("warn")):(this.$id("@normal_status").hide(),this.$id("@too_few_status").show(),this.$id("@status_row").addClass("warn"))},newTopicAdded:function(e){var t=this,i=e.value,n=document.createElement("div");n.classList.add("suggestion_container"),this.$id("@suggestion_list").append(n),this.serverCall("new_topic_added").kwargs({topic_name:i,num_suggestions:this.numSuggestions()}).contentFor(n).success(function(){t.topicsUpdatedCallback()}).send()}}),t.SuggestionRow=n.extend({onLoad:function(){var e=this;this.is_audit||this.setupKeyboardShortcuts(),this.$id("@row").click(function(){e.toggleSelection()})},setToggleCallback:function(e){this.toggleCallback=e},setupKeyboardShortcuts:function(){var e=this;if(this.index!==undefined&&this.index<20){var t=48+(this.index+1)%10,i=this.index>=10;s.on([t],function(t){t.shiftKey&&i?e.toggleSelection():t.shiftKey||i||e.toggleSelection()})}},toggleSelection:function(){var e=this.$id("@row");e.hasClass("selected")?e.removeClass("selected"):e.addClass("selected"),this.toggleCallback&&this.toggleCallback()}})},"./view/selector.js":function(e,t,i){var n=i("./webnode2.js"),o=i("./shared/core/webnode.js"),s=i("./shared/jquery.js"),a=i("./simscroll.js"),r=i("./shared/window_manager.js"),d=i("./third_party/autosize.js"),l=i("./shared/log_sender.js"),c=i("./shared/core/component.js"),u=c.Component;t.Selector=u.extend({onLoad:function(){function e(e){if("keydown"===e.type){var t=n.child("results");if(t){var i=t.getSelectedResult();null===i&&n.allow_no_selection?n.submit():i&&n.onResultSelected(i,!1,t.$selectedItemElem)}else n.submit()}}function t(t){if(n.shouldSimScroll&&"keydown"==t.type){if(!n.query&&a.maybeSimulateScroll(t))return!1;if(!n.query&&39==t.which)return void n.$input.blur()}switch(t.which){case 13:t.preventDefault(),e(t);break;case 27:n.selectorFocusOutHandler();break;case 38:n.handleUpDownArrowKey(t,-1);break;case 40:n.handleUpDownArrowKey(t,1)}}function i(e){var t=n.$input.val();t!==n.query&&n._setQuery(t)}var n=this;n._busy=!1,n._resultsLastUpdated=Date.now(),n.$input=n.$id("@input"),n.$results_container=n.$id("@results_container"),n.$results=n.$id("@results"),n.$empty_input_prompt=n.$id("@empty_input_prompt"),n.$spinner=n.$id("@spinner"),n.$wrapper=n.$id("@wrapper"),n.$underlay=n.$id("@selector_underlay"),n.shouldSimScroll=!1,n.hasAutoSized=!1,n.query=n.$input.val(),n.has_updated_result=!1,n.inputIsFocused=!1,n.force_below=!1,n.$input.on("input",i).change(i).keydown(t).keyup(t).focus(n.inputFocusHandler.bind(n)).blur(n.inputBlurHandler.bind(n)),n.$wrapper.focusout(n.wrapperFocusoutHandler.bind(n)).focusin(n.wrapperFocusinHandler.bind(n))},handleUpDownArrowKey:function(e,t){if(e.preventDefault(),"keydown"===e.type){var i=this.child("results");i&&i.moveSelection(t)}},inputFocusHandler:function(){this.inputIsFocused=!0,this.has_updated_result||(this.has_updated_result=!0,this.updateResults()),this.is_textarea&&!this.hasAutoSized&&(d(this.$input),this.hasAutoSized=!0),this.showResults(!0),this.length_limit&&this.child("counter").show()},inputBlurHandler:function(){this.inputIsFocused=!1,this.length_limit&&this.child("counter").hide()},selectorFocusOutHandler:function(){this.showResults(!1),this.$input.blur()},wrapperFocusoutHandler:function(e){var t=this.$wrapper.get(0);if(t&&t.contains(e.relatedTarget))return!1;this.showResults(!1)},wrapperFocusinHandler:function(){this.focus()},setQuery:function(e){var t=this.$input[0].selectionStart,i=this.$input[0].selectionEnd;this.$input.val(e),this.$input[0].setSelectionRange(t,i),this._setQuery(e)},queryDidChange:function(){},resultsDidChange:function(){},onResultSelected:function(e,t,i){this.beforeSelectResultCallback&&this.beforeSelectResultCallback(e,t,i),this.resultWasSelected(e,t,i),this.afterResultWasSelectedCallback&&this.afterResultWasSelectedCallback(e,t,i)},resultWasSelected:function(e,t,i){},submit:function(){},shouldShowEmptyInputPrompt:function(){return!(this.show_results_for_empty_query||this.query&&0!==this.query.trim().length)},adjustResultContainerContent:function(){this.shouldShowEmptyInputPrompt()?(this.$results.addClass("hidden"),this.$empty_input_prompt.removeClass("hidden")):(this.$results.removeClass("hidden"),this.$empty_input_prompt.addClass("hidden")),this.preventOverflow()},showResults:function(e){e?(this.$results_container.removeClass("hidden"),this.adjustResultContainerContent()):(this.$results_container.addClass("hidden"),this._needToPreventOverflow=!0)},preventOverflow:function(){if(!this.$results_container.hasClass("hidden")&&this._needToPreventOverflow){this._needToPreventOverflow=!1,this.$results_container.removeClass("inverted"),this.$results_container.css({"overflow-y":"auto",height:"auto"});var e,t=this.$results_container.offset().top,i=this.$results_container.outerHeight(!0),n=t+i,o=s(window).scrollTop()+r.headerOffset,a=s(window).scrollTop()+s(window).height(),d=a-t,l=t-o;l>500&&d<200&&!this.force_below?(this.$results_container.addClass("inverted"),e=o-this.$results_container.offset().top):e=n-a,e>0&&this.$results_container.css({"overflow-y":"scroll",height:i-e})}},getExtraKwargs:function(){return{}},updateResults:function(){var e=this;if(e.shouldShowEmptyInputPrompt())return this._needToPreventOverflow=!0,void e.adjustResultContainerContent();if(!e.isBusy()){var t=Date.now(),i={query:e.query,parent_cid:e.cid,parent_domid:c.getLiveParent(e.cid)},n=e.$results.get(0),o=c.getLiveChildren(e.cid),s=o.filter(function(e){return n.contains(document.getElementById(e))});i.domids_to_remove=JSON.stringify(s);var a=e.getExtraKwargs();for(var r in a)a.hasOwnProperty(r)&&(i[r]=a[r]);e.setBusy(!0),e.serverCall("results_content_for").kwargs(i).success(function(i){e.maybeUpdateResults(i,t),e.resultsServerCallHandler()}).except(function(){e.resultsServerCallHandler(!0)}).error(function(){e.resultsServerCallHandler(!0)}).send()}},maybeUpdateResults:function(e,t){if(t>this._resultsLastUpdated){this._resultsLastUpdated=t;var i=this.$results.get(0);n.forgetContents(s(i)),o.setContent(s(i),e),this._needToPreventOverflow=!0}},resultsServerCallHandler:function(e){this.setBusy(!1),this.$input.is(":focus")&&""!==this.$input.val()&&this.showResults(!0),e||this.child("results").query===this.$input.val()||this.updateResults()},isBusy:function(){return this._busy},setBusy:function(e){function t(){return!i._busy&&i._spinner}var i=this;if(i._busy=e,i._lastBusyUpdate=Date.now(),i._busy&&!i._spinner){i.$spinner.removeClass("hidden"),i._spinner=!0;var n=i._lastBusyUpdate;setTimeout(function(){i._busy&&i._lastBusyUpdate===n&&i.resultsServerCallHandler.call(i)},5e3)}else t()&&setTimeout(function(){t()&&(i.$spinner.addClass("hidden"),i._spinner=null)},100)},focus:function(){var e=this.$id("@input");!this.inputIsFocused&&e&&e.focus()},blur:function(){this.$id("@input").blur()},_setQuery:function(e){this.query=e,this.length_limit&&this.child("counter").updateCounter(e.length),this.queryDidChange(),this.updateResults()}}),t.MultiSelector=t.Selector.extend({onLoad:function(){this._super.apply(this,arguments),this.saved_results=this.saved_results||[]},getExtraKwargs:function(){return{saved_results:this.saved_results}},resultWasSelected:function(e,t,i){this.saved_results.push(e),this.showResults(!1),this.setQuery(""),this.updateDisplayedResults(),this.onSavedResultsChanged()},onSavedResultsChanged:function(){},remove:function(e){this.saved_results.splice(e,1),this.updateDisplayedResults(),this.onSavedResultsChanged()},clear:function(){this.saved_results=[],this.updateDisplayedResults(),this.onSavedResultsChanged()},updateDisplayedResults:function(){var e=this;e.serverCall("saved_results_content_for").contentFor(e.$id("@saved_results"),{useLoadingSpinner:!1}).args(e.saved_results).send()}}),t.MultiSelectorSavedResultList=u.extend({onLoad:function(){for(var e=0;e<this.num_results;e++)this.attachRemoveClickHandler(e)},attachRemoveClickHandler:function(e){var t=this;t.$id("@remove"+e).click(function(){return t.parent().remove(e),!1})}}),t.NavigateToResultUrlSelectorMixin={resultWasSelected:function(e,t){this._super.apply(this,arguments),e.data&&e.data.url&&(t?r.navigateTo(e.data.url,"present"):r.navigateTo(e.data.url))}},t.SelectorWithTypeaheadLogMixin={shouldTypeaheadLog:function(e){return!0},resultWasSelected:function(e,t){var i=this.child("results");if(this.shouldTypeaheadLog(e)){var n={data:i.typeahead_log_data,click_index:i.selectedIndex};parseInt(n.click_index)===n.click_index&&n.click_index>=0&&"undefined"!=typeof n.data&&l.log("typeahead",{message:n})}this._super.apply(this,arguments)}},t.SelectorResults=u.extend({onLoad:function(){var e=this;e.allow_no_selection?e.setSelection(-1):e.setSelection(0),e.$id("@wrapper").on("mouseover",".selector_result",function(t){var i=e.getIndexFromResultElementID(this.id);e.setSelection(i)}).on("mousedown",".selector_result",function(e){e.preventDefault()}).on("click",".selector_result",function(t){var i=e.getIndexFromResultElementID(this.id);e.setSelection(i);var n=e.getSelectedResult(),o=t.metaKey||t.ctrlKey;e.parent().onResultSelected(n,o,e.$selectedItemElem)}),e.allow_no_selection&&e.$id("@wrapper").mouseleave(function(t){e.setSelection(-1)}),e.parent().resultsDidChange!=undefined&&e.parent().resultsDidChange()},getSelectedResult:function(){return-1===this.selectedIndex?null:!this.numResults&&this.allow_no_selection?null:this.results[this.selectedIndex]},setSelection:function(e){if(this.numResults&&!isNaN(parseInt(e)))if(-1===this.selectedIndex||isNaN(parseInt(this.selectedIndex))||this.$id("@result_"+this.selectedIndex).removeClass("selector_highlighted"),(this.allow_no_selection&&e<-1||!this.allow_no_selection&&e<0)&&(e=this.numResults-1),e>this.numResults-1&&(e=this.allow_no_selection?-1:0),-1===e)this.selectedIndex=e,this.$selectedItemElem=null;else{var t=this.$id("@result_"+e);t&&(this.$selectedItemElem=t,this.$selectedItemElem.addClass("selector_highlighted"),this.selectedIndex=e)}},moveSelection:function(e){var t=this.selectedIndex+e;this.setSelection(t)},getIndexFromResultElementID:function(e){var t=e.split("_");return parseInt(t[t.length-1])}}),t.WithServerCallMessageMixin=t.Selector.extend({onLoad:function(){var e=this;e._super.apply(e,arguments),e.$serverMessage=e.$id("@server_message"),e.pendingServerCallRequest=null,e.serverCallBusy=!1},queryDidChange:function(){this._super.apply(this,arguments),this.showServerMessage(!1)},makeServerCall:function(e){this.pendingServerCallRequest=e,this.isBusy()||this.doServerCall()},hasPendingServerCall:function(){return null!==this.pendingServerCallRequest||this.serverCallBusy},resultsServerCallHandler:function(){var e=this;null!==e.pendingServerCallRequest?e.doServerCall():(e._super.apply(e,arguments),e.showServerMessage(!1))},doServerCall:function(){var e=this;e.setBusy(!0),e.serverCallBusy=!0,e.showServerMessage(!1);var t=function(t,i){e.updateServerMessage(t,i)&&e.showServerMessage(!0),e.serverCallBusy=!1,e.setBusy(!1)};e.pendingServerCallRequest.success(function(e){t(!0,e)}).except(function(e){t(!1,e)}).error(function(){t(!1)}).send(),e.pendingServerCallRequest=null},updateServerMessage:function(e,t){return!1},showServerMessage:function(e){e?this.$serverMessage.removeClass("hidden"):this.$serverMessage.addClass("hidden")}})},"./view/suggested_edits.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./shared/events/index.js");t.SuggestedEditBar=n.extend({toggleButtons:function(){this.$id("@suggested_answer_buttons").toggleClass("hidden")}}),t.SuggestedEditButtons=n.extend({onLoad:function(){var e=this;e.$id("@view_current").click(function(){return e.content_type?e.emitEvent(o.helpers.inlineEditorToggle(e.content_type,e.object_id)):e.parent().parent().toggleSuggestion(),!1}),e.content_type&&e.$id("@edit_suggestion").on("click",function(){return e.emitEvent(o.helpers.inlineEditorEdit(e.content_type,e.object_id)),!1})}})},"./view/tooltip.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./tooltip.js");t.TooltipComponent=n.extend({onLoad:function(){var e=this.$id("@tooltip");o.attach(e.parent(),this.options.contents,this.options),e.remove()}})},"./view/upload.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./w2.dialog.js").Dialog,s=i("./shared/jquery.js"),a=i("./shared/events/index.js"),r=i("./shared/browser.js"),d=i("./shared/upload.js"),l=i("./shared/facebook.js"),c=i("./shared/loading.js"),u=r.msie&&r.version<=9;t.UploadDialogContents=n.extend({onLoad:function(){var e=this;if(this.child("upload_form").success(this.uploadSuccess.bind(this)).failure(this.uploadFailure.bind(this)),u)return this.$id("@drop_zone").removeClass("drop_zone"),this.child("drag_and_drop_form").$id("@drag_and_drop_form").addClass("hidden"),!1;if(this.inlineUploadForm=this.child("upload_web"),this.inlineUploadForm&&(this.inlineUploadForm.setContentForTarget(this.$id("@iframe")),this.inlineUploadForm.setShowPhotoChoiceCallback(function(){e.disableDropZone(),e.onShowInlinePhotoChoice()})),this.handleEvent(a.Types.UPLOAD_DIALOG_DROPZONE,function(t){t.payload.enabled?e.enableDropZone():e.disableDropZone()}),this.child("drag_and_drop_form")){e.addBodyDragoverListener();var t=function(t){t.stopPropagation(),t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy",e.child("drag_and_drop_form").$id("@form_title").addClass("drag_and_hover"),e.$id("@drop_zone").addClass("drag_and_hover")},i=function(t){t.stopPropagation(),t.preventDefault(),e.child("drag_and_drop_form").$id("@form_title").removeClass("drag_and_hover"),e.$id("@drop_zone").removeClass("drag_and_hover")};this.child("drag_and_drop_form").setDropZone(this.$id("@drop_zone"),t,i),this.child("drag_and_drop_form").success(this.uploadSuccess.bind(this)).failure(this.uploadFailure.bind(this))}},disableDropZone:function(){this.$id("@drop_zone").addClass("disabled"),this.child("drag_and_drop_form").$id("@form_title").addClass("disabled")},enableDropZone:function(){this.$id("@drop_zone").removeClass("disabled"),this.child("drag_and_drop_form").$id("@form_title").remove("disabled")},onUnload:function(){this.removeBodyDragoverListener()},removeBodyDragoverListener:function(){s("document, body").off(".uploadDialog")},addBodyDragoverListener:function(){s("document, body").on({"dragenter.uploadDialog":function(e){e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer;t.effectAllowed=t.dropEffect="none"},"dragover.uploadDialog":function(e){e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer;t.effectAllowed=t.dropEffect="none"}})},uploadSuccess:function(){},uploadFailure:function(){s(".drop_zone").removeClass("drag_and_hover"),this.child("drag_and_drop_form").$id("@form_title").removeClass("drag_and_hover"),this.child("upload_form").hideSpinner()},onShowInlinePhotoChoice:function(){this.child("drag_and_drop_form").$id("@form_title").text(this.click_best_text),s("h3").removeClass("drag_and_hover"),this.$id("@drop_zone").removeClass("drag_and_hover")}}),t.UploadBaseForm=n.extend({onUpload:function(e){if(e&&!e.success)return e.message&&alert(e.message),void(this._failureCallback&&this._failureCallback(e));this._successCallback&&this._successCallback(e)},success:function(e){return this._successCallback=e,this},failure:function(e){return this._failureCallback=e,this},_uploadFiles:function(e){var t=this,i=this.$id("@form").get(0);if(u)return s(document).one("quora_file_upload",function(e,i){t.onUpload(i)}),void i.submit();var n={};s.each(i,function(e,t){"hidden"==t.type&&(n[t.name]=t.value)});var o=this.onUpload.bind(this);d.uploadData(n,e,o,o)}}),t.UploadFileForm=t.UploadBaseForm.extend({onLoad:function(){this._super.apply(this,arguments);var e=this;e.file_input=e.$id("@file"),e.file_button=e.$id("@file_button"),e.shouldShowUploadButton=!u&&e.file_button.length,e.$id("@upload_spinner").append(c.createDots()),this.handleEvent(a.Types.UPLOAD_DIALOG_LOADING_STATE,function(t){"loading"==t.payload.state?e.showSpinner():e.hideSpinner()}),e.file_input.on("change",function(){var t=e.$id("@file")[0].files;e.showSpinner(),e._uploadFiles(t)}),e.file_button.on("click",function(){e.file_input.click()}),e._showInput()},_showInput:function(){this.shouldShowUploadButton?(this.file_input.addClass("hidden"),this.file_button.removeClass("hidden")):(this.file_button.addClass("hidden"),this.file_input.removeClass("hidden"))},_hideInput:function(){this.file_button.addClass("hidden"),this.file_input.addClass("hidden")},showSpinner:function(){this._hideInput(),this.$id("@upload_spinner").removeClass("hidden"),this.emitEvent({type:a.Types.UPLOAD_DIALOG_DROPZONE,payload:{enabled:!1}})},hideSpinner:function(){this.$id("@upload_spinner").addClass("hidden"),this._showInput(),this.emitEvent({type:a.Types.UPLOAD_DIALOG_DROPZONE,payload:{enabled:!0}})}}),t.DragAndDropForm=t.UploadBaseForm.extend({setDropZone:function(e,t,i){this.dropZoneElement=e,this.dropZoneElement.on("dragover",t),this.dropZoneElement.on("dragleave",i),this.addDropEventListener()},addDropEventListener:function(){this.dropEventBound||this.dropZoneElement&&(this.onDropListener=this.onDrop.bind(this),this.dropZoneElement[0].addEventListener("drop",this.onDropListener,!1),this.dropEventBound=!0)},removeDropEventListener:function(){this.dropEventBound&&this.dropZoneElement&&(this.dropZoneElement[0].removeEventListener("drop",this.onDropListener),this.dropEventBound=!1)},onUnload:function(){this.removeDropEventListener()},onDrop:function(e){e&&e.dataTransfer&&(e.stopPropagation(),e.preventDefault(),this.emitEvent({type:a.Types.UPLOAD_DIALOG_LOADING_STATE,payload:{state:"loading"}}),this._uploadFiles(e.dataTransfer.files))}}),t.EditPhotoDialogContents=t.UploadDialogContents.extend({onLoad:function(){this._super.apply(this,arguments),this.$id("@from_facebook").on("click",this.fetchFacebookPicture.bind(this));var e=this;e.addBodyDragoverListener();var t=function(t){t.stopPropagation(),t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy",e.child("drag_and_drop_form").$id("@form_title").addClass("drag_and_hover"),e.$id("@drop_zone").addClass("drag_and_hover")},i=function(t){t.stopPropagation(),t.preventDefault(),e.child("drag_and_drop_form").$id("@form_title").removeClass("drag_and_hover"),e.$id("@drop_zone").removeClass("drag_and_hover")};return this.child("drag_and_drop_form").setDropZone(this.$id("@drop_zone"),t,i),this.child("drag_and_drop_form").success(this.uploadSuccess.bind(this)),this.child("upload_form").success(this.uploadSuccess.bind(this)),!1},fetchFacebookPicture:function(){if(this.fb_uid){var e=this;l.onInit(function(){var t="/"+e.fb_uid+"/picture?type=large&redirect=false";window.FB.api(t,function(t){var i=t.data;i&&i.url?(e.$id("@web_upload").addClass("hidden"),e.$id("@from_facebook").addClass("hidden"),e.child("upload_web").$id("@url").addClass("hidden").val(i.url),e.child("upload_web").$id("@download").click(),e.$id("@web_upload").removeClass("hidden")):(e.serverCall("log_fb_picture_error").send(),alert(e.no_fb_picture_error))})})}},uploadSuccess:function(e){e.need_thumb_selection?this.serverCall("upload").kwargs({target_id:this.target_id,target:this.target}).contentFor(this.$id("@iframe")).success(this.onShowInlinePhotoChoice.bind(this)).send():(o.dialogFor(this).close_(),window.location.reload())}})},"./view/user.js":function(e,t,i){var n=i("./shared/core/component.js").Component,o=i("./tooltip.js");t.TopAskerIcon=n.extend({onLoad:function(){o.attach(this.$id("@icon"),this.tooltip_text)}})},"./view/voter_list.js":function(e,t,i){var n=i("./shared/core/component.js").Component;t.VoterListModalLink=n.extend({onLoad:function(){var e=this;this.$id("@modal_link").click(function(t){t.preventDefault(),e.createModal("load_inner").kwargs({object_id:e.object_id}).show()})}})},"./visibility.js":function(e,t){t.getFrameElement=function(){try{var e=window.frameElement;return e.getAttribute("className"),e}catch(e){return null}}},"./w2.dialog.js":function(e,t,i){var n=i("./shared/core/component.js"),o=i("./shared/jquery.js"),s=i("./shared/Class.js").Class,a=i("./webnode2.js"),r=i("./settings.js").interface_strings,d=t.Dialog=s.extend({__init__:function(e,t){this.opener&&this.opener(e),d._dialogCounter+=1,this._dialogId=d._dialogCounter,this._dialogOuter="#__w2_dialog_outer_"+this._dialogId,this._dialogContainerId="#__w2_dialog_container_"+this._dialogId,this._cid="*dialog*_"+this._dialogId,d._instance=this,this._title=null,this._buttons=[],this._ok=null,this._cancel=null,this.opts=o.extend({closeOnEscape:!0,closeOnClickOut:!1,sortButtons:!0,focusOK:!1,dialogClass:"",verticalOffset:150,showXButton:!1,hideDialog:!1},t),this._opened=!1,this._containsComponent=!1,this._content=null,this.opts.html&&(this._content=this.opts.html)},opt:function(e,t){return this.opts[e]=t,this},ok:function(e,t){return"string"==typeof e&&(t=e,e=null),this._ok=e,!1!==t&&this.addButton(new c(this,t,null)),this},cancel:function(e,t,i){return"string"==typeof e&&(t=e,e=null),this._cancel=e,!1!==t&&(i?this.addButton(new h(this,t,null)):this.addButton(new u(this,t,null))),this},button:function(e,t,i){return this.addButton(new l(this,t,e,i))},title:function(e){if(this._opened)throw new Error("Can't set the title for a dialog once it has been opened.");return this._title=e,this},setTitle:function(e){e&&o("#__w2_dialog_title_"+this._dialogId).text(e)},addButton:function(e){if(this._opened)throw new Error("Can't add a button to a dialog once it has been opened");return this._buttons.push(e),this},opener:function(e){return this._opener=e,this},open_:function(){if(this._opened)return this;this._createDOMElements();var e=n._safeGetComponentByCID(this._cid);n._components[this._cid]=e;var t={};t[this._cid]="*ROOT*",n.addParents(t);var i=function(e){this.opts.closeOnEscape&&27==e.keyCode&&(this.cancel_(),e.stopPropagation())};if(o(document).on("keydown.__w2_dialog_"+this._dialogId,i.bind(this)),this.opts.closeOnClickOut){var s=this._dialogOuter;o(document).on("click",s,function(e){e.stopPropagation()});var a=function(e){this.cancel_(),e.stopPropagation()};o(document).on("click",":not("+s+","+s+" *)",a.bind(this))}return this._opened=!0,"function"==typeof this._open&&this._open.apply(this,arguments),this},cancel_:function(e){var t=!0;"function"==typeof this._cancel&&!1===this._cancel(this._callbackArg(e))&&(t=!1),t&&this.close_()},_callbackArg:function(e){var t=n._safeGetComponentByCID(this._cid),i={dialog:this,dialogWrapper:t,button:e};return this._containsComponent&&(i.dialogComponent=t.child("__dialog__")),i},ok_:function(e){var t=!0;return"function"==typeof this._ok&&!1===this._ok(this._callbackArg(e))&&(t=!1),t&&this.close_(),t},close_:function(){if(!this._opened)return this;o(document).off(".__w2_dialog_"+this._dialogId),a.forgetContents(o(this._dialogOuter)),n.unloadComponent(this._cid),o(this._dialogOuter).remove(),this._opened=!1,"function"==typeof this._close&&this._close.apply(this,arguments);var e=this._dialogOuter;return o(document).off("click",e),o(document).off("click",":not("+e+","+e+" *)"),this},open:function(e){return this._open=e,this},close:function(e){return this._close=e,this},html:function(e){return this._content=e,this.open_()},text:function(e){return this.html(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))},_createDOMElements:function(){var e=this.opts.width||470,t="dialog";this.opts.hideDialog&&(t="");var i,n=o("<div />").attr("id","__w2_dialog_outer_"+this._dialogId).addClass(t).addClass("w4").addClass(this.opts.dialogClass);this._title?(i=o("<div />").addClass("dialog_wrapper").append(o("<h2 />").attr("id","__w2_dialog_title_"+this._dialogId).addClass("dialog_header").addClass("dialog_frame").text(this._title)),this._content&&i.append(o("<div />").addClass("dialog_frame").addClass("dialog_contents").addClass("dialog_body").html(this._content))):i=o("<div />").addClass("dialog_component").addClass("dialog_wrapper").addClass("dialog_body").html(this._content),this.opts.showXButton&&i.append(o("<a />").attr("href","#").addClass("remove").click(this.cancel_.bind(this)).click(function(){return!1})),this._buttons.length&&i.append(o("<div />").addClass("dialog_frame").addClass("dialog_buttons").append(this._buttonsDOM()));var s=o(window).width(),a=o(window).scrollTop(),r=e,d=s-r,l=d/2;if(a=this.opts.verticalOffset,o(window).height()<600&&(a=o(window).scrollTop(),i.css("position","static")),i.css("width",e-10+"px"),n.append(i).css("top",a+"px").css("left",this.opts.left||l-15+"px").css("width",e+10+"px").appendTo(o(document.body)),this.opts.focusOK)for(var c=this._buttons.length-1;c;c--){var u=this._buttons[c];if("submit"==u._type){o("#__w2_dialog_button_"+this._dialogId+"_"+c).focus();break}}},checkDialogPosition:function(){var e=o(this._dialogOuter),t=e.offset().top,i=t+e.outerHeight(!0),n=o(window),s=n.scrollTop()+n.height();if(i>s){var a=this.opts.verticalOffset;n.scrollTop()+a+e.outerHeight(!0)>s&&(a=10),e.css("top",a+"px")}this._checkContentOverflow()},_checkContentOverflow:function(){var e=this,t=o(window),i=t.scrollTop()+t.height(),n=o(e._dialogContainerId),s=n.offset().top,a=n.outerHeight(!0),r=s+a;if(r>i){var d=r-i,l=a-d;n.css({"overflow-y":"scroll",height:l})}},_buttonDOM:function(e,t){e._index=t;var i=o("<a />").addClass("dialog_button").text(e._text).click(e.click_.bind(e)).click(function(){return!1}).attr("href","#").attr("id","__w2_dialog_button_"+this._dialogId+"_"+t);switch(e._type){case"submit":i.addClass("submit_button");break;case"link":case"cancel":i.addClass("cancel");break;default:i.addClass("action_button")}return i},_buttonsDOM:function(){var e=o("<div />");this.opts.sortButtons&&this._buttons.sort(function(e,t){return e._priority-t._priority});for(var t=this._buttons.length-1;t>=0;t--){var i=this._buttons[t];e.append(this._buttonDOM(i,t))}return e.addClass("dialog_buttons_contents")},_loadingHTML:function(){return'<div id="__w2_dialog_container_'+this._dialogId+'"></div>'},load:function(e,t){t=o.extend({args:[],kwargs:{},showImmediately:!0,showOnLoad:!0},t),this._content=this._loadingHTML(),this.open_();var i=function(){this._opener.__dialog__=this;var e=n._safeGetComponentByCID(this._cid);e.__opener__=this._opener,e.__dialog__=this,e.setDvar("__dialog__",this._cid),n._children[this._cid].__dialog__=n._allChildren[this._cid][0],this._containsComponent=!0,this.checkDialogPosition()},s=this._opener.serverCall(e);return s.args.apply(s,this.opts.args).kwargs(t.kwargs).success(i.bind(this)).contentFor(o(this._dialogContainerId),{parentCid:this._cid}),this.opts.error&&s.error.apply(this,this.opts.error),this.opts.except&&s.except.apply(this,this.opts.except),s.send(),this}});d.openerFor=function(e){var t=e.getDvar("__dialog__"),i=n._safeGetComponentByCID(t);return i&&i.__opener__},d.dialogFor=function(e){var t=e.getDvar("__dialog__"),i=n._safeGetComponentByCID(t);return i&&i.__dialog__},d._dialogCounter||(d._dialogCounter=0),d._instance||(d._instance=null);var l=s.extend({__init__:function(e,t,i,n){this._dialog=e,this._text=t,this._callback=i,this._opts=n||{},this._priority=50,this._type="action"},text:function(e){this._text=e},callback:function(e){this._callback=e},click_:function(){var e=!0;"function"==typeof this._callback&&!1===this._callback.call(this._dialog,this._dialog._callbackArg(this))&&(e=!1),e&&this._dialog.close_()}}),c=l.extend({__init__:function(e,t,i,n){var s=this;n=o.extend({style:"ok_button"},n),this._super(e,t||"OK",function(){var e=!0;return"function"==typeof i&&!1===i.call(s,s._dialog._callbackArg(s))&&(e=!1),e?s._dialog.ok_.call(s._dialog,s):e},n),this._priority=75,this._type="submit"}}),u=l.extend({__init__:function(e,t,i,n){var s=this;n=o.extend({style:"cancel_button"},n),this._super(e,t||r.cancel,function(){var e=!0;"function"==typeof i&&!1===i.call(s,s._dialog._callbackArg(s))&&(e=!1),e&&s._dialog.cancel_.call(s._dialog,s)},n),this._priority=25,this._type="link"}}),h=u.extend({__init__:function(e,t,i,n){this._super(e,t,i,n),this._type="action"}});t.createDialog=function(e,t){return new d(e,t)}},"./w2.errors.js":function(e,t,i){function n(e,t,i,n,s){if(s!==undefined){(new Date).getTime()-s>r&&(n=!1)}n&&o()}function o(e){d.Error&&d.Error.show(e)}function s(e){c++,setTimeout(function(){c--},e)}function a(){return 0!==c}var r=50,d=i("./webnode2.js"),l=i("./shared/jquery.js"),c=0;l(document).on("mouseup.w2errors mousedown.w2errors keyup.w2errors keydown.w2errors keypress.w2errors",function(){s(r)}),t.reportAjaxError=n,t.showError=o,t.canBeRelatedToUserAction=a,t.beginCanBeRelatedToUserActionBlock=s},"./w2.livenode.js":function(e,t,i){function n(e){var t,i={};return m("#"+e+" [w2cid]").each(function(e,n){t=n.getAttribute("w2cid"),i[t]=n}),i}function o(e){var t={};return m.each(e,function(e,i){if(!(i.domid in t)){var o=n(i.domid);t[i.domid]=o}}),t}function s(e){var t=g.interactionMode._changedComponents[e];return t&&t!=g.interactionMode._states.OFF}function a(e,t,i){var n=o(e);try{m.each(e,function(e,i){var o=n[i.domid];"update_data"!=i.type&&"insert_node"!=i.type&&m.each(o,function(e,n){if(s(e)){if(!t)throw console.log("throwing blocking_interaction_mode cid="+e+" on optype = "+i.type),console.log("affected node:"),console.log(o[e]),new Error("blocking_interaction_mode");console.log("forcing override on live update conflict with cid="+e+" on optype = "+i.type)}})})}catch(t){if("blocking_interaction_mode"==t.message)return console.log("Calling startBlocking from checkForConflicts"),g.interactionMode.startBlocking(),D.interactionDelayedLivedepOperations.push({data:e,textStatus:i}),!1;throw t}return!0}function r(e,t,i){j<32e3?($=setTimeout(d,j),j*=2):(clearTimeout($),$=null,_("failed_sync_livedeps"))}function d(){$&&(clearTimeout($),$=null);var e=[window.location.protocol,"//",window.location.host,"/check_livedeps/index?window_id=",S.windowId,"&random=",Math.random()].join("");m.ajax({type:"GET",url:e,error:r})}function l(e){g.interactionMode.resumeUpdates();var t=Math.random(),i={};return i._lm_transaction_id=t,i._lm_window_id=S.windowId,e===undefined?P[t]=1:P[t]={optimisticUpdate:e},h(),{transactionId:t,data:i}}function c(e,t){delete P[e],D.requiredVersion=Math.max(t,D.requiredVersion),h()}function u(e){D.currentVersion=e,f()}function h(){var e,t=0,i=0;for(e in P)i++,P[e].optimisticUpdate&&t++;D.pendingMutationCount=i,D.optimisticUpdateMutationCount=t,f()}function p(){T.stop()}function f(){var e=D.pendingMutationCount>D.optimisticUpdateMutationCount,t=D.currentVersion<D.requiredVersion;w.GlobalProxy.dispatch({type:w.Types.LIVENODE_LOADING_SPINNER,payload:{show:e||t}})}function _(e,t){if(t=t||{},console.log("Page requires reload ",e,t),!I){var i={error:"reportPageNeedsReload",uid:S.uid,window_id:S.windowId,url:window.location.href,error_type:e,debug_info:t};y.log("livenode_error",i,{scribeOnly:!0}),I=!0}S.isLoggedIn&&(g.Error&&g.Error.hide(),g.fallbackToPostReloadMode(),g.interactionMode.$id("@message").html("<a href='javascript:window.location.reload();'>"+L.please_refresh+"</a>"),console.log("Calling startBlocking from reportPageNeedsReload"),g.interactionMode.startBlocking())}var m=i("./shared/jquery.js"),g=i("./webnode2.js"),v=i("./shared/core/webnode.js"),w=i("./shared/events/index.js"),b=i("./shared/core/component.js"),y=i("./shared/log_sender.js"),C=i("./shared/browser.js"),k=i("./shared/dom.js"),S=i("./settings.js"),E=i("./shared/errors.js"),x=i("./shared/viewport.js"),T=i("./tchannel_up.js"),A=i("./shared/fx.js"),L=S.interface_strings,$=null,D={interactionDelayedLivedepOperations:[],pendingMutationCount:0,optimisticUpdateMutationCount:0,currentVersion:0,requiredVersion:0},j=16e3,I=!1,M={},O={};w.DocumentProxy.subscribe(w.Types.WEBNODE_BEFORE_REMOVE_COMPONENT_METADATA,function(e){var t=e.payload.cid;t&&(M[t]=b._hmacs[t],O[b._domids[t]]=b._hmacs[t])});var N=function(e,t,i){if(i=i||!1,"error"==e)return console.log("LiveNode error"),void _("livenode_data_error");if(!g.interactionMode||g.interactionMode.isBlocking())return D.interactionDelayedLivedepOperations.push({data:e,textStatus:t}),!1;if(!a(e,i,t))return!1;var n=!C.msie&&m(window).scrollTop()>0;n&&m("div.feed_item_inner").each(function(){x.isElementInViewport(this)&&k.anchor(m(this))}),m.each(e,function(e,t){var i,o,s;switch(m(document).trigger("livenode_op_start",t),t.type){case"set_node":if(t.domid in g._ignoreDomids)break;var a=m("#"+t.domid);if(!a.length)return void _("set_node_missing",{hmac:b._hmacs[t.cid],op_domid:t.domid,op_cid:t.cid});var r=t.transition;if(s=b.getComponentFromElement(a.get(0)),s&&s.force_transition&&(r=s.force_transition),!("cid"in t))return void E.logJsError("w2.livenode","Expected cid in op got: "+JSON.stringify(t));switch(b.unloadComponent(t.cid),v.setContent(a,t.content),r.type){case"none":break;case"fade_in":A.fadeIn(a,2e3)}break;case"insert_node":if(t.domid in g._ignoreDomids)break;if(!(i=document.getElementById(t.domid)))return void _("insert_node_missing",{parent_hmac:b._hmacs[t.parent_cid],op_domid:t.domid,op_parent_cid:t.parent_cid});var d=document.createElement("DIV");if(v.setContentHTML(d,t.content),1!=d.childNodes.length)return console.log("error: append must give a single node"),void _("invalid_append");var l=d.childNodes[0],c=l.id;if(l.style.display="none",i.childNodes.length==t.position?i.appendChild(l):i.insertBefore(l,i.childNodes[t.position]),v.evaluateContentJS(t.content),o=b._components[t.parent_cid],o&&o.onInsertNode&&o.onInsertNode(t,c),"none"==t.transition.type)break;if("scroll"==t.transition.type){l.style.display="",l.scrollIntoView(!1);break}if(n||"fade_in"==t.transition.type){m("#"+c).fadeIn(500);break}l.style.display="none",m("#"+c).fadeIn(1e3);break;case"delete_node":if(t.domid in g._ignoreDomids)break;if(!(i=document.getElementById(t.domid)))return void _("delete_node_missing",{op_domid:t.domid,op_parent_cid:t.parent_cid});if(!b._parents[t.parent_cid])return void _("delete_node_missing_component",{op_parent_cid:t.parent_cid});var u=i.childNodes[t.position];if(u.id!=t.child_domid)return void _("delete_node_wrong_child",{parent_hmac:b._hmacs[t.parent_cid],node_id:u.id,op_child_domid:t.child_domid});o=b._components[t.parent_cid],o&&o.onDeleteNode&&o.onDeleteNode(t,u.id),b.unloadComponent(t.child_cid),m("#"+u.id).remove();break;case"update_data":if(t.cid in g._ignoreCids)break;if(!b._parents[t.cid])return void _("update_data_missing_component",{op_cid:t.cid,op_parent_cid:t.parent_cid});s=b._components[t.cid],s&&s.onUpdate&&s.onUpdate(t.data);break;case"error":return console.log("livedep error: "+t.error),void _("livenode_error",{op_error:t.error});default:_("invalid_op_type",{op_type:t.type})}}),m(document).trigger("livenode_finish_operations")},P={};t.reportPageRegainedConnection=function(){g.Error.hide()},t.reportPageLostConnection=function(){g.Error.show(L.trying_to_regain)},t.syncLivedeps=d,t.startMutation=l,t.onLivedepOperations=N,t.reportPageNeedsReload=_,t.setCurrentVersion=u,t.mutationDoneAfterVersion=c,t.stopLiveUpdates=p,t.state=D},"./w2.modal.js":function(e,t,i){var n=i("./shared/core/component.js"),o=i("./shared/jquery.js"),s=i("./shared/Class.js").Class,a=i("./webnode2.js"),r=i("./video.js"),d=i("./shared/dom.js"),l=i("./shared/client_log.js"),c=i("./shared/viewport.js"),u=i("./shared/core/component.js").getAllDvars,h=i("./shared/debounce.js").debounce,p=i("./shared/keyboard_event_handler.js"),f=[],_=function(e){f.push(e)},m=function(e){f=[]},g=function(){return f[f.length-1]},v=0,w=function(){return v++},b=1e3,y=t.ModalBase=s.extend({__init__:function(e,t){this.opener=e,this.opts=o.extend({args:[],kwargs:{},closeOnEscape:!0,closeOnBackgroundClick:!0,closeOnScroll:!1,customOverlayClass:null,errorCallback:null},t),this._modalId=w(),this._cid="*modal*_"+this._modalId,this.$container=o("#__w2_modal_container_"),this._initModal(),this._fetchStarted=!1,this._fetchCompleted=!1,this._fetchStartTime=0,this._isOpen=!1,this._firstOpenTime=0},_initModal:function(){var e=document.createElement("div");e.id="#__w2_modal_overlay_"+this._modalId,e.className="modal_overlay hidden",this.opts.customOverlayClass&&e.classList.add(this.opts.customOverlayClass),this.$container.append(e),this.$overlay=o(e);var t=document.createElement("div");t.id="#__w2_modal_wrapper_"+this._modalId,t.className="modal_wrapper",t.tabIndex=-1,e.appendChild(t),this.$contentWrapper=o(t)},_bindHandlers:function(){this.opts.closeOnEscape&&this.bindKeyboardHotkeys(),this.opts.closeOnBackgroundClick&&this.bindBackgroundClickDismissHandler()},_unbindHandlers:function(){this.opts.closeOnEscape&&p.remove(this.escKeyHandler),this.opts.closeOnBackgroundClick&&this.$overlay.off("click.modalOverlay"),this.opts.closeOnScroll&&this.unbindCloseOnScroll()},_open:function(){this._isOpen=!0,_(this),this._bindHandlers(),c.setPageScroll(!1);var e=n.getLiveParent(this.opener.cid),t=this.$contentWrapper.attr("id");l.associateParentChildDomIds(t,e),this.$overlay.removeClass("hidden"),this.$contentWrapper.focus(),this._fetchCompleted&&this.onContentVisible()},fetch:function(e){if(!this._fetchStarted){this.$contentWrapper.addClass("loading_overlay"),this._fetchStarted=!0,this._fetchStartTime=Date.now();var t=this,i=this.opener.serverCall(e);i.args.apply(i,t.opts.args).kwargs(t.opts.kwargs).error(function(){t._fetchStarted=!1,n.unloadComponent(t._cid),t.close()}).success(function(){t.onFetchSuccess()}).sendJsData(t.opts.sendJsData).contentFor(this.$contentWrapper,{parentCid:this._cid}),this.opts.errorCallback&&i.error(this.opts.errorCallback),i.send()}},onFetchSuccess:function(){this.opener.__modal__=this;var e=n._safeGetComponentByCID(this._cid);e.__opener__=this.opener,e.__modal__=this,n._components[this._cid]=e;var t={};t[this._cid]="*ROOT*",n.addParents(t),e.setDvar("__modal__",this._cid);var i=n._allChildren[this._cid][0],o=n._safeGetComponentByCID(i),s=u(this.opener);delete s.__modal__,o.__dvars__=s,this.$contentWrapper.height()>b&&this.$contentWrapper.addClass("tall"),this.$contentWrapper.removeClass("loading_overlay"),this._fetchCompleted=!0,this._isOpen&&this.onContentVisible()},onContentVisible:function(){this.opts.closeOnScroll&&this.bindCloseOnScroll()},load:function(e){return this._open(),this._fetchStarted||this.fetch(e),0===this._firstOpenTime&&(this._firstOpenTime=Date.now()),this},_teardownContent:function(){},close:function(e){if(this._isOpen){this._isOpen=!1,m(this),r.stopAllVideos(this.$contentWrapper);var t=n.getLiveParent(this.opener.cid),i=this.$contentWrapper.attr("id");l.removeParentChildAssociation(i,t);var o=this,s=function(){o.$overlay.addClass("hidden"),g()||(o.opts.closeOnScroll&&o._reenableScrollAfterClose?o._reenableScrollAfterClose():c.setPageScroll(!0)),o._unbindHandlers(),o._teardownContent()};e?s():d.addAnimationClass(o.$overlay,"closing",s)}},bindCloseButton:function(){var e=this;e.$closeButton.on("click",function(t){t.stopPropagation(),e._isOpen&&e.close()})},_closeOnScrollThreshold:function(){var e=this.$contentWrapper.outerHeight();return Math.max(e-.33*window.innerHeight,2*e/3)},bindCloseOnScroll:function(){var e=this;e._setupScrollClose||(e._setupScrollClose=h(function(){e.$contentWrapper.css("margin-bottom",window.innerHeight);var t=e._closeOnScrollThreshold();e.$overlay.scrollTop()>t&&e.$overlay.scrollTop(t)},50)),e._checkScrollClose||(e._checkScrollClose=h(function(){e.$overlay.scrollTop()>e._closeOnScrollThreshold()&&e.close(!0)},50)),e._reenableScrollAfterClose||(e._reenableScrollAfterClose=h(function(){g()||(c.setPageScroll(!0),o(window).off("wheel",e._reenableScrollAfterClose))},100,{maxWait:1e3})),e.$overlay.scrollTop(0),e._setupScrollClose(),o(window).on("resize",e._setupScrollClose),e.$overlay.on("scroll",e._checkScrollClose),o(window).on("wheel",e._reenableScrollAfterClose)},unbindCloseOnScroll:function(){o(window).off("resize",this._setupScrollClose),this.$overlay.off("scroll",this._checkScrollClose)},bindKeyboardHotkeys:function(){var e=this;e.escKeyHandler=function(t){27==t.keyCode&&e._isOpen&&e===g()&&e.close()},p.push(e.escKeyHandler)},bindBackgroundClickDismissHandler:function(){var e=this;e.$overlay.on("mousedown.modalOverlay",function(t){t.target==this&&!e._isScrollBarClicked(t)&&e._isOpen&&(t.stopPropagation(),e.close())})},_isScrollBarClicked:function(e){var t=d.getScrollbarWidth();return window.innerWidth-e.clientX<t}}),C=t.Modal=y.extend({_initModal:function(){this.$contentWrapper=o("#__w2_modal_wrapper_"),this.$overlay=o("#__w2_modal_overlay_"),this.$closeButton=o("#__w2_modal_close_")},_teardownContent:function(){a.forgetContents(this.$contentWrapper),n.unloadComponent(this._cid),this.$contentWrapper.html(""),this.$overlay.off()}});t.ModalWithCallBacks=C.extend({_onCloseCallBack:null,_onSubmitCallBack:null,onCloseCallBack:function(e){return this._onCloseCallBack=e,this},executeOnCloseCallBack:function(){this._onCloseCallBack&&this._onCloseCallBack()},onSubmitCallBack:function(e){return this._onSubmitCallBack=e,this},executeOnSubmitCallBack:function(){this._onSubmitCallBack&&this._onSubmitCallBack.apply(null,arguments)}}),C.openerFor=function(e){var t=e.getDvar("__modal__"),i=n._safeGetComponentByCID(t);return i&&i.__opener__},C.modalFor=function(e){var t=e.getDvar("__modal__"),i=n._safeGetComponentByCID(t),o=i&&i.__modal__;return o||(o=g()),o},C.getCurrentModal=g},"./webnode2.js":function(e,t,i){var n=i("./shared/errors.js"),o=i("./settings.js"),s=i("./shared/core/component.js"),a=t._liveDepInfo={},r=t._ignoreDomids={},d=t._ignoreCids={};t.addLiveDepInfo=function(e){for(var t=Object.keys(e),i=t.length,n=0;n<i;++n){var o=t[n];a[o]=e[o]}},t.interactionMode=null,t.Error=null,t.assertUnloaded=function(e){e in s._unloaded||n.logJsError("webnode2","Cid was not unloaded: "+e)},t.fallbackToPostReloadMode=function(){o.pageMode="post_reload"},t.forgetContents=function(e){e.find("[id]").map(function(){var e=s._domidToCid[this.id];e&&(r[this.id]=1,d[e]=1)})}}});